{"version":3,"file":"static/js/main.325191e0.js","mappings":"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","sources":["app/(tabs)/settings.tsx","app|sync|/^(?:/.//)(?%21(?:(?:(?:.*/+api)%7C(?:/+middleware)%7C(?:/+(html%7Cnative-intent))))/.[tj]sx?$).*(?:/.android%7C/.ios%7C/.native)?/.[tj]sx?$","types/dog-profile.ts","app/(tabs)/record.web.tsx","app/(tabs)/record.styles.ts","app/trails.tsx","context/AccountContext.tsx","app/(tabs)/explore.styles.ts","context/AuthContext.tsx","app/trail/[id].tsx","app/signup.tsx","app/login.tsx","app/(tabs)/settings.styles.ts","web/reanimated-shim.js","web/nanoid-non-secure.js","app/(tabs)/explore.tsx","app/onboarding/dog-basics.tsx","app/(tabs)/record.tsx","components/AnimatedTabBar.styles.ts","components/AnimatedTabBar.tsx","app/(tabs)/_layout.tsx","app/index.tsx","app/demo.tsx","app/auth.styles.ts","lib/api.ts","app/onboarding/dog-personality.tsx","context/TrailsContext.tsx","components/LottieLoader.tsx","app/_layout.tsx","components/TrailMap.styles.ts","components/TrailMap.web.tsx","lib/firebase.ts","app/onboarding/dog-basics.styles.ts","app/(tabs)/explore.web.tsx","app/(tabs)/profile.tsx","web/shims/rn-firebase-shim.js","app/onboarding/dog-personality.styles.ts","web/shims/lottie-shim.js","app/(tabs)/profile.styles.ts","app/trail/[id].styles.ts","app/+not-found.tsx","utils/distance.ts","constants/colors.ts","components/TrailMapPreview.styles.ts","components/TrailMapPreview.web.tsx","context/DogsContext.tsx","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/ensure chunk","webpack/runtime/get javascript chunk filename","webpack/runtime/get mini-css chunk filename","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/load script","webpack/runtime/make namespace object","webpack/runtime/node module decorator","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import React from 'react';\nimport { View, Text, ScrollView, TouchableOpacity, Alert } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { ArrowLeft, ChevronRight } from 'lucide-react-native';\nimport { useRouter } from 'expo-router';\nimport styles from './settings.styles';\nimport theme from '@/constants/colors';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function SettingsScreen() {\n  const insets = useSafeAreaInsets();\n  const router = useRouter();\n  const auth = useAuth();\n\n  const handleRow = (label: string, path?: string) => {\n    if (path) {\n      router.push(path as any);\n      return;\n    }\n    Alert.alert(label);\n  };\n\n  const handleLogout = async () => {\n    try {\n      if (auth?.signOut) {\n        await auth.signOut();\n      }\n    } catch (err) {\n      console.error('Logout failed', err);\n      Alert.alert('Error', 'Failed to logout');\n    }\n  };\n\n  return (\n    <View style={[styles.container, { paddingTop: insets.top }]}>\n      <View style={styles.header}>\n        <TouchableOpacity style={styles.backButton} onPress={() => router.push('/profile')}>\n          <ArrowLeft size={20} color={theme.accentPrimary} />\n        </TouchableOpacity>\n        <Text style={styles.title}>Settings</Text>\n        <View style={{ width: 40 }} />\n      </View>\n\n      <ScrollView contentContainerStyle={styles.content}>\n        <View style={styles.sectionCard}>\n          <Text style={styles.sectionTitle}>Your Account</Text>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Account Information', '/settings/account')}>\n            <Text style={styles.rowText}>Account Information</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Privacy and Safety', '/settings/privacy')}>\n            <Text style={styles.rowText}>Privacy and Safety</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Change your password', '/settings/password')}>\n            <Text style={styles.rowText}>Change your password</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.sectionCard}>\n          <Text style={styles.sectionTitle}>Dog Profile</Text>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Dog Information', '/settings/dog-info')}>\n            <Text style={styles.rowText}>Dog Information</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Edit Tags', '/settings/dog-tags')}>\n            <Text style={styles.rowText}>Edit Tags</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n        </View>\n\n        <TouchableOpacity style={styles.logoutCard} onPress={handleLogout}>\n          <Text style={styles.logoutText}>Logout</Text>\n          <ChevronRight size={18} color={theme.accentPrimary} />\n        </TouchableOpacity>\n      </ScrollView>\n    </View>\n  );\n}\n","var map = {\n\t\"./(tabs)/_layout.tsx\": 5210,\n\t\"./(tabs)/explore.styles.ts\": 2699,\n\t\"./(tabs)/explore.tsx\": 4509,\n\t\"./(tabs)/explore.web.tsx\": 8389,\n\t\"./(tabs)/profile.styles.ts\": 8745,\n\t\"./(tabs)/profile.tsx\": 8415,\n\t\"./(tabs)/record.styles.ts\": 1095,\n\t\"./(tabs)/record.tsx\": 5209,\n\t\"./(tabs)/record.web.tsx\": 745,\n\t\"./(tabs)/settings.styles.ts\": 4171,\n\t\"./(tabs)/settings.tsx\": 282,\n\t\"./+not-found.tsx\": 8973,\n\t\"./_layout.tsx\": 6848,\n\t\"./auth.styles.ts\": 5632,\n\t\"./demo.tsx\": 5625,\n\t\"./index.tsx\": 5250,\n\t\"./login.tsx\": 4101,\n\t\"./onboarding/dog-basics.styles.ts\": 7924,\n\t\"./onboarding/dog-basics.tsx\": 4674,\n\t\"./onboarding/dog-personality.styles.ts\": 8625,\n\t\"./onboarding/dog-personality.tsx\": 6183,\n\t\"./signup.tsx\": 3764,\n\t\"./trail/[id].styles.ts\": 8776,\n\t\"./trail/[id].tsx\": 3686,\n\t\"./trails.tsx\": 2399\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 587;","export type DogSize = 'XS' | 'S' | 'M' | 'L' | 'XL';\n\nexport const DOG_SIZES: DogSize[] = ['XS', 'S', 'M', 'L', 'XL'];\n\nexport const PERSONALITY_TAGS = [\n  'Friendly',\n  'Shy',\n  'Energetic',\n  'Calm',\n  'Social',\n  'Independent',\n  'Playful',\n  'Curious',\n  'Barky',\n  'Reactive',\n  'Easily Triggered',\n  'Gentle',\n  'Protective',\n  'Anxious',\n  'Confident',\n  'Food-Motivated',\n  'Quiet',\n  'Adventurous',\n  'Lazy',\n  'Affectionate',\n  'Dominant',\n  'Submissive',\n  'Fearful',\n  'Obedient',\n  'Stubborn',\n  'High-Prey-Drive',\n  'Leash-Pulling',\n  'Good-With-Dogs',\n  'Good-With-Kids',\n] as const;\n\nexport type PersonalityTag = typeof PERSONALITY_TAGS[number];\n\nexport type RecallReliability = 'Poor' | 'Fair' | 'Good' | 'Excellent';\n\nexport const RECALL_RELIABILITY_OPTIONS: RecallReliability[] = ['Poor', 'Fair', 'Good', 'Excellent'];\n\nexport interface Vaccine {\n  name: string;\n  date: string;\n}\n\nexport interface DogProfile {\n  id?: string;\n  user_id: string;\n  name: string;\n  nickname?: string;\n  size: DogSize;\n  age: number;\n  image?: string;\n  personality_tags: string[];\n  vaccines?: Vaccine[];\n  recall_reliability?: RecallReliability;\n  created_at?: string;\n  updated_at?: string;\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Text, View, StyleSheet, TouchableOpacity, Alert, ActivityIndicator, Animated, PanResponder, Dimensions, TextInput, ScrollView, Modal } from 'react-native';\n\nimport TrailMap from '@/components/TrailMap';\n\nimport { useLocalSearchParams, useRouter } from 'expo-router';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport { Square, Play, MapPin, Watch, Bell, ChevronUp, Play as PlayIcon, Square as SquareIcon, ChevronDown, Navigation } from 'lucide-react-native';\nimport styles from './record.styles';\nimport theme from '@/constants/colors';\nimport { useTrails } from '@/context/TrailsContext';\nimport { useAuth } from '@/context/AuthContext';\n\nimport { Coordinate, Trail } from '@/types/trail';\n\nimport { formatDistance, calculateTotalDistance, formatDuration } from '@/utils/distance';\n\nconst LOCATION_KEY = 'recording_coordinates';\nconst START_TIME_KEY = 'recording_start_time';\nconst MAX_ELEV_KEY = 'recording_max_elevation';\nconst MAX_SPEED_KEY = 'recording_max_speed';\nconst LAST_UPDATE_KEY = 'recording_last_update';\n\nexport default function RecordScreenWeb() {\n  const { saveTrail, getTrailById } = useTrails();\n  const { user } = useAuth();\n  const params = useLocalSearchParams();\n  const router = useRouter();\n  const trailId = typeof params.trailId === 'string' ? params.trailId : undefined;\n  const existingTrail = trailId ? getTrailById(trailId) : undefined;\n  const mapRef = useRef<any>(null);\n\n  const [isRecording, setIsRecording] = useState<boolean>(false);\n  const [coordinates, setCoordinates] = useState<Coordinate[]>([]);\n  const [currentLocation, setCurrentLocation] = useState<Coordinate | null>(null);\n  const [duration, setDuration] = useState<number>(0);\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\n  const [isLoadingPermission, setIsLoadingPermission] = useState<boolean>(true);\n  const [startLocation, setStartLocation] = useState<{ city?: string; country?: string } | null>(null);\n  const geocodeCache = useRef<Map<string, { city?: string; country?: string }>>(new Map());\n\n  const watchIdRef = useRef<number | null>(null);\n  const timerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const wakeLockRef = useRef<any>(null);\n\n  const bottomSheetHeight = Dimensions.get('window').height * 0.5;\n  const collapsedHeight = 280;\n  const navbarHeight = 92;\n  const bottomSheetAnim = useRef(new Animated.Value(collapsedHeight)).current;\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n  const [elevation, setElevation] = useState<number>(0);\n  const [maxElevation, setMaxElevation] = useState<number>(0);\n  const [pace, setPace] = useState<string>('0:00');\n  const [speed, setSpeed] = useState<number>(0);\n  const [maxSpeed, setMaxSpeed] = useState<number>(0);\n  const [showSaveModal, setShowSaveModal] = useState<boolean>(false);\n  const [draftTrail, setDraftTrail] = useState<Partial<Trail> | null>(null);\n  const [formName, setFormName] = useState<string>('');\n  const [formDescription, setFormDescription] = useState<string>('');\n  const [formPhoto, setFormPhoto] = useState<string | undefined>(undefined);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const [formPhotoFile, setFormPhotoFile] = useState<File | undefined>(undefined);\n\n  useEffect(() => {\n    // On web, check permissions via the Permissions API when available\n    (async () => {\n      try {\n        if ((navigator as any).permissions && (navigator as any).permissions.query) {\n          const status = await (navigator as any).permissions.query({ name: 'geolocation' });\n          setHasPermission(status.state === 'granted');\n          status.onchange = () => setHasPermission(status.state === 'granted');\n        } else {\n          // Fallback: attempt to get current position to trigger prompt\n          try {\n            await new Promise((resolve, reject) => {\n              navigator.geolocation.getCurrentPosition(() => resolve(true), () => resolve(false), { timeout: 5000 });\n            });\n            setHasPermission(true);\n          } catch (e) {\n            setHasPermission(false);\n          }\n        }\n      } catch (err) {\n        console.warn('Permission check failed', err);\n        setHasPermission(null);\n      } finally {\n        setIsLoadingPermission(false);\n        loadRecordingState();\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const loadRecordingState = async () => {\n    try {\n      const coordsStr = await AsyncStorage.getItem(LOCATION_KEY);\n      if (coordsStr) {\n        const coords = JSON.parse(coordsStr);\n        setCoordinates(coords);\n      }\n\n      const maxElevationStr = await AsyncStorage.getItem(MAX_ELEV_KEY);\n      if (maxElevationStr) setMaxElevation(parseFloat(maxElevationStr));\n\n      const maxSpeedStr = await AsyncStorage.getItem(MAX_SPEED_KEY);\n      if (maxSpeedStr) setMaxSpeed(parseFloat(maxSpeedStr));\n\n      const startTimeStr = await AsyncStorage.getItem(START_TIME_KEY);\n      if (startTimeStr) {\n        const elapsed = Math.floor((Date.now() - parseInt(startTimeStr)) / 1000);\n        setDuration(elapsed);\n        setIsRecording(true);\n        startTimer();\n      }\n    } catch (error) {\n      console.error('Error loading recording state:', error);\n    }\n  };\n\n  const startTimer = () => {\n    if (timerRef.current) return;\n    timerRef.current = setInterval(async () => {\n      try {\n        const startTimeStr = await AsyncStorage.getItem(START_TIME_KEY);\n        if (startTimeStr) {\n          const elapsed = Math.floor((Date.now() - parseInt(startTimeStr)) / 1000);\n          setDuration(elapsed);\n        }\n      } catch (e) {}\n    }, 1000);\n  };\n\n  const stopTimer = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  const startRecording = async () => {\n    console.log('Starting web recording...');\n    setIsRecording(true);\n    setCoordinates([]);\n    setDuration(0);\n    setMaxElevation(0);\n    setMaxSpeed(0);\n\n    try {\n      const startTime = Date.now();\n      await AsyncStorage.setItem(START_TIME_KEY, startTime.toString());\n      await AsyncStorage.removeItem(LOCATION_KEY);\n      await AsyncStorage.removeItem(MAX_ELEV_KEY);\n      await AsyncStorage.removeItem(MAX_SPEED_KEY);\n      await AsyncStorage.removeItem(LAST_UPDATE_KEY);\n\n      // get initial position\n      navigator.geolocation.getCurrentPosition(async (pos) => {\n        const coord = { latitude: pos.coords.latitude, longitude: pos.coords.longitude };\n        await AsyncStorage.setItem(LOCATION_KEY, JSON.stringify([coord]));\n        setCoordinates([coord]);\n        setCurrentLocation(coord);\n      }, (err) => {\n        console.warn('Initial geolocation failed', err);\n      }, { enableHighAccuracy: true, timeout: 10000 });\n\n      // start watch\n      const id = navigator.geolocation.watchPosition(async (pos) => {\n        const coord = { latitude: pos.coords.latitude, longitude: pos.coords.longitude };\n        setCurrentLocation(coord);\n        setCoordinates(prev => {\n          const newCoords = [...prev, coord];\n          AsyncStorage.setItem(LOCATION_KEY, JSON.stringify(newCoords)).catch(() => {});\n          return newCoords;\n        });\n\n        await AsyncStorage.setItem(LAST_UPDATE_KEY, Date.now().toString());\n      }, (err) => {\n        console.error('watchPosition error', err);\n      }, { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 });\n\n      watchIdRef.current = id as unknown as number;\n\n      // request wake lock (Chromium) to keep screen on\n      try {\n        // @ts-ignore\n        if ((navigator as any).wakeLock && (navigator as any).wakeLock.request) {\n          // @ts-ignore\n          wakeLockRef.current = await (navigator as any).wakeLock.request('screen');\n        }\n      } catch (e) {\n        console.warn('Wake lock request failed', e);\n      }\n\n      startTimer();\n    } catch (error: any) {\n      console.error('Recording error:', error);\n      Alert.alert('Error', error?.message || 'Failed to start recording');\n      setIsRecording(false);\n    }\n  };\n\n  const stopRecording = async () => {\n    console.log('Stopping web recording...');\n    try {\n      if (watchIdRef.current !== null) {\n        navigator.geolocation.clearWatch(watchIdRef.current);\n        watchIdRef.current = null;\n      }\n\n      if (wakeLockRef.current && wakeLockRef.current.release) {\n        await wakeLockRef.current.release();\n        wakeLockRef.current = null;\n      }\n\n      stopTimer();\n\n      const coordsStr = await AsyncStorage.getItem(LOCATION_KEY);\n      const finalCoords = coordsStr ? JSON.parse(coordsStr) : coordinates;\n\n      const maxElevationStr = await AsyncStorage.getItem(MAX_ELEV_KEY);\n      const finalMaxElevation = maxElevationStr ? parseFloat(maxElevationStr) : maxElevation;\n\n      const maxSpeedStr = await AsyncStorage.getItem(MAX_SPEED_KEY);\n      const finalMaxSpeed = maxSpeedStr ? parseFloat(maxSpeedStr) : maxSpeed;\n\n      const startTimeStr = await AsyncStorage.getItem(START_TIME_KEY);\n      const finalDuration = startTimeStr ? Math.floor((Date.now() - parseInt(startTimeStr)) / 1000) : duration;\n\n      if (!finalCoords || finalCoords.length < 2) {\n        Alert.alert('No Trail Data', 'Not enough data to save this trail. Try walking a bit more!');\n        setIsRecording(false);\n        setCoordinates([]);\n        setDuration(0);\n        await AsyncStorage.removeItem(LOCATION_KEY);\n        await AsyncStorage.removeItem(MAX_ELEV_KEY);\n        await AsyncStorage.removeItem(MAX_SPEED_KEY);\n        await AsyncStorage.removeItem(START_TIME_KEY);\n        await AsyncStorage.removeItem(LAST_UPDATE_KEY);\n        return;\n      }\n\n      const distance = calculateTotalDistance(finalCoords);\n\n      const distanceKm = distance / 1000;\n      const durationMin = finalDuration / 60;\n      let finalPace = '0:00';\n      if (distanceKm > 0) {\n        const paceMinPerKm = durationMin / distanceKm;\n        const minutes = Math.floor(paceMinPerKm);\n        const seconds = Math.round((paceMinPerKm - minutes) * 60);\n        finalPace = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n      }\n\n      const trail: Trail = {\n        id: Date.now().toString(),\n        date: Date.now(),\n        distance,\n        duration: finalDuration,\n        coordinates: finalCoords,\n        city: startLocation?.city,\n        country: startLocation?.country,\n        pace: finalPace,\n        speed: finalMaxSpeed,\n        maxElevation: finalMaxElevation,\n      };\n\n      // open save modal with draft data instead of saving immediately\n      setDraftTrail(trail);\n      setFormName(trail.name || '');\n      setFormDescription((trail as any).description || '');\n      setFormPhoto((trail as any).photo || undefined);\n      setShowSaveModal(true);\n    } catch (error) {\n      console.error('Stop error:', error);\n      Alert.alert('Error', 'Failed to stop recording');\n      setIsRecording(false);\n    }\n  };\n\n  const submitSave = async () => {\n    if (!draftTrail) return;\n    const toSave: Trail = {\n      ...(draftTrail as Trail),\n      name: formName || (draftTrail as any).name || 'Untitled Trail',\n      description: formDescription,\n      photo: formPhotoFile || formPhoto,\n    };\n\n    try {\n      await saveTrail(toSave);\n      setShowSaveModal(false);\n      setDraftTrail(null);\n      setIsRecording(false);\n      setCoordinates([]);\n      setDuration(0);\n      setStartLocation(null);\n      setElevation(0);\n      setMaxElevation(0);\n      setPace('0:00');\n      setSpeed(0);\n      setMaxSpeed(0);\n\n      await AsyncStorage.removeItem(LOCATION_KEY);\n      await AsyncStorage.removeItem(MAX_ELEV_KEY);\n      await AsyncStorage.removeItem(MAX_SPEED_KEY);\n      await AsyncStorage.removeItem(START_TIME_KEY);\n      await AsyncStorage.removeItem(LAST_UPDATE_KEY);\n\n      // Redirect to profile tab after saving\n      router.push('/(tabs)/profile');\n    } catch (err) {\n      console.error('Save failed', err);\n      Alert.alert('Error', 'Failed to save trail');\n    }\n  };\n\n  const cancelSave = () => {\n    setShowSaveModal(false);\n    setDraftTrail(null);\n  };\n\n  useEffect(() => {\n    if (duration > 0) {\n      const distance = calculateTotalDistance(coordinates);\n      const distanceKm = distance / 1000;\n      const durationMin = duration / 60;\n      if (distanceKm > 0) {\n        const paceMinPerKm = durationMin / distanceKm;\n        const minutes = Math.floor(paceMinPerKm);\n        const seconds = Math.round((paceMinPerKm - minutes) * 60);\n        setPace(`${minutes}:${seconds.toString().padStart(2, '0')}`);\n      }\n    }\n  }, [duration, coordinates]);\n\n  const initialHeight = useRef<number>(0);\n\n  const panResponder = useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: (_, gestureState) => Math.abs(gestureState.dy) > 5,\n      onPanResponderGrant: () => { initialHeight.current = (bottomSheetAnim as any)._value; },\n      onPanResponderMove: (_, gestureState) => {\n        const newValue = initialHeight.current - gestureState.dy;\n        if (newValue >= collapsedHeight && newValue <= bottomSheetHeight) {\n          bottomSheetAnim.setValue(newValue);\n        }\n      },\n      onPanResponderRelease: (_, gestureState) => {\n        const threshold = (bottomSheetHeight + collapsedHeight) / 2;\n        const currentValue = (bottomSheetAnim as any)._value;\n        if (gestureState.dy < -50) expandBottomSheet();\n        else if (gestureState.dy > 50) collapseBottomSheet();\n        else if (currentValue > threshold) expandBottomSheet();\n        else collapseBottomSheet();\n      },\n    })\n  ).current;\n\n  const expandBottomSheet = () => {\n    setIsExpanded(true);\n    Animated.spring(bottomSheetAnim, { toValue: bottomSheetHeight, useNativeDriver: false, tension: 50, friction: 8 }).start();\n  };\n\n  const collapseBottomSheet = () => {\n    setIsExpanded(false);\n    Animated.spring(bottomSheetAnim, { toValue: collapsedHeight, useNativeDriver: false, tension: 50, friction: 8 }).start();\n  };\n\n  const toggleBottomSheet = () => { if (isExpanded) collapseBottomSheet(); else expandBottomSheet(); };\n\n  if (isLoadingPermission) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n        <Text style={styles.loadingText}>Checking permissions...</Text>\n      </View>\n    );\n  }\n\n  if (!hasPermission) {\n    return (\n      <View style={styles.permissionContainer}>\n        <MapPin size={64} color=\"#666\" />\n        <Text style={styles.permissionTitle}>Location Permission Required</Text>\n        <Text style={styles.permissionText}>\n          This page needs access to your location to track your walks. Please allow location access in your browser.\n        </Text>\n        <TouchableOpacity style={styles.permissionButton} onPress={() => {\n          navigator.geolocation.getCurrentPosition(() => setHasPermission(true), () => setHasPermission(false));\n        }}>\n          <Text style={styles.permissionButtonText}>Grant Permission</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  const distance = calculateTotalDistance(coordinates);\n  const progress = existingTrail && isRecording && coordinates.length > 0 && existingTrail.coordinates.length > 0\n    ? Math.min((distance / existingTrail.distance) * 100, 100)\n    : 0;\n  const showProgress = !!existingTrail;\n\n  const recenterMap = async () => {\n    if (mapRef.current) {\n      try {\n        navigator.geolocation.getCurrentPosition((pos) => {\n          const coord = { latitude: pos.coords.latitude, longitude: pos.coords.longitude };\n          setCurrentLocation(coord);\n          mapRef.current.animateToRegion({ latitude: coord.latitude, longitude: coord.longitude, latitudeDelta: 0.01, longitudeDelta: 0.01 }, 500);\n        });\n      } catch (error) {\n        console.error('Error getting current location:', error);\n      }\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {currentLocation && (\n        <TrailMap\n          ref={mapRef}\n          coordinates={coordinates}\n          style={styles.map}\n          initialRegion={{ latitude: currentLocation.latitude, longitude: currentLocation.longitude, latitudeDelta: 0.01, longitudeDelta: 0.01 }}\n          showsUserLocation\n          followsUserLocation={isRecording}\n          showsMyLocationButton={false}\n        />\n      )}\n\n      <TouchableOpacity style={styles.recenterButton} onPress={recenterMap} activeOpacity={0.8}>\n        <Navigation size={24} color=\"#5d6b4a\" />\n      </TouchableOpacity>\n\n      <Animated.View style={[styles.bottomSheet, { height: Animated.add(bottomSheetAnim, navbarHeight), bottom: 0 }]}>\n        <View {...panResponder.panHandlers} style={styles.handleBar}>\n          <TouchableOpacity style={styles.handleContainer} onPress={toggleBottomSheet} activeOpacity={0.7}>\n            <View style={styles.handle} />\n            {isExpanded ? (<ChevronDown size={20} color=\"#9ca3af\" />) : (<ChevronUp size={20} color=\"#9ca3af\" />)}\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.bottomSheetContent}>\n          <View style={styles.statsGrid}>\n            <View style={styles.statItem}><Text style={styles.statItemLabel}>Time</Text><Text style={styles.statItemValue}>{formatDuration(duration)}</Text></View>\n            <View style={styles.statItem}><Text style={styles.statItemLabel}>Distance</Text><Text style={styles.statItemValue}>{formatDistance(distance)}</Text></View>\n            <View style={styles.statItem}><Text style={styles.statItemLabel}>Elevation</Text><Text style={styles.statItemValue}>{elevation.toFixed(0)}m</Text></View>\n            <View style={styles.statItem}><Text style={styles.statItemLabel}>Pace</Text><Text style={styles.statItemValue}>{pace}/km</Text></View>\n            <View style={styles.statItem}><Text style={styles.statItemLabel}>Speed</Text><Text style={styles.statItemValue}>{speed.toFixed(1)} km/h</Text></View>\n            {showProgress && (<View style={styles.statItem}><Text style={styles.statItemLabel}>Progress</Text><Text style={styles.statItemValue}>{progress.toFixed(0)}%</Text></View>)}\n          </View>\n\n          <TouchableOpacity style={[styles.recordButton, isRecording && styles.recordButtonActive]} onPress={isRecording ? stopRecording : startRecording} activeOpacity={0.8}>\n            {isRecording ? (<><Square size={24} color=\"#fff\" fill=\"#fff\" /><Text style={styles.recordButtonText}>Stop & Save</Text></>) : (<><Play size={24} color=\"#fff\" fill=\"#fff\" /><Text style={styles.recordButtonText}>Start Trail</Text></>) }\n          </TouchableOpacity>\n\n          {isExpanded && (\n            <View style={styles.expandedContent}>\n              <View style={styles.divider} />\n              <TouchableOpacity style={styles.optionRow} onPress={() => Alert.alert('Apple Watch', 'Connect your Apple Watch to sync workout data.')} activeOpacity={0.7}>\n                <View style={styles.optionIconContainer}><Watch size={24} color=\"#5d6b4a\" /></View>\n                <View style={styles.optionTextContainer}><Text style={styles.optionTitle}>Apple Watch</Text><Text style={styles.optionSubtitle}>Not connected</Text></View>\n                <View style={styles.optionBadge}><Text style={styles.optionBadgeText}>Connect</Text></View>\n              </TouchableOpacity>\n\n              <TouchableOpacity style={styles.optionRow} onPress={() => Alert.alert('Alerts', 'Configure alerts for distance milestones and pace notifications.')} activeOpacity={0.7}>\n                <View style={styles.optionIconContainer}><Bell size={24} color=\"#5d6b4a\" /></View>\n                <View style={styles.optionTextContainer}><Text style={styles.optionTitle}>Alerts</Text><Text style={styles.optionSubtitle}>Distance & pace notifications</Text></View>\n                <View style={[styles.optionBadge, styles.optionBadgeActive]}><Text style={[styles.optionBadgeText, styles.optionBadgeTextActive]}>Active</Text></View>\n              </TouchableOpacity>\n            </View>\n          )}\n        </View>\n      </Animated.View>\n      <Modal visible={showSaveModal} animationType=\"slide\" transparent={true} onRequestClose={cancelSave}>\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContainer}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Save Trail</Text>\n              <Text style={{ fontSize: 14, marginTop: 8 }}>Name</Text>\n              <TextInput placeholder=\"Trail name\" value={formName} onChangeText={setFormName} style={styles.input} />\n              <Text style={{ fontSize: 14, marginTop: 8 }}>Description</Text>\n              <TextInput placeholder=\"Description\" value={formDescription} onChangeText={setFormDescription} style={[styles.input, { height: 100 }]} multiline />\n              <Text style={{ fontSize: 14, marginTop: 8 }}>Photo (optional)</Text>\n              <View style={{ flexDirection: 'row', gap: 8, alignItems: 'center' }}>\n                <TouchableOpacity style={[styles.modalButton, { paddingHorizontal: 12 }]} onPress={() => fileInputRef.current?.click()}>\n                  <Text style={styles.modalButtonText}>Choose File</Text>\n                </TouchableOpacity>\n                <TextInput placeholder=\"Or paste image URL\" value={formPhoto} onChangeText={setFormPhoto as any} style={[styles.input, { flex: 1 }]} />\n              </View>\n              <input\n                ref={fileInputRef as any}\n                type=\"file\"\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n                onChange={(e: any) => {\n                  const f = e.target.files && e.target.files[0];\n                  if (f) {\n                    setFormPhotoFile(f);\n                    const url = URL.createObjectURL(f);\n                    setFormPhoto(url);\n                  }\n                }}\n              />\n              <View style={{ flexDirection: 'row', gap: 8, marginTop: 12 }}>\n                <TouchableOpacity style={styles.modalButton} onPress={cancelSave}><Text style={styles.modalButtonText}>Cancel</Text></TouchableOpacity>\n                <TouchableOpacity style={[styles.modalButton, styles.modalButtonPrimary]} onPress={submitSave}><Text style={[styles.modalButtonText, { color: '#fff' }]}>Save Trail</Text></TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\n// styles are imported from record.styles.ts\n","import { StyleSheet, Platform } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  webContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundPrimary,\n    padding: 20,\n  },\n  webText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: theme.textMuted,\n    textAlign: 'center',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundPrimary,\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: theme.textMuted,\n  },\n  permissionContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundPrimary,\n    padding: 32,\n  },\n  permissionTitle: {\n    marginTop: 16,\n    fontSize: 20,\n    fontWeight: '700' as const,\n    color: theme.textPrimary,\n    textAlign: 'center',\n  },\n  permissionText: {\n    marginTop: 8,\n    fontSize: 16,\n    color: theme.textMuted,\n    textAlign: 'center',\n  },\n  permissionButton: {\n    marginTop: 24,\n    paddingHorizontal: 32,\n    paddingVertical: 16,\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n  },\n  permissionButtonText: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n    color: theme.textMuted,\n  },\n  statsContainer: {\n    position: 'absolute',\n    left: 20,\n    right: 20,\n    flexDirection: 'row',\n    gap: 12,\n  },\n  compactRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 12,\n  },\n  compactStats: {\n    flexDirection: 'row',\n    gap: 12,\n    flex: 1,\n  },\n  compactStatBox: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    paddingVertical: 10,\n    paddingHorizontal: 14,\n    alignItems: 'center',\n    minWidth: 110,\n  },\n  stopButtonCompact: {\n    marginLeft: 12,\n    backgroundColor: '#111',\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    borderRadius: 12,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  stopButtonCompactText: {\n    color: '#fff',\n    fontWeight: '700' as const,\n    marginLeft: 6,\n  },\n  statBox: {\n    flex: 1,\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    borderRadius: 16,\n    padding: 16,\n    shadowColor: theme.borderSubtle,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  statLabel: {\n    fontSize: 13,\n    color: theme.textMuted,\n    fontWeight: '500' as const,\n    marginBottom: 4,\n  },\n  statValue: {\n    fontSize: 24,\n    color: theme.textPrimary,\n    fontWeight: '700' as const,\n  },\n  controlContainer: {\n    position: 'absolute',\n    left: 20,\n    right: 20,\n    alignItems: 'center',\n  },\n  recordButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n    paddingHorizontal: 32,\n    paddingVertical: 20,\n    backgroundColor: theme.accentSecondary,\n    borderRadius: 50,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 12,\n    elevation: 8,\n  },\n  recordButtonActive: {\n    backgroundColor: theme.accentSecondary,\n  },\n  recordButtonText: {\n    fontSize: 18,\n    fontWeight: '700' as const,\n    color: theme.backgroundPrimary,\n  },\n  bottomSheet: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.backgroundPrimary,\n    borderTopLeftRadius: 24,\n    borderTopRightRadius: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: -4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 16,\n    elevation: 20,\n  },\n  handleBar: {\n    paddingTop: 12,\n    paddingBottom: 8,\n    alignItems: 'center',\n  },\n  handleContainer: {\n    alignItems: 'center',\n    gap: 4,\n  },\n  handle: {\n    width: 40,\n    height: 4,\n    backgroundColor: theme.borderSubtle,\n    borderRadius: 2,\n  },\n  bottomSheetContent: {\n    flex: 1,\n    paddingHorizontal: 20,\n    paddingBottom: Platform.OS === 'ios' ? 100 : 92,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n    marginBottom: 20,\n  },\n  statItem: {\n    width: '31%',\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    padding: 12,\n    alignItems: 'center',\n  },\n  statItemLabel: {\n    fontSize: 11,\n    color: theme.textMuted,\n    fontWeight: '600' as const,\n    textTransform: 'uppercase' as const,\n    letterSpacing: 0.5,\n    marginBottom: 6,\n  },\n  statItemValue: {\n    fontSize: 18,\n    color: theme.textPrimary,\n    fontWeight: '700' as const,\n  },\n  expandedContent: {\n    marginTop: 8,\n  },\n  divider: {\n    height: 1,\n    backgroundColor: theme.borderSubtle,\n    marginVertical: 16,\n  },\n  optionRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    marginBottom: 12,\n  },\n  optionIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: 'rgba(93, 107, 74, 0.1)',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: 12,\n  },\n  optionTextContainer: {\n    flex: 1,\n  },\n  optionTitle: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n    color: theme.textPrimary,\n    marginBottom: 2,\n  },\n  optionSubtitle: {\n    fontSize: 13,\n    color: theme.textMuted,\n  },\n  optionBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 12,\n    backgroundColor: theme.borderSubtle,\n  },\n  optionBadgeActive: {\n    backgroundColor: 'rgba(93, 107, 74, 0.15)',\n  },\n  optionBadgeText: {\n    fontSize: 12,\n    fontWeight: '600' as const,\n    color: theme.textMuted,\n  },\n  optionBadgeTextActive: {\n    color: theme.backgroundPrimary,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.4)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  modalContainer: {\n    width: '100%',\n    maxHeight: '90%',\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    overflow: 'hidden',\n  },\n  modalContent: {\n    padding: 20,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '700' as const,\n    color: theme.backgroundPrimary,\n    marginBottom: 12,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#e5e7eb',\n    backgroundColor: '#f9fafb',\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n    borderRadius: 8,\n    marginTop: 8,\n    color: theme.backgroundPrimary,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 10,\n    backgroundColor: '#e5e7eb',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  modalButtonPrimary: {\n    backgroundColor: '#5d6b4a',\n    marginLeft: 8,\n  },\n  modalButtonText: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n    color: '#1f2937',\n  },\n  recenterButton: {\n    position: 'absolute',\n    top: 60,\n    left: 20,\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.backgroundSecondary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.15,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n});\n","\nimport React from 'react';\nimport { StyleSheet, View, FlatList, TouchableOpacity, ActivityIndicator, Text } from 'react-native';\nimport theme from '@/constants/colors';\nimport { useRouter } from 'expo-router';\nimport { MapPin, Clock } from 'lucide-react-native';\nimport { useTrails } from '@/context/TrailsContext';\nimport { Trail } from '@/types/trail';\nimport { formatDistance, formatDuration, formatDate } from '@/utils/distance';\n\nexport default function TrailsScreen() {\n  const router = useRouter();\n  const { trails, isLoading } = useTrails();\n\n  const renderTrailItem = ({ item }: { item: Trail }) => (\n    <TouchableOpacity\n      style={styles.trailItem}\n      onPress={() => router.push(`/trail/${item.id}` as any)}\n    >\n      <View style={styles.trailHeader}>\n        <View style={styles.iconContainer}>\n          <MapPin size={24} color={theme.backgroundPrimary} />\n        </View>\n        <View style={styles.trailInfo}>\n          <Text style={styles.trailDate}>{formatDate(item.date)}</Text>\n          <View style={styles.statsRow}>\n            <View style={styles.statItem}>\n              <MapPin size={16} color={theme.textMuted} />\n              <Text style={styles.statText}>{formatDistance(item.distance)}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Clock size={16} color={theme.textMuted} />\n              <Text style={styles.statText}>{formatDuration(item.duration)}</Text>\n            </View>\n          </View>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyContainer}>\n      <MapPin size={64} color={theme.borderSubtle} />\n      <Text style={styles.emptyTitle}>No trails yet</Text>\n      <Text style={styles.emptyText}>\n        Start recording your first dog walk to see it here!\n      </Text>\n    </View>\n  );\n\n  if (isLoading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#2563eb\" />\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={trails}\n        renderItem={renderTrailItem}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={trails.length === 0 ? styles.emptyList : styles.list}\n        ListEmptyComponent={renderEmptyState}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  list: {\n    padding: 16,\n    gap: 12,\n  },\n  emptyList: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundSecondary,\n  },\n  trailItem: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 16,\n    padding: 16,\n    marginBottom: 12,\n  shadowColor: theme.backgroundSecondaryVarient,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  trailHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  iconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  trailInfo: {\n    flex: 1,\n  },\n  trailDate: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n    color: theme.textPrimary,\n    marginBottom: 6,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: 16,\n  },\n  statItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  statText: {\n    fontSize: 14,\n    color: theme.textMuted,\n    fontWeight: '500' as const,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n  },\n  emptyTitle: {\n    fontSize: 20,\n    fontWeight: '700' as const,\n    color: '#1f2937',\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: theme.textMuted,\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n});\n","import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport { useAuth } from '@/context/AuthContext';\nimport { API_URL } from '@/lib/api';\n\nexport interface UserProfile {\n  id: string;\n  user_id: string;\n  name: string | null;\n  image: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport const [AccountContext, useAccount] = createContextHook(() => {\n  const { user, session } = useAuth();\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  const fetchAccount = useCallback(async () => {\n    if (!session?.accessToken) return;\n\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/account/me`, {\n        headers: {\n          'Authorization': `Bearer ${session.accessToken}`,\n        },\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setUserProfile(data);\n      } else {\n        console.error('Failed to fetch account:', response.status);\n        setUserProfile(null);\n      }\n    } catch (error) {\n      console.error('Error fetching account:', error);\n      setUserProfile(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [session?.accessToken]);\n\n  const updateAccount = useCallback(async (updates: Partial<Pick<UserProfile, 'name' | 'image'>>) => {\n    if (!session?.accessToken) throw new Error('No active session');\n\n    try {\n      const response = await fetch(`${API_URL}/account/me`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.accessToken}`,\n        },\n        body: JSON.stringify(updates),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail?.[0]?.msg || 'Failed to update account');\n      }\n\n      const data = await response.json();\n      setUserProfile(data);\n      return data;\n    } catch (error) {\n      console.error('Error updating account:', error);\n      throw error;\n    }\n  }, [session?.accessToken]);\n\n  const deleteAccount = useCallback(async () => {\n    if (!session?.accessToken) throw new Error('No active session');\n\n    try {\n      const response = await fetch(`${API_URL}/account/me`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${session.accessToken}`,\n        },\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail?.[0]?.msg || 'Failed to delete account');\n      }\n\n      setUserProfile(null);\n      return true;\n    } catch (error) {\n      console.error('Error deleting account:', error);\n      throw error;\n    }\n  }, [session?.accessToken]);\n\n  useEffect(() => {\n    if (session?.accessToken) {\n      fetchAccount();\n    } else {\n      setUserProfile(null);\n      setIsLoading(false);\n    }\n  }, [session?.accessToken, fetchAccount]);\n\n  return useMemo(() => ({\n    userProfile,\n    isLoading,\n    refreshAccount: fetchAccount,\n    updateAccount,\n    deleteAccount,\n  }), [userProfile, isLoading, fetchAccount, updateAccount, deleteAccount]);\n});\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  safeContainer: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n\n  stickyHeader: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingBottom: 8,\n  },\n  stickySearchContainer: {\n    paddingHorizontal: 16,\n    paddingBottom: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n\n  searchBar: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundSecondary,\n    paddingHorizontal: 16,\n    paddingVertical: 14,\n    borderRadius: 28,\n    gap: 12,\n    borderWidth: 1,\n    borderColor: theme.borderSubtle,\n  },\n  demoButton: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 24,\n  },\n  demoButtonText: {\n    color: theme.textPrimary,\n    fontWeight: 'bold',\n  },\n  searchPlaceholder: {\n    fontSize: 16,\n    color: theme.textMuted,\n    fontWeight: '400' as const,\n  },\n\n  largeTrailCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    overflow: 'hidden',\n    marginBottom: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 4,\n    position: 'relative',\n  },\n  largeTrailImage: {\n    width: '100%',\n    height: 260,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  bookmarkButton: {\n    position: 'absolute',\n    top: 20,\n    right: 20,\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    shadowColor: theme.backgroundSecondaryVarient,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  cardGradient: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  cardOverlayContent: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    padding: 18,\n    paddingBottom: 20,\n  },\n  overlayTrailName: {\n    fontSize: 28,\n    fontWeight: '700' as const,\n    color: theme.textPrimary,\n    marginBottom: 6,\n    lineHeight: 34,\n    textShadowColor: 'rgba(0, 0, 0, 0.3)',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 4,\n  },\n  overlayLocation: {\n    fontSize: 16,\n    color: theme.textPrimary,\n    marginBottom: 16,\n    opacity: 0.95,\n    textShadowColor: 'rgba(0, 0, 0, 0.3)',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 4,\n  },\n  overlayBadges: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n    flexWrap: 'wrap' as const,\n  },\n  badge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(40, 40, 40, 0.8)',\n    paddingHorizontal: 14,\n    paddingVertical: 8,\n    borderRadius: 20,\n    gap: 6,\n  },\n  badgeText: {\n    fontSize: 14,\n    fontWeight: '600' as const,\n    color: '#fff',\n    textTransform: 'capitalize' as const,\n  },\n  categoriesSection: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingTop: 8,\n    paddingBottom: 16,\n  },\n  categoriesScroll: {\n    paddingHorizontal: 16,\n    gap: 12,\n  },\n  categoryButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 24,\n    paddingVertical: 14,\n    borderRadius: 28,\n    backgroundColor: theme.textPrimary,\n    borderWidth: 0,\n    gap: 8,\n  },\n  categoryButtonActive: {\n    backgroundColor: theme.backgroundPrimary,\n  },\n  categoryText: {\n    fontSize: 16,\n    fontWeight: '500' as const,\n    color: theme.textMuted,\n  },\n  categoryTextActive: {\n    color: theme.textPrimary,\n  },\n  categoryTrailsSection: {\n    paddingHorizontal: 16,\n    paddingTop: 16,\n  },\n  bottomPadding: {\n    height: 40,\n  },\n  loadingContainer: {\n    paddingVertical: 60,\n    alignItems: 'center',\n    gap: 16,\n  },\n  loadingText: {\n    fontSize: 14,\n    color: theme.textMuted,\n  },\n  emptyContainer: {\n    paddingVertical: 60,\n    alignItems: 'center',\n    gap: 16,\n    paddingHorizontal: 32,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: theme.textMuted,\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n  placeholderImage: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.textPrimary,\n  },\n  searchModalContainer: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  searchModalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingTop: 12,\n    paddingBottom: 16,\n    gap: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.borderSubtle,\n  },\n  backButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  searchModalInputContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.textPrimary,\n    borderRadius: 28,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderWidth: 1,\n    borderColor: theme.textMuted,\n    gap: 12,\n  },\n  searchModalInput: {\n    flex: 1,\n    fontSize: 16,\n    color: theme.textPrimary,\n    padding: 0,\n    fontWeight: '400' as const,\n  },\n  clearButton: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    backgroundColor: theme.borderSubtle,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  searchModalContent: {\n    flex: 1,\n    paddingTop: 12,\n  },\n  currentLocationItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    gap: 16,\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 16,\n    marginHorizontal: 16,\n    marginBottom: 12,\n  },\n  locationIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  locationTextContainer: {\n    flex: 1,\n  },\n  locationTitle: {\n    fontSize: 17,\n    fontWeight: '600' as const,\n    color: theme.textPrimary,\n    marginBottom: 4,\n  },\n  locationSubtitle: {\n    fontSize: 14,\n    color: theme.textMuted,\n    fontWeight: '400' as const,\n  },\n  suggestionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    gap: 16,\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 16,\n    marginHorizontal: 16,\n    marginBottom: 12,\n  },\n  suggestionIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.borderSubtle,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  suggestionTextContainer: {\n    flex: 1,\n  },\n  suggestionTitle: {\n    fontSize: 17,\n    fontWeight: '600' as const,\n    color: theme.textPrimary,\n    marginBottom: 4,\n  },\n  suggestionSubtitle: {\n    fontSize: 14,\n    color: theme.textMuted,\n    fontWeight: '400' as const,\n  },\n});\n","import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { API_URL } from '@/lib/api';\n\nexport interface User {\n  id: string;\n  email: string;\n  name: string;\n}\n\nexport interface Session {\n  user: User;\n  accessToken: string;\n  tokenType: string;\n}\n\nexport const [AuthContext, useAuth] = createContextHook(() => {\n  const [session, setSession] = useState<Session | null>(null);\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    const loadSession = async () => {\n      try {\n        const savedSession = await AsyncStorage.getItem('session');\n        if (savedSession) {\n          const parsedSession = JSON.parse(savedSession);\n          setSession(parsedSession);\n          setUser(parsedSession.user);\n        }\n      } catch (error) {\n        console.error('Error loading session:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadSession();\n  }, []);\n\n  const requestOtp = useCallback(async (email: string) => {\n    console.log('Requesting OTP for:', email);\n    const response = await fetch(`${API_URL}/otp/request`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to request OTP');\n    }\n\n    return true;\n  }, []);\n\n  const verifyOtp = useCallback(async (email: string, otpCode: string) => {\n    console.log('Verifying OTP for:', email);\n    const response = await fetch(`${API_URL}/otp/verify`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, otpCode }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Invalid OTP code');\n    }\n\n    const data: Session = await response.json();\n    setSession(data);\n    setUser(data.user);\n    await AsyncStorage.setItem('session', JSON.stringify(data));\n    \n    return data;\n  }, []);\n\n  const requestRegistration = useCallback(async (email: string, name: string) => {\n    console.log('Requesting registration for:', email);\n    const response = await fetch(`${API_URL}/otp/register-request`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, name }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to request registration');\n    }\n\n    return true;\n  }, []);\n\n  const verifyRegistration = useCallback(async (email: string, otpCode: string) => {\n    console.log('Verifying registration for:', email);\n    const response = await fetch(`${API_URL}/otp/register-verify`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, otpCode }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Invalid OTP code');\n    }\n\n    const data: Session = await response.json();\n    setSession(data);\n    setUser(data.user);\n    await AsyncStorage.setItem('session', JSON.stringify(data));\n    \n    return data;\n  }, []);\n\n  const signInWithToken = useCallback(async (tokenResponse: { accessToken: string; tokenType?: string; user?: User }) => {\n    // Accept token response from webauthn auth verify endpoint and persist session\n    const sessionObj: Session = {\n      accessToken: tokenResponse.accessToken,\n      tokenType: tokenResponse.tokenType || 'bearer',\n      user: (tokenResponse.user as User) || (user as User),\n    } as Session;\n    setSession(sessionObj);\n    setUser(sessionObj.user);\n    await AsyncStorage.setItem('session', JSON.stringify(sessionObj));\n    return sessionObj;\n  }, [user]);\n\n  const signOut = useCallback(async () => {\n    console.log('Signing out user');\n    setSession(null);\n    setUser(null);\n    await AsyncStorage.removeItem('session');\n  }, []);\n\n  return useMemo(() => ({\n    session,\n    user,\n    isLoading,\n    requestOtp,\n    verifyOtp,\n    requestRegistration,\n    verifyRegistration,\n    signInWithToken,\n    signOut,\n    isAuthenticated: !!session,\n  }), [session, user, isLoading, requestOtp, verifyOtp, requestRegistration, verifyRegistration, signOut]);\n});\n\n","import { useEffect, useRef, useState } from 'react';\nimport { \n  View,\n  StyleSheet,\n  ActivityIndicator,\n  Platform,\n  TouchableOpacity,\n  TextInput,\n  Alert,\n  Linking,\n  Animated,\n  Text,\n} from 'react-native';\n\nimport { router, useLocalSearchParams } from 'expo-router';\nimport { Image } from 'expo-image';\nimport TrailMap from '@/components/TrailMap';\nimport { Clock, MapPin, Calendar, Edit3, Check, X, Navigation, TrendingUp, Tag, Camera, Activity, Star, ArrowLeft, Share2, Bookmark, MoreVertical } from 'lucide-react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Haptics from 'expo-haptics';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { useTrails } from '@/context/TrailsContext';\nimport { useAuth } from '@/context/AuthContext';\nimport { Trail } from '@/types/trail';\n\nimport { formatDistance, formatDuration } from '@/utils/distance';\nimport theme from '@/constants/colors';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './[id].styles';\n\nconst ENVIRONMENT_TAG_OPTIONS = [\n  'Forest', 'Urban', 'Beach', 'Mountain', 'Rural', 'Park',\n  'Shaded', 'Sunny', 'Crowded', 'Quiet', 'Paved', 'Trail'\n];\n\nconst DIFFICULTY_OPTIONS = ['Easy', 'Moderate', 'Hard'];\n\nexport default function TrailDetailScreen() {\n  const { id } = useLocalSearchParams();\n  const { user } = useAuth();\n  const { getTrailById, updateTrailName, updateTrailPhoto, updateTrailDetails, getTrailWithUser } = useTrails();\n  const [trail, setTrail] = useState<Trail | undefined>(undefined);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [isEditingName, setIsEditingName] = useState(false);\n  const [editedName, setEditedName] = useState('');\n  const [isEditingDetails, setIsEditingDetails] = useState(false);\n  const [editedRating, setEditedRating] = useState<number>(0);\n  const [editedReview, setEditedReview] = useState('');\n  const [editedTags, setEditedTags] = useState<string[]>([]);\n  const [editedDifficulty, setEditedDifficulty] = useState<string>('');\n  const [editedNameInDetails, setEditedNameInDetails] = useState('');\n  const [isUploadingPhoto, setIsUploadingPhoto] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const scrollY = useRef(new Animated.Value(0)).current;\n  const insets = useSafeAreaInsets();\n  // Helper to render native icons on mobile and an emoji fallback on web where some icon libs\n  // can produce text nodes that raise \"Text strings must be rendered within a <Text> component\".\n  const IconOrEmoji = ({ IconComponent, emoji, size = 18, color }: { IconComponent: any; emoji?: string; size?: number; color?: string }) => {\n    if (Platform.OS === 'web') {\n      // Use ThemedText so the emoji/text is correctly wrapped in a <Text> component on web\n      return <Text style={{ fontSize: size, color: color || undefined }}>{emoji || ''}</Text>;\n    }\n    const Icon = IconComponent;\n    return <Icon size={size} color={color} />;\n  };\n  const [isSaved, setIsSaved] = useState(false);\n\n  useEffect(() => {\n    loadTrail();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const loadTrail = async () => {\n    if (typeof id !== 'string') {\n      setIsLoading(false);\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const foundTrail = getTrailById(id);\n      if (foundTrail) {\n        setTrail(foundTrail);\n        setEditedName(foundTrail.name || '');\n        setEditedRating(foundTrail.rating || 0);\n        setEditedReview(foundTrail.review || '');\n        setEditedTags(foundTrail.environment_tags || []);\n        setEditedDifficulty(foundTrail.difficulty || '');\n        setEditedNameInDetails(foundTrail.name || '');\n      } else {\n        const loadedTrail = await getTrailWithUser(id);\n        if (loadedTrail) {\n          setTrail(loadedTrail);\n          setEditedName(loadedTrail.name || '');\n          setEditedRating(loadedTrail.rating || 0);\n          setEditedReview(loadedTrail.review || '');\n          setEditedTags(loadedTrail.environment_tags || []);\n          setEditedDifficulty(loadedTrail.difficulty || '');\n          setEditedNameInDetails(loadedTrail.name || '');\n        }\n      }\n    } catch (error) {\n      console.error('Error loading trail:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveName = async () => {\n    if (!trail || !editedName.trim()) {\n      setIsEditingName(false);\n      return;\n    }\n\n    try {\n      await updateTrailName(trail.id, editedName.trim());\n      setTrail({ ...trail, name: editedName.trim() });\n      setIsEditingName(false);\n    } catch {\n      Alert.alert('Error', 'Failed to update trail name. Please try again.');\n    }\n  };\n\n  const handleSaveDetails = async () => {\n    if (!trail) return;\n\n    try {\n      if (editedNameInDetails.trim() !== trail.name) {\n        await updateTrailName(trail.id, editedNameInDetails.trim());\n      }\n      await updateTrailDetails(trail.id, {\n        rating: editedRating > 0 ? editedRating : undefined,\n        review: editedReview.trim() || undefined,\n        environment_tags: editedTags.length > 0 ? editedTags : undefined,\n        difficulty: editedDifficulty || undefined,\n      });\n      setTrail({\n        ...trail,\n        name: editedNameInDetails.trim(),\n        rating: editedRating > 0 ? editedRating : undefined,\n        review: editedReview.trim() || undefined,\n        environment_tags: editedTags.length > 0 ? editedTags : undefined,\n        difficulty: editedDifficulty || undefined,\n      });\n      setEditedName(editedNameInDetails.trim());\n      setIsEditingDetails(false);\n      Alert.alert('Success', 'Trail details updated!');\n    } catch {\n      Alert.alert('Error', 'Failed to update trail details. Please try again.');\n    }\n  };\n\n  const handleGetDirections = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    if (!trail || (trail.coordinates?.length ?? 0) === 0) {\n      Alert.alert('Error', 'Location not available for this trail');\n      return;\n    }\n\n    const latitude = trail.coordinates[0].latitude;\n    const longitude = trail.coordinates[0].longitude;\n    const label = trail.name || 'Trail Location';\n\n    const scheme = Platform.select({\n      ios: 'maps:',\n      android: 'geo:',\n      default: 'https://www.google.com/maps',\n    });\n\n    const url = Platform.select({\n      ios: `${scheme}?q=${label}&ll=${latitude},${longitude}`,\n      android: `${scheme}${latitude},${longitude}?q=${label}`,\n      default: `${scheme}/search/?api=1&query=${latitude},${longitude}`,\n    });\n\n    Linking.canOpenURL(url as string).then((supported) => {\n      if (supported) {\n        Linking.openURL(url as string);\n      } else {\n        Alert.alert('Error', 'Unable to open maps application');\n      }\n    });\n  };\n\n  const handleCancelEdit = () => {\n    setEditedName(trail?.name || '');\n    setIsEditingName(false);\n  };\n\n  const handleCancelDetailsEdit = () => {\n    setEditedRating(trail?.rating || 0);\n    setEditedReview(trail?.review || '');\n    setEditedTags(trail?.environment_tags || []);\n    setEditedDifficulty(trail?.difficulty || '');\n    setEditedNameInDetails(trail?.name || '');\n    setIsEditingDetails(false);\n  };\n\n  const toggleTag = (tag: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setEditedTags((prev) =>\n      prev.includes(tag) ? prev.filter((t) => t !== tag) : [...prev, tag]\n    );\n  };\n\n  const pickImageWeb = () => {\n    if (Platform.OS === 'web' && fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  const handleWebFileChange = async (event: any) => {\n    const file = event.target.files?.[0];\n    if (!file || !trail) return;\n\n    if (!file.type.startsWith('image/')) {\n      Alert.alert('Error', 'Please select an image file');\n      return;\n    }\n\n    setIsUploadingPhoto(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        const base64 = e.target?.result as string;\n        await updateTrailPhoto(trail.id, base64);\n        setTrail({ ...trail, photo: base64 });\n        Alert.alert('Success', 'Photo uploaded successfully!');\n        setIsUploadingPhoto(false);\n      };\n      reader.onerror = () => {\n        Alert.alert('Error', 'Failed to read image');\n        setIsUploadingPhoto(false);\n      };\n      reader.readAsDataURL(file);\n    } catch (error) {\n      console.error('Photo upload error:', error);\n      Alert.alert('Error', 'Failed to upload photo');\n      setIsUploadingPhoto(false);\n    }\n  };\n\n  const pickImageMobile = async () => {\n    if (!trail) return;\n\n    try {\n      const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      \n      if (!permissionResult.granted) {\n        Alert.alert('Permission Required', 'Please allow access to your photo library');\n        return;\n      }\n\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ['images'],\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 0.8,\n        base64: true,\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        setIsUploadingPhoto(true);\n        const base64Image = `data:image/jpeg;base64,${result.assets[0].base64}`;\n        await updateTrailPhoto(trail.id, base64Image);\n        setTrail({ ...trail, photo: base64Image });\n        Alert.alert('Success', 'Photo uploaded successfully!');\n        setIsUploadingPhoto(false);\n      }\n    } catch (error) {\n      console.error('Photo upload error:', error);\n      Alert.alert('Error', 'Failed to upload photo');\n      setIsUploadingPhoto(false);\n    }\n  };\n\n  const handlePickImage = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    if (Platform.OS === 'web') {\n      pickImageWeb();\n    } else {\n      pickImageMobile();\n    }\n  };\n\n  const handleBack = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.back();\n  };\n\n  const handleShare = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    Alert.alert('Share', 'Share functionality coming soon!');\n  };\n\n  const handleSave = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setIsSaved(!isSaved);\n  };\n\n  const handleMore = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    Alert.alert('Options', 'Mark as completed option coming soon!');\n  };\n\n  if (isLoading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n        <Text style={styles.loadingText}>Loading trail...</Text>\n      </View>\n    );\n  }\n\n  if (!trail) {\n    return (\n      <View style={styles.loadingContainer}>\n        <MapPin size={64} color=\"#9ca3af\" />\n        <Text style={styles.loadingText}>Trail not found</Text>\n      </View>\n    );\n  }\n\n  const coords = trail.coordinates ?? [];\n\n  const region = coords.length > 0 ? {\n    latitude: coords[0].latitude,\n    longitude: coords[0].longitude,\n    latitudeDelta: 0.01,\n    longitudeDelta: 0.01,\n  } : undefined;\n\n  const canEdit = trail.user_id === user?.id;\n\n  return (\n    <View style={[\n      styles.container,\n      { paddingTop: insets.top + 70, paddingBottom: Math.max(16, insets.bottom), paddingHorizontal: 16 + (insets.left || 0) },\n    ]}>\n      {Platform.OS === 'web' && (\n        <input\n          ref={fileInputRef as any}\n          type=\"file\"\n          accept=\"image/*\"\n          style={{ display: 'none' }}\n          onChange={handleWebFileChange}\n        />\n      )}\n\n      <View style={[styles.headerButtons, { top: insets.top + 12 }]}>\n        <TouchableOpacity style={styles.headerButton} onPress={handleBack}>\n         <ArrowLeft size={24} />\n        </TouchableOpacity>\n        <View style={styles.headerRightButtons}>\n          <TouchableOpacity style={styles.headerButton} onPress={handleShare}>\n          <Share2 size={22} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.headerButton} onPress={handleSave}>\n          <Bookmark size={22} fill={isSaved ? theme.textPrimary : 'none'} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.headerButton} onPress={handleMore}>\n          <MoreVertical size={22} />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <Animated.ScrollView \n        style={styles.scrollContainer}\n        contentContainerStyle={styles.scrollContent}\n        onScroll={Animated.event(\n          [{ nativeEvent: { contentOffset: { y: scrollY } } }],\n          { useNativeDriver: false }\n        )}\n        scrollEventThrottle={16}\n      >\n        <View style={styles.heroSection}>\n          {trail.photo ? (\n            <View style={styles.heroImageContainer}>\n              <Image\n                source={{ uri: trail.photo }}\n                style={styles.heroImage}\n                contentFit=\"cover\"\n                cachePolicy=\"memory-disk\"\n              />\n              <LinearGradient\n                colors={['rgba(0,0,0,0)', 'rgba(0,0,0,0.3)']}\n                style={styles.heroGradient}\n              />\n              {canEdit && (\n                <TouchableOpacity\n                  style={styles.changePhotoFab}\n                  onPress={handlePickImage}\n                  disabled={isUploadingPhoto}\n                >\n                  {isUploadingPhoto ? (\n                    <ActivityIndicator color={theme.textPrimary} size=\"small\" />\n                  ) : (\n                    <Camera size={20} color={theme.textPrimary} />\n                  )}\n                </TouchableOpacity>\n              )}\n            </View>\n          ) : canEdit && (\n            <TouchableOpacity\n              style={styles.addPhotoContainer}\n              onPress={handlePickImage}\n              disabled={isUploadingPhoto}\n            >\n              {isUploadingPhoto ? (\n                <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n              ) : (\n                <>\n                  <View style={styles.addPhotoIcon}>\n                    <Camera size={32} color={theme.backgroundPrimary} />\n                  </View>\n                  <Text style={styles.addPhotoText}>Add a photo</Text>\n                  <Text style={styles.addPhotoSubtext}>Make your trail memorable</Text>\n                </>\n              )}\n            </TouchableOpacity>\n          )}\n\n\n        </View>\n\n        <View style={styles.contentWrapper}>\n          <View style={styles.content}>\n          <View style={styles.titleSection}>\n            {canEdit && isEditingName ? (\n              <View style={styles.nameEditContainer}>\n                <TextInput\n                  style={styles.nameInput}\n                  value={editedName}\n                  onChangeText={setEditedName}\n                  placeholder=\"Enter trail name\"\n                  autoFocus\n                  placeholderTextColor=\"#9ca3af\"\n                />\n                <View style={styles.editButtons}>\n                  <TouchableOpacity\n                    style={[styles.iconButton, styles.saveIconButton]}\n                    onPress={handleSaveName}\n                  >\n                    <Check size={18} color=\"#fff\" />\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={[styles.iconButton, styles.cancelIconButton]}\n                    onPress={handleCancelEdit}\n                  >\n                    <X size={18} color={theme.textPrimary} />\n                  </TouchableOpacity>\n                </View>\n              </View>\n            ) : (\n              <View style={styles.titleRow}>\n                <Text style={styles.title}>{trail.name || `Trail ${new Date(trail.createdAt ?? trail.date).toLocaleDateString()}`}</Text>\n              </View>\n            )}\n            \n            {trail.city && (\n              <View style={styles.locationRow}>\n                <MapPin size={16} color={theme.textPrimary} />\n                <Text style={styles.location}>{trail.city}, {trail.country || 'Unknown'}</Text>\n              </View>\n            )}\n\n            {trail.rating && !isEditingDetails && (\n              <View style={styles.ratingRow}>\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <Star\n                    key={star}\n                    size={18}\n                    color={star <= trail.rating! ? '#f59e0b' : '#d1d5db'}\n                    fill={star <= trail.rating! ? '#f59e0b' : 'none'}\n                  />\n                ))}\n              </View>\n            )}\n          </View>\n\n          {trail.review && !isEditingDetails && (\n            <View style={styles.reviewCard}>\n              <Text style={styles.reviewText}>{trail.review}</Text>\n            </View>\n          )}\n\n          <View style={styles.statsSection}>\n            <View style={styles.statCard}>\n                <View style={styles.statIconContainer}>\n                <MapPin size={20} color={theme.textPrimary} strokeWidth={2.5} />\n              </View>\n              <Text style={styles.statLabel}>Distance</Text>\n              <Text style={styles.statValue}>{formatDistance(trail.distance)}</Text>\n            </View>\n\n            <View style={styles.statCard}>\n                <View style={styles.statIconContainer}>\n                <Clock size={20} color={theme.textPrimary} strokeWidth={2.5} />\n              </View>\n              <Text style={styles.statLabel}>Duration</Text>\n              <Text style={styles.statValue}>{formatDuration(trail.duration)}</Text>\n            </View>\n\n            {trail.difficulty && (\n              <View style={styles.statCard}>\n                <View style={styles.statIconContainer}>\n                  <IconOrEmoji IconComponent={TrendingUp} emoji=\"\" size={20} color={theme.textPrimary} />\n                </View>\n                <Text style={styles.statLabel}>Difficulty</Text>\n                <Text style={styles.statValue}>{trail.difficulty}</Text>\n              </View>\n            )}\n          </View>\n\n          {trail.environment_tags && trail.environment_tags.length > 0 && !isEditingDetails && (\n            <View style={styles.tagsSection}>\n              <View style={styles.sectionHeader}>\n                <IconOrEmoji IconComponent={Tag} emoji=\"\" size={18} color={theme.textPrimary} />\n                <Text style={styles.sectionTitle}>Environment</Text>\n              </View>\n              <View style={styles.tagsGrid}>\n                {trail.environment_tags.map((tag: string, index: number) => (\n                  <View key={index} style={styles.tagChip}>\n                    <Text style={styles.tagText}>{tag}</Text>\n                  </View>\n                ))}\n              </View>\n            </View>\n          )}\n\n          {canEdit && !isEditingDetails && (\n            <TouchableOpacity\n              style={styles.editDetailsButton}\n              onPress={() => {\n                if (Platform.OS !== 'web') {\n                  Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                }\n                setIsEditingDetails(true);\n              }}\n            >\n              <Edit3 size={18} color={theme.backgroundPrimary} />\n              <Text style={styles.editDetailsText}>Edit Trail Details</Text>\n            </TouchableOpacity>\n          )}\n\n          {canEdit && isEditingDetails && (\n            <View style={styles.editSection}>\n              <Text style={styles.editSectionTitle}>Trail Name</Text>\n              <TextInput\n                style={styles.nameInputInDetails}\n                value={editedNameInDetails}\n                onChangeText={setEditedNameInDetails}\n                placeholder=\"Enter trail name\"\n                placeholderTextColor=\"#9ca3af\"\n              />\n\n              <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Rating</Text>\n              <View style={styles.ratingStars}>\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <TouchableOpacity\n                    key={star}\n                    onPress={() => {\n                      if (Platform.OS !== 'web') {\n                        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                      }\n                      setEditedRating(star);\n                    }}\n                    style={styles.starButton}\n                  >\n                    <Star\n                      size={32}\n                      color={star <= editedRating ? '#f59e0b' : '#d1d5db'}\n                      fill={star <= editedRating ? '#f59e0b' : 'none'}\n                    />\n                  </TouchableOpacity>\n                ))}\n              </View>\n\n              <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Review</Text>\n              <TextInput\n                style={styles.reviewInput}\n                value={editedReview}\n                onChangeText={setEditedReview}\n                placeholder=\"Share your experience on this trail...\"\n                placeholderTextColor=\"#9ca3af\"\n                multiline\n                numberOfLines={4}\n                textAlignVertical=\"top\"\n              />\n\n              <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Difficulty</Text>\n              <View style={styles.difficultyOptions}>\n                {DIFFICULTY_OPTIONS.map((difficulty) => (\n                  <TouchableOpacity\n                    key={difficulty}\n                    style={[\n                      styles.difficultyChip,\n                      editedDifficulty === difficulty && styles.difficultyChipSelected,\n                    ]}\n                    onPress={() => {\n                      if (Platform.OS !== 'web') {\n                        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                      }\n                      setEditedDifficulty(difficulty);\n                    }}\n                  >\n                    <Text\n                      style={[\n                        styles.difficultyChipText,\n                        editedDifficulty === difficulty && styles.difficultyChipTextSelected,\n                      ]}\n                    >\n                      {difficulty}\n                    </Text>\n                  </TouchableOpacity>\n                ))}\n              </View>\n\n              <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Environment Tags</Text>\n              <View style={styles.tagsGrid}>\n                {ENVIRONMENT_TAG_OPTIONS.map((tag) => (\n                  <TouchableOpacity\n                    key={tag}\n                    style={[\n                      styles.editTagChip,\n                      editedTags.includes(tag) && styles.editTagChipSelected,\n                    ]}\n                    onPress={() => toggleTag(tag)}\n                  >\n                    <Text\n                      style={[\n                        styles.editTagChipText,\n                        editedTags.includes(tag) && styles.editTagChipTextSelected,\n                      ]}\n                    >\n                      {tag}\n                    </Text>\n                  </TouchableOpacity>\n                ))}\n              </View>\n\n              <View style={styles.editActionButtons}>\n                <TouchableOpacity\n                  style={[styles.actionButton, styles.cancelActionButton]}\n                  onPress={handleCancelDetailsEdit}\n                >\n                  <X size={20} color={theme.textPrimary} />\n                  <Text style={styles.cancelActionText}>Cancel</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[styles.actionButton, styles.saveActionButton]}\n                  onPress={handleSaveDetails}\n                >\n                  <Check size={20} color=\"#fff\" />\n                  <Text style={styles.saveActionText}>Save</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          )}\n\n            <View style={styles.mapSection}>\n            <View style={styles.sectionHeader}>\n              <IconOrEmoji IconComponent={Navigation} emoji=\"\" size={18} color={theme.textPrimary} />\n              <Text style={styles.sectionTitle}>Route Map</Text>\n            </View>\n            <View style={styles.mapContainer}>\n              <TrailMap\n                coordinates={coords}\n                style={styles.map}\n                initialRegion={region || undefined}\n                scrollEnabled={false}\n                zoomEnabled={false}\n              />\n            </View>\n            <TouchableOpacity style={styles.directionsButton} onPress={handleGetDirections}>\n              <IconOrEmoji IconComponent={Navigation} emoji=\"\" size={18} color=\"#fff\" />\n              <Text style={styles.directionsButtonText}>Get Directions</Text>\n            </TouchableOpacity>\n          </View>\n\n          <View>\n            <Text style={styles.detailsTitle}>Additional Details</Text>\n            \n            {trail.maxElevation !== undefined && (\n              <View style={styles.detailRow}>\n                <View style={styles.detailIcon}>\n                    <IconOrEmoji IconComponent={TrendingUp} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n                  </View>\n                <View style={styles.detailContent}>\n                  <Text style={styles.detailLabel}>Elevation Gain</Text>\n                  <Text style={styles.detailValue}>{trail.maxElevation}m</Text>\n                </View>\n              </View>\n            )}\n\n            {trail.pace && (\n              <View style={styles.detailRow}>\n                <View style={styles.detailIcon}>\n                  <IconOrEmoji IconComponent={Activity} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n                </View>\n                <View style={styles.detailContent}>\n                  <Text style={styles.detailLabel}>Pace</Text>\n                  <Text style={styles.detailValue}>{trail.pace} /km</Text>\n                </View>\n              </View>\n            )}\n\n            {trail.speed && (\n              <View style={styles.detailRow}>\n                <View style={styles.detailIcon}>\n                  <IconOrEmoji IconComponent={Activity} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n                </View>\n                <View style={styles.detailContent}>\n                  <Text style={styles.detailLabel}>Max Speed</Text>\n                  <Text style={styles.detailValue}>{trail.speed.toFixed(1)} km/h</Text>\n                </View>\n              </View>\n            )}\n\n            <View style={styles.detailRow}>\n              <View style={styles.detailIcon}>\n                <IconOrEmoji IconComponent={Calendar} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n              </View>\n              <View style={styles.detailContent}>\n                <Text style={styles.detailLabel}>Date & Time</Text>\n                <Text style={styles.detailValue}>\n                  {new Date(trail.createdAt ?? trail.date).toLocaleString('en-US', {\n                    weekday: 'short',\n                    year: 'numeric',\n                    month: 'short',\n                    day: 'numeric',\n                    hour: 'numeric',\n                    minute: '2-digit',\n                  })}\n                </Text>\n              </View>\n            </View>\n          </View>\n          </View>\n        </View>\n      </Animated.ScrollView>\n    </View>\n  );\n}\n","import React, { useState } from 'react';\nimport { Text, View, TextInput, TouchableOpacity, StyleSheet, KeyboardAvoidingView, Platform, Alert, ActivityIndicator } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport * as Haptics from 'expo-haptics';\nimport { useAuth } from '@/context/AuthContext';\nimport { firebaseAuthExchange } from '@/lib/api';\nimport { UserPlus } from 'lucide-react-native';\nimport { getFirebaseAuth, createUserWithEmailAndPassword, updateProfile, signInWithGoogle } from '@/lib/firebase';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport Constants from 'expo-constants';\nimport styles from './auth.styles';\n\nWebBrowser.maybeCompleteAuthSession();\n\nfunction normalizeToken(token: any): string | null {\n  if (!token) return null;\n  if (typeof token === 'string') return token;\n  try {\n    if (token instanceof ArrayBuffer) {\n      const view = new Uint8Array(token);\n      let s = '';\n      for (let i = 0; i < view.length; i++) s += String.fromCharCode(view[i]);\n      return decodeURIComponent(escape(s));\n    }\n    if (token && typeof token === 'object' && Array.isArray((token as any).data)) {\n      const arr = (token as any).data as number[];\n      let s = '';\n      for (let i = 0; i < arr.length; i++) s += String.fromCharCode(arr[i]);\n      return decodeURIComponent(escape(s));\n    }\n    return String(token);\n  } catch (err) {\n    return String(token);\n  }\n}\n\nexport default function SignupScreen() {\n  const router = useRouter();\n  const { signInWithToken } = useAuth();\n  const [email, setEmail] = useState<string>('');\n  const [name, setName] = useState<string>('');\n  const [password, setPassword] = useState<string>('');\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  const extra = (Constants.expoConfig && (Constants.expoConfig.extra as any)) || {};\n  // const [request, response, promptAsync] = Google.useAuthRequest({\n  //   webClientId: extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n  //   clientId: extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n  //   iosClientId: extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n  //   androidClientId: extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n  //   scopes: ['profile', 'email'],\n  //   // request an access token so we can sign into Firebase client-side\n  //   responseType: 'token',\n  // });\n\n    const [request, response, promptAsync] = Google.useAuthRequest({\n      // Use the env variables directly with fallback to your 'extra' logic\n      webClientId: '447944956309-t92ug0tqs40adop6mnvifqbmfsi7dtj6.apps.googleusercontent.com',\n      // webClientId: process.env.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n      iosClientId: process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n      androidClientId: process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n      // Note: 'clientId' is usually the proxy/default ID\n      clientId: process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n      scopes: ['profile', 'email'],\n      responseType: 'token',\n    });\n\n  React.useEffect(() => {\n    (async () => {\n      if (response?.type === 'success') {\n        try {\n          setIsLoading(true);\n          // normalize potential ArrayBuffer/bytes to string\n          const rawToken = response.authentication?.accessToken || response.authentication?.idToken;\n          const tokenStr = normalizeToken(rawToken);\n          if (!tokenStr) throw new Error('No access token from Google');\n          // Sign into Firebase with the Google token to obtain a Firebase ID token (JWT)\n          const fb = await signInWithGoogle(getFirebaseAuth(), tokenStr);\n          const session = await firebaseAuthExchange(fb.idToken);\n          await signInWithToken(session);\n          if (Platform.OS !== 'web') {\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n          }\n          router.replace('/');\n        } catch (err: any) {\n          console.error('Google sign-up error', err);\n          Alert.alert('Google Sign-Up Error', err?.message || String(err));\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    })();\n  }, [response]);\n\n  const handleSignUp = async () => {\n    if (!email || !name || !password) {\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      Alert.alert('Error', 'Please fill in all fields');\n      return;\n    }\n\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    setIsLoading(true);\n    try {\n      const credential = await createUserWithEmailAndPassword(\n        getFirebaseAuth(),\n        email.trim().toLowerCase(),\n        password\n      );\n      if (name.trim()) {\n        await updateProfile(credential.user, { displayName: name.trim() });\n      }\n      const idToken = await credential.user.getIdToken(true);\n      const session = await firebaseAuthExchange(idToken);\n      await signInWithToken(session);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n      router.replace('/');\n    } catch (error: any) {\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      console.error('Firebase sign-up error:', error);\n      Alert.alert('Error', error.message || 'Failed to create account');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      style={styles.container}\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n    >\n      <View style={styles.content}>\n        <View style={styles.header}>\n          <UserPlus size={64} color=\"#5d6b4a\" />\n          <Text style={styles.title}>Create Account</Text>\n          <Text style={styles.subtitle}>Sign up to start tracking your dog walks</Text>\n        </View>\n\n        <View style={styles.form}>\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Name</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Your Name\"\n              value={name}\n              onChangeText={setName}\n              autoCapitalize=\"words\"\n              editable={!isLoading}\n            />\n          </View>\n\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Email</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"your@email.com\"\n              value={email}\n              onChangeText={setEmail}\n              autoCapitalize=\"none\"\n              keyboardType=\"email-address\"\n              autoComplete=\"email\"\n              editable={!isLoading}\n            />\n          </View>\n\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Password</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Create a password\"\n              value={password}\n              onChangeText={setPassword}\n              secureTextEntry\n              autoCapitalize=\"none\"\n              autoComplete=\"password\"\n              editable={!isLoading}\n            />\n          </View>\n\n          <TouchableOpacity\n            style={[styles.button, isLoading && styles.buttonDisabled]}\n            onPress={handleSignUp}\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <ActivityIndicator color=\"#fff\" />\n            ) : (\n              <Text style={styles.buttonText}>Create Account</Text>\n            )}\n          </TouchableOpacity>\n\n          {/* <TouchableOpacity\n            style={[styles.button, { marginTop: 8, backgroundColor: '#db4437' }]}\n            onPress={async () => {\n              try {\n                if (Platform.OS !== 'web') {\n                  Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n                }\n                setIsLoading(true);\n                // Use native flow (no proxy) for dev-client / standalone.\n                await promptAsync();\n              } catch (err: any) {\n                console.error('Prompt Google Auth error', err);\n                Alert.alert('Error', err?.message || String(err));\n                setIsLoading(false);\n              }\n            }}\n            disabled={!request || isLoading}\n          >\n            <Text style={styles.buttonText}>Continue with Google</Text>\n          </TouchableOpacity> */}\n\n          <View style={styles.footer}>\n            <Text style={styles.footerText}>Already have an account? </Text>\n            <TouchableOpacity onPress={() => {\n              if (Platform.OS !== 'web') {\n                Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n              }\n              router.push('/login');\n            }}>\n              <Text style={styles.linkText}>Sign In</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </KeyboardAvoidingView>\n  );\n}","import * as React from 'react';\nimport { Text, View, TextInput, Pressable, TouchableOpacity, StyleSheet, KeyboardAvoidingView, Platform, Alert, ActivityIndicator } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport * as Haptics from 'expo-haptics';\nimport { useAuth } from '@/context/AuthContext';\nimport { firebaseAuthExchange } from '@/lib/api';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport Constants from 'expo-constants';\nimport { Image } from 'expo-image';\nimport theme from '@/constants/colors';\nimport { getFirebaseAuth, signInWithEmailAndPassword, signInWithGoogle } from '@/lib/firebase';\nimport styles from './auth.styles';\n\nWebBrowser.maybeCompleteAuthSession();\n\nfunction normalizeToken(token: any): string | null {\n  if (!token) return null;\n  if (typeof token === 'string') return token;\n  // Expo / native may return ArrayBuffer-like or { data: number[] }\n  try {\n    if (token instanceof ArrayBuffer) {\n      const view = new Uint8Array(token);\n      let s = '';\n      for (let i = 0; i < view.length; i++) s += String.fromCharCode(view[i]);\n      return decodeURIComponent(escape(s));\n    }\n    if (token && typeof token === 'object' && Array.isArray((token as any).data)) {\n      const arr = (token as any).data as number[];\n      let s = '';\n      for (let i = 0; i < arr.length; i++) s += String.fromCharCode(arr[i]);\n      return decodeURIComponent(escape(s));\n    }\n    return String(token);\n  } catch (err) {\n    return String(token);\n  }\n}\n\nexport default function LoginScreen() {\n  const router = useRouter();\n  const { signInWithToken } = useAuth();\n  const [email, setEmail] = React.useState<string>('');\n  const [password, setPassword] = React.useState<string>('');\n  const [isLoading, setIsLoading] = React.useState<boolean>(false);\n\n  const _extraFromConstants = (Constants.expoConfig && (Constants.expoConfig.extra as any)) || (Constants.manifest && (Constants.manifest.extra as any)) || {};\n  const extra = {\n    EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n    EXPO_PUBLIC_GOOGLE_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n    EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n    EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n  } as any;\n\n  if (typeof window !== 'undefined' && !extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID) {\n    // Helpful developer warning when running on web without a webClientId\n    // (Expo's Constants.expoConfig.extra isn't always populated on web/dev server).\n    // eslint-disable-next-line no-console\n    console.warn('Google web client id (EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID) is not defined. Google auth on web requires a webClientId.');\n  }\n\n  // const [request, response, promptAsync] = Google.useAuthRequest({\n  //   webClientId: extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n  //   clientId: extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n  //   iosClientId: extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n  //   androidClientId: extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n  //   scopes: ['profile', 'email'],\n  //   // request an access token so we can sign into Firebase client-side\n  //   responseType: 'token',\n  // });\n\n  const [request, response, promptAsync] = Google.useAuthRequest({\n    // Use the env variables directly with fallback to your 'extra' logic\n    webClientId: '447944956309-t92ug0tqs40adop6mnvifqbmfsi7dtj6.apps.googleusercontent.com',\n    // webClientId: process.env.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n    iosClientId: process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n    androidClientId: process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n    // Note: 'clientId' is usually the proxy/default ID\n    clientId: process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n    scopes: ['profile', 'email'],\n    responseType: 'token',\n  });\n\n  React.useEffect(() => {\n    (async () => {\n      if (response?.type === 'success') {\n        try {\n          setIsLoading(true);\n          // normalize potential ArrayBuffer/bytes to string\n          const rawToken = response.authentication?.accessToken || response.authentication?.idToken;\n          const tokenStr = normalizeToken(rawToken);\n          if (!tokenStr) throw new Error('No access token from Google');\n          // Sign into Firebase with the Google token to obtain a Firebase ID token (JWT)\n          const fb = await signInWithGoogle(getFirebaseAuth(), tokenStr);\n          const session = await firebaseAuthExchange(fb.idToken);\n          await signInWithToken(session);\n          if (Platform.OS !== 'web') {\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n          }\n          router.replace('/');\n        } catch (err: any) {\n          console.error('Google sign-in error', err);\n          Alert.alert('Google Sign-In Error', err?.message || String(err));\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    })();\n  }, [response]);\n\n  const handleSignIn = async () => {\n    console.log('handleSignIn invoked', { email, password });\n    if (!email || !password) {\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      Alert.alert('Error', 'Please enter your email and password');\n      return;\n    }\n\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    setIsLoading(true);\n    try {\n      const credential = await signInWithEmailAndPassword(\n        getFirebaseAuth(),\n        email.trim().toLowerCase(),\n        password\n      );\n      const idToken = await credential.user.getIdToken();\n      const session = await firebaseAuthExchange(idToken);\n      await signInWithToken(session);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n      router.replace('/');\n    } catch (error: any) {\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      console.error('Firebase sign-in error:', error);\n      Alert.alert('Error', error.message || 'Failed to sign in');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      style={styles.container}\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n    >\n      <View style={styles.content}>\n        <View style={styles.header}>\n          <Image\n            source={{ uri: 'https://api.tailtrails.club/assets/logo' }}\n            style={styles.logo}\n            contentFit=\"contain\"\n          />\n          <Text style={styles.title}>Welcome Back</Text>\n          <Text style={styles.subtitle}>Sign in to track your dog walks</Text>\n        </View>\n\n        <View style={styles.form}>\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Email</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"your@email.com\"\n              value={email}\n              onChangeText={setEmail}\n              autoCapitalize=\"none\"\n              keyboardType=\"email-address\"\n              autoComplete=\"email\"\n              editable={!isLoading}\n            />\n          </View>\n\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Password</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Enter your password\"\n              value={password}\n              onChangeText={setPassword}\n              secureTextEntry\n              autoCapitalize=\"none\"\n              autoComplete=\"password\"\n              editable={!isLoading}\n            />\n          </View>\n\n          <Pressable\n            style={({ pressed }) => [styles.button, isLoading && styles.buttonDisabled, pressed && styles.buttonPressed]}\n            onPress={handleSignIn}\n            onKeyDown={(e: any) => {\n              // allow Enter key activation on web\n              const k = e?.nativeEvent?.key || e?.key;\n              if (k === 'Enter') {\n                handleSignIn();\n              }\n            }}\n            accessibilityRole=\"button\"\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <ActivityIndicator color=\"#fff\" />\n            ) : (\n              <Text style={styles.buttonText}>Sign In</Text>\n            )}\n          </Pressable>\n\n          {/* <Pressable\n            style={({ pressed }) => [styles.button, { marginTop: 8, backgroundColor: '#db4437' }, pressed && styles.buttonPressed]}\n            onPress={async () => {\n              try {\n                if (Platform.OS !== 'web') {\n                  Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n                }\n                setIsLoading(true);\n                // Use the native flow (no proxy) in development client / standalone builds.\n                await promptAsync();\n              } catch (err: any) {\n                console.error('Prompt Google Auth error', err);\n                Alert.alert('Error', err?.message || String(err));\n                setIsLoading(false);\n              }\n            }}\n            disabled={!request || isLoading}\n            accessibilityRole=\"button\"\n          >\n            <Text style={styles.buttonText}>Sign in with Google</Text>\n          </Pressable> */}\n\n          <View style={styles.footer}>\n            <Text style={styles.footerText}>Don&apos;t have an account? </Text>\n            <TouchableOpacity onPress={() => {\n              if (Platform.OS !== 'web') {\n                Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n              }\n              router.push('/signup');\n            }}>\n              <Text style={styles.linkText}>Sign Up</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </KeyboardAvoidingView>\n  );\n}","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  header: {\n    height: 64,\n    paddingHorizontal: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderBottomWidth: 0,\n  },\n  backButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n  },\n  content: {\n    padding: 16,\n    gap: 16,\n  },\n  sectionCard: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 16,\n    padding: 18,\n    shadowColor: theme.borderSubtle,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.06,\n    shadowRadius: 12,\n    elevation: 3,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n    marginBottom: 12,\n  },\n  row: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: 'rgba(255,255,255,0.02)',\n  },\n  rowText: {\n    fontSize: 15,\n    color: theme.accentPrimary,\n  },\n  logoutCard: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    padding: 16,\n    marginTop: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  logoutText: {\n    fontSize: 15,\n    color: theme.accentPrimary,\n  },\n});\n","// Minimal shim for react-native-reanimated on web builds.\n// This prevents webpack from throwing \"Module not found\" when optional\n// requires are used inside native-only packages (e.g. react-native-gesture-handler).\n// The shim intentionally provides an empty object; if your app uses\n// reanimated-specific APIs on web this will not implement them.\nmodule.exports = {};\nmodule.exports.default = module.exports;\n","// Local copy of nanoid non-secure implementation to avoid package subpath resolution issues\nconst urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nconst customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nconst nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\nexport { nanoid, customAlphabet }\n","import React, { useState, useCallback, useEffect } from 'react';\n\nimport { useFocusEffect, useRouter } from 'expo-router';\n\nimport { Text, View, ScrollView, TouchableOpacity, Platform, ActivityIndicator, Animated, TextInput, Modal, FlatList } from 'react-native';\nimport { Image } from 'expo-image';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport * as Location from 'expo-location';\nimport * as Haptics from 'expo-haptics';\n\nimport { MapPin, Search, Heart, Umbrella, Bookmark, Star, X, BarChart3, Navigation, Icon, ChevronLeft } from 'lucide-react-native';\nimport theme from '@/constants/colors';\nimport { useTrails } from '@/context/TrailsContext';\nimport { Trail } from '@/types/trail';\nimport { formatDistance } from '@/utils/distance';\nimport TrailMapPreview from '@/components/TrailMapPreview';\n\nimport styles from './explore.styles';\n\n\n\nconst CATEGORIES = [\n  { id: 'nearby', name: 'Nearby', icon: MapPin },\n  { id: 'popular', name: 'Popular', icon: Heart },\n  { id: 'beaches', name: 'Beaches', icon: Umbrella },\n];\n\n\n\nexport default function ExploreScreen() {\n  const router = useRouter();\n  const insets = useSafeAreaInsets();\n  const { loadNearbyTrails, saveTrailBookmark, removeTrailBookmark, isTrailSaved } = useTrails();\n  const [selectedCategory, setSelectedCategory] = useState<string>('nearby');\n  const [nearbyTrails, setNearbyTrails] = useState<Trail[]>([]);\n  const [isLoadingNearby, setIsLoadingNearby] = useState<boolean>(true);\n  const [, setUserCity] = useState<string | undefined>(undefined);\n  const [bookmarkAnimations, setBookmarkAnimations] = useState<Record<string, Animated.Value>>({});\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [showSearchModal, setShowSearchModal] = useState<boolean>(false);\n  const [currentLocation, setCurrentLocation] = useState<string>('');\n  const [searchSuggestions, setSearchSuggestions] = useState<{id: string; name: string; location: string; type: string}[]>([]);\n\n  const loadUserLocationAndNearbyTrails = useCallback(async () => {\n    if (Platform.OS === 'web') {\n      setCurrentLocation('Current location');\n      // Try to get a quick browser location; if unavailable, load without coords\n      try {\n        if (navigator && navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(async (pos) => {\n            try {\n              const trails = await loadNearbyTrails(pos.coords.latitude, pos.coords.longitude);\n              setNearbyTrails(trails);\n            } catch (err) {\n              console.error('Failed to load nearby trails with browser location:', err);\n              const trails = await loadNearbyTrails();\n              setNearbyTrails(trails);\n            } finally {\n              setIsLoadingNearby(false);\n            }\n          }, async () => {\n            const trails = await loadNearbyTrails();\n            setNearbyTrails(trails);\n            setIsLoadingNearby(false);\n          });\n          return;\n        }\n      } catch (err) {\n        console.error('Geolocation not available on web:', err);\n      }\n\n      const trails = await loadNearbyTrails();\n      setNearbyTrails(trails);\n      setIsLoadingNearby(false);\n      return;\n    }\n\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      \n      if (status === 'granted') {\n        const location = await Location.getCurrentPositionAsync({\n          accuracy: Location.Accuracy.Balanced,\n        });\n\n        // Skip reverse geocoding to avoid rate limits. We only need lat/lon for nearby search.\n        setUserCity(undefined);\n        setCurrentLocation('Current location');\n        const trails = await loadNearbyTrails(location.coords.latitude, location.coords.longitude);\n        setNearbyTrails(trails);\n      } else {\n        setCurrentLocation('Location unavailable');\n        const trails = await loadNearbyTrails();\n        setNearbyTrails(trails);\n      }\n    } catch (error) {\n      console.error('Error loading location:', error);\n      setCurrentLocation('Location unavailable');\n      const trails = await loadNearbyTrails();\n      setNearbyTrails(trails);\n    } finally {\n      setIsLoadingNearby(false);\n    }\n  }, [loadNearbyTrails]);\n\n  useEffect(() => {\n    loadUserLocationAndNearbyTrails();\n  }, [loadUserLocationAndNearbyTrails]);\n\n  useFocusEffect(\n    useCallback(() => {\n      console.log('Explore tab focused - refreshing nearby trails');\n      loadUserLocationAndNearbyTrails();\n    }, [loadUserLocationAndNearbyTrails])\n  );\n\n  const loadSearchSuggestions = useCallback(() => {\n    const query = searchQuery.toLowerCase();\n    \n    const suggestions = nearbyTrails\n      .filter(trail => {\n        const name = trail.name?.toLowerCase() || '';\n        const city = trail.city?.toLowerCase() || '';\n        const country = trail.country?.toLowerCase() || '';\n        return name.includes(query) || city.includes(query) || country.includes(query);\n      })\n      .map(trail => ({\n        id: trail.id,\n        name: trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`,\n        location: trail.city ? `${trail.city}, ${trail.country || 'Unknown'}` : 'Location unknown',\n        type: 'trail',\n      }))\n      .slice(0, 6);\n\n    setSearchSuggestions(suggestions);\n  }, [searchQuery, nearbyTrails]);\n\n  useEffect(() => {\n    if (searchQuery.trim()) {\n      loadSearchSuggestions();\n    } else {\n      setSearchSuggestions([]);\n    }\n  }, [searchQuery, loadSearchSuggestions]);\n\n  const handleSearchBarPress = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(true);\n  };\n\n  const handleCloseSearchModal = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n  };\n\n  const handleSuggestionPress = (suggestionId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n    router.push(`/trail/${suggestionId}`);\n  };\n\n  const handleCurrentLocationPress = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n  };\n\n  const getBookmarkAnimation = (trailId: string) => {\n    if (!bookmarkAnimations[trailId]) {\n      const newAnim = new Animated.Value(1);\n      setBookmarkAnimations(prev => ({ ...prev, [trailId]: newAnim }));\n      return newAnim;\n    }\n    return bookmarkAnimations[trailId];\n  };\n\n  const isValidUUID = (id: string): boolean => {\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    return uuidRegex.test(id);\n  };\n\n  const handleBookmarkPress = async (trailId: string, isRealTrail: boolean = false) => {\n    if (!isRealTrail && !isValidUUID(trailId)) {\n      console.log('Cannot bookmark mock trail:', trailId);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      }\n      return;\n    }\n\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    const anim = getBookmarkAnimation(trailId);\n    const isSaved = isTrailSaved(trailId);\n\n    Animated.sequence([\n      Animated.timing(anim, {\n        toValue: 0.6,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.spring(anim, {\n        toValue: 1,\n        friction: 3,\n        tension: 100,\n        useNativeDriver: true,\n      }),\n    ]).start();\n\n    try {\n      if (isSaved) {\n        await removeTrailBookmark(trailId);\n      } else {\n        await saveTrailBookmark(trailId);\n        if (Platform.OS !== 'web') {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to toggle bookmark:', error);\n    }\n  };\n\n  const handleNavigateToTrail = (trailId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.push(`/trail/${trailId}`);\n  };\n\n  const handleCategoryPress = (categoryId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setSelectedCategory(categoryId);\n  };\n\n  const getFilteredTrails = useCallback((trails: Trail[]) => {\n    let filtered = trails;\n\n    if (selectedCategory === 'popular') {\n      filtered = [...filtered].sort((a, b) => (b.rating || 0) - (a.rating || 0));\n    } else if (selectedCategory === 'beaches') {\n      filtered = filtered.filter((trail) => {\n        const tags = trail.environment_tags || [];\n        return tags.some(tag => tag.toLowerCase().includes('beach'));\n      });\n    }\n\n    return filtered;\n  }, [selectedCategory]);\n\n  const filteredTrails = getFilteredTrails(nearbyTrails);\n\n  return (\n    <View style={styles.safeContainer}>\n      <ScrollView \n        style={styles.container} \n        showsVerticalScrollIndicator={false}\n        stickyHeaderIndices={[0]}\n      >\n        <View style={[styles.stickyHeader, { paddingTop: insets.top + 16 }]}>\n          <View style={styles.stickySearchContainer}>\n            <TouchableOpacity \n              style={styles.searchBar}\n              onPress={handleSearchBarPress}\n              activeOpacity={0.7}\n            >\n                      <Search size={20} color={theme.textMuted} />\n              <Text style={styles.searchPlaceholder}>Find trails</Text>\n            </TouchableOpacity>\n            {Platform.OS === 'web' && (\n              <TouchableOpacity \n                style={styles.demoButton}\n                onPress={() => router.push('/trail/demo-trail')}\n              >\n                <Text style={styles.demoButtonText}>Demo</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n\n          <View style={styles.categoriesSection}>\n            <ScrollView\n              horizontal\n              showsHorizontalScrollIndicator={false}\n              contentContainerStyle={styles.categoriesScroll}\n            >\n              {CATEGORIES.map((category) => {\n                const Icon = category.icon;\n                const isSelected = selectedCategory === category.id;\n                \n                return (\n                  <TouchableOpacity\n                    key={category.id}\n                    style={[\n                      styles.categoryButton,\n                      isSelected && styles.categoryButtonActive,\n                    ]}\n                    onPress={() => handleCategoryPress(category.id)}\n                  >\n                    <Icon\n                      size={20}\n                      color={isSelected ? theme.accentPrimary : theme.textMuted}\n                      strokeWidth={2}\n                    />\n                    <Text\n                      style={[\n                        styles.categoryText,\n                        isSelected && styles.categoryTextActive,\n                      ]}\n                    >\n                      {category.name}\n                    </Text>\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n          </View>\n        </View>\n\n      <View style={styles.categoryTrailsSection}>\n        {isLoadingNearby ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color={theme.textMuted} />\n            <Text style={styles.loadingText}>Loading trails...</Text>\n          </View>\n        ) : filteredTrails.length > 0 ? (\n          filteredTrails.map((trail) => {\n            const anim = getBookmarkAnimation(trail.id);\n            const isSaved = isTrailSaved(trail.id);\n            return (\n            <TouchableOpacity\n              key={trail.id}\n              style={styles.largeTrailCard}\n              onPress={() => handleNavigateToTrail(trail.id)}\n            >\n                {trail.photo ? (\n                <Image\n                  source={{ uri: trail.photo }}\n                  style={styles.largeTrailImage}\n                  contentFit=\"cover\"\n                  cachePolicy=\"memory-disk\"\n                />\n              ) : (\n                <TrailMapPreview\n                  coordinates={trail.coordinates}\n                  path={(trail as any).path}\n                  style={styles.largeTrailImage}\n                  startLatitude={(trail as any).startLatitude}\n                  startLongitude={(trail as any).startLongitude}\n                />\n              )}\n              \n              <LinearGradient\n                colors={['rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0.25)', 'rgba(0, 0, 0, 0.6)']}\n                locations={[0, 0.3, 0.6, 1]}\n                style={styles.cardGradient}\n              />\n              \n              <TouchableOpacity \n                style={styles.bookmarkButton}\n                onPress={(e) => {\n                  e.stopPropagation();\n                  handleBookmarkPress(trail.id, true);\n                }}\n              >\n                <Animated.View style={{ transform: [{ scale: anim }] }}>\n                  <Bookmark \n                    size={20} \n                    color={isSaved ? '#000' : theme.textMuted} \n                    fill={isSaved ? '#000' : 'none'}\n                    strokeWidth={2} \n                  />\n                </Animated.View>\n              </TouchableOpacity>\n              \n              <View style={styles.cardOverlayContent}>\n                <Text style={styles.overlayTrailName}>\n                  {trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`}\n                </Text>\n\n                <View style={styles.overlayBadges}>\n                  {trail.difficulty && (\n                    <View style={styles.badge}>\n                      <BarChart3 size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                      <Text style={styles.badgeText}>{trail.difficulty}</Text>\n                    </View>\n                  )}\n                  <View style={styles.badge}>\n                    <MapPin size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                    <Text style={styles.badgeText}>{formatDistance(trail.distance)}</Text>\n                  </View>\n                  {typeof (trail as any).distance_from_user === 'number' && (\n                    <View style={styles.badge}>\n                      <MapPin size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                      <Text style={styles.badgeText}>{formatDistance((trail as any).distance_from_user)}</Text>\n                    </View>\n                  )}\n                  {trail.rating && (\n                    <View style={styles.badge}>\n                      <Star size={14} color={theme.accentPrimary} fill={theme.accentPrimary} strokeWidth={2} />\n                      <Text style={styles.badgeText}>{trail.rating.toFixed(1)}</Text>\n                    </View>\n                  )}\n                </View>\n              </View>\n            </TouchableOpacity>\n            );\n          })\n        ) : (\n          <View style={styles.emptyContainer}>\n            <MapPin size={48} color=\"#9ca3af\" />\n            <Text style={styles.emptyText}>\n              No trails found yet. Record a trail to share with others!\n            </Text>\n          </View>\n        )}\n      </View>\n\n        <View style={styles.bottomPadding} />\n      </ScrollView>\n\n      <Modal\n        visible={showSearchModal}\n        animationType=\"slide\"\n        presentationStyle=\"fullScreen\"\n        onRequestClose={handleCloseSearchModal}\n      >\n        <View style={[styles.searchModalContainer, { paddingTop: insets.top }]}>\n          <View style={styles.searchModalHeader}>\n            <TouchableOpacity\n              style={styles.backButton}\n              onPress={handleCloseSearchModal}\n            >\n              <ChevronLeft size={24} color=\"#5d6b4a\" />\n            </TouchableOpacity>\n            <View style={styles.searchModalInputContainer}>\n              <TextInput\n                style={styles.searchModalInput}\n                placeholder=\"Find trails\"\n                placeholderTextColor=\"#9ca3af\"\n                value={searchQuery}\n                onChangeText={setSearchQuery}\n                autoFocus\n                returnKeyType=\"search\"\n              />\n              {searchQuery.length > 0 && (\n                <TouchableOpacity \n                  style={styles.clearButton}\n                  onPress={() => setSearchQuery('')}\n                >\n                  <X size={20} color=\"#64748b\" />\n                </TouchableOpacity>\n              )}\n            </View>\n          </View>\n\n          <View style={styles.searchModalContent}>\n            {searchQuery.trim() === '' && (\n              <TouchableOpacity\n                style={styles.currentLocationItem}\n                onPress={handleCurrentLocationPress}\n              >\n                <View style={styles.locationIconContainer}>\n                  <Navigation size={20} color=\"#5d6b4a\" />\n                </View>\n                <View style={styles.locationTextContainer}>\n                  <Text style={styles.locationTitle}>Current location</Text>\n                  <Text style={styles.locationSubtitle}>{currentLocation}</Text>\n                </View>\n              </TouchableOpacity>\n            )}\n\n            {searchSuggestions.length > 0 && (\n              <FlatList\n                data={searchSuggestions}\n                keyExtractor={(item) => item.id}\n                renderItem={({ item }) => (\n                  <TouchableOpacity\n                    style={styles.suggestionItem}\n                    onPress={() => handleSuggestionPress(item.id)}\n                  >\n                    <View style={styles.suggestionIconContainer}>\n                      <MapPin size={20} color=\"#64748b\" />\n                    </View>\n                    <View style={styles.suggestionTextContainer}>\n                      <Text style={styles.suggestionTitle}>{item.name}</Text>\n                      <Text style={styles.suggestionSubtitle}>{item.location}</Text>\n                    </View>\n                  </TouchableOpacity>\n                )}\n                showsVerticalScrollIndicator={false}\n              />\n            )}\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}","import React, { useState, useEffect, useRef } from 'react';\nimport { Text, View, StyleSheet, TouchableOpacity, TextInput, Image, Alert, ScrollView, Platform, ActivityIndicator } from 'react-native';\n\nimport { useRouter, Stack } from 'expo-router';\n\nimport { useDogs } from '@/context/DogsContext';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Haptics from 'expo-haptics';\n\nimport { ChevronDown, Camera, Upload, X } from 'lucide-react-native';\nimport theme from '@/constants/colors';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './dog-basics.styles';\n\nimport { DogSize, DOG_SIZES } from '@/types/dog-profile';\n\nexport default function DogBasicsScreen() {\n  const router = useRouter();\n  const insets = useSafeAreaInsets();\n  const { dogProfile } = useDogs();\n  const [name, setName] = useState<string>('');\n  const [nickname, setNickname] = useState<string>('');\n  const [age, setAge] = useState<string>('');\n  const [size, setSize] = useState<DogSize | null>(null);\n  const [photo, setPhoto] = useState<string | null>(null);\n  const [showSizePicker, setShowSizePicker] = useState<boolean>(false);\n  const [isLoadingImage, setIsLoadingImage] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (dogProfile) {\n      console.log('Loading existing dog profile for editing:', dogProfile);\n      setName(dogProfile.name);\n      setNickname(dogProfile.nickname || '');\n      setAge(dogProfile.age.toString());\n      setSize(dogProfile.size);\n      setPhoto(dogProfile.image || null);\n    }\n  }, [dogProfile]);\n\n  const pickImage = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'We need access to your photo library');\n      return;\n    }\n\n    setIsLoadingImage(true);\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.7,\n    });\n\n    setIsLoadingImage(false);\n\n    if (!result.canceled && result.assets[0]) {\n      setPhoto(result.assets[0].uri);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n    }\n  };\n\n  const takePhoto = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'We need camera access to take photos');\n      return;\n    }\n\n    setIsLoadingImage(true);\n    const result = await ImagePicker.launchCameraAsync({\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.7,\n    });\n\n    setIsLoadingImage(false);\n\n    if (!result.canceled && result.assets[0]) {\n      setPhoto(result.assets[0].uri);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n    }\n  };\n\n  const handleImagePicker = () => {\n    Alert.alert(\n      'Add Photo',\n      'Choose how you want to add a photo',\n      [\n        { text: 'Take Photo', onPress: takePhoto },\n        { text: 'Choose from Library', onPress: pickImage },\n        { text: 'Cancel', style: 'cancel' },\n      ]\n    );\n  };\n\n  const handleNext = () => {\n    if (!name.trim()) {\n      Alert.alert('Missing Information', 'Please enter your dog\\'s name');\n      return;\n    }\n\n    if (!size) {\n      Alert.alert('Missing Information', 'Please select your dog\\'s size');\n      return;\n    }\n\n    const parsedAge = parseInt(age, 10);\n    if (!age || isNaN(parsedAge) || parsedAge < 0 || parsedAge > 30) {\n      Alert.alert('Invalid Age', 'Please enter a valid age (0-30 years)');\n      return;\n    }\n\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    const navigationMethod = dogProfile ? 'replace' : 'push';\n    router[navigationMethod]({\n      pathname: '/onboarding/dog-personality' as any,\n      params: {\n        name: name.trim(),\n        nickname: nickname.trim(),\n        age: parsedAge.toString(),\n        size,\n        image: photo || '',\n        isEditing: dogProfile ? 'true' : 'false',\n      },\n    });\n  };\n\n  return (\n    <>\n      <Stack.Screen options={{ headerShown: false }} />\n      <ScrollView style={styles.container} contentContainerStyle={[styles.content, { paddingTop: insets.top + 20 }]}>\n        <TouchableOpacity\n          style={[styles.closeButton, { position: 'absolute', right: 16, top: insets.top + 12 }]}\n          onPress={() => router.back()}\n          accessibilityLabel=\"Close\"\n        >\n          <X size={20} color={theme.accentPrimary} />\n        </TouchableOpacity>\n        <View style={styles.header}>\n          <Text style={styles.title}>{dogProfile ? 'Edit dog profile' : 'Tell us about your dog'}</Text>\n          <Text style={styles.subtitle}>{dogProfile ? 'Update your dog\\'s information' : 'Let\\'s start with the basics'}</Text>\n          {!dogProfile && (\n            <View style={styles.progressContainer}>\n              <View style={[styles.progressDot, styles.progressDotActive]} />\n              <View style={styles.progressDot} />\n            </View>\n          )}\n        </View>\n\n        <TouchableOpacity\n          style={styles.photoContainer}\n          onPress={handleImagePicker}\n          disabled={isLoadingImage}\n        >\n          {isLoadingImage ? (\n            <ActivityIndicator size=\"large\" color=\"#FFFE77\" />\n          ) : photo ? (\n            <Image source={{ uri: photo }} style={styles.photo} />\n          ) : (\n            <View style={styles.photoPlaceholder}>\n              <Camera size={32} color=\"#FFFE77\" />\n              <Text style={styles.photoPlaceholderText}>Add Photo</Text>\n            </View>\n          )}\n          {photo && !isLoadingImage && (\n            <View style={styles.photoOverlay}>\n              <Upload size={24} color=\"#1a1f0a\" />\n            </View>\n          )}\n        </TouchableOpacity>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Name *</Text>\n          <TextInput\n            style={styles.input}\n            value={name}\n            onChangeText={setName}\n            placeholder=\"Enter your dog&apos;s name\"\n            placeholderTextColor=\"#5a6040\"\n            autoCapitalize=\"words\"\n            testID=\"dog-name-input\"\n          />\n        </View>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Nickname (Optional)</Text>\n          <TextInput\n            style={styles.input}\n            value={nickname}\n            onChangeText={setNickname}\n            placeholder=\"Enter a nickname\"\n            placeholderTextColor=\"#5a6040\"\n            autoCapitalize=\"words\"\n            testID=\"dog-nickname-input\"\n          />\n        </View>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Size *</Text>\n          <TouchableOpacity\n            style={styles.pickerButton}\n            onPress={() => {\n              if (Platform.OS !== 'web') {\n                Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n              }\n              setShowSizePicker(!showSizePicker);\n            }}\n            testID=\"size-picker-button\"\n          >\n            <Text style={[styles.pickerButtonText, !size && styles.pickerButtonTextPlaceholder]}>\n              {size || 'Select size'}\n            </Text>\n            <ChevronDown size={20} color=\"#a8ad8e\" />\n          </TouchableOpacity>\n          {showSizePicker && (\n            <View style={styles.pickerOptions}>\n              {DOG_SIZES.map((s) => (\n                <TouchableOpacity\n                  key={s}\n                  style={[styles.pickerOption, size === s && styles.pickerOptionSelected]}\n                  onPress={() => {\n                    if (Platform.OS !== 'web') {\n                      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                    }\n                    setSize(s);\n                    setShowSizePicker(false);\n                  }}\n                  testID={`size-option-${s}`}\n                >\n                  <Text style={[styles.pickerOptionText, size === s && styles.pickerOptionTextSelected]}>\n                    {s}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          )}\n        </View>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Age (years) *</Text>\n          <TextInput\n            style={styles.input}\n            value={age}\n            onChangeText={setAge}\n            placeholder=\"Enter age\"\n            placeholderTextColor=\"#5a6040\"\n            keyboardType=\"numeric\"\n            testID=\"dog-age-input\"\n          />\n        </View>\n\n        <TouchableOpacity\n          style={[styles.nextButton, { marginBottom: insets.bottom + 20 }]}\n          onPress={handleNext}\n          testID=\"next-button\"\n        >\n          <Text style={styles.nextButtonText}>Next</Text>\n        </TouchableOpacity>\n      </ScrollView>\n    </>\n  );\n}","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Text, View, StyleSheet, Platform, TouchableOpacity, Alert, ActivityIndicator, Animated, PanResponder, Dimensions, TextInput, Modal, ScrollView } from 'react-native';\n\nimport TrailMap from '@/components/TrailMap';\nimport { Image } from 'expo-image';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Location from 'expo-location';\nimport * as TaskManager from 'expo-task-manager';\nimport * as Haptics from 'expo-haptics';\n\nimport { useLocalSearchParams, useRouter } from 'expo-router';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport { Square, Play, MapPin, Watch, Bell, ChevronUp, Navigation, ChevronDown, Upload } from 'lucide-react-native';\nimport styles from './record.styles';\nimport theme from '@/constants/colors';\nimport { useTrails } from '@/context/TrailsContext';\nimport { useAuth } from '@/context/AuthContext';\n\nimport { Coordinate, Trail } from '@/types/trail';\n\nimport { formatDistance, calculateTotalDistance, formatDuration } from '@/utils/distance';\n\nconst LOCATION_TRACKING_TASK = 'background-location-task';\n\nif (Platform.OS !== 'web') {\n  TaskManager.defineTask(LOCATION_TRACKING_TASK, async ({ data, error }: { data: any; error: any }) => {\n    if (error) {\n      console.error('Background location error:', error);\n      return;\n    }\n    if (data) {\n      const { locations } = data as any;\n      const location = locations[0];\n\n      if (location) {\n        console.log('Background location update:', location.coords);\n\n        try {\n          const coordsStr = await AsyncStorage.getItem('recording_coordinates');\n          const coords = coordsStr ? JSON.parse(coordsStr) : [];\n\n          const newCoord = {\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n          };\n\n          coords.push(newCoord);\n          await AsyncStorage.setItem('recording_coordinates', JSON.stringify(coords));\n\n          if (location.coords.altitude) {\n            const currentElevation = Math.max(0, location.coords.altitude);\n            const maxElevationStr = await AsyncStorage.getItem('recording_max_elevation');\n            const maxElevation = maxElevationStr ? parseFloat(maxElevationStr) : 0;\n\n            if (currentElevation > maxElevation) {\n              await AsyncStorage.setItem('recording_max_elevation', currentElevation.toString());\n            }\n          }\n\n          if (location.coords.speed && location.coords.speed > 0) {\n            const currentSpeed = location.coords.speed * 3.6;\n            const maxSpeedStr = await AsyncStorage.getItem('recording_max_speed');\n            const maxSpeed = maxSpeedStr ? parseFloat(maxSpeedStr) : 0;\n\n            if (currentSpeed > maxSpeed) {\n              await AsyncStorage.setItem('recording_max_speed', currentSpeed.toString());\n            }\n          }\n\n          await AsyncStorage.setItem('recording_last_update', Date.now().toString());\n        } catch (err) {\n          console.error('Error storing location:', err);\n        }\n      }\n    }\n  });\n}\n\nexport default function RecordScreen() {\n  const { saveTrail, getTrailById } = useTrails();\n  const { user } = useAuth();\n  const params = useLocalSearchParams();\n  const router = useRouter();\n  const trailId = typeof params.trailId === 'string' ? params.trailId : undefined;\n  const existingTrail = trailId ? getTrailById(trailId) : undefined;\n  const mapRef = useRef<any>(null);\n\n  const [isRecording, setIsRecording] = useState<boolean>(false);\n  const [coordinates, setCoordinates] = useState<Coordinate[]>([]);\n  const [currentLocation, setCurrentLocation] = useState<Coordinate | null>(null);\n  const [duration, setDuration] = useState<number>(0);\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\n  const [isLoadingPermission, setIsLoadingPermission] = useState<boolean>(true);\n  const [startLocation, setStartLocation] = useState<{ city?: string; country?: string } | null>(null);\n  // geocoding removed  we rely on coordinates only\n\n  const locationSubscription = useRef<Location.LocationSubscription | null>(null);\n  const timerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const bottomSheetHeight = Dimensions.get('window').height * 0.5;\n  // Collapsed bottom sheet height (reduced for a slimmer compact overlay)\n  const collapsedHeight = 40;\n  const navbarHeight = Platform.OS === 'ios' ? 100 : 92;\n  const bottomSheetAnim = useRef(new Animated.Value(collapsedHeight)).current;\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n  const [elevation, setElevation] = useState<number>(0);\n  const [maxElevation, setMaxElevation] = useState<number>(0);\n  const [pace, setPace] = useState<string>('0:00');\n  const [speed, setSpeed] = useState<number>(0);\n  const [maxSpeed, setMaxSpeed] = useState<number>(0);\n  const [showSaveModal, setShowSaveModal] = useState<boolean>(false);\n  const [draftTrail, setDraftTrail] = useState<Partial<Trail> | null>(null);\n  // fields for the save form\n  const [formName, setFormName] = useState<string>('');\n  const [formDescription, setFormDescription] = useState<string>('');\n  const [formPhoto, setFormPhoto] = useState<string | undefined>(undefined);\n  const [formTags, setFormTags] = useState<string[]>([]);\n  const [formDifficulty, setFormDifficulty] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    if (Platform.OS !== 'web') {\n      requestPermissions();\n      loadRecordingState();\n\n      const interval = setInterval(() => {\n        loadRecordingState();\n      }, 1000);\n\n      return () => {\n        clearInterval(interval);\n        if (locationSubscription.current) {\n          locationSubscription.current.remove();\n        }\n        if (timerRef.current) {\n          clearInterval(timerRef.current);\n        }\n      };\n    } else {\n      setIsLoadingPermission(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const loadRecordingState = async () => {\n    try {\n      const coordsStr = await AsyncStorage.getItem('recording_coordinates');\n      if (coordsStr) {\n        const coords = JSON.parse(coordsStr);\n        setCoordinates(coords);\n      }\n\n      const maxElevationStr = await AsyncStorage.getItem('recording_max_elevation');\n      if (maxElevationStr) {\n        setMaxElevation(parseFloat(maxElevationStr));\n      }\n\n      const maxSpeedStr = await AsyncStorage.getItem('recording_max_speed');\n      if (maxSpeedStr) {\n        setMaxSpeed(parseFloat(maxSpeedStr));\n      }\n\n      if (isRecording) {\n        const startTimeStr = await AsyncStorage.getItem('recording_start_time');\n        if (startTimeStr) {\n          const startTime = parseInt(startTimeStr);\n          const elapsed = Math.floor((Date.now() - startTime) / 1000);\n          setDuration(elapsed);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading recording state:', error);\n    }\n  };\n\n  const requestPermissions = async () => {\n    try {\n      console.log('Requesting location permissions...');\n\n      const { status: foregroundStatus } = await Location.requestForegroundPermissionsAsync();\n      console.log('Foreground permission status:', foregroundStatus);\n\n      if (foregroundStatus === 'granted') {\n        try {\n          const { status: backgroundStatus } = await Location.requestBackgroundPermissionsAsync();\n          console.log('Background permission status:', backgroundStatus);\n\n          if (backgroundStatus !== 'granted') {\n            Alert.alert(\n              'Background Location Required',\n              'To continue recording your trail when the screen is locked, please enable \"Allow all the time\" in location settings.',\n              [{ text: 'OK' }]\n            );\n          }\n        } catch (bgError: any) {\n          console.warn('Background permission error (non-critical):', bgError.message);\n        }\n\n        setHasPermission(true);\n\n        try {\n          const location = await Location.getCurrentPositionAsync({\n            accuracy: Location.Accuracy.Balanced,\n          });\n          const coord = {\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n          };\n          setCurrentLocation(coord);\n          console.log('Initial location:', coord);\n        } catch (locError: any) {\n          console.warn('Error getting initial location:', locError.message);\n        }\n      } else {\n        setHasPermission(false);\n        Alert.alert(\n          'Permission Required',\n          'Location permission is required to track your walks.',\n          [{ text: 'OK' }]\n        );\n      }\n    } catch (error: any) {\n      console.error('Permission error:', error);\n      const errorMessage = error.message || 'Failed to get location permission';\n\n      if (errorMessage.includes('NSLocation') || errorMessage.includes('Info.plist')) {\n        Alert.alert(\n          'Configuration Error',\n          'This app needs to be built with a custom development build to use location tracking. Expo Go doesn\\'t support background location tracking.\\n\\nPlease contact support or build a custom development client.',\n          [{ text: 'OK' }]\n        );\n      } else {\n        Alert.alert('Error', errorMessage);\n      }\n\n      setHasPermission(false);\n    } finally {\n      setIsLoadingPermission(false);\n    }\n  };\n\n  // removed getReverseGeocode to avoid geocoding rate limits; we don't need city/country\n\n  const startRecording = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n    }\n    console.log('Starting recording...');\n    setIsRecording(true);\n    setCoordinates([]);\n    setDuration(0);\n    setMaxElevation(0);\n    setMaxSpeed(0);\n\n    try {\n      const startTime = Date.now();\n      await AsyncStorage.setItem('recording_start_time', startTime.toString());\n      await AsyncStorage.removeItem('recording_coordinates');\n      await AsyncStorage.removeItem('recording_max_elevation');\n      await AsyncStorage.removeItem('recording_max_speed');\n      await AsyncStorage.removeItem('recording_last_update');\n\n      const location = await Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.Balanced,\n      });\n\n      // do not perform reverse geocoding  only keep coordinates\n      setStartLocation(null);\n\n      const initialCoord = {\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude,\n      };\n      await AsyncStorage.setItem('recording_coordinates', JSON.stringify([initialCoord]));\n      setCoordinates([initialCoord]);\n      setCurrentLocation(initialCoord);\n\n      try {\n        await Location.startLocationUpdatesAsync(LOCATION_TRACKING_TASK, {\n          accuracy: Location.Accuracy.BestForNavigation,\n          distanceInterval: 3,\n          timeInterval: 1000,\n          foregroundService: {\n            notificationTitle: 'Recording Trail',\n            notificationBody: 'TailTrails is tracking your walk',\n            notificationColor: '#2563eb',\n          },\n          pausesUpdatesAutomatically: false,\n          showsBackgroundLocationIndicator: true,\n        });\n        console.log('Background location tracking started successfully');\n      } catch (bgLocationError: any) {\n        console.warn('Background location not available:', bgLocationError.message);\n        if (bgLocationError.message?.includes('Background location') || bgLocationError.message?.includes('UIBackgroundModes')) {\n          Alert.alert(\n            'Background Tracking Unavailable',\n            'Background location tracking requires a custom development build. The app will continue recording in foreground mode only. Please keep the app open while recording.',\n            [{ text: 'OK' }]\n          );\n        }\n      }\n\n      locationSubscription.current = await Location.watchPositionAsync(\n        {\n          accuracy: Location.Accuracy.BestForNavigation,\n          distanceInterval: 3,\n          timeInterval: 1000,\n        },\n        async (location) => {\n          const coord = {\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n          };\n          console.log('Foreground position update:', coord, 'Accuracy:', location.coords.accuracy);\n          setCurrentLocation(coord);\n\n          setCoordinates(prev => {\n            const newCoords = [...prev, coord];\n            console.log('Total coordinates:', newCoords.length, 'Distance:', calculateTotalDistance(newCoords), 'm');\n            AsyncStorage.setItem('recording_coordinates', JSON.stringify(newCoords)).catch(err => {\n              console.error('Error saving coordinates:', err);\n            });\n            return newCoords;\n          });\n\n          if (location.coords.altitude) {\n            const currentElevation = Math.max(0, location.coords.altitude);\n            setElevation(currentElevation);\n            if (currentElevation > maxElevation) {\n              setMaxElevation(currentElevation);\n              await AsyncStorage.setItem('recording_max_elevation', currentElevation.toString());\n            }\n          }\n\n          if (location.coords.speed && location.coords.speed > 0) {\n            const currentSpeed = location.coords.speed * 3.6;\n            setSpeed(currentSpeed);\n            if (currentSpeed > maxSpeed) {\n              setMaxSpeed(currentSpeed);\n              await AsyncStorage.setItem('recording_max_speed', currentSpeed.toString());\n            }\n          }\n        }\n      );\n\n      timerRef.current = setInterval(async () => {\n        try {\n          const startTimeStr = await AsyncStorage.getItem('recording_start_time');\n          if (startTimeStr) {\n            const startTime = parseInt(startTimeStr);\n            const elapsed = Math.floor((Date.now() - startTime) / 1000);\n            setDuration(elapsed);\n          }\n        } catch (error) {\n          console.error('Error calculating duration:', error);\n        }\n      }, 1000);\n    } catch (error: any) {\n      console.error('Recording error:', error);\n      let errorMessage = 'Failed to start recording. Please try again.';\n\n      if (error.message?.includes('rate limit')) {\n        errorMessage = 'Please wait a moment before starting a new recording. Location service is temporarily limited.';\n      } else if (error.message?.includes('Background location') || error.message?.includes('UIBackgroundModes')) {\n        errorMessage = 'Background location tracking requires a custom development build. Please build the app with EAS or use foreground-only mode.';\n      }\n\n      Alert.alert('Error', errorMessage);\n      setIsRecording(false);\n    }\n  };\n\n  useEffect(() => {\n    if (duration > 0) {\n      const distance = calculateTotalDistance(coordinates);\n      const distanceKm = distance / 1000;\n      const durationMin = duration / 60;\n\n      if (distanceKm > 0) {\n        const paceMinPerKm = durationMin / distanceKm;\n        const minutes = Math.floor(paceMinPerKm);\n        const seconds = Math.round((paceMinPerKm - minutes) * 60);\n        setPace(`${minutes}:${seconds.toString().padStart(2, '0')}`);\n      }\n    }\n  }, [duration, coordinates]);\n\n  const initialHeight = useRef<number>(0);\n\n  const panResponder = useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: (_, gestureState) => {\n        return Math.abs(gestureState.dy) > 5;\n      },\n      onPanResponderGrant: () => {\n        initialHeight.current = (bottomSheetAnim as any)._value;\n      },\n      onPanResponderMove: (_, gestureState) => {\n        const newValue = initialHeight.current - gestureState.dy;\n\n        if (newValue >= collapsedHeight && newValue <= bottomSheetHeight) {\n          bottomSheetAnim.setValue(newValue);\n        }\n      },\n      onPanResponderRelease: (_, gestureState) => {\n        if (Platform.OS !== 'web') {\n          Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n        }\n\n        const threshold = (bottomSheetHeight + collapsedHeight) / 2;\n        const currentValue = (bottomSheetAnim as any)._value;\n\n        if (gestureState.dy < -50) {\n          expandBottomSheet();\n        } else if (gestureState.dy > 50) {\n          collapseBottomSheet();\n        } else if (currentValue > threshold) {\n          expandBottomSheet();\n        } else {\n          collapseBottomSheet();\n        }\n      },\n    })\n  ).current;\n\n  const expandBottomSheet = () => {\n    setIsExpanded(true);\n    Animated.spring(bottomSheetAnim, {\n      toValue: bottomSheetHeight,\n      useNativeDriver: false,\n      tension: 50,\n      friction: 8,\n    }).start();\n  };\n\n  const collapseBottomSheet = () => {\n    setIsExpanded(false);\n    Animated.spring(bottomSheetAnim, {\n      toValue: collapsedHeight,\n      useNativeDriver: false,\n      tension: 50,\n      friction: 8,\n    }).start();\n  };\n\n  const toggleBottomSheet = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    if (isExpanded) {\n      collapseBottomSheet();\n    } else {\n      expandBottomSheet();\n    }\n  };\n\n  const stopRecording = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n    }\n    console.log('Stopping recording...');\n\n    try {\n      const hasTask = await TaskManager.isTaskRegisteredAsync(LOCATION_TRACKING_TASK);\n      if (hasTask) {\n        await Location.stopLocationUpdatesAsync(LOCATION_TRACKING_TASK);\n      }\n    } catch (error) {\n      console.error('Error stopping background location:', error);\n    }\n\n    if (locationSubscription.current) {\n      locationSubscription.current.remove();\n      locationSubscription.current = null;\n    }\n\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n\n    const coordsStr = await AsyncStorage.getItem('recording_coordinates');\n    const finalCoords = coordsStr ? JSON.parse(coordsStr) : coordinates;\n\n    const maxElevationStr = await AsyncStorage.getItem('recording_max_elevation');\n    const finalMaxElevation = maxElevationStr ? parseFloat(maxElevationStr) : maxElevation;\n\n    const maxSpeedStr = await AsyncStorage.getItem('recording_max_speed');\n    const finalMaxSpeed = maxSpeedStr ? parseFloat(maxSpeedStr) : maxSpeed;\n\n    const startTimeStr = await AsyncStorage.getItem('recording_start_time');\n    const finalDuration = startTimeStr ? Math.floor((Date.now() - parseInt(startTimeStr)) / 1000) : duration;\n\n    if (finalCoords.length < 2) {\n      Alert.alert('No Trail Data', 'Not enough data to save this trail. Try walking a bit more!');\n      setIsRecording(false);\n      setCoordinates([]);\n      setDuration(0);\n      await AsyncStorage.removeItem('recording_coordinates');\n      await AsyncStorage.removeItem('recording_max_elevation');\n      await AsyncStorage.removeItem('recording_max_speed');\n      await AsyncStorage.removeItem('recording_start_time');\n      await AsyncStorage.removeItem('recording_last_update');\n      return;\n    }\n\n    const distance = calculateTotalDistance(finalCoords);\n\n    const distanceKm = distance / 1000;\n    const durationMin = finalDuration / 60;\n    let finalPace = '0:00';\n    if (distanceKm > 0) {\n      const paceMinPerKm = durationMin / distanceKm;\n      const minutes = Math.floor(paceMinPerKm);\n      const seconds = Math.round((paceMinPerKm - minutes) * 60);\n      finalPace = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n    }\n\n    const trail: Trail = {\n      id: Date.now().toString(),\n      date: Date.now(),\n      distance,\n      duration: finalDuration,\n      coordinates: finalCoords,\n      city: startLocation?.city,\n      country: startLocation?.country,\n      pace: finalPace,\n      speed: finalMaxSpeed,\n      maxElevation: finalMaxElevation,\n    };\n    // Instead of POSTing immediately, open save modal with draft data\n    setDraftTrail(trail);\n    setFormName(trail.name || '');\n    setFormDescription((trail as any).description || '');\n    setFormPhoto((trail as any).photo || undefined);\n    setFormTags((trail as any).tags || []);\n    setFormDifficulty((trail as any).difficulty || undefined);\n    setShowSaveModal(true);\n    return;\n  };\n\n  const submitSave = async () => {\n    if (!draftTrail) return;\n    const toSave: Trail = {\n      ...(draftTrail as Trail),\n      name: formName || (draftTrail as any).name || 'Untitled Trail',\n      description: formDescription,\n      photo: formPhoto,\n      tags: formTags,\n      difficulty: formDifficulty,\n    };\n\n    try {\n      const saved = await saveTrail(toSave);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n      setShowSaveModal(false);\n      setDraftTrail(null);\n      setIsRecording(false);\n      setCoordinates([]);\n      setDuration(0);\n      setStartLocation(null);\n      setElevation(0);\n      setMaxElevation(0);\n      setPace('0:00');\n      setSpeed(0);\n      setMaxSpeed(0);\n\n      await AsyncStorage.removeItem('recording_coordinates');\n      await AsyncStorage.removeItem('recording_max_elevation');\n      await AsyncStorage.removeItem('recording_max_speed');\n      await AsyncStorage.removeItem('recording_start_time');\n      await AsyncStorage.removeItem('recording_last_update');\n      // Redirect to profile tab after saving\n      router.push('/(tabs)/profile');\n    } catch (err) {\n      console.error('Save failed', err);\n      Alert.alert('Error', 'Failed to save trail');\n    }\n  };\n\n  const pickImage = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'Please allow access to your photo library');\n      return;\n    }\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsEditing: true,\n      aspect: [16, 9],\n      quality: 0.8,\n    });\n\n    if (!result.canceled && result.assets[0]) {\n      setFormPhoto(result.assets[0].uri);\n    }\n  };\n\n  const cancelSave = () => {\n    setShowSaveModal(false);\n    setDraftTrail(null);\n  };\n\n\n  if (isLoadingPermission && Platform.OS !== 'web') {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n        <Text style={styles.loadingText}>Checking permissions...</Text>\n      </View>\n    );\n  }\n\n  if (!hasPermission) {\n    return (\n      <View style={styles.permissionContainer}>\n        <MapPin size={64} color=\"#666\" />\n        <Text style={styles.permissionTitle}>Location Permission Required</Text>\n        <Text style={styles.permissionText}>\n          This app needs access to your location to track your dog walks.\n        </Text>\n        <TouchableOpacity\n          style={styles.permissionButton}\n          onPress={() => {\n            if (Platform.OS !== 'web') {\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n            }\n            requestPermissions();\n          }}\n        >\n          <Text style={styles.permissionButtonText}>Grant Permission</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  const distance = calculateTotalDistance(coordinates);\n\n  const progress = existingTrail && isRecording && coordinates.length > 0 && existingTrail.coordinates.length > 0\n    ? Math.min((distance / existingTrail.distance) * 100, 100)\n    : 0;\n\n  const showProgress = !!existingTrail;\n\n  const recenterMap = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    if (mapRef.current) {\n      try {\n        const location = await Location.getCurrentPositionAsync({\n          accuracy: Location.Accuracy.Balanced,\n        });\n        const coord = {\n          latitude: location.coords.latitude,\n          longitude: location.coords.longitude,\n        };\n        setCurrentLocation(coord);\n        mapRef.current.animateToRegion({\n          latitude: coord.latitude,\n          longitude: coord.longitude,\n          latitudeDelta: 0.01,\n          longitudeDelta: 0.01,\n        }, 500);\n      } catch (error) {\n        console.error('Error getting current location:', error);\n        if (currentLocation) {\n          mapRef.current.animateToRegion({\n            latitude: currentLocation.latitude,\n            longitude: currentLocation.longitude,\n            latitudeDelta: 0.01,\n            longitudeDelta: 0.01,\n          }, 500);\n        }\n      }\n    }\n  };\n\n  // adjust bottom sheet content padding when collapsed so compact stats aren't pushed out\n  const contentPaddingBottom = isExpanded ? navbarHeight : 12;\n\n  return (\n    <View style={styles.container}>\n      {currentLocation && (\n        <TrailMap\n          ref={mapRef}\n          coordinates={coordinates}\n          style={styles.map}\n          initialRegion={{\n            latitude: currentLocation.latitude,\n            longitude: currentLocation.longitude,\n            latitudeDelta: 0.01,\n            longitudeDelta: 0.01,\n          }}\n          showsUserLocation\n          followsUserLocation={isRecording}\n          showsMyLocationButton={false}\n        />\n      )}\n\n      <TouchableOpacity\n        style={styles.recenterButton}\n        onPress={recenterMap}\n        activeOpacity={0.8}\n      >\n        <Navigation size={24} color={theme.accentPrimary} />\n      </TouchableOpacity>\n\n      <Animated.View\n        style={[\n          styles.bottomSheet,\n          {\n            height: Animated.add(bottomSheetAnim, navbarHeight),\n            bottom: 0,\n          },\n        ]}\n      >\n        <View {...panResponder.panHandlers} style={styles.handleBar}>\n          <TouchableOpacity\n            style={styles.handleContainer}\n            onPress={toggleBottomSheet}\n            activeOpacity={0.7}\n          >\n            <View style={styles.handle} />\n            {isExpanded ? (\n              <ChevronDown size={20} color=\"#9ca3af\" />\n            ) : (\n              <ChevronUp size={20} color=\"#9ca3af\" />\n            )}\n          </TouchableOpacity>\n        </View>\n\n        <View style={[styles.bottomSheetContent, { paddingBottom: contentPaddingBottom }] }>\n          {/* Overlay states:\n              - not recording: show only the large Start Trail button\n              - recording & collapsed: show compact time/distance + stop button\n              - recording & expanded: show full stats grid + stop button\n          */}\n          {!isRecording ? null : !isExpanded ? (\n            <View style={styles.compactRow}>\n              <View style={styles.compactStats}>\n                <View style={styles.compactStatBox}>\n                  <Text style={styles.statItemLabel}>Time</Text>\n                  <Text style={styles.statItemValue}>{formatDuration(duration)}</Text>\n                </View>\n                <View style={styles.compactStatBox}>\n                  <Text style={styles.statItemLabel}>Distance</Text>\n                  <Text style={styles.statItemValue}>{formatDistance(distance)}</Text>\n                </View>\n              </View>\n              <TouchableOpacity style={styles.stopButtonCompact} onPress={stopRecording} activeOpacity={0.8}>\n                <Square size={18} color=\"#fff\" fill=\"#fff\" />\n                <Text style={styles.stopButtonCompactText}>Stop</Text>\n              </TouchableOpacity>\n            </View>\n          ) : (\n            <View style={styles.statsGrid}>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Time</Text>\n              <Text style={styles.statItemValue}>{formatDuration(duration)}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Distance</Text>\n              <Text style={styles.statItemValue}>{formatDistance(distance)}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Elevation</Text>\n              <Text style={styles.statItemValue}>{elevation.toFixed(0)}m</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Pace</Text>\n              <Text style={styles.statItemValue}>{pace}/km</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Speed</Text>\n              <Text style={styles.statItemValue}>{speed.toFixed(1)} km/h</Text>\n            </View>\n            {showProgress && (\n              <View style={styles.statItem}>\n                <Text style={styles.statItemLabel}>Progress</Text>\n                <Text style={styles.statItemValue}>{progress.toFixed(0)}%</Text>\n              </View>\n            )}\n            </View>\n          )}\n\n          {/* Primary control area */}\n          {!isRecording ? (\n            <View style={styles.controlContainer}>\n              <TouchableOpacity\n                style={styles.recordButton}\n                onPress={startRecording}\n                activeOpacity={0.8}\n              >\n                <Play size={24} color={theme.backgroundPrimary} fill={theme.backgroundPrimary} />\n                <Text style={styles.recordButtonText}>Start Trail</Text>\n              </TouchableOpacity>\n            </View>\n          ) : isExpanded ? (\n            <View style={styles.controlContainer}>\n              <TouchableOpacity\n                style={styles.recordButton}\n                onPress={stopRecording}\n                activeOpacity={0.8}\n              >\n                <Square size={20} color={theme.backgroundPrimary} fill={theme.backgroundPrimary} />\n                <Text style={styles.recordButtonText}>Stop & Save</Text>\n              </TouchableOpacity>\n            </View>\n          ) : null}\n        </View>\n      </Animated.View>\n      <Modal\n        visible={showSaveModal}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={cancelSave}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContainer}>\n            <ScrollView contentContainerStyle={styles.modalContent}>\n              <Text style={styles.modalTitle}>Save Trail</Text>\n              <TextInput\n                placeholder=\"Trail name\"\n                value={formName}\n                onChangeText={setFormName}\n                style={styles.input}\n                placeholderTextColor={theme.backgroundPrimary}\n              />\n              <TextInput\n                placeholder=\"Description\"\n                value={formDescription}\n                onChangeText={setFormDescription}\n                style={[styles.input, { height: 100 }]}\n                placeholderTextColor={theme.backgroundPrimary}\n                multiline\n              />\n              <TouchableOpacity onPress={pickImage} style={[styles.input, { padding: 12, justifyContent: 'center', alignItems: 'center', flexDirection: 'row' }]}>\n                {formPhoto ? (\n                  <>\n                    <Image source={{ uri: formPhoto }} style={{ width: 80, height: 60, borderRadius: 8, marginRight: 12 }} />\n                    <Text style={{ flex: 1 }}>{formName || 'Selected image'}</Text>\n                    <Upload size={18} color={theme.backgroundPrimary} />\n                  </>\n                ) : (\n                  <>\n                    <Upload size={18} color={theme.backgroundPrimary} />\n                    <Text style={{ marginLeft: 8, color: theme.backgroundPrimary }}>Add Photo (optional)</Text>\n                  </>\n                )}\n              </TouchableOpacity>\n\n              <View style={{ flexDirection: 'row', gap: 8, marginTop: 8 }}>\n                <TouchableOpacity style={styles.modalButton} onPress={cancelSave}>\n                  <Text style={styles.modalButtonText}>Cancel</Text>\n                </TouchableOpacity>\n                <TouchableOpacity style={[styles.modalButton, styles.modalButtonPrimary]} onPress={submitSave}>\n                  <Text style={[styles.modalButtonText, { color: '#fff' }]}>Save Trail</Text>\n                </TouchableOpacity>\n              </View>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\n// styles are imported from record.styles.ts\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  container: {\n    width: '100%',\n    paddingHorizontal: 0,\n    paddingTop: 0,\n    alignItems: 'center',\n  },\n  tabBar: {\n    flexDirection: 'row',\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 0,\n    paddingVertical: 8,\n    paddingHorizontal: 8,\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 8,\n    width: '100%',\n    gap: 6,\n  },\n  tabButton: {\n    height: 64,\n    borderRadius: 16,\n    overflow: 'hidden',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  tabTouchable: {\n    flex: 1,\n    width: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  tabContent: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 4,\n    paddingHorizontal: 0,\n  },\n  iconWrapper: {\n    width: 22,\n    height: 22,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  label: {\n    color: theme.textMuted,\n    fontSize: 13,\n    fontWeight: '600',\n  },\n  labelActive: {\n    color: theme.accentPrimary,\n  },\n});\n","import React, { useEffect, useRef } from 'react';\nimport { TouchableOpacity, View, StyleSheet, Animated, Text, Platform } from 'react-native';\nimport type { BottomTabBarProps } from '@react-navigation/bottom-tabs';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport * as Haptics from 'expo-haptics';\nimport styles from './AnimatedTabBar.styles';\nimport theme from '@/constants/colors';\n\n\nconsole.log('[init] components/AnimatedTabBar.tsx loaded');\n\nexport function AnimatedTabBar({ state, descriptors, navigation }: BottomTabBarProps) {\n  const insets = useSafeAreaInsets();\n  const animatedValues = useRef(\n    state.routes.map(() => new Animated.Value(0))\n  ).current;\n\n  useEffect(() => {\n    // Debug: log current navigation state to detect unexpected extra tabs\n    console.log('AnimatedTabBar state.index:', state.index);\n    console.log('AnimatedTabBar routes:', state.routes.map(r => ({ name: r.name, key: r.key })));\n    console.log('AnimatedTabBar descriptors keys:', Object.keys(descriptors));\n\n    state.routes.forEach((route, index) => {\n      Animated.timing(animatedValues[index], {\n        toValue: state.index === index ? 1 : 0,\n        duration: 300,\n        useNativeDriver: false,\n      }).start();\n    });\n  }, [state.index, state.routes, animatedValues]);\n\n  // Put the safe-area padding on the tabBar itself so its background\n  // extends to the bottom of the screen and there is no white gap.\n  const tabBarPaddingBottom = Math.max(insets.bottom, Platform.OS === 'android' ? 12 : 8);\n\n  return (\n    <View style={styles.container}>\n      <View style={[styles.tabBar, { paddingBottom: tabBarPaddingBottom }]}>\n        {/**\n         * Render only routes that expose tab bar options (title/label/icon).\n         * File-based routing sometimes injects extra routes; this guard\n         * prevents rendering unexpected tabs while we diagnose the cause.\n         */}\n        {state.routes\n          .filter(route => {\n            const opts = descriptors[route.key]?.options;\n            return !!(opts && (opts.tabBarLabel || opts.title || opts.tabBarIcon));\n          })\n          .map((route, index) => {\n          const { options } = descriptors[route.key];\n          const label = options.tabBarLabel !== undefined\n            ? options.tabBarLabel\n            : options.title !== undefined\n            ? options.title\n            : route.name;\n\n          const isFocused = state.index === index;\n\n          const onPress = () => {\n            if (Platform.OS !== 'web') {\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n            }\n\n            const event = navigation.emit({\n              type: 'tabPress',\n              target: route.key,\n              canPreventDefault: true,\n            });\n\n            if (!isFocused && !event.defaultPrevented) {\n              navigation.navigate(route.name);\n            }\n          };\n\n          const animatedValue = animatedValues[index];\n\n          // Always render the tab with icon above and label below.\n          // Keep a small animation for selection, but use a fixed button width so\n          // labels remain visible across all tabs.\n          const buttonWidth = 72;\n          const backgroundColor = theme.backgroundPrimary; // No animation for background color, keep it consistent\n          const textOpacity = 1; // labels are always visible now\n          const iconColor = isFocused ? theme.accentPrimary : theme.textMuted;\n          const textColor = isFocused ? theme.accentPrimary : theme.textMuted;\n\n          return (\n            <Animated.View\n              key={route.key}\n              style={[\n                styles.tabButton,\n                {\n                  width: buttonWidth,\n                  backgroundColor,\n                },\n              ]}\n            >\n              <TouchableOpacity\n                accessibilityRole=\"button\"\n                accessibilityState={isFocused ? { selected: true } : {}}\n                accessibilityLabel={options.tabBarAccessibilityLabel}\n                onPress={onPress}\n                style={styles.tabTouchable}\n              >\n                <View style={styles.tabContent}>\n                  <View style={styles.iconWrapper}>\n                    {options.tabBarIcon && options.tabBarIcon({ \n                      focused: isFocused, \n                      color: iconColor, \n                      size: 22 \n                    })}\n                  </View>\n                  <Animated.View style={{ opacity: textOpacity }}>\n                    <Text style={[styles.label, isFocused && styles.labelActive]}>{String(label)}</Text>\n                  </Animated.View>\n                </View>\n              </TouchableOpacity>\n            </Animated.View>\n          );\n        })}\n      </View>\n    </View>\n  );\n}\n","import { Tabs } from 'expo-router';\n\nimport { Navigation, MapPin, User } from 'lucide-react-native';\nimport { AnimatedTabBar } from '@/components/AnimatedTabBar';\nimport theme from '@/constants/colors';\n\nexport default function TabLayout() {\n  return (\n    <Tabs\n      tabBar={(props) => <AnimatedTabBar {...props} />}\n      screenOptions={{\n        headerShown: false,\n        tabBarActiveTintColor: theme.backgroundSecondaryVarient,\n        tabBarInactiveTintColor: theme.backgroundPrimary,\n      }}\n    >\n      <Tabs.Screen\n        name=\"explore\"\n        options={{\n          title: 'Explore',\n          tabBarIcon: ({ color, size }) => <MapPin size={size} color={color} />,\n        }}\n      />\n      <Tabs.Screen\n        name=\"record\"\n        options={{\n          title: 'Record',\n          tabBarIcon: ({ color, size }) => <Navigation size={size} color={color} />,\n        }}\n      />\n      <Tabs.Screen\n        name=\"profile\"\n        options={{\n          title: 'Profile',\n          tabBarIcon: ({ color, size }) => <User size={size} color={color} />,\n        }}\n      />\n    </Tabs>\n  );\n}\n","import { Redirect } from 'expo-router';\n\nexport default function Index() {\n  return <Redirect href=\"/(tabs)/explore\" />;\n}\n","\nimport React from 'react';\nimport { Text, View, StyleSheet, ScrollView, TouchableOpacity } from 'react-native';\n\nimport { Stack } from 'expo-router';\nimport TrailMap from '@/components/TrailMap';\n\nimport { Clock, MapPin, Navigation, ArrowLeft, TrendingUp } from 'lucide-react-native';\nimport theme from '@/constants/colors';\n\nimport { formatDistance, formatDuration } from '@/utils/distance';\nimport { useRouter } from 'expo-router';\n\nconst DEMO_TRAIL = {\n  id: 'demo-trail',\n  name: 'Scenic Coastal Walk',\n  distance: 5210,\n  duration: 3600,\n  \n  coordinates: [\n    { latitude: 50.81999932593175, longitude: -0.1443926504884132 },\n    { latitude: 50.81982005377856, longitude: -0.14389605957015306 },\n    { latitude: 50.8195735534442, longitude: -0.14290287773496857 },\n    { latitude: 50.81976403108945, longitude: -0.14245949298612004 },\n    { latitude: 50.819651985510006, longitude: -0.1415904588798469 },\n    { latitude: 50.819360665744455, longitude: -0.141129338740825 },\n    { latitude: 50.81955114425804, longitude: -0.14054407087405707 },\n    { latitude: 50.8194278935438, longitude: -0.1397814491065219 },\n    { latitude: 50.819282233189426, longitude: -0.1389301503892284 },\n    { latitude: 50.819696803774036, longitude: -0.13903656272921694 },\n    { latitude: 50.81999932593175, longitude: -0.13919618123853184 },\n    { latitude: 50.82010016621547, longitude: -0.13853997181101363 },\n    { latitude: 50.82041389015009, longitude: -0.138220734792327 },\n    { latitude: 50.82055954697452, longitude: -0.13852223642078343 },\n    { latitude: 50.82086206354296, longitude: -0.13829167635185513 },\n  ],\n  city: 'Brighton',\n  country: 'UK',\n  difficulty: 'Easy',\n  pace: '11:32',\n  maxElevation: 45,\n};\n\nexport default function DemoTrailScreen() {\n  const router = useRouter();\n\n  return (\n    <View style={styles.container}>\n      <Stack.Screen \n        options={{\n          title: 'Demo Trail',\n          headerShown: false,\n        }} \n      />\n      \n      <ScrollView style={styles.scrollView}>\n        <View style={styles.header}>\n          <TouchableOpacity \n            style={styles.backButton}\n            onPress={() => router.back()}\n          >\n            <ArrowLeft size={24} color=\"#fff\" />\n          </TouchableOpacity>\n          <View style={styles.headerContent}>\n            <Text style={styles.title}>{DEMO_TRAIL.name}</Text>\n            <View style={styles.locationRow}>\n              <MapPin size={16} color=\"#fff\" />\n              <Text style={styles.locationText}>{DEMO_TRAIL.city}, {DEMO_TRAIL.country}</Text>\n            </View>\n          </View>\n        </View>\n\n        <View style={styles.mapContainer}>\n          <TrailMap\n            coordinates={DEMO_TRAIL.coordinates}\n            style={styles.map}\n            scrollEnabled={true}\n            zoomEnabled={true}\n          />\n        </View>\n\n        <View style={styles.statsContainer}>\n          <View style={styles.statItem}>\n            <Navigation size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.statValue}>{formatDistance(DEMO_TRAIL.distance)}</Text>\n            <Text style={styles.statLabel}>Distance</Text>\n          </View>\n          <View style={styles.statItem}>\n            <Clock size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.statValue}>{formatDuration(DEMO_TRAIL.duration)}</Text>\n            <Text style={styles.statLabel}>Time</Text>\n          </View>\n          <View style={styles.statItem}>\n            <TrendingUp size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.statValue}>{DEMO_TRAIL.maxElevation}m</Text>\n            <Text style={styles.statLabel}>Elevation</Text>\n          </View>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>About this trail</Text>\n          <Text style={styles.description}>\n            This is a beautiful coastal walk along the Brighton seafront. \n            Perfect for a morning stroll with your dog. The path is paved and \n            offers stunning views of the English Channel.\n          </Text>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  header: {\n    height: 200,\n    backgroundColor: theme.backgroundPrimary,\n    justifyContent: 'flex-end',\n    padding: 20,\n  },\n  backButton: {\n    position: 'absolute',\n    top: 50,\n    left: 20,\n    zIndex: 10,\n  },\n  headerContent: {\n    marginBottom: 10,\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: 'bold',\n    color: '#fff',\n    marginBottom: 5,\n  },\n  locationRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  locationText: {\n    color: '#fff',\n    marginLeft: 5,\n    fontSize: 16,\n  },\n  mapContainer: {\n    height: 300,\n    width: '100%',\n  },\n  map: {\n    flex: 1,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    padding: 20,\n  backgroundColor: theme.backgroundSecondary,\n  borderBottomWidth: 1,\n  borderBottomColor: theme.borderSubtle,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginTop: 5,\n    color: '#333',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n  },\n  section: {\n    padding: 20,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    color: '#333',\n  },\n  description: {\n    fontSize: 16,\n    lineHeight: 24,\n    color: '#666',\n  },\n});\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  content: {\n    flex: 1,\n    padding: 24,\n    justifyContent: 'center',\n  },\n  header: {\n    alignItems: 'center',\n    marginBottom: 48,\n  },\n  logo: {\n    width: 100,\n    height: 100,\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: '700' as const,\n    color: theme.textPrimary,\n    marginTop: 16,\n  },\n  subtitle: {\n    fontSize: 16,\n    color: theme.textMuted,\n    marginTop: 8,\n    textAlign: 'center',\n  },\n  form: {\n    width: '100%',\n  },\n  inputContainer: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '600' as const,\n    color: theme.textMuted,\n    marginBottom: 8,\n  },\n  input: {\n    backgroundColor: theme.backgroundPrimary,\n    borderWidth: 1,\n    borderColor: theme.borderSubtle,\n    borderRadius: 12,\n    padding: 16,\n    fontSize: 16,\n    color: theme.textPrimary,\n  },\n  helperText: {\n    fontSize: 12,\n    color: theme.textMuted,\n    marginTop: 8,\n  },\n  button: {\n    backgroundColor: theme.accentSecondary,\n    borderRadius: 12,\n    padding: 16,\n    alignItems: 'center',\n    marginTop: 12,\n  },\n  buttonDisabled: {\n    opacity: 0.6,\n  },\n  buttonPressed: {\n    transform: [{ scale: 0.997 }],\n    opacity: 0.95,\n  },\n  buttonText: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n    color: theme.backgroundPrimary,\n  },\n  secondaryButton: {\n    padding: 16,\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  secondaryButtonText: {\n    fontSize: 14,\n    fontWeight: '600' as const,\n    color: theme.accentPrimary,\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 24,\n  },\n  footerText: {\n    fontSize: 14,\n    color: theme.textMuted,\n  },\n  linkText: {\n    fontSize: 14,\n    fontWeight: '600' as const,\n    color: theme.accentPrimary,\n  },\n});\n\nexport default styles;\n","// On web, allow a runtime global (injected by index.html or hosting) to override process.env.\ndeclare const global: any;\nconst runtimeUrl = typeof window !== 'undefined' ? (window as any).__EXPO_PUBLIC_API_URL__ : undefined;\nexport const API_URL = runtimeUrl || process.env.EXPO_PUBLIC_API_URL || 'http://localhost:8080';\n\n// Helpful at runtime to know which endpoint is being used.\nconsole.log('Current API URL:', API_URL);\n// Helpers for base64url <-> ArrayBuffer conversions used by WebAuthn flows on web\nexport function base64UrlToBuffer(base64Url: string): Uint8Array {\n\tconst padding = '='.repeat((4 - (base64Url.length % 4)) % 4);\n\tconst base64 = (base64Url + padding).replace(/-/g, '+').replace(/_/g, '/');\n\tconst raw = typeof atob === 'function' ? atob(base64) : Buffer.from(base64, 'base64').toString('binary');\n\tconst rawLength = raw.length;\n\tconst array = new Uint8Array(rawLength);\n\tfor (let i = 0; i < rawLength; ++i) {\n\t\tarray[i] = raw.charCodeAt(i);\n\t}\n\treturn array;\n}\n\nexport function bufferToBase64Url(buffer: ArrayBuffer | Uint8Array): string {\n\tconst bytes = buffer instanceof Uint8Array ? buffer : new Uint8Array(buffer);\n\tlet binary = '';\n\tfor (let i = 0; i < bytes.byteLength; i++) {\n\t\tbinary += String.fromCharCode(bytes[i]);\n\t}\n\tconst b64 = typeof btoa === 'function' ? btoa(binary) : Buffer.from(binary, 'binary').toString('base64');\n\treturn b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n\n// Frontend helpers to call WebAuthn-related backend endpoints\nexport async function webauthnRegisterOptions(email: string, name?: string) {\n\tconst res = await fetch(`${API_URL}/webauthn/register/options`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify({ email, name }),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to get registration options');\n\t}\n\treturn res.json();\n}\n\nexport async function webauthnRegisterVerify(payload: Record<string, any>) {\n\tconst res = await fetch(`${API_URL}/webauthn/register/verify`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(payload),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to verify registration');\n\t}\n\treturn res.json();\n}\n\nexport async function webauthnAuthOptions(email: string) {\n\tconst res = await fetch(`${API_URL}/webauthn/auth/options`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify({ email }),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to get auth options');\n\t}\n\treturn res.json();\n}\n\nexport async function webauthnAuthVerify(payload: Record<string, any>) {\n\tconst res = await fetch(`${API_URL}/webauthn/auth/verify`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(payload),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to verify authentication');\n\t}\n\treturn res.json();\n}\n\nexport async function firebaseAuthExchange(accessToken: string) {\n\tconst res = await fetch(`${API_URL}/auth/firebase`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify({ access_token: accessToken }),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail?.[0]?.msg || err.detail || 'Failed to authenticate with Firebase');\n\t}\n\treturn res.json();\n}","import React, { useState, useEffect } from 'react';\nimport { Text, View, TouchableOpacity, ScrollView, Platform, Alert, ActivityIndicator } from 'react-native';\nimport { useRouter, Stack, useLocalSearchParams } from 'expo-router';\nimport * as Haptics from 'expo-haptics';\nimport { ChevronLeft } from 'lucide-react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './dog-personality.styles';\nimport { RECALL_RELIABILITY_OPTIONS, PERSONALITY_TAGS, RecallReliability } from '@/types/dog-profile';\nimport { useAuth } from '@/context/AuthContext';\nimport { useDogs } from '@/context/DogsContext';\n\nexport default function DogPersonalityScreen() {\n  const router = useRouter();\n  const params = useLocalSearchParams<{\n    name: string;\n    nickname?: string;\n    age: string;\n    size: string;\n    image?: string;\n    isEditing?: string;\n  }>();\n  const { user } = useAuth();\n  const { dogProfile, refreshDogProfile, createDogProfile, updateDogProfile } = useDogs();\n  const insets = useSafeAreaInsets();\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\n  const [recallReliability, setRecallReliability] = useState<RecallReliability>('Fair');\n  const [isSaving, setIsSaving] = useState<boolean>(false);\n  const isEditing = params.isEditing === 'true';\n\n  useEffect(() => {\n    if (dogProfile && isEditing) {\n      console.log('Loading existing personality tags for editing:', dogProfile.personality_tags);\n      setSelectedTags(dogProfile.personality_tags || []);\n      setRecallReliability(dogProfile.recall_reliability || 'Fair');\n    }\n  }, [dogProfile, isEditing]);\n\n  const toggleTag = (tag: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    setSelectedTags((prev) =>\n      prev.includes(tag) ? prev.filter((t) => t !== tag) : [...prev, tag]\n    );\n  };\n\n  const handleFinish = async () => {\n    if (!user) {\n      Alert.alert('Error', 'You must be logged in to create a dog profile');\n      return;\n    }\n\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    setIsSaving(true);\n\n    try {\n      console.log(isEditing ? 'Updating dog profile for user:' : 'Creating dog profile for user:', user.id);\n\n      const profileData = {\n        user_id: user.id,\n        name: params.name,\n        nickname: params.nickname || undefined,\n        size: params.size as any,\n        age: parseInt(params.age, 10),\n        image: params.image || undefined,\n        personality_tags: selectedTags,\n        recall_reliability: recallReliability,\n      };\n\n      console.log('Dog profile data:', profileData);\n\n      if (isEditing && dogProfile?.id) {\n        await updateDogProfile({ ...profileData, id: dogProfile.id });\n      } else {\n        await createDogProfile(profileData);\n      }\n\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n\n      if (isEditing) {\n        router.replace('/(tabs)/profile');\n      } else {\n        router.replace('/(tabs)/explore');\n      }\n    } catch (error: any) {\n      console.error('Error saving dog profile:', error);\n      Alert.alert('Error', error.message || 'Failed to save dog profile');\n      setIsSaving(false);\n    }\n\n  };\n\n  return (\n    <>\n      <Stack.Screen options={{ headerShown: false }} />\n      <View style={[styles.container, { paddingTop: insets.top + 20 }]}> \n        <ScrollView style={styles.scrollView} contentContainerStyle={styles.content}>\n          <View style={styles.header}>\n            <Text style={styles.title}>Personality & Behaviour</Text>\n            <Text style={styles.subtitle}>Choose the tags that best describe your dog</Text>\n            {!isEditing && (\n              <View style={styles.progressContainer}>\n                <View style={styles.progressDot} />\n                <View style={[styles.progressDot, styles.progressDotActive]} />\n              </View>\n            )}\n          </View>\n\n          <View style={styles.tagsContainer}>\n            {PERSONALITY_TAGS.map((tag) => (\n              <TouchableOpacity\n                key={tag}\n                style={[\n                  styles.tag,\n                  selectedTags.includes(tag) && styles.tagSelected,\n                ]}\n                onPress={() => toggleTag(tag)}\n                testID={`tag-${tag}`}\n              >\n                <Text\n                  style={[\n                    styles.tagText,\n                    selectedTags.includes(tag) && styles.tagTextSelected,\n                  ]}\n                >\n                  {tag}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n\n          <View style={styles.sectionHeader}>\n            <Text style={styles.sectionTitle}>Health & Safety</Text>\n          </View>\n\n          <View style={styles.section}>\n            <Text style={styles.label}>Recall Reliability</Text>\n            <Text style={styles.helperText}>How reliably does your dog return when called?</Text>\n            <View style={styles.recallContainer}>\n              {RECALL_RELIABILITY_OPTIONS.map((option) => (\n                <TouchableOpacity\n                  key={option}\n                  style={[\n                    styles.recallOption,\n                    recallReliability === option && styles.recallOptionSelected,\n                  ]}\n                  onPress={() => {\n                    if (Platform.OS !== 'web') {\n                      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                    }\n                    setRecallReliability(option);\n                  }}\n                  testID={`recall-${option}`}\n                >\n                  <Text\n                    style={[\n                      styles.recallText,\n                      recallReliability === option && styles.recallTextSelected,\n                    ]}\n                  >\n                    {option}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n        </ScrollView>\n\n        <View style={[styles.footer, { paddingBottom: insets.bottom + 20 }]}>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => router.back()}\n            disabled={isSaving}\n            testID=\"back-button\"\n          >\n            <ChevronLeft size={24} color=\"#FFFE77\" />\n            <Text style={styles.backButtonText}>Back</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.finishButton, isSaving && styles.finishButtonDisabled]}\n            onPress={handleFinish}\n            disabled={isSaving}\n            testID=\"finish-button\"\n          >\n            {isSaving ? (\n              <ActivityIndicator color=\"#1a1f0a\" />\n            ) : (\n              <Text style={styles.finishButtonText}>{isEditing ? 'Save' : 'Finish'}</Text>\n            )}\n          </TouchableOpacity>\n        </View>\n      </View>\n    </>\n  );\n}\n","import React, { useEffect, useCallback, useState, useMemo } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport { useAuth } from '@/context/AuthContext';\nimport { Trail } from '@/types/trail';\nimport { API_URL } from '@/lib/api';\n\nexport const [TrailsContext, useTrails] = createContextHook(() => {\n  const { user, session } = useAuth();\n  const [trails, setTrails] = useState<Trail[]>([]);\n  const [savedTrails, setSavedTrails] = useState<Trail[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [isSavedLoading, setIsSavedLoading] = useState<boolean>(true);\n\n  const loadTrails = useCallback(async () => {\n    if (!user || !session) {\n      // even unauthenticated users can fetch public trails\n      try {\n        const resp = await fetch(`${API_URL}/trail`);\n        if (resp.ok) {\n          const data = await resp.json();\n          setTrails(data || []);\n        } else {\n          console.error('Failed to load trails (public):', resp.status);\n          setTrails([]);\n        }\n      } catch (err) {\n        console.error('Failed to load trails:', err);\n        setTrails([]);\n      } finally {\n        setIsLoading(false);\n      }\n      return;\n    }\n\n    try {\n      console.log('Loading trails for user:', user.id);\n      const resp = await fetch(`${API_URL}/trail`, {\n        headers: {\n          'Authorization': `Bearer ${session?.accessToken}`,\n        },\n      });\n      if (resp.ok) {\n        const data = await resp.json();\n        setTrails(data || []);\n      } else {\n        console.error('Failed to load trails:', resp.status);\n        setTrails([]);\n      }\n    } catch (error) {\n      console.error('Failed to load trails:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [user, session]);\n\n  const loadSavedTrails = useCallback(async () => {\n    // The API currently exposes /trail/me for the current user's trails.\n    if (!session?.accessToken) {\n      setSavedTrails([]);\n      setIsSavedLoading(false);\n      return;\n    }\n\n    try {\n      console.log('Loading my trails for user:', user?.id);\n      const resp = await fetch(`${API_URL}/trail/me`, {\n        headers: {\n          'Authorization': `Bearer ${session?.accessToken}`,\n        },\n      });\n      if (resp.ok) {\n        const data = await resp.json();\n        setSavedTrails(data || []);\n      } else {\n        console.error('Failed to load my trails:', resp.status);\n        setSavedTrails([]);\n      }\n    } catch (error) {\n      console.error('Failed to load saved trails:', error);\n      setSavedTrails([]);\n    } finally {\n      setIsSavedLoading(false);\n    }\n  }, [user, session]);\n\n  useEffect(() => {\n    loadTrails();\n    loadSavedTrails();\n  }, [loadTrails, loadSavedTrails]);\n\n  const saveTrail = useCallback(async (trail: Trail) => {\n    if (!user) {\n      console.error('No user logged in');\n      throw new Error('Must be logged in to save trails');\n    }\n    if (!session?.accessToken) {\n      console.error('No session/access token available');\n      throw new Error('Must be logged in to save trails');\n    }\n    try {\n      console.log('Saving trail for user via API:', user.id);\n\n      // Prepare a path array (lon, lat) expected by backend\n      const coordsToPath = (coords: { latitude: number; longitude: number }[] | undefined) => {\n        if (!coords || coords.length === 0) return [] as number[][];\n        return coords.map(c => [c.longitude, c.latitude]);\n      };\n\n      const body: any = {\n        name: trail.name,\n        distance: trail.distance,\n        duration: trail.duration,\n        path: coordsToPath((trail as any).coordinates),\n        photo: (trail as any).photo,\n        city: trail.city,\n        country: trail.country,\n        description: (trail as any).description,\n        tags: (trail as any).tags,\n        elevation: (trail as any).elevation,\n        surface_type: (trail as any).surfaceType,\n        difficulty: (trail as any).difficulty,\n        location: (trail as any).location,\n        pace: trail.pace,\n        speed: trail.speed,\n        max_elevation: trail.maxElevation,\n        rating: trail.rating,\n        review: trail.review,\n        environment_tags: (trail as any).environment_tags,\n      };\n\n      const accessToken = session.accessToken;\n      // If photo is a local URI or a File object, create the trail first without photo,\n      // then upload the file to /uploads with `trail_id` and patch the trail with the returned URL.\n      const isLocalStringPhoto = typeof body.photo === 'string' && body.photo && !body.photo.startsWith('http');\n      const isFilePhoto = typeof body.photo === 'object' && body.photo !== null; // e.g. File on web\n\n      const createBody = { ...body };\n      if (isLocalStringPhoto || isFilePhoto) {\n        createBody.photo = undefined;\n      }\n\n      const resp = await fetch(`${API_URL}/trail/me`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${accessToken}`,\n        },\n        body: JSON.stringify(createBody),\n      });\n\n      if (!resp.ok) {\n        const err = await resp.text();\n        console.error('Failed to save trail via API:', resp.status, err);\n        throw new Error('Failed to save trail');\n      }\n\n      const data = await resp.json();\n      // Assume API returns created trail that matches our Trail type\n      setTrails((prev: Trail[]) => [data, ...prev]);\n\n      // If we had a local photo, upload it now and patch the trail with the returned URL\n      if (isLocalStringPhoto || isFilePhoto) {\n        try {\n          // Build form data for upload\n          const form = new FormData();\n          if (isFilePhoto) {\n            // web File object\n            // @ts-ignore\n            form.append('file', body.photo);\n            // @ts-ignore\n            form.append('filename', body.photo.name || `trail_${Date.now()}.jpg`);\n          } else {\n            const uri = body.photo as string;\n            const uriParts = uri.split('/');\n            const fileName = uriParts[uriParts.length - 1] || `trail_${Date.now()}.jpg`;\n            const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n            const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n            const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n            // @ts-ignore\n            form.append('file', { uri, name: fileName, type: mimeType });\n            form.append('filename', fileName);\n          }\n\n          form.append('trail_id', data.id);\n          form.append('dog_id', '');\n          form.append('user_id', '');\n\n          const uploadResp = await fetch(`${API_URL}/uploads`, {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${accessToken}`,\n              'accept': 'application/json',\n            },\n            body: form as any,\n          });\n\n          if (!uploadResp.ok) {\n            console.error('Trail photo upload failed during create:', await uploadResp.text());\n          } else {\n            const uploadData = await uploadResp.json();\n            const publicUrl = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n            if (publicUrl) {\n              // Patch trail with new photo URL\n              const patchResp = await fetch(`${API_URL}/trail/${data.id}`, {\n                method: 'PUT',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${accessToken}`,\n                },\n                body: JSON.stringify({ ...data, photo: publicUrl }),\n              });\n\n              if (patchResp.ok) {\n                const patched = await patchResp.json();\n                setTrails(prev => prev.map(t => t.id === patched.id ? patched : t));\n              } else {\n                console.error('Failed to patch trail with uploaded photo');\n              }\n            }\n          }\n        } catch (err) {\n          console.error('Error uploading trail photo after create:', err);\n        }\n      }\n\n      return data as Trail;\n    } catch (error) {\n      console.error('Failed to save trail:', error);\n      throw error;\n    }\n  }, [user, session]);\n\n  const deleteTrail = useCallback(async (id: string) => {\n    try {\n      console.log('Deleting trail via API:', id);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${session.accessToken}` },\n      });\n      if (resp.status === 204) {\n        setTrails((prev: Trail[]) => prev.filter((t: Trail) => t.id !== id));\n      } else {\n        const body = await resp.text();\n        console.error('Failed to delete trail:', resp.status, body);\n        throw new Error('Failed to delete trail');\n      }\n    } catch (error) {\n      console.error('Failed to delete trail:', error);\n      throw error;\n    }\n  }, [session]);\n\n  const getTrailById = useCallback((id: string): Trail | undefined => {\n    const found = trails.find((t: Trail) => t.id === id);\n    if (found) return found;\n\n    // If not in state, try fetching from API synchronously is not possible here  keep demo fallback\n    if (id === 'demo-trail') {\n      return {\n        id: 'demo-trail',\n        name: 'Scenic Coastal Walk',\n        distance: 5.2,\n        duration: 3600,\n        coordinates: [\n          { latitude: 50.81999932593175, longitude: -0.1443926504884132 },\n          { latitude: 50.81982005377856, longitude: -0.14389605957015306 },\n          { latitude: 50.8195735534442, longitude: -0.14290287773496857 },\n          { latitude: 50.81976403108945, longitude: -0.14245949298612004 },\n          { latitude: 50.819651985510006, longitude: -0.1415904588798469 },\n          { latitude: 50.819360665744455, longitude: -0.141129338740825 },\n          { latitude: 50.81955114425804, longitude: -0.14054407087405707 },\n          { latitude: 50.8194278935438, longitude: -0.1397814491065219 },\n          { latitude: 50.819282233189426, longitude: -0.1389301503892284 },\n          { latitude: 50.819696803774036, longitude: -0.13903656272921694 },\n          { latitude: 50.81999932593175, longitude: -0.13919618123853184 },\n          { latitude: 50.82010016621547, longitude: -0.13853997181101363 },\n          { latitude: 50.82041389015009, longitude: -0.138220734792327 },\n          { latitude: 50.82055954697452, longitude: -0.13852223642078343 },\n          { latitude: 50.82086206354296, longitude: -0.13829167635185513 },\n        ],\n        city: 'Brighton',\n        country: 'UK',\n        difficulty: 'Easy',\n        pace: '11:32',\n        maxElevation: 45,\n        date: Date.now(),\n        environment_tags: ['Beach', 'Sunny', 'Paved'],\n        rating: 4.5,\n        review: 'A beautiful walk along the seafront. Very dog friendly!',\n      };\n    }\n    return undefined;\n  }, [trails]);\n\n  const loadNearbyTrails = useCallback(async (latitude?: number, longitude?: number, distanceKm: number = 10) => {\n    try {\n      console.log('Loading nearby trails:', { latitude, longitude, distanceKm });\n\n      // If latitude/longitude provided and we have a session, call the backend nearby endpoint\n      if (typeof latitude === 'number' && typeof longitude === 'number' && session?.accessToken) {\n        try {\n          const resp = await fetch(\n            `${API_URL}/trail/nearby?latitude=${encodeURIComponent(latitude)}&longitude=${encodeURIComponent(longitude)}&distance_km=${encodeURIComponent(distanceKm)}`,\n            {\n              headers: { 'Authorization': `Bearer ${session.accessToken}` },\n            }\n          );\n          if (resp.ok) {\n            const data = await resp.json();\n            return data as Trail[];\n          }\n\n          if (resp.status === 404) {\n            // No nearby trails found  return empty list\n            console.warn('Nearby trails endpoint returned 404 (no trails)');\n            return [];\n          }\n\n          console.error('Failed to load nearby trails from API:', resp.status);\n          return [];\n        } catch (err) {\n          console.error('Error calling nearby trails API:', err);\n          return [];\n        }\n      }\n\n      // If we don't have coords or session (unauthenticated), return empty array\n      return [];\n    } catch (error) {\n      console.error('Failed to load nearby trails:', error);\n      return [];\n    }\n  }, [session]);\n\n  const updateTrailName = useCallback(async (id: string, name: string) => {\n    try {\n      console.log('Updating trail name via API:', id, name);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${session?.accessToken}` },\n        body: JSON.stringify({ name }),\n      });\n      if (!resp.ok) {\n        const txt = await resp.text();\n        throw new Error(txt || 'Failed to update');\n      }\n      const updated = await resp.json();\n      setTrails((prev: Trail[]) => prev.map((t: Trail) => (t.id === id ? updated : t)));\n    } catch (error) {\n      console.error('Failed to update trail name:', error);\n      throw error;\n    }\n  }, [session]);\n\n  const updateTrailPhoto = useCallback(async (id: string, photo: string) => {\n    try {\n      console.log('Updating trail photo via API:', id);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${session?.accessToken}` },\n        body: JSON.stringify({ photo }),\n      });\n      if (!resp.ok) {\n        const txt = await resp.text();\n        throw new Error(txt || 'Failed to update photo');\n      }\n      const updated = await resp.json();\n      setTrails((prev: Trail[]) => prev.map((t: Trail) => (t.id === id ? updated : t)));\n    } catch (error) {\n      console.error('Failed to update trail photo:', error);\n      throw error;\n    }\n  }, [session]);\n\n  const updateTrailDetails = useCallback(async (id: string, updates: {\n    rating?: number;\n    review?: string;\n    environment_tags?: string[];\n    difficulty?: string;\n  }) => {\n    try {\n      console.log('Updating trail details via API:', id, updates);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${session?.accessToken}` },\n        body: JSON.stringify(updates),\n      });\n      if (!resp.ok) {\n        const txt = await resp.text();\n        throw new Error(txt || 'Failed to update details');\n      }\n      const updated = await resp.json();\n      setTrails((prev: Trail[]) => prev.map((t: Trail) => (t.id === id ? updated : t)));\n    } catch (error) {\n      console.error('Failed to update trail details:', error);\n      throw error;\n    }\n  }, []);\n\n  const getTrailWithUser = useCallback(async (id: string) => {\n    try {\n      console.log('Loading trail with user data via API:', id);\n      const resp = await fetch(`${API_URL}/trail/${id}`);\n      if (!resp.ok) {\n        console.error('Failed to fetch trail:', resp.status);\n        return undefined;\n      }\n      const data = await resp.json();\n      return data as Trail;\n    } catch (error) {\n      console.error('Failed to load trail with user:', error);\n      return undefined;\n    }\n  }, []);\n\n  const saveTrailBookmark = useCallback(async (trailId: string) => {\n    if (!user) {\n      console.error('No user logged in');\n      throw new Error('Must be logged in to save trails');\n    }\n\n    try {\n      console.log('Saving trail bookmark:', trailId);\n      // TODO: Implement bookmark with your backend\n      const trail = trails.find((t: Trail) => t.id === trailId);\n      if (trail) {\n        setSavedTrails((prev: Trail[]) => [trail, ...prev]);\n      }\n    } catch (error) {\n      console.error('Failed to save trail bookmark:', error);\n      throw error;\n    }\n  }, [user, trails]);\n\n  const removeTrailBookmark = useCallback(async (trailId: string) => {\n    if (!user) {\n      console.error('No user logged in');\n      throw new Error('Must be logged in to remove saved trails');\n    }\n\n    try {\n      console.log('Removing trail bookmark:', trailId);\n      // TODO: Implement remove bookmark with your backend\n      setSavedTrails((prev: Trail[]) => prev.filter((t: Trail) => t.id !== trailId));\n    } catch (error) {\n      console.error('Failed to remove trail bookmark:', error);\n      throw error;\n    }\n  }, [user]);\n\n  const isTrailSaved = useCallback((trailId: string): boolean => {\n    return savedTrails.some((t: Trail) => t.id === trailId);\n  }, [savedTrails]);\n\n\n  return useMemo(() => ({\n    trails,\n    savedTrails,\n    isLoading,\n    isSavedLoading,\n    saveTrail,\n    deleteTrail,\n    getTrailById,\n    updateTrailName,\n    updateTrailPhoto,\n    updateTrailDetails,\n    loadNearbyTrails,\n    saveTrailBookmark,\n    removeTrailBookmark,\n    isTrailSaved,\n    getTrailWithUser,\n  }), [trails, savedTrails, isLoading, isSavedLoading, saveTrail, deleteTrail, getTrailById, updateTrailName, updateTrailPhoto, updateTrailDetails, loadNearbyTrails, saveTrailBookmark, removeTrailBookmark, isTrailSaved, getTrailWithUser]);\n});\n\n","import React from 'react';\nimport { View, ActivityIndicator, Platform, StyleSheet } from 'react-native';\n\nlet LottieView: any = null;\ntry {\n  // lottie-react-native is native-only; require it dynamically so web doesn't crash\n  // (the package will be absent until the developer installs it)\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  LottieView = require('lottie-react-native').default;\n} catch (e) {\n  LottieView = null;\n}\n\ntype Props = {\n  size?: number;\n};\n\nexport default function LottieLoader({ size = 200 }: Props) {\n  // Fallback to ActivityIndicator on web or when lottie isn't installed/available\n  if (Platform.OS === 'web' || !LottieView) {\n    return (\n      <View style={styles.center}>\n        <ActivityIndicator size=\"large\" color=\"#2563eb\" />\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.center}>\n      <LottieView\n        source={require('../assets/tail-trails-loader.json')}\n        autoPlay\n        loop\n        style={{ width: size, height: size }}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n","import { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { useRouter, Stack, useSegments } from \"expo-router\";\nimport * as SplashScreen from \"expo-splash-screen\";\nimport React, { useEffect } from \"react\";\nimport { View, StyleSheet } from \"react-native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { AuthContext, useAuth } from '@/context/AuthContext';\nimport { AccountContext } from '@/context/AccountContext';\nimport { TrailsContext } from '@/context/TrailsContext';\nimport { DogsContext, useDogs } from '@/context/DogsContext';\nimport LottieLoader from '@/components/LottieLoader';\n\n// Prevent the splash screen from auto-hiding before asset loading is complete.\nSplashScreen.preventAutoHideAsync();\n\nconst queryClient = new QueryClient();\n\nfunction RootLayoutNav() {\n  const { isAuthenticated, isLoading } = useAuth();\n  const { hasDogProfile, isDogProfileLoading } = useDogs();\n  const segments = useSegments();\n  const router = useRouter();\n\n  useEffect(() => {\n    // Wait until auth and dog profile loading are settled before making navigation decisions.\n    if (isLoading) return;\n\n    // If dog profiles are still loading, don't redirect yet. We only redirect when loading is finished\n    // to avoid jumping to onboarding before data arrives.\n    if (isDogProfileLoading) {\n      console.log('Navigation: waiting for dog profiles to finish loading');\n      return;\n    }\n\n    const inAuthGroup = segments[0] === '(tabs)';\n    const inLoginOrSignup = segments[0] === 'login' || segments[0] === 'signup';\n    const inOnboarding = segments[0] === 'onboarding';\n    \n    console.log('Navigation check:', { isAuthenticated, hasDogProfile, segments: segments[0] });\n\n    if (!isAuthenticated && (inAuthGroup || inOnboarding)) {\n      console.log('Redirecting to login: user not authenticated');\n      router.replace('/login');\n    } else if (isAuthenticated && !hasDogProfile && !inOnboarding) {\n      // Only redirect to onboarding after we've confirmed there are no dog profiles.\n      console.log('Redirecting to onboarding: no dog profile');\n      router.replace('/onboarding/dog-basics');\n    } else if (isAuthenticated && hasDogProfile && inLoginOrSignup) {\n      console.log('Redirecting to explore: user authenticated with dog profile');\n      router.replace('/(tabs)/explore');\n    }\n  }, [isAuthenticated, hasDogProfile, segments, isLoading, isDogProfileLoading, router]);\n\n  if (isLoading) {\n    return <LottieLoader />;\n  }\n\n  return (\n    <Stack screenOptions={{ headerBackTitle: \"Back\" }}>\n      <Stack.Screen name=\"login\" options={{ headerShown: false }} />\n      <Stack.Screen name=\"signup\" options={{ headerShown: false }} />\n      <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n      <Stack.Screen name=\"trail/[id]\" options={{ headerShown: false }} />\n    </Stack>\n  );\n}\n\nexport default function RootLayout() {\n  useEffect(() => {\n    SplashScreen.hideAsync();\n  }, []);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthContext>\n        <AccountContext>\n          <DogsContext>\n            <TrailsContext>\n              <GestureHandlerRootView style={styles.container}>\n                <RootLayoutNav />\n              </GestureHandlerRootView>\n            </TrailsContext>\n          </DogsContext>\n        </AccountContext>\n      </AuthContext>\n    </QueryClientProvider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n});\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  container: {\n    backgroundColor: theme.backgroundSecondary,\n    overflow: 'hidden',\n  },\n});\n","import React, { useEffect, forwardRef, useRef, useImperativeHandle } from 'react';\n\nimport { View } from 'react-native';\nimport styles from './TrailMap.styles';\nimport * as maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n// Use hosted outdoors style for web\nconst OUTDOORS_STYLE_URL = 'https://api.tailtrails.club/map/style.json';\n\ninterface TrailMapProps {\n  coordinates: { latitude: number; longitude: number }[];\n  style?: any;\n  scrollEnabled?: boolean;\n  zoomEnabled?: boolean;\n  showsUserLocation?: boolean;\n  followsUserLocation?: boolean;\n  showsMyLocationButton?: boolean;\n  initialRegion?: {\n    latitude: number;\n    longitude: number;\n    latitudeDelta: number;\n    longitudeDelta: number;\n  };\n}\n\nconst TrailMap = forwardRef<any, TrailMapProps>(({ \n  coordinates, \n  style, \n  initialRegion,\n  scrollEnabled = true,\n  zoomEnabled = true,\n}, ref) => {\n  const mapContainerRef = useRef<HTMLDivElement | null>(null);\n  const mapRef = useRef<maplibregl.Map | null>(null);\n\n  useImperativeHandle(ref, () => ({\n    animateToRegion: (region: any, duration: number = 500) => {\n      if (mapRef.current) {\n        mapRef.current.easeTo({\n          center: [region.longitude, region.latitude],\n          zoom: 14, // Approximate zoom for the delta\n          duration: duration,\n        });\n      }\n    },\n    fitToCoordinates: (coords: any[], options: any = {}) => {\n      if (mapRef.current && coords.length > 0) {\n        const bounds = new maplibregl.LngLatBounds();\n        coords.forEach(c => bounds.extend([c.longitude, c.latitude]));\n        mapRef.current.fitBounds(bounds, { padding: options.edgePadding || 20 });\n      }\n    }\n  }));\n\n  useEffect(() => {\n    if (!mapContainerRef.current) return;\n\n    const center: [number, number] = initialRegion \n      ? [initialRegion.longitude, initialRegion.latitude]\n      : coordinates.length > 0 \n        ? [coordinates[0].longitude, coordinates[0].latitude]\n        : [0, 0];\n\n    const zoom = initialRegion ? 14 : 12;\n\n    const map = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: OUTDOORS_STYLE_URL,\n      center: center,\n      zoom: zoom,\n      interactive: scrollEnabled && zoomEnabled,\n    });\n\n    mapRef.current = map;\n\n    map.on('load', () => {\n      if (coordinates.length > 1) {\n        map.addSource('route', {\n          'type': 'geojson',\n          'data': {\n            'type': 'Feature',\n            'properties': {},\n            'geometry': {\n              'type': 'LineString',\n              'coordinates': coordinates.map(c => [c.longitude, c.latitude])\n            }\n          }\n        });\n\n        map.addLayer({\n          'id': 'route',\n          'type': 'line',\n          'source': 'route',\n          'layout': {\n            'line-join': 'round',\n            'line-cap': 'round'\n          },\n          'paint': {\n            'line-color': '#5d6b4a',\n            'line-width': 4\n          }\n        });\n\n        // Fit bounds to coordinates\n        const bounds = new maplibregl.LngLatBounds();\n        coordinates.forEach(c => bounds.extend([c.longitude, c.latitude]));\n        map.fitBounds(bounds, { padding: 20 });\n      }\n    });\n\n    return () => {\n      map.remove();\n    };\n  }, [coordinates, initialRegion, scrollEnabled, zoomEnabled]);\n\n  return (\n    <View style={[style, styles.container]}>\n      <div \n        ref={mapContainerRef} \n        style={{ width: '100%', height: '100%' }} \n      />\n    </View>\n  );\n});\n\n// styles imported from TrailMap.styles.ts\n\nexport default TrailMap;\n","import { Platform } from 'react-native';\n\n// Shared config (use Expo env vars for web builds)\nconst firebaseConfig = {\n  apiKey: process.env.EXPO_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.EXPO_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.EXPO_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Exports kept stable for the app code which expects these names:\n// - `firebaseAuth` (an auth instance, may be ignored by native wrappers)\n// - `signInWithEmailAndPassword(auth, email, password)`\n// - `createUserWithEmailAndPassword(auth, email, password)`\n// - `updateProfile(user, profile)`\n\nlet firebaseAuth: any = null;\nlet _impl: 'web' | 'native' | null = null;\n\n// Web implementation using Firebase JS SDK (modular)\nasync function setupWeb() {\n  const { initializeApp, getApps } = await import('firebase/app');\n  const {\n    getAuth,\n    signInWithEmailAndPassword: webSignIn,\n    createUserWithEmailAndPassword: webCreateUser,\n    updateProfile: webUpdateProfile,\n  } = await import('firebase/auth');\n\n  const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);\n  const auth = getAuth(app);\n\n  firebaseAuth = auth;\n  _impl = 'web';\n\n  return {\n    signInWithEmailAndPassword: (authParam: any, email: string, password: string) =>\n      webSignIn(authParam || auth, email, password),\n    createUserWithEmailAndPassword: (authParam: any, email: string, password: string) =>\n      webCreateUser(authParam || auth, email, password),\n    updateProfile: (user: any, profile: Record<string, any>) => webUpdateProfile(user, profile),\n    // Sign in to Firebase using a Google token (accessToken or idToken).\n    // Returns { idToken: string, user }\n    signInWithGoogle: async (_authParam: any, accessToken?: string, idToken?: string) => {\n      const { GoogleAuthProvider, signInWithCredential } = await import('firebase/auth');\n      const credential = GoogleAuthProvider.credential(idToken || null, accessToken || null);\n      const cred = await signInWithCredential(_authParam || auth, credential as any);\n      const token = await cred.user.getIdToken();\n      return { idToken: token, user: cred.user };\n    },\n  };\n}\n\n// Native implementation using @react-native-firebase\nasync function setupNative() {\n  // @react-native-firebase/app and /auth are native modules and should not be\n  // statically imported on web builds. Use dynamic require to avoid bundling them for web.\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const firebaseApp = require('@react-native-firebase/app');\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const authModule = require('@react-native-firebase/auth');\n\n  // authModule is a function that returns the auth singleton when called\n  const nativeAuth = typeof authModule === 'function' ? authModule() : authModule.default ? authModule.default() : authModule();\n\n  firebaseAuth = nativeAuth;\n  _impl = 'native';\n\n  return {\n    signInWithEmailAndPassword: async (_authParam: any, email: string, password: string) => {\n      // RN Firebase returns a promise; currentUser is available afterwards\n      await nativeAuth.signInWithEmailAndPassword(email, password);\n      return { user: nativeAuth.currentUser };\n    },\n    createUserWithEmailAndPassword: async (_authParam: any, email: string, password: string) => {\n      await nativeAuth.createUserWithEmailAndPassword(email, password);\n      return { user: nativeAuth.currentUser };\n    },\n    updateProfile: async (user: any, profile: Record<string, any>) => {\n      // nativeAuth.currentUser may be the right user reference; user may also be provided\n      const u = user || nativeAuth.currentUser;\n      if (!u) throw new Error('No authenticated user to update');\n      // RN Firebase exposes updateProfile on the user object\n      // It returns a Promise\n      return u.updateProfile(profile);\n    },\n    // Sign in to Firebase using Google token (accessToken or idToken)\n    signInWithGoogle: async (_authParam: any, accessToken?: string, idToken?: string) => {\n      // auth module exposes GoogleAuthProvider on the native auth object\n      const provider = authModule.GoogleAuthProvider || (nativeAuth as any).GoogleAuthProvider;\n      const credential = provider.credential(idToken || null, accessToken || null);\n      await nativeAuth.signInWithCredential(credential);\n      const user = nativeAuth.currentUser;\n      if (!user) throw new Error('Failed to sign in with Google');\n      const token = await user.getIdToken();\n      return { idToken: token, user };\n    },\n  };\n}\n\n// Initialize appropriate implementation lazily and expose wrapper functions\nlet cached: Promise<{\n  signInWithEmailAndPassword: (a: any, e: string, p: string) => Promise<any>;\n  createUserWithEmailAndPassword: (a: any, e: string, p: string) => Promise<any>;\n  updateProfile: (u: any, p: Record<string, any>) => Promise<any>;\n  signInWithGoogle: (a: any, accessToken?: string, idToken?: string) => Promise<{ idToken: string; user: any }>;\n}> | null = null;\n\nfunction ensureInit() {\n  if (cached) return cached;\n  if (Platform.OS === 'web') {\n    cached = setupWeb();\n  } else {\n    cached = setupNative();\n  }\n  return cached;\n}\n\n// Public wrappers used by the app\nexport async function signInWithEmailAndPassword(authParam: any, email: string, password: string) {\n  const impl = await ensureInit();\n  return impl.signInWithEmailAndPassword(authParam, email, password);\n}\n\nexport async function createUserWithEmailAndPassword(authParam: any, email: string, password: string) {\n  const impl = await ensureInit();\n  return impl.createUserWithEmailAndPassword(authParam, email, password);\n}\n\nexport async function updateProfile(user: any, profile: Record<string, any>) {\n  const impl = await ensureInit();\n  return impl.updateProfile(user, profile);\n}\n\n// Sign in to Firebase using Google tokens and return { idToken, user }\nexport async function signInWithGoogle(authParam: any, accessToken?: string, idToken?: string) {\n  const impl = await ensureInit();\n  if (!impl.signInWithGoogle) throw new Error('Google sign-in not supported by this implementation');\n  return impl.signInWithGoogle(authParam, accessToken, idToken);\n}\n\n// Synchronous accessor for auth instance. Consumers may pass this to web wrappers.\nexport function getFirebaseAuth() {\n  // If not initialized yet, initialize synchronously-ish by triggering init (but it's async).\n  // Callers should import this and pass it into our wrappers (we also accept undefined).\n  if (!firebaseAuth) {\n    // Kick off initialization but do not await here so callers don't block.\n    // This may be undefined for a short time; wrappers handle undefined by using internal auth.\n    ensureInit().catch(() => {});\n  }\n  return firebaseAuth;\n}\n\nexport default {\n  getFirebaseAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  updateProfile,\n};","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  content: {\n    padding: 24,\n  },\n  header: {\n    marginBottom: 32,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  subtitle: {\n    fontSize: 16,\n    color: theme.accentPrimary,\n    textAlign: 'center',\n    marginBottom: 24,\n  },\n  progressContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  progressDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#3d4520',\n  },\n  progressDotActive: {\n    backgroundColor: theme.accentPrimary,\n  },\n  photoContainer: {\n    width: 140,\n    height: 140,\n    borderRadius: 70,\n    alignSelf: 'center',\n    marginBottom: 32,\n    overflow: 'hidden',\n  },\n  photo: {\n    width: '100%',\n    height: '100%',\n  },\n  photoPlaceholder: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: theme.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 8,\n  },\n  photoPlaceholderText: {\n    fontSize: 14,\n    color: theme.accentPrimary,\n    fontWeight: '500' as const,\n  },\n  photoOverlay: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  formSection: {\n    marginBottom: 24,\n  },\n  label: {\n    fontSize: 15,\n    fontWeight: '600' as const,\n    color: theme.accentPrimary,\n    marginBottom: 8,\n  },\n  input: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 16,\n    fontSize: 16,\n    color: theme.accentPrimary,\n    borderWidth: 1,\n    borderColor: '#3d4520',\n  },\n  pickerButton: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 16,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#3d4520',\n  },\n  pickerButtonText: {\n    fontSize: 16,\n    color: theme.accentPrimary,\n  },\n  pickerButtonTextPlaceholder: {\n    color: '#5a6040',\n  },\n  pickerOptions: {\n    backgroundColor: '#282E10',\n    borderRadius: 12,\n    marginTop: 8,\n    borderWidth: 1,\n    borderColor: '#3d4520',\n    overflow: 'hidden',\n  },\n  pickerOption: {\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#1a1f0a',\n  },\n  pickerOptionSelected: {\n    backgroundColor: 'rgba(255, 254, 119, 0.15)',\n  },\n  pickerOptionText: {\n    fontSize: 16,\n    color: theme.accentPrimary,\n  },\n  pickerOptionTextSelected: {\n    color: theme.accentPrimary,\n    fontWeight: '600' as const,\n  },\n  nextButton: {\n    backgroundColor: theme.accentPrimary,\n    borderRadius: 12,\n    padding: 18,\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  nextButtonText: {\n    fontSize: 17,\n    fontWeight: '600' as const,\n    color: theme.backgroundPrimary,\n  },\n  closeButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.backgroundPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n\nexport default styles;\n","import React, { useState, useCallback, useEffect } from 'react';\nimport { useFocusEffect, useRouter } from 'expo-router';\nimport { Text, View, StyleSheet, ScrollView, TouchableOpacity, Platform, ActivityIndicator, Animated, TextInput, Modal, FlatList } from 'react-native';\nimport { Image } from 'expo-image';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport * as Haptics from 'expo-haptics';\n\nimport { MapPin, Search, Heart, Umbrella, Bookmark, Star, X, BarChart3, Navigation, ChevronLeft, ChevronUp, ChevronDown, Icon } from 'lucide-react-native';\nimport theme from '@/constants/colors';\nimport * as maplibregl from 'maplibre-gl';\n\nimport { Trail } from '@/types/trail';\nimport styles from './explore.styles';\nimport { formatDistance } from '@/utils/distance';\nimport TrailMapPreview from '@/components/TrailMapPreview';\nimport { useTrails } from '@/context/TrailsContext';\n\n\nconst CATEGORIES = [\n  { id: 'nearby', name: 'Nearby', icon: MapPin },\n  { id: 'popular', name: 'Popular', icon: Heart },\n  { id: 'beaches', name: 'Beaches', icon: Umbrella },\n];\n\n\nexport default function ExploreWebScreen() {\n  const router = useRouter();\n  const insets = useSafeAreaInsets();\n  const { loadNearbyTrails, saveTrailBookmark, removeTrailBookmark, isTrailSaved } = useTrails();\n  const [selectedCategory, setSelectedCategory] = useState<string>('nearby');\n  const [nearbyTrails, setNearbyTrails] = useState<Trail[]>([]);\n  const [isLoadingNearby, setIsLoadingNearby] = useState<boolean>(true);\n  const [, setUserCity] = useState<string | undefined>(undefined);\n  const [bookmarkAnimations, setBookmarkAnimations] = useState<Record<string, Animated.Value>>({});\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [showSearchModal, setShowSearchModal] = useState<boolean>(false);\n  const [currentLocation, setCurrentLocation] = useState<string>('');\n  const [searchSuggestions, setSearchSuggestions] = useState<{id: string; name: string; location: string; type: string}[]>([]);\n  const [showPicker, setShowPicker] = useState<boolean>(false);\n\n  const loadUserLocationAndNearbyTrails = useCallback(async () => {\n    // On web, try to request browser location; fallback to no-coords call\n    setCurrentLocation('Current location');\n    try {\n      if (navigator && navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(async (pos) => {\n          try {\n            const trails = await loadNearbyTrails(pos.coords.latitude, pos.coords.longitude);\n            setNearbyTrails(trails);\n          } catch (err) {\n            console.error('Failed to load nearby trails with browser location:', err);\n            const trails = await loadNearbyTrails();\n            setNearbyTrails(trails);\n          } finally {\n            setIsLoadingNearby(false);\n          }\n        }, async () => {\n          const trails = await loadNearbyTrails();\n          setNearbyTrails(trails);\n          setIsLoadingNearby(false);\n        });\n        return;\n      }\n\n      const trails = await loadNearbyTrails();\n      setNearbyTrails(trails);\n    } catch (error) {\n      console.error('Failed to load nearby trails (web):', error);\n      setNearbyTrails([]);\n    } finally {\n      setIsLoadingNearby(false);\n    }\n  }, [loadNearbyTrails]);\n\n  useEffect(() => {\n    loadUserLocationAndNearbyTrails();\n  }, [loadUserLocationAndNearbyTrails]);\n\n  useFocusEffect(\n    useCallback(() => {\n      console.log('Explore tab focused - refreshing nearby trails (web)');\n      loadUserLocationAndNearbyTrails();\n    }, [loadUserLocationAndNearbyTrails])\n  );\n\n  const loadSearchSuggestions = useCallback(() => {\n    const query = searchQuery.toLowerCase();\n    const suggestions = nearbyTrails\n      .filter(trail => {\n        const name = trail.name?.toLowerCase() || '';\n        const city = trail.city?.toLowerCase() || '';\n        const country = trail.country?.toLowerCase() || '';\n        return name.includes(query) || city.includes(query) || country.includes(query);\n      })\n      .map(trail => ({\n        id: trail.id,\n        name: trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`,\n        location: trail.city ? `${trail.city}, ${trail.country || 'Unknown'}` : 'Location unknown',\n        type: 'trail',\n      }))\n      .slice(0, 6);\n\n    setSearchSuggestions(suggestions);\n  }, [searchQuery, nearbyTrails]);\n\n  useEffect(() => {\n    if (searchQuery.trim()) {\n      loadSearchSuggestions();\n    } else {\n      setSearchSuggestions([]);\n    }\n  }, [searchQuery, loadSearchSuggestions]);\n\n  const handleSearchBarPress = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(true);\n  };\n\n  const handleCloseSearchModal = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n  };\n\n  const handleSuggestionPress = (suggestionId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n    router.push(`/trail/${suggestionId}`);\n  };\n\n  const handleCurrentLocationPress = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n  };\n\n  const getBookmarkAnimation = (trailId: string) => {\n    if (!bookmarkAnimations[trailId]) {\n      const newAnim = new Animated.Value(1);\n      setBookmarkAnimations(prev => ({ ...prev, [trailId]: newAnim }));\n      return newAnim;\n    }\n    return bookmarkAnimations[trailId];\n  };\n\n  const isValidUUID = (id: string): boolean => {\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    return uuidRegex.test(id);\n  };\n\n  const handleBookmarkPress = async (trailId: string, isRealTrail: boolean = false) => {\n    if (!isRealTrail && !isValidUUID(trailId)) {\n      console.log('Cannot bookmark mock trail:', trailId);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      }\n      return;\n    }\n\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    const anim = getBookmarkAnimation(trailId);\n    const isSaved = isTrailSaved(trailId);\n\n    Animated.sequence([\n      Animated.timing(anim, {\n        toValue: 0.6,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.spring(anim, {\n        toValue: 1,\n        friction: 3,\n        tension: 100,\n        useNativeDriver: true,\n      }),\n    ]).start();\n\n    try {\n      if (isSaved) {\n        await removeTrailBookmark(trailId);\n      } else {\n        await saveTrailBookmark(trailId);\n        if (Platform.OS !== 'web') {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to toggle bookmark:', error);\n    }\n  };\n\n  const handleNavigateToTrail = (trailId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.push(`/trail/${trailId}`);\n  };\n\n  const handleCategoryPress = (categoryId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setSelectedCategory(categoryId);\n  };\n\n  const getFilteredTrails = useCallback((trails: Trail[]) => {\n    let filtered = trails;\n\n    if (selectedCategory === 'popular') {\n      filtered = [...filtered].sort((a, b) => (b.rating || 0) - (a.rating || 0));\n    } else if (selectedCategory === 'beaches') {\n      filtered = filtered.filter((trail) => {\n        const tags = trail.environment_tags || [];\n        return tags.some(tag => tag.toLowerCase().includes('beach'));\n      });\n    }\n\n    return filtered;\n  }, [selectedCategory]);\n\n  // Map / picker state for web\n  const mapContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const mapRef = React.useRef<maplibregl.Map | null>(null);\n  const [selectedCoords, setSelectedCoords] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [distanceKm, setDistanceKm] = useState<number>(10);\n  const [containerReady, setContainerReady] = useState<boolean>(false);\n\n  // use a ref callback to detect when the div is mounted\n  const setMapContainer = (el: HTMLDivElement | null) => {\n    mapContainerRef.current = el;\n    setContainerReady(!!el);\n  };\n\n  useEffect(() => {\n    if (!containerReady || !mapContainerRef.current || !showPicker) return;\n\n    // prevent double-init\n    if (mapRef.current) return;\n\n    const defaultCenter: [number, number] = selectedCoords ? [selectedCoords.longitude, selectedCoords.latitude] : [0, 0];\n\n    const map = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: 'https://basemaps.cartocdn.com/gl/positron-gl-style/style.json',\n      center: defaultCenter,\n      zoom: selectedCoords ? 10 : 1,\n    });\n    mapRef.current = map;\n\n    map.on('load', () => {\n      // Add a point source for picker marker\n      if (!map.getSource('picker')) {\n        map.addSource('picker', { type: 'geojson', data: { type: 'FeatureCollection', features: [] } });\n        map.addLayer({\n          id: 'picker-layer',\n          type: 'circle',\n          source: 'picker',\n          paint: { 'circle-radius': 8, 'circle-color': '#2563eb', 'circle-stroke-color': '#fff', 'circle-stroke-width': 2 }\n        });\n      }\n    });\n\n    map.on('click', (e: any) => {\n      const lat = e.lngLat.lat;\n      const lng = e.lngLat.lng;\n      setSelectedCoords({ latitude: lat, longitude: lng });\n      const src = map.getSource('picker') as maplibregl.GeoJSONSource | undefined;\n      if (src) {\n        src.setData({ type: 'FeatureCollection', features: [{ type: 'Feature', geometry: { type: 'Point', coordinates: [lng, lat] } }] } as any);\n      }\n      map.flyTo({ center: [lng, lat], zoom: 12 });\n    });\n\n    return () => {\n      try {\n        map.remove();\n      } catch (e) {\n        // ignore\n      }\n      mapRef.current = null;\n    };\n  }, [containerReady, showPicker, selectedCoords]);\n\n  const handleSearchNearby = async () => {\n    setIsLoadingNearby(true);\n    try {\n      if (selectedCoords) {\n        const trails = await loadNearbyTrails(selectedCoords.latitude, selectedCoords.longitude, distanceKm);\n        setNearbyTrails(trails);\n      } else if (navigator && navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(async (pos) => {\n          const trails = await loadNearbyTrails(pos.coords.latitude, pos.coords.longitude, distanceKm);\n          setNearbyTrails(trails);\n        }, async () => {\n          const trails = await loadNearbyTrails(undefined, undefined, distanceKm);\n          setNearbyTrails(trails);\n        });\n      } else {\n        const trails = await loadNearbyTrails(undefined, undefined, distanceKm);\n        setNearbyTrails(trails);\n      }\n    } catch (err) {\n      console.error('Search nearby failed:', err);\n    } finally {\n      setIsLoadingNearby(false);\n    }\n  };\n\n  const filteredTrails = getFilteredTrails(nearbyTrails);\n\n  return (\n    <View style={styles.safeContainer}>\n      <ScrollView \n        style={styles.container} \n        showsVerticalScrollIndicator={false}\n        stickyHeaderIndices={[0]}\n      >\n        <View style={[styles.stickyHeader, { paddingTop: insets.top + 16 }]}>\n          <View style={styles.stickySearchContainer}>\n            <TouchableOpacity \n              style={styles.searchBar}\n              onPress={handleSearchBarPress}\n              activeOpacity={0.7}\n            >\n              <Search size={20} color={theme.textMuted} />\n              <Text style={styles.searchPlaceholder}>Find trails</Text>\n            </TouchableOpacity>\n            {Platform.OS === 'web' && (\n              <TouchableOpacity \n                style={styles.demoButton}\n                onPress={() => router.push('/trail/demo-trail')}\n              >\n                <Text style={styles.demoButtonText}>Demo</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n\n          <View style={styles.categoriesSection}>\n            <ScrollView\n              horizontal\n              showsHorizontalScrollIndicator={false}\n              contentContainerStyle={styles.categoriesScroll}\n            >\n              {CATEGORIES.map((category) => {\n                const Icon = category.icon;\n                const isSelected = selectedCategory === category.id;\n                \n                return (\n                  <TouchableOpacity\n                    key={category.id}\n                    style={[\n                      styles.categoryButton,\n                      isSelected && styles.categoryButtonActive,\n                    ]}\n                    onPress={() => handleCategoryPress(category.id)}\n                  >\n                    <Icon\n                      size={20}\n                      color={isSelected ? '#fff' : '#9ca3af'}\n                      strokeWidth={2}\n                    />\n                    <Text\n                      style={[\n                        styles.categoryText,\n                        isSelected && styles.categoryTextActive,\n                      ]}\n                    >\n                      {category.name}\n                    </Text>\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n          </View>\n        </View>\n\n        {/* Web-specific map picker and distance selector (hideable) */}\n        <View style={{ paddingHorizontal: 16, paddingVertical: 8 }}>\n          <TouchableOpacity onPress={() => setShowPicker((s) => !s)} style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', marginBottom: 8 }}>\n            <Text style={{ fontSize: 14, fontWeight: '600' }}>Location & Distance</Text>\n            {showPicker ? <ChevronUp size={20} color=\"#5d6b4a\" /> : <ChevronDown size={20} color=\"#5d6b4a\" />}\n          </TouchableOpacity>\n\n          {showPicker ? (\n            <>\n              <Text style={{ fontSize: 14, fontWeight: '600', marginBottom: 8 }}>Pick a location on the map or use your current location</Text>\n              <div ref={setMapContainer as any} style={{ width: '100%', height: 220, borderRadius: 12, overflow: 'hidden', marginBottom: 8 }} />\n              <View style={{ flexDirection: 'row', alignItems: 'center', gap: 12 }}>\n                <View style={{ flexDirection: 'row', gap: 8 }}>\n                  {[5, 10, 25, 50].map((d) => (\n                    <TouchableOpacity\n                      key={d}\n                      style={{ paddingHorizontal: 12, paddingVertical: 8, borderRadius: 8, backgroundColor: distanceKm === d ? '#5d6b4a' : '#fff', borderWidth: 1, borderColor: '#e5e7eb' }}\n                      onPress={() => setDistanceKm(d)}\n                    >\n                      <Text style={{ color: distanceKm === d ? '#fff' : '#282E10', fontWeight: '600' }}>{d} km</Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n                <TouchableOpacity onPress={handleSearchNearby} style={{ marginLeft: 'auto', paddingHorizontal: 16, paddingVertical: 10, backgroundColor: '#64748b', borderRadius: 10 }}>\n                  <Text style={{ color: '#fff', fontWeight: '700' }}>Search Nearby</Text>\n                </TouchableOpacity>\n              </View>\n            </>\n          ) : (\n            <View style={{ flexDirection: 'row', alignItems: 'center', gap: 12 }}>\n              <Text style={{ color: '#64748b' }}>{selectedCoords ? `${selectedCoords.latitude.toFixed(4)}, ${selectedCoords.longitude.toFixed(4)}` : 'Using current location'}</Text>\n              <Text style={{ color: '#64748b' }}>{distanceKm} km</Text>\n              <TouchableOpacity onPress={handleSearchNearby} style={{ marginLeft: 'auto', paddingHorizontal: 12, paddingVertical: 8, backgroundColor: '#64748b', borderRadius: 8 }}>\n                <Text style={{ color: '#fff', fontWeight: '700' }}>Search</Text>\n              </TouchableOpacity>\n            </View>\n          )}\n        </View>\n\n      <View style={styles.categoryTrailsSection}>\n        {isLoadingNearby ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color=\"#2563eb\" />\n            <Text style={styles.loadingText}>Loading trails...</Text>\n          </View>\n          ) : (filteredTrails && filteredTrails.length > 0) ? (\n            filteredTrails.map((trail) => {\n            const anim = getBookmarkAnimation(trail.id);\n            const isSaved = isTrailSaved(trail.id);\n            return (\n            <TouchableOpacity\n              key={trail.id}\n              style={styles.largeTrailCard}\n              onPress={() => handleNavigateToTrail(trail.id)}\n            >\n              {trail.photo ? (\n                <Image\n                  source={{ uri: trail.photo }}\n                  style={styles.largeTrailImage}\n                  contentFit=\"cover\"\n                  cachePolicy=\"memory-disk\"\n                />\n              ) : (\n                <TrailMapPreview\n                  coordinates={trail.coordinates}\n                  path={(trail as any).path}\n                  style={styles.largeTrailImage}\n                  startLatitude={(trail as any).startLatitude}\n                  startLongitude={(trail as any).startLongitude}\n                />\n              )}\n              \n              <LinearGradient\n                colors={['rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0.25)', 'rgba(0, 0, 0, 0.6)']}\n                locations={[0, 0.3, 0.6, 1]}\n                style={styles.cardGradient}\n              />\n              \n              <TouchableOpacity \n                style={styles.bookmarkButton}\n                onPress={(e) => {\n                  e.stopPropagation();\n                  handleBookmarkPress(trail.id, true);\n                }}\n              >\n                <Animated.View style={{ transform: [{ scale: anim }] }}>\n                  <Bookmark \n                    size={20} \n                    color={isSaved ? \"#000\" : \"#64748b\"} \n                    fill={isSaved ? \"#000\" : \"none\"}\n                    strokeWidth={2} \n                  />\n                </Animated.View>\n              </TouchableOpacity>\n              \n              <View style={styles.cardOverlayContent}>\n                <Text style={styles.overlayTrailName}>\n                  {trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`}\n                </Text>\n                <Text style={styles.overlayLocation}>\n                  {trail.city ? `${trail.city}, ${trail.country || 'Unknown'}` : 'Location unknown'}\n                </Text>\n                <View style={styles.overlayBadges}>\n                  {trail.difficulty && (\n                    <View style={styles.badge}>\n                      <BarChart3 size={14} color=\"#d4d4a0\" strokeWidth={2.5} />\n                      <Text style={styles.badgeText}>{trail.difficulty}</Text>\n                    </View>\n                  )}\n                  <View style={styles.badge}>\n                    <MapPin size={14} color=\"#d4d4a0\" strokeWidth={2.5} />\n                    <Text style={styles.badgeText}>{formatDistance(trail.distance)}</Text>\n                  </View>\n                  {typeof (trail as any).distance_from_user === 'number' && (\n                    <View style={styles.badge}>\n                      <MapPin size={14} color=\"#d4d4a0\" strokeWidth={2.5} />\n                      <Text style={styles.badgeText}>{formatDistance((trail as any).distance_from_user)}</Text>\n                    </View>\n                  )}\n                  {trail.rating && (\n                    <View style={styles.badge}>\n                      <Star size={14} color=\"#fbbf24\" fill=\"#fbbf24\" strokeWidth={2} />\n                      <Text style={styles.badgeText}>{trail.rating.toFixed(1)}</Text>\n                    </View>\n                  )}\n                </View>\n              </View>\n            </TouchableOpacity>\n            );\n          })\n        ) : (\n          <View style={styles.emptyContainer}>\n            <MapPin size={48} color=\"#9ca3af\" />\n            <Text style={styles.emptyText}>\n              No trails found nearby. Try a wider search or record a trail to share with others.\n            </Text>\n          </View>\n        )}\n      </View>\n\n        <View style={styles.bottomPadding} />\n      </ScrollView>\n\n      <Modal\n        visible={showSearchModal}\n        animationType=\"slide\"\n        presentationStyle=\"fullScreen\"\n        onRequestClose={handleCloseSearchModal}\n      >\n        <View style={[styles.searchModalContainer, { paddingTop: insets.top }]}>\n          <View style={styles.searchModalHeader}>\n            <TouchableOpacity\n              style={styles.backButton}\n              onPress={handleCloseSearchModal}\n            >\n              <ChevronLeft size={24} color=\"#5d6b4a\" />\n            </TouchableOpacity>\n            <View style={styles.searchModalInputContainer}>\n              <TextInput\n                style={styles.searchModalInput}\n                placeholder=\"Find trails\"\n                placeholderTextColor=\"#9ca3af\"\n                value={searchQuery}\n                onChangeText={setSearchQuery}\n                autoFocus\n                returnKeyType=\"search\"\n              />\n              {searchQuery.length > 0 && (\n                <TouchableOpacity \n                  style={styles.clearButton}\n                  onPress={() => setSearchQuery('')}\n                >\n                  <X size={20} color=\"#64748b\" />\n                </TouchableOpacity>\n              )}\n            </View>\n          </View>\n\n          <View style={styles.searchModalContent}>\n            {searchQuery.trim() === '' && (\n              <TouchableOpacity\n                style={styles.currentLocationItem}\n                onPress={handleCurrentLocationPress}\n              >\n                <View style={styles.locationIconContainer}>\n                  <Navigation size={20} color=\"#5d6b4a\" />\n                </View>\n                <View style={styles.locationTextContainer}>\n                  <Text style={styles.locationTitle}>Current location</Text>\n                  <Text style={styles.locationSubtitle}>{currentLocation}</Text>\n                </View>\n              </TouchableOpacity>\n            )}\n\n            {searchSuggestions.length > 0 && (\n              <FlatList\n                data={searchSuggestions}\n                keyExtractor={(item) => item.id}\n                renderItem={({ item }) => (\n                  <TouchableOpacity\n                    style={styles.suggestionItem}\n                    onPress={() => handleSuggestionPress(item.id)}\n                  >\n                    <View style={styles.suggestionIconContainer}>\n                      <MapPin size={20} color=\"#64748b\" />\n                    </View>\n                    <View style={styles.suggestionTextContainer}>\n                      <Text style={styles.suggestionTitle}>{item.name}</Text>\n                      <Text style={styles.suggestionSubtitle}>{item.location}</Text>\n                    </View>\n                  </TouchableOpacity>\n                )}\n                showsVerticalScrollIndicator={false}\n              />\n            )}\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\n// styles are imported from explore.styles.ts\n","import React from 'react';\nimport {\n  View,\n  StyleSheet,\n  TouchableOpacity,\n  Alert,\n  ActivityIndicator,\n  ScrollView,\n  Platform,\n  TextInput,\n  Modal,\n  Animated,\n  Text,\n} from 'react-native';\nimport { Image } from 'expo-image';\nimport * as Haptics from 'expo-haptics';\nimport * as ImagePicker from 'expo-image-picker';\nimport { API_URL } from '@/lib/api';\nimport { useAuth } from '@/context/AuthContext';\nimport { useAccount } from '@/context/AccountContext';\nimport { useDogs } from '@/context/DogsContext';\nimport { useTrails } from '@/context/TrailsContext';\n\nimport { Mail, LogOut, Dog, Camera, X, MapPin, Star, BarChart3, Bookmark, LucideTableOfContents } from 'lucide-react-native';\nimport theme from '@/constants/colors';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './profile.styles';\nimport { useRouter } from 'expo-router';\nimport { formatDistance } from '@/utils/distance';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport TrailMapPreview from '@/components/TrailMapPreview';\n// Use bundler require for local asset so Metro/Expo can resolve it reliably\nconst Icon = require('../../assets/images/icon.png');\n\ntype ProfileTab = 'created' | 'saved' | 'reviews';\n\nexport default function ProfileScreen() {\n  const auth = useAuth();\n  if (!auth) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n        </View>\n      </View>\n    );\n  }\n  const { user, signOut, session } = auth;\n  const { userProfile, updateAccount, isLoading: isAccountLoading } = useAccount();\n  const { dogProfile, isDogProfileLoading } = useDogs();\n  const { trails, savedTrails, isLoading: isTrailsLoading, saveTrailBookmark, removeTrailBookmark, isTrailSaved } = useTrails();\n  const [isLoading, setIsLoading] = React.useState<boolean>(false);\n  const [showEditModal, setShowEditModal] = React.useState<boolean>(false);\n  const [editedName, setEditedName] = React.useState<string>('');\n  const [editedPhoto, setEditedPhoto] = React.useState<string | number>('');\n  const [isSaving, setIsSaving] = React.useState<boolean>(false);\n  const [selectedTab, setSelectedTab] = React.useState<ProfileTab>('created');\n  const [bookmarkAnimations, setBookmarkAnimations] = React.useState<Record<string, Animated.Value>>({});\n  const insets = useSafeAreaInsets();\n  const router = useRouter();\n\n\n  React.useEffect(() => {\n    const defaultName = userProfile?.name || user?.email?.split('@')[0] || '';\n    // Use profile image if available, otherwise use bundled app icon as default\n    const defaultPhoto = userProfile?.image || Icon;\n    setEditedName(defaultName);\n    setEditedPhoto(defaultPhoto);\n  }, [user, userProfile]);\n\n  const totalWalks = trails.length;\n  const totalTime = trails.reduce((acc, trail) => acc + (trail.duration || 0), 0);\n  const totalDistance = trails.reduce((acc, trail) => acc + trail.distance, 0);\n\n  const formatTime = (seconds: number): string => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    if (hours > 0) {\n      return `${hours}.${Math.floor(minutes / 6)}h`;\n    }\n    return `${minutes}m`;\n  };\n\n  const handleTabPress = (tab: ProfileTab) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setSelectedTab(tab);\n  };\n\n  const handleNavigateToTrail = (trailId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.push(`/trail/${trailId}`);\n  };\n\n  const getBookmarkAnimation = (trailId: string) => {\n    if (!bookmarkAnimations[trailId]) {\n      const newAnim = new Animated.Value(1);\n      setBookmarkAnimations(prev => ({ ...prev, [trailId]: newAnim }));\n      return newAnim;\n    }\n    return bookmarkAnimations[trailId];\n  };\n\n  const handleBookmarkPress = async (trailId: string) => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    const anim = getBookmarkAnimation(trailId);\n    const isSaved = isTrailSaved(trailId);\n\n    Animated.sequence([\n      Animated.timing(anim, {\n        toValue: 0.6,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.spring(anim, {\n        toValue: 1,\n        friction: 3,\n        tension: 100,\n        useNativeDriver: true,\n      }),\n    ]).start();\n\n    try {\n      if (isSaved) {\n        await removeTrailBookmark(trailId);\n      } else {\n        await saveTrailBookmark(trailId);\n        if (Platform.OS !== 'web') {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to toggle bookmark:', error);\n    }\n  };\n\n  const handleSignOut = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n    Alert.alert(\n      'Sign Out',\n      'Are you sure you want to sign out?',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Sign Out',\n          style: 'destructive',\n          onPress: async () => {\n            if (Platform.OS !== 'web') {\n              Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n            }\n            setIsLoading(true);\n            try {\n              await signOut();\n            } catch (error: any) {\n              if (Platform.OS !== 'web') {\n                Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n              }\n              Alert.alert('Error', error.message || 'Failed to sign out');\n            } finally {\n              setIsLoading(false);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const handleEditDogProfile = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.push('/onboarding/dog-basics');\n  };\n\n  const handleOpenEditModal = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowEditModal(true);\n  };\n\n  const handleCloseEditModal = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowEditModal(false);\n    const defaultName = userProfile?.name || user?.email?.split('@')[0] || '';\n    const defaultPhoto = userProfile?.image || Icon;\n    setEditedName(defaultName);\n    setEditedPhoto(defaultPhoto);\n  };\n\n  const handlePickImage = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    \n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'Please allow access to your photo library');\n      return;\n    }\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.8,\n    });\n\n    if (!result.canceled && result.assets[0]) {\n      setEditedPhoto(result.assets[0].uri);\n    }\n  };\n\n  const handleSaveProfile = async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    if (!editedName.trim()) {\n      Alert.alert('Error', 'Name cannot be empty');\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      let finalPhoto: string | undefined;\n\n      // If editedPhoto is a string but not a remote URL, upload it to the server first\n      if (typeof editedPhoto === 'string' && editedPhoto && !editedPhoto.startsWith('http')) {\n        if (!session?.accessToken || !user?.id) throw new Error('No active session for upload');\n\n        const form = new FormData();\n\n        // Build file object for RN/Expo fetch\n        const uriParts = editedPhoto.split('/');\n        const fileName = uriParts[uriParts.length - 1] || `photo_${Date.now()}.jpg`;\n        const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n        const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n        const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n\n        // Append file and auxiliary fields to match curl example\n        // @ts-ignore - React Native FormData file\n        form.append('file', { uri: editedPhoto, name: fileName, type: mimeType });\n        form.append('filename', fileName);\n        form.append('dog_id', '');\n        form.append('trail_id', '');\n        form.append('user_id', user.id);\n\n        const uploadResp = await fetch(`${API_URL}/uploads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${session.accessToken}`,\n            'accept': 'application/json',\n            // Do NOT set Content-Type; let fetch set the multipart boundary\n          },\n          body: form as any,\n        });\n\n        if (!uploadResp.ok) {\n          const errText = await uploadResp.text();\n          throw new Error(`Upload failed: ${uploadResp.status} ${errText}`);\n        }\n\n        const uploadData = await uploadResp.json();\n        finalPhoto = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n        if (!finalPhoto) throw new Error('Upload did not return a public URL');\n      } else if (typeof editedPhoto === 'string' && editedPhoto.startsWith('http')) {\n        finalPhoto = editedPhoto;\n      }\n\n      // Update account with name and (if present) the uploaded image URL\n      await updateAccount({\n        name: editedName.trim(),\n        image: finalPhoto,\n      });\n\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n\n      setShowEditModal(false);\n      Alert.alert('Success', 'Profile updated successfully!');\n    } catch (error: any) {\n      console.error('Failed to save profile:', error);\n      if (Platform.OS !== 'web') {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      Alert.alert('Error', error?.message || 'Failed to update profile');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const getDisplayedTrails = () => {\n    if (selectedTab === 'created') return trails;\n    if (selectedTab === 'saved') return savedTrails;\n    return [];\n  };\n\n  const displayedTrails = getDisplayedTrails();\n\n  return (\n    <View style={styles.container}>\n      <ScrollView style={styles.scrollContainer} contentContainerStyle={[styles.content, { paddingTop: insets.top + 16, paddingBottom: insets.bottom + 20 }]}>\n      <View style={styles.userSection}>\n        <View style={styles.userHeader}>\n          <TouchableOpacity style={styles.userAvatar} onPress={handleOpenEditModal}>\n            {editedPhoto ? (\n              <Image\n                source={editedPhoto}\n                style={styles.userAvatarImage}\n                contentFit=\"cover\"\n                cachePolicy=\"memory-disk\"\n              />\n            ) : (\n              <View style={styles.initialAvatar}>\n                <Text style={styles.initialAvatarText}>{(editedName || userProfile?.name || user?.email || 'A').charAt(0).toUpperCase()}</Text>\n              </View>\n            )}\n          </TouchableOpacity>\n          <View style={styles.userInfo}>\n            <Text style={styles.userName}>{userProfile?.name || editedName || 'Account Holder'}</Text>\n            <View style={styles.userEmailRow}>\n              <Mail size={14} color={theme.accentPrimary} />\n              <Text style={styles.userEmail}>{user?.email || 'Not available'}</Text>\n            </View>\n          </View>\n          <TouchableOpacity\n            style={styles.settingsButton}\n            onPress={() => router.push('/settings')}\n            accessibilityLabel=\"Open settings\"\n          >\n            <LucideTableOfContents size={20} color={theme.accentSecondary} />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {isDogProfileLoading ? (\n        <View style={styles.dogCardContainer}>\n          <View style={styles.loadingDogCard}>\n            <ActivityIndicator size=\"large\" color={theme.accentPrimary} />\n          </View>\n        </View>\n      ) : dogProfile ? (\n        <View style={styles.dogCardContainer}>\n          <TouchableOpacity style={styles.dogCard} onPress={handleEditDogProfile}>\n            <View style={styles.dogPhotoContainer}>\n              {dogProfile.image ? (\n                <Image\n                  source={dogProfile.image}\n                  style={styles.dogPhoto}\n                  contentFit=\"cover\"\n                  cachePolicy=\"memory-disk\"\n                />\n              ) : (\n                <View style={[styles.dogPhoto, styles.dogPhotoPlaceholder]}>\n                  <Dog size={40} color={theme.accentPrimary} />\n                </View>\n              )}\n            </View>\n            \n            <Text style={styles.dogName}>{dogProfile.name}</Text>\n            {dogProfile.nickname && (\n              <Text style={styles.dogNickname}>\n                {dogProfile.nickname}\n              </Text>\n            )}\n            {!dogProfile.nickname && <View style={styles.nicknameSpacing} />}\n\n            <View style={styles.statsRow}>\n              <View style={styles.statItem}>\n                <Text style={styles.statValue}>{totalWalks}</Text>\n                <Text style={styles.statLabel}>Walks</Text>\n              </View>\n              <View style={styles.statItem}>\n                <Text style={styles.statValue}>{formatTime(totalTime)}</Text>\n                <Text style={styles.statLabel}>Total Time</Text>\n              </View>\n              <View style={styles.statItem}>\n                <Text style={styles.statValue}>{formatDistance(totalDistance)}</Text>\n                <Text style={styles.statLabel}>Total Dist.</Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n        </View>\n      ) : (\n        <View style={styles.dogCardContainer}>\n          <View style={styles.noDogCard}>\n            <Dog size={48} color={theme.textMuted} />\n            <Text style={styles.noDogText}>No dog profile yet</Text>\n            <TouchableOpacity\n              style={styles.addDogButton}\n              onPress={handleEditDogProfile}\n            >\n              <Text style={styles.addDogButtonText}>Add Dog Profile</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n\n      <View style={styles.tabsContainer}>\n        <TouchableOpacity\n          style={[styles.tab, selectedTab === 'created' && styles.tabActive]}\n          onPress={() => handleTabPress('created')}\n        >\n          <Text style={[styles.tabCount, selectedTab === 'created' && styles.tabCountActive]}>{trails.length}</Text>\n          <Text style={[styles.tabText, selectedTab === 'created' && styles.tabTextActive]}>Created</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.tab, selectedTab === 'saved' && styles.tabActive]}\n          onPress={() => handleTabPress('saved')}\n        >\n          <Text style={[styles.tabCount, selectedTab === 'saved' && styles.tabCountActive]}>{savedTrails.length}</Text>\n          <Text style={[styles.tabText, selectedTab === 'saved' && styles.tabTextActive]}>Saved</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.tab, selectedTab === 'reviews' && styles.tabActive]}\n          onPress={() => handleTabPress('reviews')}\n        >\n          <Text style={[styles.tabCount, selectedTab === 'reviews' && styles.tabCountActive]}>0</Text>\n          <Text style={[styles.tabText, selectedTab === 'reviews' && styles.tabTextActive]}>Reviews</Text>\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.trailsSection}>\n        {isTrailsLoading ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n          </View>\n        ) : displayedTrails.length > 0 ? (\n          displayedTrails.map((trail) => {\n            const anim = getBookmarkAnimation(trail.id);\n            const isSaved = isTrailSaved(trail.id);\n            return (\n            <TouchableOpacity\n              key={trail.id}\n              style={styles.trailCard}\n              onPress={() => handleNavigateToTrail(trail.id)}\n            >\n              {trail.photo ? (\n                <Image source={{ uri: trail.photo }} style={styles.trailImage} />\n              ) : (\n                <TrailMapPreview\n                  coordinates={trail.coordinates}\n                  path={(trail as any).path}\n                  style={styles.trailImage}\n                  startLatitude={(trail as any).startLatitude}\n                  startLongitude={(trail as any).startLongitude}\n                />\n              )}\n              \n              <LinearGradient\n                colors={['rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0.25)', 'rgba(0, 0, 0, 0.6)']}\n                locations={[0, 0.3, 0.6, 1]}\n                style={styles.trailGradient}\n              />\n              \n              <TouchableOpacity \n                style={styles.bookmarkButton}\n                onPress={(e) => {\n                  e.stopPropagation();\n                  handleBookmarkPress(trail.id);\n                }}\n              >\n                <Animated.View style={{ transform: [{ scale: anim }] }}>\n                  <Bookmark \n                    size={20} \n                    color={isSaved ? \"#000\" : theme.textMuted} \n                    fill={isSaved ? \"#000\" : \"none\"}\n                    strokeWidth={2} \n                  />\n                </Animated.View>\n              </TouchableOpacity>\n              \n              <View style={styles.trailContent}>\n                <Text style={styles.trailName}>\n                  {trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`}\n                </Text>\n                <Text style={styles.trailLocation}>\n                  {trail.city ? `${trail.city}, ${trail.country || 'Unknown'}` : 'Location unknown'}\n                </Text>\n                <View style={styles.trailBadges}>\n                  {trail.difficulty && (\n                    <View style={styles.trailBadge}>\n                      <BarChart3 size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                      <Text style={styles.trailBadgeText}>{trail.difficulty}</Text>\n                    </View>\n                  )}\n                  <View style={styles.trailBadge}>\n                    <MapPin size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                    <Text style={styles.trailBadgeText}>{formatDistance(trail.distance)}</Text>\n                  </View>\n                  {trail.rating && (\n                    <View style={styles.trailBadge}>\n                      <Star size={14} color={theme.accentPrimary} fill={theme.accentPrimary} strokeWidth={2} />\n                      <Text style={styles.trailBadgeText}>{trail.rating.toFixed(1)}</Text>\n                    </View>\n                  )}\n                </View>\n              </View>\n            </TouchableOpacity>\n            );\n          })\n        ) : (\n          <View style={styles.emptyContainer}>\n            <MapPin size={48} color={theme.textMuted} />\n            <Text style={styles.emptyText}>\n              {selectedTab === 'created' \n                ? 'No trails created yet'\n                : selectedTab === 'saved'\n                ? 'No trails saved yet'\n                : 'No reviews yet'}\n            </Text>\n          </View>\n        )}\n      </View>\n\n      <TouchableOpacity\n        style={[styles.signOutButton, isLoading && styles.signOutButtonDisabled]}\n        onPress={handleSignOut}\n        disabled={isLoading}\n      >\n        {isLoading ? (\n          <ActivityIndicator color={theme.backgroundPrimary} />\n        ) : (\n          <>\n            <LogOut size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.signOutText}>Sign Out</Text>\n          </>\n        )}\n      </TouchableOpacity>\n\n      <Modal\n        visible={showEditModal}\n        animationType=\"slide\"\n        presentationStyle=\"pageSheet\"\n        onRequestClose={handleCloseEditModal}\n      >\n        <View style={styles.modalContainer}>\n          <View style={[styles.modalHeader, { paddingTop: insets.top + 20 }]}>\n            <Text style={styles.modalTitle}>Edit Profile</Text>\n            <TouchableOpacity\n              style={styles.closeButton}\n              onPress={handleCloseEditModal}\n            >\n              <X size={24} color={theme.backgroundPrimary} />\n            </TouchableOpacity>\n          </View>\n\n          <ScrollView style={styles.modalContent}>\n            <View style={styles.photoSection}>\n              <TouchableOpacity\n                style={styles.photoContainer}\n                onPress={handlePickImage}\n              >\n                {editedPhoto ? (\n                  <Image\n                    source={editedPhoto}\n                    style={styles.editPhoto}\n                    contentFit=\"cover\"\n                    cachePolicy=\"memory-disk\"\n                  />\n                ) : (\n                  <View style={[styles.editPhoto, styles.initialAvatar] }>\n                    <Text style={styles.initialAvatarText}>{(editedName || userProfile?.name || user?.email || 'A').charAt(0).toUpperCase()}</Text>\n                  </View>\n                )}\n                <View style={styles.cameraOverlay}>\n                  <Camera size={24} color={theme.accentPrimary} />\n                </View>\n              </TouchableOpacity>\n              <Text style={styles.photoHint}>Tap to change photo</Text>\n            </View>\n\n            <View style={styles.inputSection}>\n              <Text style={styles.inputLabel}>Name</Text>\n              <TextInput\n                style={styles.input}\n                value={editedName}\n                onChangeText={setEditedName}\n                placeholder=\"Enter your name\"\n                placeholderTextColor={theme.textMuted}\n              />\n            </View>\n\n            <View style={styles.inputSection}>\n              <Text style={styles.inputLabel}>Email</Text>\n              <View style={styles.disabledInput}>\n                <Text style={styles.disabledInputText}>{user?.email}</Text>\n              </View>\n              <Text style={styles.inputHint}>Email cannot be changed</Text>\n            </View>\n          </ScrollView>\n\n          <View style={[styles.modalFooter, { paddingBottom: insets.bottom + 20 }]}>\n            <TouchableOpacity\n              style={[styles.saveButton, isSaving && styles.saveButtonDisabled]}\n              onPress={handleSaveProfile}\n              disabled={isSaving}\n            >\n              {isSaving ? (\n                <ActivityIndicator color={theme.accentPrimary} />\n              ) : (\n                <Text style={styles.saveButtonText}>Save Changes</Text>\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n    </ScrollView>\n    </View>\n  );\n}\n\n// styles are imported from profile.styles.ts\n","// Shim for @react-native-firebase packages when bundling for web.\n// This prevents the web bundle from trying to resolve native modules.\nfunction notAvailable() {\n  throw new Error('@react-native-firebase is not available in web builds.');\n}\n\n// Support both require() and import default behaviors\nmodule.exports = notAvailable;\nmodule.exports.default = notAvailable;\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundSecondaryVarient,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  content: {\n    padding: 24,\n  },\n  header: {\n    marginBottom: 32,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  subtitle: {\n    fontSize: 16,\n    color: theme.accentPrimary,\n    textAlign: 'center',\n    marginBottom: 24,\n  },\n  progressContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  progressDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#3d4520',\n  },\n  progressDotActive: {\n    backgroundColor: theme.accentPrimary,\n  },\n  tagsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n  },\n  tag: {\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 24,\n    backgroundColor: '#282E10',\n    borderWidth: 1.5,\n    borderColor: '#3d4520',\n  },\n  tagSelected: {\n    backgroundColor: 'rgba(255, 254, 119, 0.15)',\n    borderColor: theme.accentPrimary,\n  },\n  tagText: {\n    fontSize: 15,\n    fontWeight: '500' as const,\n    color: theme.accentPrimary,\n  },\n  tagTextSelected: {\n    color: theme.accentPrimary,\n    fontWeight: '600' as const,\n  },\n  sectionHeader: {\n    marginTop: 32,\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: 24,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n  },\n  section: {\n    marginBottom: 24,\n  },\n  label: {\n    fontSize: 17,\n    fontWeight: '600' as const,\n    color: theme.accentPrimary,\n    marginBottom: 4,\n  },\n  helperText: {\n    fontSize: 14,\n    color: theme.accentPrimary,\n    marginBottom: 12,\n  },\n  recallContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  recallOption: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 12,\n    backgroundColor: '#282E10',\n    borderWidth: 1.5,\n    borderColor: '#3d4520',\n    alignItems: 'center',\n  },\n  recallOptionSelected: {\n    backgroundColor: 'rgba(255, 254, 119, 0.15)',\n    borderColor: theme.accentPrimary,\n  },\n  recallText: {\n    fontSize: 14,\n    fontWeight: '500' as const,\n    color: theme.accentPrimary,\n  },\n  recallTextSelected: {\n    color: theme.accentPrimary,\n    fontWeight: '600' as const,\n  },\n  footer: {\n    flexDirection: 'row',\n    gap: 12,\n    paddingHorizontal: 24,\n    paddingTop: 20,\n    borderTopWidth: 1,\n    borderTopColor: '#3d4520',\n    backgroundColor: '#282E10',\n  },\n  backButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: 'transparent',\n    borderRadius: 12,\n    padding: 18,\n    borderWidth: 1.5,\n    borderColor: theme.accentPrimary,\n  },\n  backButtonText: {\n    fontSize: 17,\n    fontWeight: '600' as const,\n    color: theme.accentPrimary,\n  },\n  finishButton: {\n    flex: 1,\n    backgroundColor: theme.accentPrimary,\n    borderRadius: 12,\n    padding: 18,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  finishButtonDisabled: {\n    opacity: 0.6,\n  },\n  finishButtonText: {\n    fontSize: 17,\n    fontWeight: '600' as const,\n    color: '#1a1f0a',\n  },\n});\n\nexport default styles;\n","// Minimal shim for lottie-react-native on web builds.\n// Exports a React component that renders nothing so native-only Lottie usage\n// doesn't break web bundling.\nconst React = require('react');\n\nfunction LottieView(_props) {\n  return null;\n}\n\nmodule.exports = LottieView;\nmodule.exports.default = LottieView;\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  content: {\n    paddingHorizontal: 16,\n  },\n  settingsButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.backgroundPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  userSection: {\n    marginBottom: 24,\n  },\n  userHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  userAvatar: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    overflow: 'hidden',\n    backgroundColor: theme.accentPrimary,\n    borderWidth: 2,\n    borderColor: theme.backgroundPrimary,\n  },\n  userAvatarImage: {\n    width: '100%',\n    height: '100%',\n  },\n  userInfo: {\n    marginLeft: 12,\n    flex: 1,\n  },\n  userName: {\n    fontSize: 20,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n    marginBottom: 2,\n  },\n  userEmailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  userEmail: {\n    fontSize: 14,\n    color: theme.accentPrimary,\n    opacity: 0.8,\n    marginLeft: 6,\n  },\n  dogCardContainer: {\n    marginBottom: 24,\n  },\n  dogCard: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 24,\n    padding: 24,\n    alignItems: 'center',\n    borderWidth: 0,\n    borderColor: theme.backgroundPrimary,\n  },\n  dogPhotoContainer: {\n    marginBottom: 16,\n  },\n  dogPhoto: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    backgroundColor: theme.backgroundSecondaryVarient,\n    borderWidth: 0,\n    borderColor: theme.accentPrimary,\n  },\n  dogPhotoPlaceholder: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  dogName: {\n    fontSize: 22,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n    marginBottom: 4,\n  },\n  dogNickname: {\n    fontSize: 14,\n    color: theme.textMuted,\n    opacity: 0.9,\n    marginBottom: 16,\n  },\n  nicknameSpacing: {\n    height: 16,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    width: '100%',\n    marginBottom: 20,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: 13,\n    color: theme.textSecondary,\n    opacity: 0.8,\n  },\n  dogInfoRow: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  dogInfoBadge: {\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 16,\n  },\n  dogInfoText: {\n    fontSize: 14,\n    color: theme.textPrimary,\n    fontWeight: '500' as const,\n  },\n  loadingDogCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    padding: 48,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.backgroundPrimary,\n  },\n  noDogCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    padding: 32,\n    alignItems: 'center',\n    gap: 12,\n    borderWidth: 1,\n    borderColor: theme.backgroundPrimary,\n  },\n  noDogText: {\n    fontSize: 16,\n    color: theme.accentPrimary,\n    opacity: 0.9,\n    textAlign: 'center',\n  },\n  addDogButton: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 12,\n    marginTop: 8,\n  },\n  addDogButtonText: {\n    fontSize: 15,\n    fontWeight: '600' as const,\n    color: theme.textPrimary,\n  },\n  tabsContainer: {\n    flexDirection: 'row',\n    marginBottom: 20,\n    gap: 12,\n  },\n  tab: {\n    flex: 1,\n    backgroundColor: theme.backgroundSecondary,\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    borderRadius: 16,\n    alignItems: 'center',\n    borderWidth: 0,\n  },\n  tabActive: {\n    backgroundColor: theme.accentPrimary,\n  },\n  tabText: {\n    fontSize: 14,\n    fontWeight: '600' as const,\n    color: theme.textMuted,\n  },\n  tabTextActive: {\n    color: theme.backgroundSecondary,\n  },\n  tabCount: {\n    fontSize: 24,\n    fontWeight: '700' as const,\n    color: theme.accentPrimary,\n    marginBottom: 4,\n  },\n  tabCountActive: {\n    color: theme.backgroundPrimary,\n  },\n  trailsSection: {\n    marginBottom: 24,\n  },\n  trailCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    overflow: 'hidden',\n    marginBottom: 20,\n    shadowColor: theme.backgroundSecondaryVarient,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 4,\n    position: 'relative',\n  },\n  trailImage: {\n    width: '100%',\n    height: 260,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  loadingContainer: {\n    paddingVertical: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  trailGradient: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    height: 120,\n  },\n  bookmarkButton: {\n    position: 'absolute',\n    top: 12,\n    right: 12,\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    backgroundColor: 'rgba(255,255,255,0.95)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.backgroundSecondary,\n  },\n  trailContent: {\n    position: 'absolute',\n    left: 12,\n    right: 12,\n    bottom: 12,\n    padding: 12,\n  },\n  trailName: {\n    fontSize: 18,\n    fontWeight: '700' as const,\n    color: theme.textPrimary,\n    marginBottom: 4,\n  },\n  trailLocation: {\n    fontSize: 13,\n    color: theme.textPrimary,\n    opacity: 0.95,\n  },\n  trailBadges: {\n    flexDirection: 'row',\n    gap: 8,\n    marginTop: 8,\n  },\n  trailBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    backgroundColor: 'rgba(255,255,255,0.08)',\n    paddingHorizontal: 8,\n    paddingVertical: 6,\n    borderRadius: 12,\n  },\n  trailBadgeText: {\n    fontSize: 13,\n    color: theme.textPrimary,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: theme.backgroundPrimary,\n    opacity: 0.7,\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 40,\n  },\n  signOutButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 12,\n    backgroundColor: theme.accentPrimary,\n    borderRadius: 12,\n    padding: 16,\n    marginTop: 16,\n    borderWidth: 1,\n    borderColor: theme.accentPrimary,\n  },\n  signOutButtonDisabled: {\n    opacity: 0.6,\n  },\n  signOutText: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n    color: theme.backgroundPrimary,\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingBottom: 20,\n    backgroundColor: theme.backgroundPrimary,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.accentPrimary,\n  },\n  modalTitle: {\n    fontSize: 24,\n    fontWeight: '700' as const,\n    color: theme.textPrimary,\n  },\n  closeButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  inputLabel: {\n    fontSize: 15,\n    fontWeight: '600' as const,\n    color: theme.backgroundPrimary,\n    marginBottom: 8,\n  },\n  input: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 16,\n    fontSize: 16,\n    color: theme.textPrimary,\n    borderWidth: 1,\n    borderColor: theme.accentPrimary,\n  },\n  initialAvatar: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  initialAvatarText: {\n    fontSize: 36,\n    fontWeight: '700' as const,\n    color: theme.textPrimary,\n  },\n  /* Modal / Edit profile styles */\n  modalContent: {\n    paddingHorizontal: 16,\n    paddingTop: 16,\n    paddingBottom: 80,\n  },\n  photoSection: {\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  photoContainer: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    overflow: 'hidden',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.accentPrimary,\n    borderWidth: 3,\n    borderColor: theme.backgroundPrimary,\n  },\n  editPhoto: {\n    width: '100%',\n    height: '100%',\n  },\n  cameraOverlay: {\n    position: 'absolute',\n    right: 8,\n    bottom: 8,\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: theme.backgroundPrimary + '22',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  photoHint: {\n    fontSize: 13,\n    color: theme.textMuted,\n    marginTop: 8,\n  },\n  inputSection: {\n    marginBottom: 16,\n  },\n  disabledInput: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: theme.accentPrimary,\n  },\n  disabledInputText: {\n    fontSize: 15,\n    color: theme.backgroundPrimary,\n    opacity: 0.8,\n  },\n  inputHint: {\n    fontSize: 12,\n    color: theme.textMuted,\n    marginTop: 6,\n  },\n  modalFooter: {\n    paddingHorizontal: 16,\n    paddingTop: 12,\n    borderTopWidth: 1,\n    borderTopColor: theme.accentPrimary,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  saveButton: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingVertical: 14,\n    borderRadius: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    fontSize: 16,\n    fontWeight: '700' as const,\n    color: theme.textPrimary,\n  },\n});\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: theme.backgroundPrimary,\n    },\n    headerButtons: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        zIndex: 100,\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingHorizontal: 16,\n    },\n    headerButton: {\n        width: 44,\n        height: 44,\n        borderRadius: 22,\n        backgroundColor: theme.textPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        shadowColor: theme.backgroundSecondaryVarient,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.15,\n        shadowRadius: 4,\n        elevation: 4,\n    },\n    headerRightButtons: {\n        flexDirection: 'row',\n        gap: 12,\n    },\n    scrollContainer: {\n        flex: 1,\n    },\n    scrollContent: {\n        paddingBottom: 32,\n    },\n    loadingContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: theme.backgroundPrimary,\n    },\n    loadingText: {\n        marginTop: 16,\n        fontSize: 16,\n        color: theme.accentPrimary,\n        fontWeight: '500' as const,\n    },\n    heroSection: {\n        position: 'relative',\n    },\n    heroImageContainer: {\n        width: '100%',\n        height: 500,\n        position: 'relative',\n    },\n    heroImage: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: theme.borderSubtle,\n    },\n    heroGradient: {\n        position: 'absolute',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        height: 100,\n    },\n    changePhotoFab: {\n        position: 'absolute',\n        bottom: 80,\n        right: 20,\n        width: 56,\n        height: 56,\n        borderRadius: 28,\n        backgroundColor: theme.backgroundPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 8,\n        elevation: 6,\n    },\n\n    addPhotoContainer: {\n        width: '100%',\n        height: 280,\n        backgroundColor: theme.accentPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        paddingHorizontal: 32,\n    },\n    addPhotoIcon: {\n        width: 72,\n        height: 72,\n        borderRadius: 36,\n        backgroundColor: theme.backgroundPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginBottom: 16,\n    },\n    addPhotoText: {\n        fontSize: 18,\n        fontWeight: '600' as const,\n        color: theme.textPrimary,\n        marginBottom: 4,\n    },\n    addPhotoSubtext: {\n        fontSize: 14,\n        color: theme.backgroundSecondary,\n    },\n    contentWrapper: {\n        backgroundColor: theme.backgroundPrimary,\n        borderTopLeftRadius: 24,\n        borderTopRightRadius: 24,\n        marginTop: -24,\n        zIndex: 10,\n    },\n    content: {\n        padding: 24,\n    },\n    titleSection: {\n        marginBottom: 20,\n    },\n    titleRow: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        gap: 12,\n        marginBottom: 8,\n    },\n    title: {\n        flex: 1,\n        fontSize: 32,\n        fontWeight: '700' as const,\n        color: theme.textPrimary,\n        lineHeight: 40,\n    },\n    editIconButton: {\n        width: 40,\n        height: 40,\n        borderRadius: 20,\n        backgroundColor: theme.accentPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 4,\n    },\n    nameEditContainer: {\n        marginBottom: 8,\n    },\n    nameInput: {\n        fontSize: 28,\n        fontWeight: '700' as const,\n        color: theme.textPrimary,\n        backgroundColor: theme.textPrimary,\n        borderWidth: 2,\n        borderColor: theme.backgroundPrimary,\n        borderRadius: 12,\n        padding: 12,\n        marginBottom: 12,\n    },\n    nameInputInDetails: {\n        fontSize: 16,\n        color: theme.textPrimary,\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 1,\n        borderColor: theme.accentPrimary,\n        borderRadius: 12,\n        padding: 16,\n    },\n    editButtons: {\n        flexDirection: 'row',\n        gap: 8,\n    },\n    iconButton: {\n        width: 44,\n        height: 44,\n        borderRadius: 22,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    saveIconButton: {\n        backgroundColor: theme.backgroundPrimary,\n    },\n    cancelIconButton: {\n        backgroundColor: theme.accentPrimary,\n    },\n    locationRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n        marginBottom: 12,\n    },\n    location: {\n        fontSize: 16,\n        color: theme.backgroundSecondary,\n        fontWeight: '500' as const,\n    },\n    ratingRow: {\n        flexDirection: 'row',\n        gap: 4,\n    },\n    reviewCard: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        marginBottom: 24,\n        borderWidth: 1,\n        borderColor: theme.borderSubtle,\n    },\n    reviewText: {\n        fontSize: 16,\n        color: theme.backgroundPrimary,\n        lineHeight: 24,\n    },\n    statsSection: {\n        flexDirection: 'row',\n        flexWrap: 'wrap' as const,\n        gap: 12,\n        marginBottom: 24,\n    },\n    statCard: {\n        flex: 1,\n        minWidth: 100,\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 16,\n        alignItems: 'center',\n        shadowColor: theme.backgroundSecondaryVarient,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    statIconContainer: {\n        width: 44,\n        height: 44,\n        borderRadius: 22,\n        backgroundColor: theme.backgroundPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginBottom: 12,\n    },\n    statLabel: {\n        fontSize: 13,\n        color: theme.backgroundSecondary,\n        fontWeight: '500' as const,\n        marginBottom: 4,\n    },\n    statValue: {\n        fontSize: 20,\n        color: theme.backgroundPrimary,\n        fontWeight: '700' as const,\n    },\n    tagsSection: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        marginBottom: 20,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    sectionHeader: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 8,\n        marginBottom: 16,\n    },\n    sectionTitle: {\n        fontSize: 18,\n        fontWeight: '700' as const,\n        color: theme.backgroundPrimary,\n    },\n    tagsGrid: {\n        flexDirection: 'row',\n        flexWrap: 'wrap' as const,\n        gap: 8,\n    },\n    tagChip: {\n        backgroundColor: theme.backgroundPrimary,\n        paddingHorizontal: 16,\n        paddingVertical: 8,\n        borderRadius: 20,\n    },\n    tagText: {\n        fontSize: 14,\n        fontWeight: '500' as const,\n        color: theme.backgroundSecondary,\n    },\n    editDetailsButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: 8,\n        backgroundColor: theme.textPrimary,\n        borderRadius: 12,\n        paddingVertical: 14,\n        paddingHorizontal: 20,\n        marginBottom: 20,\n        borderWidth: 2,\n        borderColor: theme.backgroundPrimary,\n    },\n    editDetailsText: {\n        fontSize: 16,\n        fontWeight: '600' as const,\n        color: theme.backgroundPrimary,\n    },\n    editSection: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        marginBottom: 20,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    editSectionTitle: {\n        fontSize: 16,\n        fontWeight: '700' as const,\n        color: theme.textPrimary,\n        marginBottom: 12,\n    },\n    ratingStars: {\n        flexDirection: 'row',\n        gap: 8,\n    },\n    starButton: {\n        padding: 4,\n    },\n    reviewInput: {\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 1,\n        borderColor: theme.accentPrimary,\n        borderRadius: 12,\n        padding: 16,\n        fontSize: 15,\n        color: theme.textPrimary,\n        minHeight: 120,\n    },\n    difficultyOptions: {\n        flexDirection: 'row',\n        gap: 8,\n    },\n    difficultyChip: {\n        flex: 1,\n        paddingVertical: 12,\n        paddingHorizontal: 16,\n        borderRadius: 12,\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 2,\n        borderColor: theme.accentPrimary,\n        alignItems: 'center',\n    },\n    difficultyChipSelected: {\n        backgroundColor: theme.backgroundPrimary,\n        borderColor: theme.backgroundPrimary,\n    },\n    difficultyChipText: {\n        fontSize: 15,\n        fontWeight: '600' as const,\n        color: theme.backgroundSecondary,\n    },\n    difficultyChipTextSelected: {\n        color: theme.textPrimary,\n    },\n    editTagChip: {\n        paddingHorizontal: 16,\n        paddingVertical: 8,\n        borderRadius: 20,\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 1.5,\n        borderColor: theme.accentPrimary,\n    },\n    editTagChipSelected: {\n        backgroundColor: theme.backgroundPrimary,\n        borderColor: theme.backgroundPrimary,\n    },\n    editTagChipText: {\n        fontSize: 14,\n        fontWeight: '500' as const,\n        color: theme.backgroundSecondary,\n    },\n    editTagChipTextSelected: {\n        color: theme.textPrimary,\n    },\n    editActionButtons: {\n        flexDirection: 'row',\n        gap: 12,\n        marginTop: 24,\n    },\n    actionButton: {\n        flex: 1,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: 8,\n        paddingVertical: 14,\n        borderRadius: 12,\n    },\n    cancelActionButton: {\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 2,\n        borderColor: theme.accentPrimary,\n    },\n    cancelActionText: {\n        fontSize: 16,\n        fontWeight: '600' as const,\n        color: theme.textPrimary,\n    },\n    saveActionButton: {\n        backgroundColor: theme.backgroundPrimary,\n    },\n    saveActionText: {\n        fontSize: 16,\n        fontWeight: '600' as const,\n        color: theme.textPrimary,\n    },\n    mapSection: {\n        marginBottom: 20,\n    },\n    mapContainer: {\n        height: 260,\n        borderRadius: 16,\n        overflow: 'hidden',\n        marginBottom: 12,\n        borderWidth: 1,\n        borderColor: theme.accentPrimary,\n    },\n    map: {\n        width: '100%',\n        height: '100%',\n    },\n    webMapPlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: theme.accentPrimary,\n    },\n    webMapText: {\n        marginTop: 12,\n        fontSize: 14,\n        color: theme.backgroundSecondary,\n    },\n    directionsButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: theme.backgroundPrimary,\n        borderRadius: 12,\n        paddingVertical: 16,\n        paddingHorizontal: 24,\n        gap: 10,\n        shadowColor: theme.backgroundPrimary,\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 8,\n        elevation: 4,\n    },\n    directionsButtonText: {\n        fontSize: 16,\n        fontWeight: '700' as const,\n        color: theme.textPrimary,\n    },\n    detailsSection: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    detailsTitle: {\n        fontSize: 18,\n        fontWeight: '700' as const,\n        color: theme.backgroundPrimary,\n        marginBottom: 16,\n    },\n    detailRow: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        paddingVertical: 12,\n        borderBottomWidth: 1,\n        borderBottomColor: theme.backgroundPrimary,\n    },\n    detailIcon: {\n        width: 36,\n        height: 36,\n        borderRadius: 18,\n        backgroundColor: theme.accentPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginRight: 12,\n    },\n    detailContent: {\n        flex: 1,\n    },\n    detailLabel: {\n        fontSize: 13,\n        fontWeight: '600' as const,\n        color: theme.backgroundSecondary,\n        marginBottom: 2,\n    },\n    detailValue: {\n        fontSize: 16,\n        color: theme.backgroundPrimary,\n        fontWeight: '500' as const,\n    },\n});\n\nexport default styles;\n","import { Link, Stack } from \"expo-router\";\nimport React from 'react';\nimport { View, Text, StyleSheet } from \"react-native\";\n\nexport default function NotFoundScreen() {\n  return (\n    <>\n      <Stack.Screen options={{ title: \"Oops!\" }} />\n      <View style={styles.container}>\n        <Text style={styles.title}>This screen doesn&apos;t exist.</Text>\n\n        <Link href=\"/\" asChild style={styles.link}>\n          <Text style={styles.linkText}>Go to home screen!</Text>\n        </Link>\n      </View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: \"#2e78b7\",\n  },\n});\n","import { Coordinate } from '@/types/trail';\n\nexport function calculateDistance(coord1: Coordinate, coord2: Coordinate): number {\n  const R = 6371;\n  const dLat = toRad(coord2.latitude - coord1.latitude);\n  const dLon = toRad(coord2.longitude - coord1.longitude);\n  const lat1 = toRad(coord1.latitude);\n  const lat2 = toRad(coord2.latitude);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\nfunction toRad(value: number): number {\n  return (value * Math.PI) / 180;\n}\n\nexport function calculateTotalDistance(coordinates: Coordinate[]): number {\n  if (coordinates.length < 2) return 0;\n  \n  let total = 0;\n  for (let i = 0; i < coordinates.length - 1; i++) {\n    const dist = calculateDistance(coordinates[i], coordinates[i + 1]);\n    total += dist;\n  }\n  return total * 1000;\n}\n\nexport function formatDistance(meters: number): string {\n  if (meters < 1000) {\n    return `${Math.round(meters)}m`;\n  }\n  const km = meters / 1000;\n  return `${km.toFixed(2)}km`;\n}\n\nexport function formatDuration(seconds: number): string {\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor((seconds % 3600) / 60);\n  const secs = seconds % 60;\n\n  if (hrs > 0) {\n    return `${hrs}h ${mins}m`;\n  }\n  if (mins > 0) {\n    return `${mins}m ${secs}s`;\n  }\n  return `${secs}s`;\n}\n\nexport function formatDate(timestamp: number): string {\n  const date = new Date(timestamp);\n  const now = new Date();\n  const diffDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n\n  if (diffDays === 0) {\n    return `Today at ${date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}`;\n  }\n  if (diffDays === 1) {\n    return `Yesterday at ${date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}`;\n  }\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n}\n","// Single, fixed theme for the app.\n// This file exports a single `theme` object (keeps a default export for compatibility).\n\nconst themeObj = {\n  backgroundPrimary: '#191E07',\n  backgroundSecondary: '#272F0A',\n  backgroundSecondaryVarient: '#3E481B',\n\n  accentPrimary: '#FFFE77',\n  accentSecondary: '#D4FF5E',\n\n  textPrimary: '#FFFFFF',\n  textSecondary: '#BEC056',\n  textMuted: '#A0A883',\n\n  borderSubtle: '#343A20',\n  \n};\n\nexport const theme = themeObj as any;\nexport default themeObj;\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n    borderRadius: 12,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  map: {\n    width: '100%',\n    height: '100%',\n  },\n  placeholder: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 12,\n  },\n  text: {\n    color: theme.backgroundPrimary,\n    fontWeight: 'bold',\n    fontSize: 16,\n  },\n  subtext: {\n    color: theme.textMuted,\n    fontSize: 12,\n    marginTop: 4,\n  },\n});\n","import React, { useEffect, useRef } from 'react';\nimport { Text, View } from 'react-native';\nimport styles from './TrailMapPreview.styles';\nimport { Coordinate } from '@/types/trail';\nimport * as maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n// Use hosted outdoors style for web\nconst OUTDOORS_STYLE_URL = 'https://api.tailtrails.club/map/style.json';\n\n\ninterface TrailMapPreviewProps {\n  coordinates?: Coordinate[];\n  // backend may return path as [[lon, lat], ...]\n  path?: number[][] | null;\n  style?: any;\n  height?: number | string;\n  startLatitude?: number | null;\n  startLongitude?: number | null;\n}\n\nexport default function TrailMapPreview({ coordinates, path, style, height = 260, startLatitude = null, startLongitude = null }: TrailMapPreviewProps) {\n  const mapContainerRef = useRef<HTMLDivElement | null>(null);\n  const mapRef = useRef<maplibregl.Map | null>(null);\n  const markerRef = useRef<maplibregl.Marker | null>(null);\n\n  // derive coords from coordinates or path\n  const coords: Coordinate[] = (coordinates && coordinates.length > 0)\n    ? coordinates\n    : (Array.isArray((path as any)) ? (path as number[][]).map(p => ({ latitude: p[1], longitude: p[0] })) : []);\n\n  useEffect(() => {\n    if (!mapContainerRef.current) return;\n\n    // Initialize map\n    const center: [number, number] = (startLatitude != null && startLongitude != null)\n      ? [startLongitude, startLatitude]\n      : (coords.length > 0 ? [coords[0].longitude, coords[0].latitude] : [0, 0]);\n\n    const map = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: OUTDOORS_STYLE_URL,\n      center,\n      zoom: coords.length > 0 ? 12 : 1,\n      interactive: false,\n    });\n\n    mapRef.current = map;\n\n    map.on('load', () => {\n      // If we have a route (multiple points), draw it\n      if (coords && coords.length > 1) {\n        const geojson = {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'LineString',\n            coordinates: coords.map(c => [c.longitude, c.latitude]),\n          }\n        } as any;\n\n        if (map.getSource('preview-route')) {\n          (map.getSource('preview-route') as maplibregl.GeoJSONSource).setData(geojson);\n        } else {\n          map.addSource('preview-route', { type: 'geojson', data: geojson });\n\n          map.addLayer({\n            id: 'preview-route',\n            type: 'line',\n            source: 'preview-route',\n            layout: { 'line-join': 'round', 'line-cap': 'round' },\n            paint: { 'line-color': '#5d6b4a', 'line-width': 3 }\n          });\n        }\n\n        const bounds = new maplibregl.LngLatBounds();\n        coords.forEach(c => bounds.extend([c.longitude, c.latitude]));\n        map.fitBounds(bounds, { padding: 10, maxZoom: 16 });\n      }\n\n      // If there's a single point, place a marker at the location and center\n      else if (coords && coords.length === 1) {\n        const pt = coords[0];\n        // create a simple default marker\n        if (markerRef.current) {\n          markerRef.current.setLngLat([pt.longitude, pt.latitude]);\n        } else {\n          const m = new maplibregl.Marker({ color: '#5d6b4a' })\n            .setLngLat([pt.longitude, pt.latitude])\n            .addTo(map);\n          markerRef.current = m;\n        }\n\n        map.setCenter([pt.longitude, pt.latitude]);\n        map.setZoom(14);\n      }\n    });\n\n    return () => {\n      try {\n        map.remove();\n      } catch (e) {\n        // ignore remove errors\n      }\n      mapRef.current = null;\n      markerRef.current = null;\n    };\n  // Recreate map when coordinates/path/start center change\n  }, [JSON.stringify(coords), startLatitude, startLongitude]);\n\n  return (\n    <View style={[styles.container, style]}>\n      {coords && coords.length > 0 ? (\n        <div\n          ref={mapContainerRef}\n          style={{ width: '100%', height: typeof height === 'number' ? `${height}px` : height }}\n        />\n      ) : (\n        <View style={styles.placeholder}>\n          <Text style={styles.text}>Map Preview (Web)</Text>\n          <Text style={styles.subtext}>{coords?.length || 0} points recorded</Text>\n        </View>\n      )}\n    </View>\n  );\n}\n\n// styles imported from TrailMapPreview.styles.ts\n","import React, { useEffect, useState, useMemo, useCallback } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport { useAuth } from '@/context/AuthContext';\nimport { DogProfile } from '@/types/dog-profile';\nimport { API_URL } from '@/lib/api';\n\nexport const [DogsContext, useDogs] = createContextHook(() => {\n  const { user, session, isLoading: isAuthLoading } = useAuth();\n  const [dogProfiles, setDogProfiles] = useState<DogProfile[]>([]);\n  const [activeDogId, setActiveDogId] = useState<string | null>(null);\n  const [isDogProfileLoading, setIsDogProfileLoading] = useState<boolean>(true);\n\n  const dogProfile = useMemo(() => \n    dogProfiles.find(d => d.id === activeDogId) || dogProfiles[0] || null\n  , [dogProfiles, activeDogId]);\n\n  const loadDogProfiles = useCallback(async (userId: string, token: string) => {\n    console.log('Loading dog profiles for user:', userId);\n    setIsDogProfileLoading(true);\n    try {\n      // We assume GET /dog returns the list of dogs for the current user\n      // This endpoint is needed to discover the dog IDs\n      const response = await fetch(`${API_URL}/dog`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (Array.isArray(data)) {\n          setDogProfiles(data);\n          if (data.length > 0 && !activeDogId) {\n            setActiveDogId(data[0].id);\n          }\n        } else if (data && typeof data === 'object') {\n          setDogProfiles([data]);\n          setActiveDogId(data.id);\n        } else {\n          setDogProfiles([]);\n        }\n      } else {\n        setDogProfiles([]);\n      }\n    } catch (error) {\n      console.error('Error loading dog profiles:', error);\n      setDogProfiles([]);\n    } finally {\n      setIsDogProfileLoading(false);\n    }\n  }, [activeDogId]);\n\n  const refreshDogProfile = useCallback(async () => {\n    if (user && session) {\n      await loadDogProfiles(user.id, session.accessToken);\n    }\n  }, [user, session, loadDogProfiles]);\n\n  useEffect(() => {\n    // Don't decide dog profile loading state until auth has finished initializing.\n    if (isAuthLoading) return;\n\n    if (user && session) {\n      loadDogProfiles(user.id, session.accessToken);\n    } else {\n      setDogProfiles([]);\n      setIsDogProfileLoading(false);\n    }\n  }, [user, session, loadDogProfiles, isAuthLoading]);\n\n  const createDogProfile = useCallback(async (profile: Omit<DogProfile, 'id' | 'created_at' | 'updated_at'>) => {\n    if (!session) throw new Error('No session');\n    // If photo is a local URI (not a remote URL), we first create the dog without the photo,\n    // then upload the photo with the returned dog ID and update the dog with the uploaded URL.\n    let createPayload: any = { ...profile };\n    // remove any legacy `photo` key if present\n    if (createPayload.photo) delete createPayload.photo;\n    const isLocalImage = typeof profile.image === 'string' && profile.image && !profile.image.startsWith('http');\n    if (isLocalImage) {\n      createPayload.image = undefined;\n    }\n\n    console.log('createDogProfile - payload to create:', createPayload);\n    const response = await fetch(`${API_URL}/dog`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${session.accessToken}`\n      },\n      body: JSON.stringify(createPayload),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to create dog profile');\n    }\n\n    const data = await response.json();\n    setDogProfiles(prev => [...prev, data]);\n    setActiveDogId(data.id);\n    // If we had a local photo, upload it now and patch the dog with the returned URL\n    if (isLocalImage && typeof profile.image === 'string') {\n      try {\n        const uri = profile.image as string;\n        const uriParts = uri.split('/');\n        const fileName = uriParts[uriParts.length - 1] || `dog_${Date.now()}.jpg`;\n        const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n        const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n        const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n\n        const form = new FormData();\n        // @ts-ignore\n        form.append('file', { uri, name: fileName, type: mimeType });\n        form.append('filename', fileName);\n        form.append('dog_id', data.id);\n        form.append('trail_id', '');\n        form.append('user_id', '');\n\n        const uploadResp = await fetch(`${API_URL}/uploads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${session.accessToken}`,\n            'accept': 'application/json',\n          },\n          body: form as any,\n        });\n\n        if (!uploadResp.ok) {\n          console.error('Dog image upload failed during create:', await uploadResp.text());\n        } else {\n          const uploadData = await uploadResp.json();\n          const publicUrl = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n          if (publicUrl) {\n            // Patch dog with new image URL\n              const patchResp = await fetch(`${API_URL}/dog/${data.id}`, {\n              method: 'PUT',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${session.accessToken}`,\n              },\n                body: JSON.stringify({ ...data, image: publicUrl }),\n            });\n\n            if (patchResp.ok) {\n              const patched = await patchResp.json();\n              setDogProfiles(prev => prev.map(d => d.id === patched.id ? patched : d));\n            } else {\n              console.error('Failed to patch dog with uploaded image');\n            }\n          }\n        }\n      } catch (err) {\n        console.error('Error uploading dog photo after create:', err);\n      }\n    }\n\n    return data;\n  }, [session]);\n\n  const updateDogProfile = useCallback(async (profile: DogProfile) => {\n    if (!session) throw new Error('No session');\n    if (!profile.id) throw new Error('Dog ID is required for update');\n    // If photo is a local URI, upload it first with dog_id, then update the profile with the returned URL\n    console.log('updateDogProfile - incoming profile:', profile);\n    let profileToSend = { ...profile } as any;\n    // remove any legacy `photo` key before sending\n    if (profileToSend.photo) delete profileToSend.photo;\n    if (typeof profile.image === 'string' && profile.image && !profile.image.startsWith('http')) {\n      try {\n        const uri = profile.image as string;\n        const uriParts = uri.split('/');\n        const fileName = uriParts[uriParts.length - 1] || `dog_${Date.now()}.jpg`;\n        const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n        const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n        const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n\n        const form = new FormData();\n        // @ts-ignore\n        form.append('file', { uri, name: fileName, type: mimeType });\n        form.append('filename', fileName);\n        form.append('dog_id', profile.id);\n        form.append('trail_id', '');\n        form.append('user_id', '');\n\n        const uploadResp = await fetch(`${API_URL}/uploads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${session.accessToken}`,\n            'accept': 'application/json',\n          },\n          body: form as any,\n        });\n\n        if (!uploadResp.ok) {\n          const errText = await uploadResp.text();\n          throw new Error(`Upload failed: ${uploadResp.status} ${errText}`);\n        }\n\n        const uploadData = await uploadResp.json();\n        const publicUrl = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n        if (!publicUrl) throw new Error('Upload did not return a public URL');\n        profileToSend.image = publicUrl;\n      } catch (err) {\n        console.error('Error uploading dog photo during update:', err);\n        throw err;\n      }\n    }\n\n    console.log('updateDogProfile - profileToSend before PUT:', profileToSend);\n    const response = await fetch(`${API_URL}/dog/${profile.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${session.accessToken}`\n      },\n      body: JSON.stringify(profileToSend),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to update dog profile');\n    }\n\n    const data = await response.json();\n    setDogProfiles(prev => prev.map(d => d.id === data.id ? data : d));\n    return data;\n  }, [session]);\n\n  return useMemo(() => ({\n    dogProfile,\n    dogProfiles,\n    activeDogId,\n    setActiveDogId,\n    isDogProfileLoading,\n    hasDogProfile: dogProfiles.length > 0,\n    refreshDogProfile,\n    createDogProfile,\n    updateDogProfile,\n  }), [dogProfile, dogProfiles, activeDogId, isDogProfileLoading, refreshDogProfile, createDogProfile, updateDogProfile]);\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"684\":\"391f8fe8\",\"888\":\"f30dea73\",\"908\":\"45e2e76e\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [346], () => (__webpack_require__(389)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["SettingsScreen","insets","useSafeAreaInsets","router","useRouter","auth","useAuth","handleRow","label","path","push","Alert","alert","_jsxs","View","style","styles","container","paddingTop","top","children","header","_jsx","TouchableOpacity","backButton","onPress","ArrowLeft","size","color","theme","accentPrimary","Text","title","width","ScrollView","contentContainerStyle","content","sectionCard","sectionTitle","row","rowText","ChevronRight","logoutCard","async","signOut","err","console","error","logoutText","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","DOG_SIZES","PERSONALITY_TAGS","RECALL_RELIABILITY_OPTIONS","LOCATION_KEY","START_TIME_KEY","MAX_ELEV_KEY","MAX_SPEED_KEY","LAST_UPDATE_KEY","RecordScreenWeb","saveTrail","getTrailById","useTrails","user","params","useLocalSearchParams","trailId","undefined","existingTrail","mapRef","useRef","isRecording","setIsRecording","useState","coordinates","setCoordinates","currentLocation","setCurrentLocation","duration","setDuration","hasPermission","setHasPermission","isLoadingPermission","setIsLoadingPermission","startLocation","setStartLocation","watchIdRef","Map","timerRef","wakeLockRef","bottomSheetHeight","Dimensions","get","height","collapsedHeight","bottomSheetAnim","Animated","Value","current","isExpanded","setIsExpanded","elevation","setElevation","maxElevation","setMaxElevation","pace","setPace","speed","setSpeed","maxSpeed","setMaxSpeed","showSaveModal","setShowSaveModal","draftTrail","setDraftTrail","formName","setFormName","formDescription","setFormDescription","formPhoto","setFormPhoto","fileInputRef","formPhotoFile","setFormPhotoFile","useEffect","navigator","permissions","query","status","name","state","onchange","Promise","reject","geolocation","getCurrentPosition","timeout","warn","loadRecordingState","coordsStr","AsyncStorage","getItem","coords","JSON","parse","maxElevationStr","parseFloat","maxSpeedStr","startTimeStr","elapsed","Math","floor","Date","now","parseInt","startTimer","setInterval","cancelSave","distanceKm","calculateTotalDistance","paceMinPerKm","minutes","seconds","round","toString","padStart","initialHeight","panResponder","PanResponder","create","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","_","gestureState","abs","dy","onPanResponderGrant","_value","onPanResponderMove","newValue","setValue","onPanResponderRelease","threshold","currentValue","expandBottomSheet","collapseBottomSheet","spring","toValue","useNativeDriver","tension","friction","start","loadingContainer","ActivityIndicator","backgroundPrimary","loadingText","permissionContainer","MapPin","permissionTitle","permissionText","permissionButton","permissionButtonText","distance","progress","length","min","showProgress","TrailMap","ref","initialRegion","latitude","longitude","latitudeDelta","longitudeDelta","showsUserLocation","followsUserLocation","showsMyLocationButton","recenterButton","pos","coord","animateToRegion","activeOpacity","Navigation","bottomSheet","add","bottom","assign","panHandlers","handleBar","handleContainer","toggleBottomSheet","handle","ChevronDown","ChevronUp","bottomSheetContent","statsGrid","statItem","statItemLabel","statItemValue","formatDuration","formatDistance","toFixed","recordButton","recordButtonActive","log","clearWatch","release","clearInterval","finalCoords","finalMaxElevation","finalMaxSpeed","finalDuration","removeItem","finalPace","trail","date","city","country","description","photo","startTime","setItem","stringify","enableHighAccuracy","watchPosition","prev","newCoords","catch","maximumAge","wakeLock","request","message","_Fragment","Square","fill","recordButtonText","Play","expandedContent","divider","optionRow","optionIconContainer","Watch","optionTextContainer","optionTitle","optionSubtitle","optionBadge","optionBadgeText","Bell","optionBadgeActive","optionBadgeTextActive","Modal","visible","animationType","transparent","onRequestClose","modalOverlay","modalContainer","modalContent","modalTitle","fontSize","marginTop","TextInput","placeholder","value","onChangeText","input","multiline","flexDirection","gap","alignItems","modalButton","paddingHorizontal","click","modalButtonText","flex","type","accept","display","onChange","f","target","files","url","URL","createObjectURL","modalButtonPrimary","toSave","StyleSheet","backgroundColor","absoluteFillObject","webContainer","justifyContent","padding","webText","textMuted","textAlign","fontWeight","textPrimary","paddingVertical","borderRadius","statsContainer","position","left","right","compactRow","marginBottom","compactStats","compactStatBox","backgroundSecondary","minWidth","stopButtonCompact","marginLeft","stopButtonCompactText","statBox","shadowColor","borderSubtle","shadowOffset","shadowOpacity","shadowRadius","statLabel","statValue","controlContainer","accentSecondary","borderTopLeftRadius","borderTopRightRadius","paddingBottom","flexWrap","textTransform","letterSpacing","marginVertical","marginRight","maxHeight","overflow","borderWidth","borderColor","TrailsScreen","trails","isLoading","FlatList","data","renderItem","renderTrailItem","item","trailItem","trailHeader","iconContainer","trailInfo","trailDate","formatDate","statsRow","statText","Clock","keyExtractor","emptyList","list","ListEmptyComponent","renderEmptyState","emptyContainer","emptyTitle","emptyText","backgroundSecondaryVarient","lineHeight","AccountContext","useAccount","createContextHook","session","userProfile","setUserProfile","setIsLoading","fetchAccount","useCallback","accessToken","response","fetch","API_URL","headers","ok","json","updateAccount","method","body","updates","errorData","detail","msg","deleteAccount","useMemo","refreshAccount","safeContainer","stickyHeader","stickySearchContainer","searchBar","demoButton","demoButtonText","searchPlaceholder","largeTrailCard","largeTrailImage","bookmarkButton","cardGradient","cardOverlayContent","overlayTrailName","textShadowColor","textShadowOffset","textShadowRadius","overlayLocation","opacity","overlayBadges","badge","badgeText","categoriesSection","categoriesScroll","categoryButton","categoryButtonActive","categoryText","categoryTextActive","categoryTrailsSection","bottomPadding","placeholderImage","searchModalContainer","searchModalHeader","borderBottomWidth","borderBottomColor","searchModalInputContainer","searchModalInput","clearButton","searchModalContent","currentLocationItem","marginHorizontal","locationIconContainer","locationTextContainer","locationTitle","locationSubtitle","suggestionItem","suggestionIconContainer","suggestionTextContainer","suggestionTitle","suggestionSubtitle","AuthContext","setSession","setUser","savedSession","parsedSession","loadSession","requestOtp","email","verifyOtp","otpCode","requestRegistration","verifyRegistration","signInWithToken","sessionObj","tokenResponse","tokenType","isAuthenticated","ENVIRONMENT_TAG_OPTIONS","DIFFICULTY_OPTIONS","TrailDetailScreen","updateTrailName","updateTrailPhoto","updateTrailDetails","getTrailWithUser","setTrail","isEditingName","setIsEditingName","editedName","setEditedName","isEditingDetails","setIsEditingDetails","editedRating","setEditedRating","editedReview","setEditedReview","editedTags","setEditedTags","editedDifficulty","setEditedDifficulty","editedNameInDetails","setEditedNameInDetails","isUploadingPhoto","setIsUploadingPhoto","scrollY","IconOrEmoji","IconComponent","emoji","isSaved","setIsSaved","loadTrail","foundTrail","rating","review","environment_tags","difficulty","loadedTrail","handlePickImage","region","canEdit","user_id","max","file","event","startsWith","reader","FileReader","onload","base64","result","onerror","readAsDataURL","headerButtons","headerButton","handleBack","back","headerRightButtons","handleShare","Share2","handleSave","Bookmark","handleMore","MoreVertical","scrollContainer","scrollContent","onScroll","nativeEvent","contentOffset","y","scrollEventThrottle","heroSection","heroImageContainer","Image","source","uri","heroImage","contentFit","cachePolicy","LinearGradient","colors","heroGradient","changePhotoFab","disabled","Camera","addPhotoContainer","addPhotoIcon","addPhotoText","addPhotoSubtext","contentWrapper","titleSection","nameEditContainer","nameInput","autoFocus","placeholderTextColor","editButtons","iconButton","saveIconButton","trim","Check","cancelIconButton","handleCancelEdit","X","titleRow","createdAt","toLocaleDateString","locationRow","location","ratingRow","star","Star","reviewCard","reviewText","statsSection","statCard","statIconContainer","strokeWidth","TrendingUp","tagsSection","sectionHeader","Tag","tagsGrid","tag","index","tagChip","tagText","editDetailsButton","Edit3","editDetailsText","editSection","editSectionTitle","nameInputInDetails","ratingStars","starButton","reviewInput","numberOfLines","textAlignVertical","difficultyOptions","difficultyChip","difficultyChipSelected","difficultyChipText","difficultyChipTextSelected","editTagChip","includes","editTagChipSelected","filter","t","toggleTag","editTagChipText","editTagChipTextSelected","editActionButtons","actionButton","cancelActionButton","handleCancelDetailsEdit","cancelActionText","saveActionButton","saveActionText","mapSection","mapContainer","scrollEnabled","zoomEnabled","directionsButton","handleGetDirections","Linking","canOpenURL","then","supported","openURL","directionsButtonText","detailsTitle","detailRow","detailIcon","detailContent","detailLabel","detailValue","Activity","Calendar","toLocaleString","weekday","year","month","day","hour","minute","SignupScreen","setEmail","setName","password","setPassword","extra","Constants","expoConfig","promptAsync","Google","webClientId","iosClientId","process","EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID","androidClientId","EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID","clientId","EXPO_PUBLIC_GOOGLE_CLIENT_ID","scopes","responseType","React","tokenStr","token","ArrayBuffer","view","Uint8Array","s","i","String","fromCharCode","decodeURIComponent","escape","Array","isArray","arr","normalizeToken","authentication","idToken","fb","signInWithGoogle","getFirebaseAuth","firebaseAuthExchange","replace","KeyboardAvoidingView","behavior","UserPlus","subtitle","form","inputContainer","autoCapitalize","editable","keyboardType","autoComplete","secureTextEntry","button","buttonDisabled","credential","createUserWithEmailAndPassword","toLowerCase","updateProfile","displayName","getIdToken","buttonText","footer","footerText","linkText","WebBrowser","LoginScreen","_extraFromConstants","manifest","EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID","window","handleSignIn","signInWithEmailAndPassword","logo","Pressable","pressed","buttonPressed","onKeyDown","key","accessibilityRole","customAlphabet","alphabet","defaultSize","random","nanoid","CATEGORIES","icon","Heart","Umbrella","ExploreScreen","loadNearbyTrails","saveTrailBookmark","removeTrailBookmark","isTrailSaved","selectedCategory","setSelectedCategory","nearbyTrails","setNearbyTrails","isLoadingNearby","setIsLoadingNearby","setUserCity","bookmarkAnimations","setBookmarkAnimations","searchQuery","setSearchQuery","showSearchModal","setShowSearchModal","searchSuggestions","setSearchSuggestions","loadUserLocationAndNearbyTrails","useFocusEffect","loadSearchSuggestions","suggestions","slice","handleCloseSearchModal","getBookmarkAnimation","newAnim","filteredTrails","filtered","sort","a","b","some","getFilteredTrails","showsVerticalScrollIndicator","stickyHeaderIndices","handleSearchBarPress","Search","horizontal","showsHorizontalScrollIndicator","category","Icon","isSelected","handleCategoryPress","categoryId","anim","handleNavigateToTrail","TrailMapPreview","startLatitude","startLongitude","locations","stopPropagation","isRealTrail","test","sequence","timing","handleBookmarkPress","transform","scale","BarChart3","distance_from_user","presentationStyle","ChevronLeft","returnKeyType","handleCurrentLocationPress","handleSuggestionPress","suggestionId","DogBasicsScreen","dogProfile","useDogs","nickname","setNickname","age","setAge","setSize","setPhoto","showSizePicker","setShowSizePicker","isLoadingImage","setIsLoadingImage","image","pickImage","ImagePicker","mediaTypes","allowsEditing","aspect","quality","canceled","assets","takePhoto","Stack","Screen","options","headerShown","closeButton","accessibilityLabel","progressContainer","progressDot","progressDotActive","photoContainer","handleImagePicker","text","photoPlaceholder","photoPlaceholderText","photoOverlay","Upload","formSection","testID","pickerButton","pickerButtonText","pickerButtonTextPlaceholder","pickerOptions","pickerOption","pickerOptionSelected","pickerOptionText","pickerOptionTextSelected","nextButton","handleNext","parsedAge","isNaN","pathname","isEditing","nextButtonText","LOCATION_TRACKING_TASK","RecordScreen","locationSubscription","formTags","setFormTags","formDifficulty","setFormDifficulty","stopRecording","TaskManager","Location","remove","tags","foregroundStatus","backgroundStatus","bgError","accuracy","Balanced","locError","errorMessage","requestPermissions","contentPaddingBottom","initialCoord","BestForNavigation","distanceInterval","timeInterval","foregroundService","notificationTitle","notificationBody","notificationColor","pausesUpdatesAutomatically","showsBackgroundLocationIndicator","bgLocationError","altitude","currentElevation","currentSpeed","tabBar","tabButton","tabTouchable","tabContent","iconWrapper","labelActive","AnimatedTabBar","descriptors","navigation","animatedValues","routes","r","forEach","route","tabBarPaddingBottom","opts","tabBarLabel","tabBarIcon","isFocused","iconColor","accessibilityState","selected","tabBarAccessibilityLabel","emit","canPreventDefault","defaultPrevented","navigate","focused","TabLayout","Tabs","props","screenOptions","tabBarActiveTintColor","tabBarInactiveTintColor","User","Index","Redirect","href","DEMO_TRAIL","DemoTrailScreen","scrollView","headerContent","locationText","section","zIndex","helperText","secondaryButton","secondaryButtonText","__EXPO_PUBLIC_API_URL__","base64UrlToBuffer","base64Url","repeat","raw","atob","Buffer","from","rawLength","array","charCodeAt","bufferToBase64Url","buffer","bytes","binary","byteLength","btoa","webauthnRegisterOptions","res","webauthnRegisterVerify","payload","webauthnAuthOptions","webauthnAuthVerify","access_token","DogPersonalityScreen","refreshDogProfile","createDogProfile","updateDogProfile","selectedTags","setSelectedTags","recallReliability","setRecallReliability","isSaving","setIsSaving","personality_tags","recall_reliability","tagsContainer","tagSelected","tagTextSelected","recallContainer","option","recallOption","recallOptionSelected","recallText","recallTextSelected","backButtonText","finishButton","finishButtonDisabled","profileData","finishButtonText","TrailsContext","setTrails","savedTrails","setSavedTrails","isSavedLoading","setIsSavedLoading","loadTrails","resp","loadSavedTrails","coordsToPath","c","surface_type","surfaceType","max_elevation","isLocalStringPhoto","isFilePhoto","createBody","FormData","append","uriParts","split","fileName","extMatch","match","mimeType","uploadResp","uploadData","publicUrl","public_url","patchResp","patched","deleteTrail","found","find","encodeURIComponent","txt","updated","LottieView","require","LottieLoader","center","SplashScreen","queryClient","QueryClient","RootLayoutNav","hasDogProfile","isDogProfileLoading","segments","useSegments","inAuthGroup","inLoginOrSignup","inOnboarding","headerBackTitle","RootLayout","QueryClientProvider","client","DogsContext","GestureHandlerRootView","forwardRef","mapContainerRef","useImperativeHandle","easeTo","zoom","fitToCoordinates","bounds","maplibregl","extend","fitBounds","edgePadding","interactive","on","addSource","addLayer","firebaseConfig","apiKey","EXPO_PUBLIC_FIREBASE_API_KEY","authDomain","EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN","projectId","EXPO_PUBLIC_FIREBASE_PROJECT_ID","storageBucket","EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET","messagingSenderId","EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","appId","EXPO_PUBLIC_FIREBASE_APP_ID","firebaseAuth","_impl","cached","ensureInit","initializeApp","getApps","getAuth","webSignIn","webCreateUser","webUpdateProfile","authParam","profile","_authParam","GoogleAuthProvider","signInWithCredential","cred","setupWeb","impl","alignSelf","ExploreWebScreen","showPicker","setShowPicker","selectedCoords","setSelectedCoords","setDistanceKm","containerReady","setContainerReady","defaultCenter","getSource","features","paint","lat","lngLat","lng","src","setData","geometry","flyTo","handleSearchNearby","el","d","ProfileScreen","isAccountLoading","isTrailsLoading","showEditModal","setShowEditModal","editedPhoto","setEditedPhoto","selectedTab","setSelectedTab","defaultName","defaultPhoto","totalWalks","totalTime","reduce","acc","totalDistance","handleTabPress","tab","handleEditDogProfile","handleCloseEditModal","displayedTrails","userSection","userHeader","userAvatar","handleOpenEditModal","userAvatarImage","initialAvatar","initialAvatarText","charAt","toUpperCase","userInfo","userName","userEmailRow","Mail","userEmail","settingsButton","LucideTableOfContents","dogCardContainer","loadingDogCard","dogCard","dogPhotoContainer","dogPhoto","dogPhotoPlaceholder","Dog","dogName","dogNickname","nicknameSpacing","hours","formatTime","noDogCard","noDogText","addDogButton","addDogButtonText","tabsContainer","tabActive","tabCount","tabCountActive","tabText","tabTextActive","trailsSection","trailCard","trailImage","trailGradient","trailContent","trailName","trailLocation","trailBadges","trailBadge","trailBadgeText","signOutButton","signOutButtonDisabled","LogOut","signOutText","modalHeader","photoSection","editPhoto","cameraOverlay","photoHint","inputSection","inputLabel","disabledInput","disabledInputText","inputHint","modalFooter","saveButton","saveButtonDisabled","finalPhoto","errText","saveButtonText","notAvailable","borderTopWidth","borderTopColor","_props","textSecondary","dogInfoRow","dogInfoBadge","dogInfoText","editIconButton","minHeight","webMapPlaceholder","webMapText","detailsSection","NotFoundScreen","Link","asChild","link","calculateDistance","coord1","coord2","dLat","toRad","dLon","lat1","lat2","sin","cos","atan2","sqrt","PI","total","meters","hrs","mins","secs","timestamp","diffDays","getTime","toLocaleTimeString","themeObj","subtext","markerRef","p","geojson","properties","layout","maxZoom","pt","setLngLat","m","addTo","setCenter","setZoom","isAuthLoading","dogProfiles","setDogProfiles","activeDogId","setActiveDogId","setIsDogProfileLoading","loadDogProfiles","userId","createPayload","isLocalImage","profileToSend","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","definition","defineProperty","enumerable","chunkId","all","promises","u","miniCssF","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","document","getElementsByTagName","getAttribute","createElement","charset","nc","setAttribute","onScriptComplete","clearTimeout","doneFns","parentNode","removeChild","setTimeout","bind","head","appendChild","Symbol","toStringTag","nmd","paths","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}