(()=>{var e={587(e,t,a){var o={"./(tabs)/_layout.tsx":5210,"./(tabs)/explore.styles.ts":2699,"./(tabs)/explore.tsx":4509,"./(tabs)/explore.web.tsx":8389,"./(tabs)/profile.styles.ts":8745,"./(tabs)/profile.tsx":8415,"./(tabs)/record.styles.ts":1095,"./(tabs)/record.tsx":5209,"./(tabs)/record.web.tsx":745,"./+not-found.tsx":8973,"./_layout.tsx":7990,"./demo.tsx":5625,"./index.tsx":5250,"./login.tsx":4101,"./onboarding/dog-basics.styles.ts":7924,"./onboarding/dog-basics.tsx":4674,"./onboarding/dog-personality.styles.ts":8625,"./onboarding/dog-personality.tsx":6183,"./signup.tsx":3764,"./trail/[id].styles.ts":8776,"./trail/[id].tsx":3686,"./trails.tsx":2399};function l(e){var t=r(e);return a(t)}function r(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=r,e.exports=l,l.id=587},594(e,t,a){"use strict";a.r(t),a.d(t,{DOG_SIZES:()=>o,PERSONALITY_TAGS:()=>l,RECALL_RELIABILITY_OPTIONS:()=>r});const o=["XS","S","M","L","XL"],l=["Friendly","Shy","Energetic","Calm","Social","Independent","Playful","Curious","Barky","Reactive","Easily Triggered","Gentle","Protective","Anxious","Confident","Food-Motivated","Quiet","Adventurous","Lazy","Affectionate","Dominant","Submissive","Fearful","Obedient","Stubborn","High-Prey-Drive","Leash-Pulling","Good-With-Dogs","Good-With-Kids"],r=["Poor","Fair","Good","Excellent"]},745(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>O});var o=a(6665),l=a(6283),r=a(3929),n=a(5648),i=a(1690),d=a(530),s=a(5009),u=a(444),c=a(6725),f=a(6773),g=a(8264),h=a(7430),y=a(9637),m=a(5259),p=a(3271),x=a(5624),b=a(2301),j=a(1168),w=a(8032),C=a(8280),S=a(7353),k=a(1047),v=a(1095),T=a(9582),I=a(6746),B=a(3353),z=a(9269),P=a(397);const R="recording_coordinates",D="recording_start_time",L="recording_max_elevation",A="recording_max_speed",E="recording_last_update";function O(){const{saveTrail:e,getTrailById:t}=(0,I.useTrails)(),{user:a}=(0,B.useAuth)(),O=(0,y.useLocalSearchParams)(),W=(0,y.useRouter)(),F="string"===typeof O.trailId?O.trailId:void 0,_=F?t(F):void 0,V=(0,o.useRef)(null),[G,N]=(0,o.useState)(!1),[M,$]=(0,o.useState)([]),[H,U]=(0,o.useState)(null),[q,J]=(0,o.useState)(0),[Y,K]=(0,o.useState)(null),[Q,Z]=(0,o.useState)(!0),[X,ee]=(0,o.useState)(null),te=((0,o.useRef)(new Map),(0,o.useRef)(null)),ae=(0,o.useRef)(null),oe=(0,o.useRef)(null),le=.5*c.default.get("window").height,re=280,ne=(0,o.useRef)(new s.default.Value(re)).current,[ie,de]=(0,o.useState)(!1),[se,ue]=(0,o.useState)(0),[ce,fe]=(0,o.useState)(0),[ge,he]=(0,o.useState)("0:00"),[ye,me]=(0,o.useState)(0),[pe,xe]=(0,o.useState)(0),[be,je]=(0,o.useState)(!1),[we,Ce]=(0,o.useState)(null),[Se,ke]=(0,o.useState)(""),[ve,Te]=(0,o.useState)(""),[Ie,Be]=(0,o.useState)(void 0);(0,o.useEffect)(()=>{(async()=>{try{if(navigator.permissions&&navigator.permissions.query){const e=await navigator.permissions.query({name:"geolocation"});K("granted"===e.state),e.onchange=()=>K("granted"===e.state)}else try{await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(()=>e(!0),()=>e(!1),{timeout:5e3})}),K(!0)}catch(e){K(!1)}}catch(t){console.warn("Permission check failed",t),K(null)}finally{Z(!1),ze()}})()},[]);const ze=async()=>{try{const e=await m.default.getItem(R);if(e){const t=JSON.parse(e);$(t)}const t=await m.default.getItem(L);t&&fe(parseFloat(t));const a=await m.default.getItem(A);a&&xe(parseFloat(a));const o=await m.default.getItem(D);if(o){const e=Math.floor((Date.now()-parseInt(o))/1e3);J(e),N(!0),Pe()}}catch(e){console.error("Error loading recording state:",e)}},Pe=()=>{ae.current||(ae.current=setInterval(async()=>{try{const e=await m.default.getItem(D);if(e){const t=Math.floor((Date.now()-parseInt(e))/1e3);J(t)}}catch(e){}},1e3))},Re=()=>{je(!1),Ce(null)};(0,o.useEffect)(()=>{if(q>0){const e=(0,z.calculateTotalDistance)(M)/1e3;if(e>0){const t=q/60/e,a=Math.floor(t),o=Math.round(60*(t-a));he(`${a}:${o.toString().padStart(2,"0")}`)}}},[q,M]);const De=(0,o.useRef)(0),Le=(0,o.useRef)(u.default.create({onStartShouldSetPanResponder:()=>!0,onMoveShouldSetPanResponder:(e,t)=>Math.abs(t.dy)>5,onPanResponderGrant:()=>{De.current=ne._value},onPanResponderMove:(e,t)=>{const a=De.current-t.dy;a>=re&&a<=le&&ne.setValue(a)},onPanResponderRelease:(e,t)=>{const a=(le+re)/2,o=ne._value;t.dy<-50?Ae():t.dy>50?Ee():o>a?Ae():Ee()}})).current,Ae=()=>{de(!0),s.default.spring(ne,{toValue:le,useNativeDriver:!1,tension:50,friction:8}).start()},Ee=()=>{de(!1),s.default.spring(ne,{toValue:re,useNativeDriver:!1,tension:50,friction:8}).start()};if(Q)return(0,P.jsxs)(r.default,{style:v.default.loadingContainer,children:[(0,P.jsx)(d.default,{size:"large",color:T.default.primary}),(0,P.jsx)(l.default,{style:v.default.loadingText,children:"Checking permissions..."})]});if(!Y)return(0,P.jsxs)(r.default,{style:v.default.permissionContainer,children:[(0,P.jsx)(j.default,{size:64,color:"#666"}),(0,P.jsx)(l.default,{style:v.default.permissionTitle,children:"Location Permission Required"}),(0,P.jsx)(l.default,{style:v.default.permissionText,children:"This page needs access to your location to track your walks. Please allow location access in your browser."}),(0,P.jsx)(n.default,{style:v.default.permissionButton,onPress:()=>{navigator.geolocation.getCurrentPosition(()=>K(!0),()=>K(!1))},children:(0,P.jsx)(l.default,{style:v.default.permissionButtonText,children:"Grant Permission"})})]});const Oe=(0,z.calculateTotalDistance)(M),We=_&&G&&M.length>0&&_.coordinates.length>0?Math.min(Oe/_.distance*100,100):0,Fe=!!_;return(0,P.jsxs)(r.default,{style:v.default.container,children:[H&&(0,P.jsx)(h.default,{ref:V,coordinates:M,style:v.default.map,initialRegion:{latitude:H.latitude,longitude:H.longitude,latitudeDelta:.01,longitudeDelta:.01},showsUserLocation:!0,followsUserLocation:G,showsMyLocationButton:!1}),(0,P.jsx)(n.default,{style:v.default.recenterButton,onPress:async()=>{if(V.current)try{navigator.geolocation.getCurrentPosition(e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};U(t),V.current.animateToRegion({latitude:t.latitude,longitude:t.longitude,latitudeDelta:.01,longitudeDelta:.01},500)})}catch(e){console.error("Error getting current location:",e)}},activeOpacity:.8,children:(0,P.jsx)(w.default,{size:24,color:"#5d6b4a"})}),(0,P.jsxs)(s.default.View,{style:[v.default.bottomSheet,{height:s.default.add(ne,92),bottom:0}],children:[(0,P.jsx)(r.default,Object.assign({},Le.panHandlers,{style:v.default.handleBar,children:(0,P.jsxs)(n.default,{style:v.default.handleContainer,onPress:()=>{ie?Ee():Ae()},activeOpacity:.7,children:[(0,P.jsx)(r.default,{style:v.default.handle}),ie?(0,P.jsx)(x.default,{size:20,color:"#9ca3af"}):(0,P.jsx)(b.default,{size:20,color:"#9ca3af"})]})})),(0,P.jsxs)(r.default,{style:v.default.bottomSheetContent,children:[(0,P.jsxs)(r.default,{style:v.default.statsGrid,children:[(0,P.jsxs)(r.default,{style:v.default.statItem,children:[(0,P.jsx)(l.default,{style:v.default.statItemLabel,children:"Time"}),(0,P.jsx)(l.default,{style:v.default.statItemValue,children:(0,z.formatDuration)(q)})]}),(0,P.jsxs)(r.default,{style:v.default.statItem,children:[(0,P.jsx)(l.default,{style:v.default.statItemLabel,children:"Distance"}),(0,P.jsx)(l.default,{style:v.default.statItemValue,children:(0,z.formatDistance)(Oe)})]}),(0,P.jsxs)(r.default,{style:v.default.statItem,children:[(0,P.jsx)(l.default,{style:v.default.statItemLabel,children:"Elevation"}),(0,P.jsxs)(l.default,{style:v.default.statItemValue,children:[se.toFixed(0),"m"]})]}),(0,P.jsxs)(r.default,{style:v.default.statItem,children:[(0,P.jsx)(l.default,{style:v.default.statItemLabel,children:"Pace"}),(0,P.jsxs)(l.default,{style:v.default.statItemValue,children:[ge,"/km"]})]}),(0,P.jsxs)(r.default,{style:v.default.statItem,children:[(0,P.jsx)(l.default,{style:v.default.statItemLabel,children:"Speed"}),(0,P.jsxs)(l.default,{style:v.default.statItemValue,children:[ye.toFixed(1)," km/h"]})]}),Fe&&(0,P.jsxs)(r.default,{style:v.default.statItem,children:[(0,P.jsx)(l.default,{style:v.default.statItemLabel,children:"Progress"}),(0,P.jsxs)(l.default,{style:v.default.statItemValue,children:[We.toFixed(0),"%"]})]})]}),(0,P.jsx)(n.default,{style:[v.default.recordButton,G&&v.default.recordButtonActive],onPress:G?async()=>{console.log("Stopping web recording...");try{null!==te.current&&(navigator.geolocation.clearWatch(te.current),te.current=null),oe.current&&oe.current.release&&(await oe.current.release(),oe.current=null),ae.current&&(clearInterval(ae.current),ae.current=null);const e=await m.default.getItem(R),t=e?JSON.parse(e):M,a=await m.default.getItem(L),o=a?parseFloat(a):ce,l=await m.default.getItem(A),r=l?parseFloat(l):pe,n=await m.default.getItem(D),d=n?Math.floor((Date.now()-parseInt(n))/1e3):q;if(!t||t.length<2)return i.default.alert("No Trail Data","Not enough data to save this trail. Try walking a bit more!"),N(!1),$([]),J(0),await m.default.removeItem(R),await m.default.removeItem(L),await m.default.removeItem(A),await m.default.removeItem(D),void await m.default.removeItem(E);const s=(0,z.calculateTotalDistance)(t),u=s/1e3;let c="0:00";if(u>0){const e=d/60/u,t=Math.floor(e);c=`${t}:${Math.round(60*(e-t)).toString().padStart(2,"0")}`}const f={id:Date.now().toString(),date:Date.now(),distance:s,duration:d,coordinates:t,city:X?.city,country:X?.country,pace:c,speed:r,maxElevation:o};Ce(f),ke(f.name||""),Te(f.description||""),Be(f.photo||void 0),je(!0)}catch(e){console.error("Stop error:",e),i.default.alert("Error","Failed to stop recording"),N(!1)}}:async()=>{console.log("Starting web recording..."),N(!0),$([]),J(0),fe(0),xe(0);try{const t=Date.now();await m.default.setItem(D,t.toString()),await m.default.removeItem(R),await m.default.removeItem(L),await m.default.removeItem(A),await m.default.removeItem(E),navigator.geolocation.getCurrentPosition(async e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};await m.default.setItem(R,JSON.stringify([t])),$([t]),U(t)},e=>{console.warn("Initial geolocation failed",e)},{enableHighAccuracy:!0,timeout:1e4});const a=navigator.geolocation.watchPosition(async e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};U(t),$(e=>{const a=[...e,t];return m.default.setItem(R,JSON.stringify(a)).catch(()=>{}),a}),await m.default.setItem(E,Date.now().toString())},e=>{console.error("watchPosition error",e)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4});te.current=a;try{navigator.wakeLock&&navigator.wakeLock.request&&(oe.current=await navigator.wakeLock.request("screen"))}catch(e){console.warn("Wake lock request failed",e)}Pe()}catch(t){console.error("Recording error:",t),i.default.alert("Error",t?.message||"Failed to start recording"),N(!1)}},activeOpacity:.8,children:G?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(S.default,{size:24,color:"#fff",fill:"#fff"}),(0,P.jsx)(l.default,{style:v.default.recordButtonText,children:"Stop & Save"})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(C.default,{size:24,color:"#fff",fill:"#fff"}),(0,P.jsx)(l.default,{style:v.default.recordButtonText,children:"Start Trail"})]})}),ie&&(0,P.jsxs)(r.default,{style:v.default.expandedContent,children:[(0,P.jsx)(r.default,{style:v.default.divider}),(0,P.jsxs)(n.default,{style:v.default.optionRow,onPress:()=>i.default.alert("Apple Watch","Connect your Apple Watch to sync workout data."),activeOpacity:.7,children:[(0,P.jsx)(r.default,{style:v.default.optionIconContainer,children:(0,P.jsx)(k.default,{size:24,color:"#5d6b4a"})}),(0,P.jsxs)(r.default,{style:v.default.optionTextContainer,children:[(0,P.jsx)(l.default,{style:v.default.optionTitle,children:"Apple Watch"}),(0,P.jsx)(l.default,{style:v.default.optionSubtitle,children:"Not connected"})]}),(0,P.jsx)(r.default,{style:v.default.optionBadge,children:(0,P.jsx)(l.default,{style:v.default.optionBadgeText,children:"Connect"})})]}),(0,P.jsxs)(n.default,{style:v.default.optionRow,onPress:()=>i.default.alert("Alerts","Configure alerts for distance milestones and pace notifications."),activeOpacity:.7,children:[(0,P.jsx)(r.default,{style:v.default.optionIconContainer,children:(0,P.jsx)(p.default,{size:24,color:"#5d6b4a"})}),(0,P.jsxs)(r.default,{style:v.default.optionTextContainer,children:[(0,P.jsx)(l.default,{style:v.default.optionTitle,children:"Alerts"}),(0,P.jsx)(l.default,{style:v.default.optionSubtitle,children:"Distance & pace notifications"})]}),(0,P.jsx)(r.default,{style:[v.default.optionBadge,v.default.optionBadgeActive],children:(0,P.jsx)(l.default,{style:[v.default.optionBadgeText,v.default.optionBadgeTextActive],children:"Active"})})]})]})]})]}),(0,P.jsx)(g.default,{visible:be,animationType:"slide",transparent:!0,onRequestClose:Re,children:(0,P.jsx)(r.default,{style:v.default.modalOverlay,children:(0,P.jsx)(r.default,{style:v.default.modalContainer,children:(0,P.jsxs)(r.default,{style:v.default.modalContent,children:[(0,P.jsx)(l.default,{style:v.default.modalTitle,children:"Save Trail"}),(0,P.jsx)(l.default,{style:{fontSize:14,marginTop:8},children:"Name"}),(0,P.jsx)(f.default,{placeholder:"Trail name",value:Se,onChangeText:ke,style:v.default.input}),(0,P.jsx)(l.default,{style:{fontSize:14,marginTop:8},children:"Description"}),(0,P.jsx)(f.default,{placeholder:"Description",value:ve,onChangeText:Te,style:[v.default.input,{height:100}],multiline:!0}),(0,P.jsx)(l.default,{style:{fontSize:14,marginTop:8},children:"Photo URL (optional)"}),(0,P.jsx)(f.default,{placeholder:"Photo URL",value:Ie,onChangeText:Be,style:v.default.input}),(0,P.jsxs)(r.default,{style:{flexDirection:"row",gap:8,marginTop:12},children:[(0,P.jsx)(n.default,{style:v.default.modalButton,onPress:Re,children:(0,P.jsx)(l.default,{style:v.default.modalButtonText,children:"Cancel"})}),(0,P.jsx)(n.default,{style:[v.default.modalButton,v.default.modalButtonPrimary],onPress:async()=>{if(!we)return;const t=Object.assign({},we,{name:Se||we.name||"Untitled Trail",description:ve,photo:Ie});try{await e(t),je(!1),Ce(null),N(!1),$([]),J(0),ee(null),ue(0),fe(0),he("0:00"),me(0),xe(0),await m.default.removeItem(R),await m.default.removeItem(L),await m.default.removeItem(A),await m.default.removeItem(D),await m.default.removeItem(E);const a=t.id||null;a?W.push(`/trail/${a}`):i.default.alert("Success","Trail saved successfully!")}catch(a){console.error("Save failed",a),i.default.alert("Error","Failed to save trail")}},children:(0,P.jsx)(l.default,{style:[v.default.modalButtonText,{color:"#fff"}],children:"Save Trail"})})]})]})})})})]})}},1095(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(3668),l=a(9582);const r=o.default.create({container:{flex:1,backgroundColor:l.default.background},map:Object.assign({},o.default.absoluteFillObject),webContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:l.default.background,padding:20},webText:{marginTop:16,fontSize:16,color:l.default.muted,textAlign:"center"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:l.default.background},loadingText:{marginTop:16,fontSize:16,color:l.default.muted},permissionContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:l.default.background,padding:32},permissionTitle:{marginTop:16,fontSize:20,fontWeight:"700",color:l.default.darkGreen,textAlign:"center"},permissionText:{marginTop:8,fontSize:16,color:l.default.muted,textAlign:"center"},permissionButton:{marginTop:24,paddingHorizontal:32,paddingVertical:16,backgroundColor:l.default.primary,borderRadius:12},permissionButtonText:{fontSize:16,fontWeight:"600",color:"#fff"},statsContainer:{position:"absolute",left:20,right:20,flexDirection:"row",gap:12},statBox:{flex:1,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:16,padding:16,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:8,elevation:4},statLabel:{fontSize:13,color:l.default.muted,fontWeight:"500",marginBottom:4},statValue:{fontSize:24,color:l.default.darkGreen,fontWeight:"700"},controlContainer:{position:"absolute",left:20,right:20,alignItems:"center"},recordButton:{flexDirection:"row",alignItems:"center",gap:12,paddingHorizontal:32,paddingVertical:20,backgroundColor:l.default.primary,borderRadius:50,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:12,elevation:8},recordButtonActive:{backgroundColor:"#dc2626"},recordButtonText:{fontSize:18,fontWeight:"700",color:"#fff"},bottomSheet:{position:"absolute",left:0,right:0,backgroundColor:l.default.background,borderTopLeftRadius:24,borderTopRightRadius:24,shadowColor:"#000",shadowOffset:{width:0,height:-4},shadowOpacity:.15,shadowRadius:16,elevation:20},handleBar:{paddingTop:12,paddingBottom:8,alignItems:"center"},handleContainer:{alignItems:"center",gap:4},handle:{width:40,height:4,backgroundColor:l.default.border,borderRadius:2},bottomSheetContent:{flex:1,paddingHorizontal:20,paddingBottom:92},statsGrid:{flexDirection:"row",flexWrap:"wrap",gap:12,marginBottom:20},statItem:{width:"31%",backgroundColor:l.default.surface,borderRadius:12,padding:12,alignItems:"center"},statItemLabel:{fontSize:11,color:l.default.muted,fontWeight:"600",textTransform:"uppercase",letterSpacing:.5,marginBottom:6},statItemValue:{fontSize:18,color:l.default.darkGreen,fontWeight:"700"},expandedContent:{marginTop:8},divider:{height:1,backgroundColor:l.default.border,marginVertical:16},optionRow:{flexDirection:"row",alignItems:"center",paddingVertical:16,paddingHorizontal:16,backgroundColor:l.default.surface,borderRadius:12,marginBottom:12},optionIconContainer:{width:48,height:48,borderRadius:24,backgroundColor:"rgba(93, 107, 74, 0.1)",alignItems:"center",justifyContent:"center",marginRight:12},optionTextContainer:{flex:1},optionTitle:{fontSize:16,fontWeight:"600",color:l.default.darkGreen,marginBottom:2},optionSubtitle:{fontSize:13,color:l.default.muted},optionBadge:{paddingHorizontal:12,paddingVertical:6,borderRadius:12,backgroundColor:l.default.border},optionBadgeActive:{backgroundColor:"rgba(93, 107, 74, 0.15)"},optionBadgeText:{fontSize:12,fontWeight:"600",color:l.default.muted},optionBadgeTextActive:{color:l.default.primary},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.4)",justifyContent:"center",alignItems:"center",padding:20},modalContainer:{width:"100%",maxHeight:"90%",backgroundColor:"#fff",borderRadius:12,overflow:"hidden"},modalContent:{padding:20},modalTitle:{fontSize:20,fontWeight:"700",color:"#1f2937",marginBottom:12},input:{borderWidth:1,borderColor:"#e5e7eb",backgroundColor:"#f9fafb",paddingHorizontal:12,paddingVertical:10,borderRadius:8,marginTop:8},modalButton:{flex:1,paddingVertical:12,paddingHorizontal:16,borderRadius:10,backgroundColor:"#e5e7eb",alignItems:"center",justifyContent:"center"},modalButtonPrimary:{backgroundColor:"#5d6b4a",marginLeft:8},modalButtonText:{fontSize:16,fontWeight:"600",color:"#1f2937"},recenterButton:{position:"absolute",top:60,right:20,width:48,height:48,borderRadius:24,backgroundColor:"#ffffff",alignItems:"center",justifyContent:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.15,shadowRadius:8,elevation:4}})},2399(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>m});a(6665);var o=a(3668),l=a(3929),r=a(932),n=a(5648),i=a(530),d=a(6283),s=a(9582),u=a(9637),c=a(4494),f=a(1168),g=a(6746),h=a(9269),y=a(397);function m(){const e=(0,u.useRouter)(),{trails:t,isLoading:a}=(0,g.useTrails)();return a?(0,y.jsx)(l.default,{style:p.loadingContainer,children:(0,y.jsx)(i.default,{size:"large",color:"#2563eb"})}):(0,y.jsx)(l.default,{style:p.container,children:(0,y.jsx)(r.default,{data:t,renderItem:({item:t})=>(0,y.jsx)(n.default,{style:p.trailItem,onPress:()=>e.push(`/trail/${t.id}`),children:(0,y.jsxs)(l.default,{style:p.trailHeader,children:[(0,y.jsx)(l.default,{style:p.iconContainer,children:(0,y.jsx)(f.default,{size:24,color:s.default.primary})}),(0,y.jsxs)(l.default,{style:p.trailInfo,children:[(0,y.jsx)(d.default,{style:p.trailDate,children:(0,h.formatDate)(t.date)}),(0,y.jsxs)(l.default,{style:p.statsRow,children:[(0,y.jsxs)(l.default,{style:p.statItem,children:[(0,y.jsx)(f.default,{size:16,color:s.default.muted}),(0,y.jsx)(d.default,{style:p.statText,children:(0,h.formatDistance)(t.distance)})]}),(0,y.jsxs)(l.default,{style:p.statItem,children:[(0,y.jsx)(c.default,{size:16,color:s.default.muted}),(0,y.jsx)(d.default,{style:p.statText,children:(0,h.formatDuration)(t.duration)})]})]})]})]})}),keyExtractor:e=>e.id,contentContainerStyle:0===t.length?p.emptyList:p.list,ListEmptyComponent:()=>(0,y.jsxs)(l.default,{style:p.emptyContainer,children:[(0,y.jsx)(f.default,{size:64,color:s.default.border}),(0,y.jsx)(d.default,{style:p.emptyTitle,children:"No trails yet"}),(0,y.jsx)(d.default,{style:p.emptyText,children:"Start recording your first dog walk to see it here!"})]})})})}const p=o.default.create({container:{flex:1,backgroundColor:s.default.surface},list:{padding:16,gap:12},emptyList:{flex:1},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:s.default.surface},trailItem:{backgroundColor:s.default.white,borderRadius:16,padding:16,marginBottom:12,shadowColor:s.default.black,shadowOffset:{width:0,height:2},shadowOpacity:.05,shadowRadius:8,elevation:2},trailHeader:{flexDirection:"row",alignItems:"center",gap:12},iconContainer:{width:48,height:48,borderRadius:24,backgroundColor:s.default.surface,justifyContent:"center",alignItems:"center"},trailInfo:{flex:1},trailDate:{fontSize:16,fontWeight:"600",color:s.default.darkGreen,marginBottom:6},statsRow:{flexDirection:"row",gap:16},statItem:{flexDirection:"row",alignItems:"center",gap:6},statText:{fontSize:14,color:s.default.muted,fontWeight:"500"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:32},emptyTitle:{fontSize:20,fontWeight:"700",color:"#1f2937",marginTop:16,marginBottom:8},emptyText:{fontSize:16,color:s.default.muted,textAlign:"center",lineHeight:24}})},2598(e,t,a){"use strict";a.r(t),a.d(t,{AccountContext:()=>i,useAccount:()=>d});var o=a(6665),l=a(2790),r=a(3353),n=a(5938);const[i,d]=(0,l.default)(()=>{const{user:e,session:t}=(0,r.useAuth)(),[a,l]=(0,o.useState)(null),[i,d]=(0,o.useState)(!0),s=(0,o.useCallback)(async()=>{if(t?.accessToken){d(!0);try{const e=await fetch(`${n.API_URL}/account/me`,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(e.ok){const t=await e.json();l(t)}else console.error("Failed to fetch account:",e.status),l(null)}catch(e){console.error("Error fetching account:",e),l(null)}finally{d(!1)}}},[t?.accessToken]),u=(0,o.useCallback)(async e=>{if(!t?.accessToken)throw new Error("No active session");try{const a=await fetch(`${n.API_URL}/account/me`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify(e)});if(!a.ok){const e=await a.json();throw new Error(e.detail?.[0]?.msg||"Failed to update account")}const o=await a.json();return l(o),o}catch(a){throw console.error("Error updating account:",a),a}},[t?.accessToken]),c=(0,o.useCallback)(async()=>{if(!t?.accessToken)throw new Error("No active session");try{const e=await fetch(`${n.API_URL}/account/me`,{method:"DELETE",headers:{Authorization:`Bearer ${t.accessToken}`}});if(!e.ok){const t=await e.json();throw new Error(t.detail?.[0]?.msg||"Failed to delete account")}return l(null),!0}catch(e){throw console.error("Error deleting account:",e),e}},[t?.accessToken]);return(0,o.useEffect)(()=>{t?.accessToken?s():(l(null),d(!1))},[t?.accessToken,s]),(0,o.useMemo)(()=>({userProfile:a,isLoading:i,refreshAccount:s,updateAccount:u,deleteAccount:c}),[a,i,s,u,c])})},2699(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(3668),l=a(9582);const r=o.default.create({safeContainer:{flex:1,backgroundColor:l.default.background},container:{flex:1,backgroundColor:l.default.background},stickyHeader:{backgroundColor:l.default.background,paddingBottom:8},stickySearchContainer:{paddingHorizontal:16,paddingBottom:8,flexDirection:"row",alignItems:"center",gap:8},searchBar:{flex:1,flexDirection:"row",alignItems:"center",backgroundColor:l.default.surface,paddingHorizontal:16,paddingVertical:14,borderRadius:28,gap:12,borderWidth:1,borderColor:l.default.border},demoButton:{backgroundColor:l.default.primary,paddingHorizontal:16,paddingVertical:12,borderRadius:24},demoButtonText:{color:l.default.white,fontWeight:"bold"},searchPlaceholder:{fontSize:16,color:l.default.muted,fontWeight:"400"},largeTrailCard:{backgroundColor:l.default.white,borderRadius:24,overflow:"hidden",marginBottom:20,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.1,shadowRadius:16,elevation:4,position:"relative"},largeTrailImage:{width:"100%",height:260,backgroundColor:l.default.surface},bookmarkButton:{position:"absolute",top:20,right:20,width:44,height:44,borderRadius:22,backgroundColor:"rgba(255, 255, 255, 0.95)",justifyContent:"center",alignItems:"center",shadowColor:l.default.black,shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:8,elevation:4},cardGradient:{position:"absolute",top:0,bottom:0,left:0,right:0},cardOverlayContent:{position:"absolute",bottom:0,left:0,right:0,padding:18,paddingBottom:20},overlayTrailName:{fontSize:28,fontWeight:"700",color:l.default.white,marginBottom:6,lineHeight:34,textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:1},textShadowRadius:4},overlayLocation:{fontSize:16,color:l.default.white,marginBottom:16,opacity:.95,textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:1},textShadowRadius:4},overlayBadges:{flexDirection:"row",alignItems:"center",gap:12,flexWrap:"wrap"},badge:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.8)",paddingHorizontal:14,paddingVertical:8,borderRadius:20,gap:6},badgeText:{fontSize:14,fontWeight:"600",color:"#fff",textTransform:"capitalize"},categoriesSection:{backgroundColor:l.default.background,paddingTop:8,paddingBottom:16},categoriesScroll:{paddingHorizontal:16,gap:12},categoryButton:{flexDirection:"row",alignItems:"center",paddingHorizontal:24,paddingVertical:14,borderRadius:28,backgroundColor:l.default.white,borderWidth:0,gap:8},categoryButtonActive:{backgroundColor:l.default.primary},categoryText:{fontSize:16,fontWeight:"500",color:l.default.muted},categoryTextActive:{color:l.default.white},categoryTrailsSection:{paddingHorizontal:16,paddingTop:16},bottomPadding:{height:40},loadingContainer:{paddingVertical:60,alignItems:"center",gap:16},loadingText:{fontSize:14,color:l.default.muted},emptyContainer:{paddingVertical:60,alignItems:"center",gap:16,paddingHorizontal:32},emptyText:{fontSize:16,color:l.default.muted,textAlign:"center",lineHeight:24},placeholderImage:{justifyContent:"center",alignItems:"center",backgroundColor:l.default.darkGreen},searchModalContainer:{flex:1,backgroundColor:l.default.background},searchModalHeader:{flexDirection:"row",alignItems:"center",paddingHorizontal:16,paddingTop:12,paddingBottom:16,gap:12,borderBottomWidth:1,borderBottomColor:l.default.border},backButton:{width:40,height:40,borderRadius:20,backgroundColor:l.default.paleYellow,justifyContent:"center",alignItems:"center"},searchModalInputContainer:{flex:1,flexDirection:"row",alignItems:"center",backgroundColor:l.default.white,borderRadius:28,paddingHorizontal:16,paddingVertical:12,borderWidth:1,borderColor:l.default.muted,gap:12},searchModalInput:{flex:1,fontSize:16,color:l.default.darkGreen,padding:0,fontWeight:"400"},clearButton:{width:24,height:24,borderRadius:12,backgroundColor:l.default.border,justifyContent:"center",alignItems:"center"},searchModalContent:{flex:1,paddingTop:12},currentLocationItem:{flexDirection:"row",alignItems:"center",paddingHorizontal:20,paddingVertical:16,gap:16,backgroundColor:l.default.surface,borderRadius:16,marginHorizontal:16,marginBottom:12},locationIconContainer:{width:48,height:48,borderRadius:24,backgroundColor:l.default.paleYellow,justifyContent:"center",alignItems:"center"},locationTextContainer:{flex:1},locationTitle:{fontSize:17,fontWeight:"600",color:l.default.darkGreen,marginBottom:4},locationSubtitle:{fontSize:14,color:l.default.muted,fontWeight:"400"},suggestionItem:{flexDirection:"row",alignItems:"center",paddingHorizontal:20,paddingVertical:16,gap:16,backgroundColor:l.default.surface,borderRadius:16,marginHorizontal:16,marginBottom:12},suggestionIconContainer:{width:48,height:48,borderRadius:24,backgroundColor:l.default.border,justifyContent:"center",alignItems:"center"},suggestionTextContainer:{flex:1},suggestionTitle:{fontSize:17,fontWeight:"600",color:l.default.darkGreen,marginBottom:4},suggestionSubtitle:{fontSize:14,color:l.default.muted,fontWeight:"400"}})},3229(e,t,a){"use strict";e.exports=a.p+"static/media/icon.f99e957780228420852c.png"},3353(e,t,a){"use strict";a.r(t),a.d(t,{AuthContext:()=>i,useAuth:()=>d});var o=a(6665),l=a(2790),r=a(5259),n=a(5938);const[i,d]=(0,l.default)(()=>{const[e,t]=(0,o.useState)(null),[a,l]=(0,o.useState)(null),[i,d]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{const e=await r.default.getItem("session");if(e){const a=JSON.parse(e);t(a),l(a.user)}}catch(e){console.error("Error loading session:",e)}finally{d(!1)}})()},[]);const s=(0,o.useCallback)(async e=>{console.log("Requesting OTP for:",e);const t=await fetch(`${n.API_URL}/otp/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!t.ok){const e=await t.json();throw new Error(e.detail?.[0]?.msg||"Failed to request OTP")}return!0},[]),u=(0,o.useCallback)(async(e,a)=>{console.log("Verifying OTP for:",e);const o=await fetch(`${n.API_URL}/otp/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,otpCode:a})});if(!o.ok){const e=await o.json();throw new Error(e.detail?.[0]?.msg||"Invalid OTP code")}const i=await o.json();return t(i),l(i.user),await r.default.setItem("session",JSON.stringify(i)),i},[]),c=(0,o.useCallback)(async(e,t)=>{console.log("Requesting registration for:",e);const a=await fetch(`${n.API_URL}/otp/register-request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:t})});if(!a.ok){const e=await a.json();throw new Error(e.detail?.[0]?.msg||"Failed to request registration")}return!0},[]),f=(0,o.useCallback)(async(e,a)=>{console.log("Verifying registration for:",e);const o=await fetch(`${n.API_URL}/otp/register-verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,otpCode:a})});if(!o.ok){const e=await o.json();throw new Error(e.detail?.[0]?.msg||"Invalid OTP code")}const i=await o.json();return t(i),l(i.user),await r.default.setItem("session",JSON.stringify(i)),i},[]),g=(0,o.useCallback)(async()=>{console.log("Signing out user"),t(null),l(null),await r.default.removeItem("session")},[]);return(0,o.useMemo)(()=>({session:e,user:a,isLoading:i,requestOtp:s,verifyOtp:u,requestRegistration:c,verifyRegistration:f,signOut:g,isAuthenticated:!!e}),[e,a,i,s,u,c,f,g])})},3686(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>G});var o=a(6665),l=a(3929),r=a(530),n=a(5648),i=a(6773),d=a(1690),s=a(9632),u=a(5009),c=a(6283),f=a(9637),g=a(5894),h=a(7430),y=a(8136),m=a(4686),p=a(5427),x=a(5395),b=a(2994),j=a(4164),w=a(9281),C=a(6508),S=a(4494),k=a(1168),v=a(8032),T=a(8948),I=a(5082),B=a(8360),z=a(477),P=a(2964),R=(a(262),a(893)),D=a(6746),L=a(3353),A=a(9269),E=a(9582),O=a(8833),W=a(8776),F=a(397);const _=["Forest","Urban","Beach","Mountain","Rural","Park","Shaded","Sunny","Crowded","Quiet","Paved","Trail"],V=["Easy","Moderate","Hard"];function G(){const{id:e}=(0,f.useLocalSearchParams)(),{user:t}=(0,L.useAuth)(),{getTrailById:a,updateTrailName:G,updateTrailPhoto:N,updateTrailDetails:M,getTrailWithUser:$}=(0,D.useTrails)(),[H,U]=(0,o.useState)(void 0),[q,J]=(0,o.useState)(!0),[Y,K]=(0,o.useState)(!1),[Q,Z]=(0,o.useState)(""),[X,ee]=(0,o.useState)(!1),[te,ae]=(0,o.useState)(0),[oe,le]=(0,o.useState)(""),[re,ne]=(0,o.useState)([]),[ie,de]=(0,o.useState)(""),[se,ue]=(0,o.useState)(""),[ce,fe]=(0,o.useState)(!1),ge=(0,o.useRef)(null),he=(0,o.useRef)(new u.default.Value(0)).current,ye=(0,O.useSafeAreaInsets)(),me=({IconComponent:e,emoji:t,size:a=18,color:o})=>(0,F.jsx)(c.default,{style:{fontSize:a,color:o||void 0},children:t||"\u2022"}),[pe,xe]=(0,o.useState)(!1);(0,o.useEffect)(()=>{be()},[e]);const be=async()=>{if("string"===typeof e){J(!0);try{const t=a(e);if(t)U(t),Z(t.name||""),ae(t.rating||0),le(t.review||""),ne(t.environment_tags||[]),de(t.difficulty||""),ue(t.name||"");else{const t=await $(e);t&&(U(t),Z(t.name||""),ae(t.rating||0),le(t.review||""),ne(t.environment_tags||[]),de(t.difficulty||""),ue(t.name||""))}}catch(t){console.error("Error loading trail:",t)}finally{J(!1)}}else J(!1)},je=()=>{ge.current&&ge.current.click()};if(q)return(0,F.jsxs)(l.default,{style:W.default.loadingContainer,children:[(0,F.jsx)(r.default,{size:"large",color:E.default.primary}),(0,F.jsx)(c.default,{style:W.default.loadingText,children:"Loading trail..."})]});if(!H)return(0,F.jsxs)(l.default,{style:W.default.loadingContainer,children:[(0,F.jsx)(k.default,{size:64,color:"#9ca3af"}),(0,F.jsx)(c.default,{style:W.default.loadingText,children:"Trail not found"})]});const we=H.coordinates??[],Ce=we.length>0?{latitude:we[0].latitude,longitude:we[0].longitude,latitudeDelta:.01,longitudeDelta:.01}:void 0,Se=H.user_id===t?.id;return(0,F.jsxs)(l.default,{style:[W.default.container,{paddingTop:ye.top+70,paddingBottom:Math.max(16,ye.bottom),paddingHorizontal:16+(ye.left||0)}],children:[(0,F.jsx)("input",{ref:ge,type:"file",accept:"image/*",style:{display:"none"},onChange:async e=>{const t=e.target.files?.[0];if(t&&H)if(t.type.startsWith("image/")){fe(!0);try{const e=new FileReader;e.onload=async e=>{const t=e.target?.result;await N(H.id,t),U(Object.assign({},H,{photo:t})),d.default.alert("Success","Photo uploaded successfully!"),fe(!1)},e.onerror=()=>{d.default.alert("Error","Failed to read image"),fe(!1)},e.readAsDataURL(t)}catch(a){console.error("Photo upload error:",a),d.default.alert("Error","Failed to upload photo"),fe(!1)}}else d.default.alert("Error","Please select an image file")}}),(0,F.jsxs)(l.default,{style:[W.default.headerButtons,{top:ye.top+12}],children:[(0,F.jsx)(n.default,{style:W.default.headerButton,onPress:()=>{f.router.back()},children:(0,F.jsx)(x.default,{size:24})}),(0,F.jsxs)(l.default,{style:W.default.headerRightButtons,children:[(0,F.jsx)(n.default,{style:W.default.headerButton,onPress:()=>{d.default.alert("Share","Share functionality coming soon!")},children:(0,F.jsx)(T.default,{size:22})}),(0,F.jsx)(n.default,{style:W.default.headerButton,onPress:()=>{xe(!pe)},children:(0,F.jsx)(b.default,{size:22,fill:pe?E.default.darkGreen:"none"})}),(0,F.jsx)(n.default,{style:W.default.headerButton,onPress:()=>{d.default.alert("Options","Mark as completed option coming soon!")},children:(0,F.jsx)(y.default,{size:22})})]})]}),(0,F.jsxs)(u.default.ScrollView,{style:W.default.scrollContainer,contentContainerStyle:W.default.scrollContent,onScroll:u.default.event([{nativeEvent:{contentOffset:{y:he}}}],{useNativeDriver:!1}),scrollEventThrottle:16,children:[(0,F.jsx)(l.default,{style:W.default.heroSection,children:H.photo?(0,F.jsxs)(l.default,{style:W.default.heroImageContainer,children:[(0,F.jsx)(g.Image,{source:{uri:H.photo},style:W.default.heroImage,contentFit:"cover",cachePolicy:"memory-disk"}),(0,F.jsx)(R.LinearGradient,{colors:["rgba(0,0,0,0)","rgba(0,0,0,0.3)"],style:W.default.heroGradient}),Se&&(0,F.jsx)(n.default,{style:W.default.changePhotoFab,onPress:je,disabled:ce,children:ce?(0,F.jsx)(r.default,{color:E.default.white,size:"small"}):(0,F.jsx)(w.default,{size:20,color:E.default.white})})]}):Se&&(0,F.jsx)(n.default,{style:W.default.addPhotoContainer,onPress:je,disabled:ce,children:ce?(0,F.jsx)(r.default,{size:"large",color:E.default.primary}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(l.default,{style:W.default.addPhotoIcon,children:(0,F.jsx)(w.default,{size:32,color:E.default.primary})}),(0,F.jsx)(c.default,{style:W.default.addPhotoText,children:"Add a photo"}),(0,F.jsx)(c.default,{style:W.default.addPhotoSubtext,children:"Make your trail memorable"})]})})}),(0,F.jsx)(l.default,{style:W.default.contentWrapper,children:(0,F.jsxs)(l.default,{style:W.default.content,children:[(0,F.jsxs)(l.default,{style:W.default.titleSection,children:[Se&&Y?(0,F.jsxs)(l.default,{style:W.default.nameEditContainer,children:[(0,F.jsx)(i.default,{style:W.default.nameInput,value:Q,onChangeText:Z,placeholder:"Enter trail name",autoFocus:!0,placeholderTextColor:"#9ca3af"}),(0,F.jsxs)(l.default,{style:W.default.editButtons,children:[(0,F.jsx)(n.default,{style:[W.default.iconButton,W.default.saveIconButton],onPress:async()=>{if(H&&Q.trim())try{await G(H.id,Q.trim()),U(Object.assign({},H,{name:Q.trim()})),K(!1)}catch{d.default.alert("Error","Failed to update trail name. Please try again.")}else K(!1)},children:(0,F.jsx)(C.default,{size:18,color:"#fff"})}),(0,F.jsx)(n.default,{style:[W.default.iconButton,W.default.cancelIconButton],onPress:()=>{Z(H?.name||""),K(!1)},children:(0,F.jsx)(P.default,{size:18,color:E.default.darkGreen})})]})]}):(0,F.jsx)(l.default,{style:W.default.titleRow,children:(0,F.jsx)(c.default,{style:W.default.title,children:H.name||`Trail ${new Date(H.date).toLocaleDateString()}`})}),H.city&&(0,F.jsxs)(l.default,{style:W.default.locationRow,children:[(0,F.jsx)(k.default,{size:16,color:E.default.lightGreen}),(0,F.jsxs)(c.default,{style:W.default.location,children:[H.city,", ",H.country||"Unknown"]})]}),H.rating&&!X&&(0,F.jsx)(l.default,{style:W.default.ratingRow,children:[1,2,3,4,5].map(e=>(0,F.jsx)(I.default,{size:18,color:e<=H.rating?"#f59e0b":"#d1d5db",fill:e<=H.rating?"#f59e0b":"none"},e))})]}),H.review&&!X&&(0,F.jsx)(l.default,{style:W.default.reviewCard,children:(0,F.jsx)(c.default,{style:W.default.reviewText,children:H.review})}),(0,F.jsxs)(l.default,{style:W.default.statsSection,children:[(0,F.jsxs)(l.default,{style:W.default.statCard,children:[(0,F.jsx)(l.default,{style:W.default.statIconContainer,children:(0,F.jsx)(k.default,{size:20,color:E.default.white,strokeWidth:2.5})}),(0,F.jsx)(c.default,{style:W.default.statLabel,children:"Distance"}),(0,F.jsx)(c.default,{style:W.default.statValue,children:(0,A.formatDistance)(H.distance)})]}),(0,F.jsxs)(l.default,{style:W.default.statCard,children:[(0,F.jsx)(l.default,{style:W.default.statIconContainer,children:(0,F.jsx)(S.default,{size:20,color:E.default.white,strokeWidth:2.5})}),(0,F.jsx)(c.default,{style:W.default.statLabel,children:"Duration"}),(0,F.jsx)(c.default,{style:W.default.statValue,children:(0,A.formatDuration)(H.duration)})]}),H.difficulty&&(0,F.jsxs)(l.default,{style:W.default.statCard,children:[(0,F.jsx)(l.default,{style:W.default.statIconContainer,children:(0,F.jsx)(me,{IconComponent:z.default,emoji:"\u26f0\ufe0f",size:20,color:E.default.white})}),(0,F.jsx)(c.default,{style:W.default.statLabel,children:"Difficulty"}),(0,F.jsx)(c.default,{style:W.default.statValue,children:H.difficulty})]})]}),H.environment_tags&&H.environment_tags.length>0&&!X&&(0,F.jsxs)(l.default,{style:W.default.tagsSection,children:[(0,F.jsxs)(l.default,{style:W.default.sectionHeader,children:[(0,F.jsx)(me,{IconComponent:B.default,emoji:"\ud83c\udff7\ufe0f",size:18,color:E.default.darkGreen}),(0,F.jsx)(c.default,{style:W.default.sectionTitle,children:"Environment"})]}),(0,F.jsx)(l.default,{style:W.default.tagsGrid,children:H.environment_tags.map((e,t)=>(0,F.jsx)(l.default,{style:W.default.tagChip,children:(0,F.jsx)(c.default,{style:W.default.tagText,children:e})},t))})]}),Se&&!X&&(0,F.jsxs)(n.default,{style:W.default.editDetailsButton,onPress:()=>{ee(!0)},children:[(0,F.jsx)(m.default,{size:18,color:E.default.primary}),(0,F.jsx)(c.default,{style:W.default.editDetailsText,children:"Edit Trail Details"})]}),Se&&X&&(0,F.jsxs)(l.default,{style:W.default.editSection,children:[(0,F.jsx)(c.default,{style:W.default.editSectionTitle,children:"Trail Name"}),(0,F.jsx)(i.default,{style:W.default.nameInputInDetails,value:se,onChangeText:ue,placeholder:"Enter trail name",placeholderTextColor:"#9ca3af"}),(0,F.jsx)(c.default,{style:[W.default.editSectionTitle,{marginTop:24}],children:"Rating"}),(0,F.jsx)(l.default,{style:W.default.ratingStars,children:[1,2,3,4,5].map(e=>(0,F.jsx)(n.default,{onPress:()=>{ae(e)},style:W.default.starButton,children:(0,F.jsx)(I.default,{size:32,color:e<=te?"#f59e0b":"#d1d5db",fill:e<=te?"#f59e0b":"none"})},e))}),(0,F.jsx)(c.default,{style:[W.default.editSectionTitle,{marginTop:24}],children:"Review"}),(0,F.jsx)(i.default,{style:W.default.reviewInput,value:oe,onChangeText:le,placeholder:"Share your experience on this trail...",placeholderTextColor:"#9ca3af",multiline:!0,numberOfLines:4,textAlignVertical:"top"}),(0,F.jsx)(c.default,{style:[W.default.editSectionTitle,{marginTop:24}],children:"Difficulty"}),(0,F.jsx)(l.default,{style:W.default.difficultyOptions,children:V.map(e=>(0,F.jsx)(n.default,{style:[W.default.difficultyChip,ie===e&&W.default.difficultyChipSelected],onPress:()=>{de(e)},children:(0,F.jsx)(c.default,{style:[W.default.difficultyChipText,ie===e&&W.default.difficultyChipTextSelected],children:e})},e))}),(0,F.jsx)(c.default,{style:[W.default.editSectionTitle,{marginTop:24}],children:"Environment Tags"}),(0,F.jsx)(l.default,{style:W.default.tagsGrid,children:_.map(e=>(0,F.jsx)(n.default,{style:[W.default.editTagChip,re.includes(e)&&W.default.editTagChipSelected],onPress:()=>(e=>{ne(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),children:(0,F.jsx)(c.default,{style:[W.default.editTagChipText,re.includes(e)&&W.default.editTagChipTextSelected],children:e})},e))}),(0,F.jsxs)(l.default,{style:W.default.editActionButtons,children:[(0,F.jsxs)(n.default,{style:[W.default.actionButton,W.default.cancelActionButton],onPress:()=>{ae(H?.rating||0),le(H?.review||""),ne(H?.environment_tags||[]),de(H?.difficulty||""),ue(H?.name||""),ee(!1)},children:[(0,F.jsx)(P.default,{size:20,color:E.default.darkGreen}),(0,F.jsx)(c.default,{style:W.default.cancelActionText,children:"Cancel"})]}),(0,F.jsxs)(n.default,{style:[W.default.actionButton,W.default.saveActionButton],onPress:async()=>{if(H)try{se.trim()!==H.name&&await G(H.id,se.trim()),await M(H.id,{rating:te>0?te:void 0,review:oe.trim()||void 0,environment_tags:re.length>0?re:void 0,difficulty:ie||void 0}),U(Object.assign({},H,{name:se.trim(),rating:te>0?te:void 0,review:oe.trim()||void 0,environment_tags:re.length>0?re:void 0,difficulty:ie||void 0})),Z(se.trim()),ee(!1),d.default.alert("Success","Trail details updated!")}catch{d.default.alert("Error","Failed to update trail details. Please try again.")}},children:[(0,F.jsx)(C.default,{size:20,color:"#fff"}),(0,F.jsx)(c.default,{style:W.default.saveActionText,children:"Save"})]})]})]}),(0,F.jsxs)(l.default,{style:W.default.mapSection,children:[(0,F.jsxs)(l.default,{style:W.default.sectionHeader,children:[(0,F.jsx)(me,{IconComponent:v.default,emoji:"\ud83e\udded",size:18,color:E.default.darkGreen}),(0,F.jsx)(c.default,{style:W.default.sectionTitle,children:"Route Map"})]}),(0,F.jsx)(l.default,{style:W.default.mapContainer,children:(0,F.jsx)(h.default,{coordinates:we,style:W.default.map,initialRegion:Ce||void 0,scrollEnabled:!1,zoomEnabled:!1})}),(0,F.jsxs)(n.default,{style:W.default.directionsButton,onPress:()=>{if(!H||0===(H.coordinates?.length??0))return void d.default.alert("Error","Location not available for this trail");const e=H.coordinates[0].latitude,t=H.coordinates[0].longitude,a=(H.name,`https://www.google.com/maps/search/?api=1&query=${e},${t}`);s.default.canOpenURL(a).then(e=>{e?s.default.openURL(a):d.default.alert("Error","Unable to open maps application")})},children:[(0,F.jsx)(v.default,{size:18,color:"#fff"}),(0,F.jsx)(c.default,{style:W.default.directionsButtonText,children:"Get Directions"})]})]}),(0,F.jsxs)(l.default,{children:[(0,F.jsx)(c.default,{style:W.default.detailsTitle,children:"Additional Details"}),void 0!==H.maxElevation&&(0,F.jsxs)(l.default,{style:W.default.detailRow,children:[(0,F.jsx)(l.default,{style:W.default.detailIcon,children:(0,F.jsx)(me,{IconComponent:z.default,emoji:"\u26f0\ufe0f",size:18,color:E.default.primary})}),(0,F.jsxs)(l.default,{style:W.default.detailContent,children:[(0,F.jsx)(c.default,{style:W.default.detailLabel,children:"Elevation Gain"}),(0,F.jsxs)(c.default,{style:W.default.detailValue,children:[H.maxElevation,"m"]})]})]}),H.pace&&(0,F.jsxs)(l.default,{style:W.default.detailRow,children:[(0,F.jsx)(l.default,{style:W.default.detailIcon,children:(0,F.jsx)(me,{IconComponent:p.default,emoji:"\ud83c\udfc3",size:18,color:E.default.primary})}),(0,F.jsxs)(l.default,{style:W.default.detailContent,children:[(0,F.jsx)(c.default,{style:W.default.detailLabel,children:"Pace"}),(0,F.jsxs)(c.default,{style:W.default.detailValue,children:[H.pace," /km"]})]})]}),H.speed&&(0,F.jsxs)(l.default,{style:W.default.detailRow,children:[(0,F.jsx)(l.default,{style:W.default.detailIcon,children:(0,F.jsx)(me,{IconComponent:p.default,emoji:"\u26a1",size:18,color:E.default.primary})}),(0,F.jsxs)(l.default,{style:W.default.detailContent,children:[(0,F.jsx)(c.default,{style:W.default.detailLabel,children:"Max Speed"}),(0,F.jsxs)(c.default,{style:W.default.detailValue,children:[H.speed.toFixed(1)," km/h"]})]})]}),(0,F.jsxs)(l.default,{style:W.default.detailRow,children:[(0,F.jsx)(l.default,{style:W.default.detailIcon,children:(0,F.jsx)(me,{IconComponent:j.default,emoji:"\ud83d\udcc5",size:18,color:E.default.primary})}),(0,F.jsxs)(l.default,{style:W.default.detailContent,children:[(0,F.jsx)(c.default,{style:W.default.detailLabel,children:"Date & Time"}),(0,F.jsx)(c.default,{style:W.default.detailValue,children:new Date(H.date).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]})]})]})})]})]})}},3764(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>p});var o=a(6665),l=a(6283),r=a(3929),n=a(6773),i=a(5648),d=a(3668),s=a(4767),u=a(1690),c=a(530),f=a(9637),g=a(3353),h=a(630),y=a(9582),m=a(397);function p(){const e=(0,f.useRouter)(),{requestRegistration:t,verifyRegistration:a}=(0,g.useAuth)(),[d,y]=(0,o.useState)(""),[p,b]=(0,o.useState)(""),[j,w]=(0,o.useState)(""),[C,S]=(0,o.useState)("info"),[k,v]=(0,o.useState)(!1);return(0,m.jsx)(s.default,{style:x.container,behavior:"height",children:(0,m.jsxs)(r.default,{style:x.content,children:[(0,m.jsxs)(r.default,{style:x.header,children:[(0,m.jsx)(h.default,{size:64,color:"#5d6b4a"}),(0,m.jsx)(l.default,{style:x.title,children:"Create Account"}),(0,m.jsx)(l.default,{style:x.subtitle,children:"Sign up to start tracking your dog walks"})]}),(0,m.jsxs)(r.default,{style:x.form,children:["info"===C?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(r.default,{style:x.inputContainer,children:[(0,m.jsx)(l.default,{style:x.label,children:"Name"}),(0,m.jsx)(n.default,{style:x.input,placeholder:"Your Name",value:p,onChangeText:b,autoCapitalize:"words",editable:!k})]}),(0,m.jsxs)(r.default,{style:x.inputContainer,children:[(0,m.jsx)(l.default,{style:x.label,children:"Email"}),(0,m.jsx)(n.default,{style:x.input,placeholder:"your@email.com",value:d,onChangeText:y,autoCapitalize:"none",keyboardType:"email-address",autoComplete:"email",editable:!k})]}),(0,m.jsx)(i.default,{style:[x.button,k&&x.buttonDisabled],onPress:async()=>{if(d&&p){0,v(!0);try{await t(d.trim().toLowerCase(),p.trim()),S("otp")}catch(e){0,console.error("Request registration error:",e),u.default.alert("Error",e.message||"Failed to request registration")}finally{v(!1)}}else u.default.alert("Error","Please fill in all fields")},disabled:k,children:k?(0,m.jsx)(c.default,{color:"#fff"}):(0,m.jsx)(l.default,{style:x.buttonText,children:"Send OTP"})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(r.default,{style:x.inputContainer,children:[(0,m.jsx)(l.default,{style:x.label,children:"OTP Code"}),(0,m.jsx)(n.default,{style:x.input,placeholder:"Enter 6-digit code",value:j,onChangeText:w,keyboardType:"number-pad",maxLength:6,editable:!k}),(0,m.jsxs)(l.default,{style:x.helperText,children:["Sent to ",d]})]}),(0,m.jsx)(i.default,{style:[x.button,k&&x.buttonDisabled],onPress:async()=>{if(j){0,v(!0);try{await a(d.trim().toLowerCase(),j),e.replace("/")}catch(t){0,console.error("Verify registration error:",t),u.default.alert("Error",t.message||"Invalid OTP code")}finally{v(!1)}}else u.default.alert("Error","Please enter the OTP code")},disabled:k,children:k?(0,m.jsx)(c.default,{color:"#fff"}):(0,m.jsx)(l.default,{style:x.buttonText,children:"Verify & Sign Up"})}),(0,m.jsx)(i.default,{style:x.secondaryButton,onPress:()=>S("info"),disabled:k,children:(0,m.jsx)(l.default,{style:x.secondaryButtonText,children:"Change Info"})})]}),(0,m.jsxs)(r.default,{style:x.footer,children:[(0,m.jsx)(l.default,{style:x.footerText,children:"Already have an account? "}),(0,m.jsx)(i.default,{onPress:()=>{e.push("/login")},children:(0,m.jsx)(l.default,{style:x.linkText,children:"Sign In"})})]})]})]})})}const x=d.default.create({container:{flex:1,backgroundColor:y.default.background},content:{flex:1,padding:24,justifyContent:"center"},header:{alignItems:"center",marginBottom:48},title:{fontSize:32,fontWeight:"700",color:y.default.light.text,marginTop:16},subtitle:{fontSize:16,color:y.default.muted,marginTop:8,textAlign:"center"},form:{width:"100%"},inputContainer:{marginBottom:20},label:{fontSize:14,fontWeight:"600",color:y.default.primary,marginBottom:8},input:{backgroundColor:"#fff",borderWidth:1,borderColor:"#a8ad8e",borderRadius:12,padding:16,fontSize:16,color:"#1a1f0a"},helperText:{fontSize:12,color:"#6b7280",marginTop:8},button:{backgroundColor:"#5d6b4a",borderRadius:12,padding:16,alignItems:"center",marginTop:12},buttonDisabled:{opacity:.6},buttonText:{fontSize:16,fontWeight:"600",color:"#fff"},secondaryButton:{padding:16,alignItems:"center",marginTop:8},secondaryButtonText:{fontSize:14,fontWeight:"600",color:"#5d6b4a"},footer:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:24},footerText:{fontSize:14,color:"#6b7280"},linkText:{fontSize:14,fontWeight:"600",color:"#5d6b4a"}})},4101(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>p});var o=a(6665),l=a(6283),r=a(3929),n=a(6773),i=a(5648),d=a(3668),s=a(4767),u=a(1690),c=a(530),f=a(9637),g=a(3353),h=a(5894),y=a(9582),m=a(397);function p(){const e=(0,f.useRouter)(),{requestOtp:t,verifyOtp:a}=(0,g.useAuth)(),[d,y]=(0,o.useState)(""),[p,b]=(0,o.useState)(""),[j,w]=(0,o.useState)("email"),[C,S]=(0,o.useState)(!1);return(0,m.jsx)(s.default,{style:x.container,behavior:"height",children:(0,m.jsxs)(r.default,{style:x.content,children:[(0,m.jsxs)(r.default,{style:x.header,children:[(0,m.jsx)(h.Image,{source:{uri:"https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/dae4myluqaizgiwvqbwx1"},style:x.logo,contentFit:"contain"}),(0,m.jsx)(l.default,{style:x.title,children:"Welcome Back"}),(0,m.jsx)(l.default,{style:x.subtitle,children:"Sign in to track your dog walks"})]}),(0,m.jsxs)(r.default,{style:x.form,children:["email"===j?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(r.default,{style:x.inputContainer,children:[(0,m.jsx)(l.default,{style:x.label,children:"Email"}),(0,m.jsx)(n.default,{style:x.input,placeholder:"your@email.com",value:d,onChangeText:y,autoCapitalize:"none",keyboardType:"email-address",autoComplete:"email",editable:!C})]}),(0,m.jsx)(i.default,{style:[x.button,C&&x.buttonDisabled],onPress:async()=>{if(d){0,S(!0);try{await t(d.trim().toLowerCase()),w("otp")}catch(e){0,console.error("Request OTP error:",e),u.default.alert("Error",e.message||"Failed to request OTP")}finally{S(!1)}}else u.default.alert("Error","Please enter your email")},disabled:C,children:C?(0,m.jsx)(c.default,{color:"#fff"}):(0,m.jsx)(l.default,{style:x.buttonText,children:"Send OTP"})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(r.default,{style:x.inputContainer,children:[(0,m.jsx)(l.default,{style:x.label,children:"OTP Code"}),(0,m.jsx)(n.default,{style:x.input,placeholder:"Enter 6-digit code",value:p,onChangeText:b,keyboardType:"number-pad",maxLength:6,editable:!C}),(0,m.jsxs)(l.default,{style:x.helperText,children:["Sent to ",d]})]}),(0,m.jsx)(i.default,{style:[x.button,C&&x.buttonDisabled],onPress:async()=>{if(p){0,S(!0);try{await a(d.trim().toLowerCase(),p),e.replace("/")}catch(t){0,console.error("Verify OTP error:",t),u.default.alert("Error",t.message||"Invalid OTP code")}finally{S(!1)}}else u.default.alert("Error","Please enter the OTP code")},disabled:C,children:C?(0,m.jsx)(c.default,{color:"#fff"}):(0,m.jsx)(l.default,{style:x.buttonText,children:"Verify & Sign In"})}),(0,m.jsx)(i.default,{style:x.secondaryButton,onPress:()=>w("email"),disabled:C,children:(0,m.jsx)(l.default,{style:x.secondaryButtonText,children:"Change Email"})})]}),(0,m.jsxs)(r.default,{style:x.footer,children:[(0,m.jsx)(l.default,{style:x.footerText,children:"Don't have an account? "}),(0,m.jsx)(i.default,{onPress:()=>{e.push("/signup")},children:(0,m.jsx)(l.default,{style:x.linkText,children:"Sign Up"})})]})]})]})})}const x=d.default.create({container:{flex:1,backgroundColor:y.default.background},content:{flex:1,padding:24,justifyContent:"center"},header:{alignItems:"center",marginBottom:48},logo:{width:100,height:100},title:{fontSize:32,fontWeight:"700",color:y.default.light.text,marginTop:16},subtitle:{fontSize:16,color:y.default.muted,marginTop:8,textAlign:"center"},form:{width:"100%"},inputContainer:{marginBottom:20},label:{fontSize:14,fontWeight:"600",color:"#5d6b4a",marginBottom:8},input:{backgroundColor:"#fff",borderWidth:1,borderColor:"#a8ad8e",borderRadius:12,padding:16,fontSize:16,color:"#1a1f0a"},helperText:{fontSize:12,color:"#6b7280",marginTop:8},button:{backgroundColor:"#5d6b4a",borderRadius:12,padding:16,alignItems:"center",marginTop:12},buttonDisabled:{opacity:.6},buttonText:{fontSize:16,fontWeight:"600",color:"#fff"},secondaryButton:{padding:16,alignItems:"center",marginTop:8},secondaryButtonText:{fontSize:14,fontWeight:"600",color:"#5d6b4a"},footer:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:24},footerText:{fontSize:14,color:"#6b7280"},linkText:{fontSize:14,fontWeight:"600",color:"#5d6b4a"}})},4395(e){e.exports={},e.exports.default=e.exports},4492(e,t,a){"use strict";a.r(t),a.d(t,{customAlphabet:()=>o,nanoid:()=>l});const o=(e,t=21)=>(a=t)=>{let o="",l=0|a;for(;l--;)o+=e[Math.random()*e.length|0];return o},l=(e=21)=>{let t="",a=0|e;for(;a--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}},4509(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>A});var o=a(6665),l=a(9637),r=a(6283),n=a(3929),i=a(2772),d=a(5648),s=a(530),u=a(5009),c=a(6773),f=a(8264),g=a(932),h=a(5894),y=a(893),m=a(8833),p=a(3087),x=a(2994),b=a(1449),j=a(3048),w=a(1168),C=a(8032),S=a(1858),k=a(5082),v=a(4550),T=a(2964),I=a(9582),B=a(6746),z=a(9269),P=a(9600),R=a(2699),D=a(397);const L=[{id:"nearby",name:"Nearby",icon:w.default},{id:"popular",name:"Popular",icon:j.default},{id:"beaches",name:"Beaches",icon:v.default}];function A(){const e=(0,l.useRouter)(),t=(0,m.useSafeAreaInsets)(),{loadNearbyTrails:a,saveTrailBookmark:j,removeTrailBookmark:v,isTrailSaved:A}=(0,B.useTrails)(),[E,O]=(0,o.useState)("nearby"),[W,F]=(0,o.useState)([]),[_,V]=(0,o.useState)(!0),[,G]=(0,o.useState)(void 0),[N,M]=(0,o.useState)({}),[$,H]=(0,o.useState)(""),[U,q]=(0,o.useState)(!1),[J,Y]=(0,o.useState)(""),[K,Q]=(0,o.useState)([]),Z=(0,o.useCallback)(async()=>{{Y("Current location");try{if(navigator&&navigator.geolocation)return void navigator.geolocation.getCurrentPosition(async e=>{try{const t=await a(e.coords.latitude,e.coords.longitude);F(t)}catch(t){console.error("Failed to load nearby trails with browser location:",t);const e=await a();F(e)}finally{V(!1)}},async()=>{const e=await a();F(e),V(!1)})}catch(e){console.error("Geolocation not available on web:",e)}const t=await a();return F(t),void V(!1)}},[a]);(0,o.useEffect)(()=>{Z()},[Z]),(0,l.useFocusEffect)((0,o.useCallback)(()=>{console.log("Explore tab focused - refreshing nearby trails"),Z()},[Z]));const X=(0,o.useCallback)(()=>{const e=$.toLowerCase(),t=W.filter(t=>{const a=t.name?.toLowerCase()||"",o=t.city?.toLowerCase()||"",l=t.country?.toLowerCase()||"";return a.includes(e)||o.includes(e)||l.includes(e)}).map(e=>({id:e.id,name:e.name||`Trail ${new Date(e.date).toLocaleDateString()}`,location:e.city?`${e.city}, ${e.country||"Unknown"}`:"Location unknown",type:"trail"})).slice(0,6);Q(t)},[$,W]);(0,o.useEffect)(()=>{$.trim()?X():Q([])},[$,X]);const ee=()=>{q(!1),H(""),Q([])},te=e=>{if(!N[e]){const t=new u.default.Value(1);return M(a=>Object.assign({},a,{[e]:t})),t}return N[e]},ae=(0,o.useCallback)(e=>{let t=e;return"popular"===E?t=[...t].sort((e,t)=>(t.rating||0)-(e.rating||0)):"beaches"===E&&(t=t.filter(e=>(e.environment_tags||[]).some(e=>e.toLowerCase().includes("beach")))),t},[E])(W);return(0,D.jsxs)(n.default,{style:R.default.safeContainer,children:[(0,D.jsxs)(i.default,{style:R.default.container,showsVerticalScrollIndicator:!1,stickyHeaderIndices:[0],children:[(0,D.jsxs)(n.default,{style:[R.default.stickyHeader,{paddingTop:t.top+16}],children:[(0,D.jsxs)(n.default,{style:R.default.stickySearchContainer,children:[(0,D.jsxs)(d.default,{style:R.default.searchBar,onPress:()=>{q(!0)},activeOpacity:.7,children:[(0,D.jsx)(S.default,{size:20,color:I.default.muted}),(0,D.jsx)(r.default,{style:R.default.searchPlaceholder,children:"Find trails"})]}),(0,D.jsx)(d.default,{style:R.default.demoButton,onPress:()=>e.push("/trail/demo-trail"),children:(0,D.jsx)(r.default,{style:R.default.demoButtonText,children:"Demo"})})]}),(0,D.jsx)(n.default,{style:R.default.categoriesSection,children:(0,D.jsx)(i.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,contentContainerStyle:R.default.categoriesScroll,children:L.map(e=>{const t=e.icon,a=E===e.id;return(0,D.jsxs)(d.default,{style:[R.default.categoryButton,a&&R.default.categoryButtonActive],onPress:()=>{return t=e.id,void O(t);var t},children:[(0,D.jsx)(t,{size:20,color:a?I.default.light.tabIconSelected:I.default.muted,strokeWidth:2}),(0,D.jsx)(r.default,{style:[R.default.categoryText,a&&R.default.categoryTextActive],children:e.name})]},e.id)})})})]}),(0,D.jsx)(n.default,{style:R.default.categoryTrailsSection,children:_?(0,D.jsxs)(n.default,{style:R.default.loadingContainer,children:[(0,D.jsx)(s.default,{size:"large",color:I.default.muted}),(0,D.jsx)(r.default,{style:R.default.loadingText,children:"Loading trails..."})]}):ae.length>0?ae.map(t=>{const a=te(t.id),o=A(t.id);return(0,D.jsxs)(d.default,{style:R.default.largeTrailCard,onPress:()=>{return a=t.id,void e.push(`/trail/${a}`);var a},children:[t.photo?(0,D.jsx)(h.Image,{source:{uri:t.photo},style:R.default.largeTrailImage,contentFit:"cover",cachePolicy:"memory-disk"}):(0,D.jsx)(P.default,{coordinates:t.coordinates,path:t.path,style:R.default.largeTrailImage,startLatitude:t.startLatitude,startLongitude:t.startLongitude}),(0,D.jsx)(y.LinearGradient,{colors:["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.25)","rgba(0, 0, 0, 0.6)"],locations:[0,.3,.6,1],style:R.default.cardGradient}),(0,D.jsx)(d.default,{style:R.default.bookmarkButton,onPress:e=>{e.stopPropagation(),(async(e,t=!1)=>{if(!t&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))return void console.log("Cannot bookmark mock trail:",e);const a=te(e),o=A(e);u.default.sequence([u.default.timing(a,{toValue:.6,duration:100,useNativeDriver:!0}),u.default.spring(a,{toValue:1,friction:3,tension:100,useNativeDriver:!0})]).start();try{o?await v(e):await j(e)}catch(l){console.error("Failed to toggle bookmark:",l)}})(t.id,!0)},children:(0,D.jsx)(u.default.View,{style:{transform:[{scale:a}]},children:(0,D.jsx)(x.default,{size:20,color:o?"#000":I.default.muted,fill:o?"#000":"none",strokeWidth:2})})}),(0,D.jsxs)(n.default,{style:R.default.cardOverlayContent,children:[(0,D.jsx)(r.default,{style:R.default.overlayTrailName,children:t.name||`Trail ${new Date(t.date).toLocaleDateString()}`}),(0,D.jsx)(r.default,{style:R.default.overlayLocation,children:t.city?`${t.city}, ${t.country||"Unknown"}`:"Location unknown"}),(0,D.jsxs)(n.default,{style:R.default.overlayBadges,children:[t.difficulty&&(0,D.jsxs)(n.default,{style:R.default.badge,children:[(0,D.jsx)(p.default,{size:14,color:I.default.paleYellow,strokeWidth:2.5}),(0,D.jsx)(r.default,{style:R.default.badgeText,children:t.difficulty})]}),(0,D.jsxs)(n.default,{style:R.default.badge,children:[(0,D.jsx)(w.default,{size:14,color:I.default.paleYellow,strokeWidth:2.5}),(0,D.jsx)(r.default,{style:R.default.badgeText,children:(0,z.formatDistance)(t.distance)})]}),"number"===typeof t.distance_from_user&&(0,D.jsxs)(n.default,{style:R.default.badge,children:[(0,D.jsx)(w.default,{size:14,color:I.default.paleYellow,strokeWidth:2.5}),(0,D.jsx)(r.default,{style:R.default.badgeText,children:(0,z.formatDistance)(t.distance_from_user)})]}),t.rating&&(0,D.jsxs)(n.default,{style:R.default.badge,children:[(0,D.jsx)(k.default,{size:14,color:I.default.accent,fill:I.default.accent,strokeWidth:2}),(0,D.jsx)(r.default,{style:R.default.badgeText,children:t.rating.toFixed(1)})]})]})]})]},t.id)}):(0,D.jsxs)(n.default,{style:R.default.emptyContainer,children:[(0,D.jsx)(w.default,{size:48,color:"#9ca3af"}),(0,D.jsx)(r.default,{style:R.default.emptyText,children:"No trails found yet. Record a trail to share with others!"})]})}),(0,D.jsx)(n.default,{style:R.default.bottomPadding})]}),(0,D.jsx)(f.default,{visible:U,animationType:"slide",presentationStyle:"fullScreen",onRequestClose:ee,children:(0,D.jsxs)(n.default,{style:[R.default.searchModalContainer,{paddingTop:t.top}],children:[(0,D.jsxs)(n.default,{style:R.default.searchModalHeader,children:[(0,D.jsx)(d.default,{style:R.default.backButton,onPress:ee,children:(0,D.jsx)(b.default,{size:24,color:"#5d6b4a"})}),(0,D.jsxs)(n.default,{style:R.default.searchModalInputContainer,children:[(0,D.jsx)(c.default,{style:R.default.searchModalInput,placeholder:"Find trails",placeholderTextColor:"#9ca3af",value:$,onChangeText:H,autoFocus:!0,returnKeyType:"search"}),$.length>0&&(0,D.jsx)(d.default,{style:R.default.clearButton,onPress:()=>H(""),children:(0,D.jsx)(T.default,{size:20,color:"#64748b"})})]})]}),(0,D.jsxs)(n.default,{style:R.default.searchModalContent,children:[""===$.trim()&&(0,D.jsxs)(d.default,{style:R.default.currentLocationItem,onPress:()=>{q(!1),H(""),Q([])},children:[(0,D.jsx)(n.default,{style:R.default.locationIconContainer,children:(0,D.jsx)(C.default,{size:20,color:"#5d6b4a"})}),(0,D.jsxs)(n.default,{style:R.default.locationTextContainer,children:[(0,D.jsx)(r.default,{style:R.default.locationTitle,children:"Current location"}),(0,D.jsx)(r.default,{style:R.default.locationSubtitle,children:J})]})]}),K.length>0&&(0,D.jsx)(g.default,{data:K,keyExtractor:e=>e.id,renderItem:({item:t})=>(0,D.jsxs)(d.default,{style:R.default.suggestionItem,onPress:()=>{return a=t.id,q(!1),H(""),Q([]),void e.push(`/trail/${a}`);var a},children:[(0,D.jsx)(n.default,{style:R.default.suggestionIconContainer,children:(0,D.jsx)(w.default,{size:20,color:"#64748b"})}),(0,D.jsxs)(n.default,{style:R.default.suggestionTextContainer,children:[(0,D.jsx)(r.default,{style:R.default.suggestionTitle,children:t.name}),(0,D.jsx)(r.default,{style:R.default.suggestionSubtitle,children:t.location})]})]}),showsVerticalScrollIndicator:!1})]})]})})]})}},4674(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>C});var o=a(6665),l=a(6283),r=a(3929),n=a(5648),i=a(6773),d=a(484),s=a(1690),u=a(2772),c=a(530),f=a(9637),g=a(9908),h=a(262),y=a(9281),m=a(5624),p=a(4043),x=a(8833),b=a(7924),j=a(594),w=a(397);function C(){const e=(0,f.useRouter)(),t=(0,x.useSafeAreaInsets)(),{dogProfile:a}=(0,g.useDogs)(),[C,S]=(0,o.useState)(""),[k,v]=(0,o.useState)(""),[T,I]=(0,o.useState)(""),[B,z]=(0,o.useState)(null),[P,R]=(0,o.useState)(null),[D,L]=(0,o.useState)(!1),[A,E]=(0,o.useState)(!1);(0,o.useEffect)(()=>{a&&(console.log("Loading existing dog profile for editing:",a),S(a.name),v(a.nickname||""),I(a.age.toString()),z(a.size),R(a.photo||null))},[a]);const O=async()=>{const{status:e}=await h.requestMediaLibraryPermissionsAsync();if("granted"!==e)return void s.default.alert("Permission needed","We need access to your photo library");E(!0);const t=await h.launchImageLibraryAsync({mediaTypes:["images"],allowsEditing:!0,aspect:[1,1],quality:.7});E(!1),!t.canceled&&t.assets[0]&&R(t.assets[0].uri)},W=async()=>{const{status:e}=await h.requestCameraPermissionsAsync();if("granted"!==e)return void s.default.alert("Permission needed","We need camera access to take photos");E(!0);const t=await h.launchCameraAsync({allowsEditing:!0,aspect:[1,1],quality:.7});E(!1),!t.canceled&&t.assets[0]&&R(t.assets[0].uri)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(f.Stack.Screen,{options:{headerShown:!1}}),(0,w.jsxs)(u.default,{style:b.default.container,contentContainerStyle:[b.default.content,{paddingTop:t.top+20}],children:[(0,w.jsxs)(r.default,{style:b.default.header,children:[(0,w.jsx)(l.default,{style:b.default.title,children:a?"Edit dog profile":"Tell us about your dog"}),(0,w.jsx)(l.default,{style:b.default.subtitle,children:a?"Update your dog's information":"Let's start with the basics"}),!a&&(0,w.jsxs)(r.default,{style:b.default.progressContainer,children:[(0,w.jsx)(r.default,{style:[b.default.progressDot,b.default.progressDotActive]}),(0,w.jsx)(r.default,{style:b.default.progressDot})]})]}),(0,w.jsxs)(n.default,{style:b.default.photoContainer,onPress:()=>{s.default.alert("Add Photo","Choose how you want to add a photo",[{text:"Take Photo",onPress:W},{text:"Choose from Library",onPress:O},{text:"Cancel",style:"cancel"}])},disabled:A,children:[A?(0,w.jsx)(c.default,{size:"large",color:"#FFFE77"}):P?(0,w.jsx)(d.default,{source:{uri:P},style:b.default.photo}):(0,w.jsxs)(r.default,{style:b.default.photoPlaceholder,children:[(0,w.jsx)(y.default,{size:32,color:"#FFFE77"}),(0,w.jsx)(l.default,{style:b.default.photoPlaceholderText,children:"Add Photo"})]}),P&&!A&&(0,w.jsx)(r.default,{style:b.default.photoOverlay,children:(0,w.jsx)(p.default,{size:24,color:"#1a1f0a"})})]}),(0,w.jsxs)(r.default,{style:b.default.formSection,children:[(0,w.jsx)(l.default,{style:b.default.label,children:"Name *"}),(0,w.jsx)(i.default,{style:b.default.input,value:C,onChangeText:S,placeholder:"Enter your dog's name",placeholderTextColor:"#5a6040",autoCapitalize:"words",testID:"dog-name-input"})]}),(0,w.jsxs)(r.default,{style:b.default.formSection,children:[(0,w.jsx)(l.default,{style:b.default.label,children:"Nickname (Optional)"}),(0,w.jsx)(i.default,{style:b.default.input,value:k,onChangeText:v,placeholder:"Enter a nickname",placeholderTextColor:"#5a6040",autoCapitalize:"words",testID:"dog-nickname-input"})]}),(0,w.jsxs)(r.default,{style:b.default.formSection,children:[(0,w.jsx)(l.default,{style:b.default.label,children:"Size *"}),(0,w.jsxs)(n.default,{style:b.default.pickerButton,onPress:()=>{L(!D)},testID:"size-picker-button",children:[(0,w.jsx)(l.default,{style:[b.default.pickerButtonText,!B&&b.default.pickerButtonTextPlaceholder],children:B||"Select size"}),(0,w.jsx)(m.default,{size:20,color:"#a8ad8e"})]}),D&&(0,w.jsx)(r.default,{style:b.default.pickerOptions,children:j.DOG_SIZES.map(e=>(0,w.jsx)(n.default,{style:[b.default.pickerOption,B===e&&b.default.pickerOptionSelected],onPress:()=>{z(e),L(!1)},testID:`size-option-${e}`,children:(0,w.jsx)(l.default,{style:[b.default.pickerOptionText,B===e&&b.default.pickerOptionTextSelected],children:e})},e))})]}),(0,w.jsxs)(r.default,{style:b.default.formSection,children:[(0,w.jsx)(l.default,{style:b.default.label,children:"Age (years) *"}),(0,w.jsx)(i.default,{style:b.default.input,value:T,onChangeText:I,placeholder:"Enter age",placeholderTextColor:"#5a6040",keyboardType:"numeric",testID:"dog-age-input"})]}),(0,w.jsx)(n.default,{style:[b.default.nextButton,{marginBottom:t.bottom+20}],onPress:()=>{if(!C.trim())return void s.default.alert("Missing Information","Please enter your dog's name");if(!B)return void s.default.alert("Missing Information","Please select your dog's size");const t=parseInt(T,10);if(!T||isNaN(t)||t<0||t>30)return void s.default.alert("Invalid Age","Please enter a valid age (0-30 years)");e[a?"replace":"push"]({pathname:"/onboarding/dog-personality",params:{name:C.trim(),nickname:k.trim(),age:t.toString(),size:B,photo:P||"",isEditing:a?"true":"false"}})},testID:"next-button",children:(0,w.jsx)(l.default,{style:b.default.nextButtonText,children:"Next"})})]})]})}},5209(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>E});var o=a(6665),l=a(6283),r=a(3929),n=a(5648),i=a(1690),d=a(5009),s=a(444),u=a(6725),c=a(6773),f=a(8264),g=a(2772),h=a(7430),y=a(675),m=a(5163),p=a(2981),x=a(9637),b=a(5259),j=a(3271),w=a(5624),C=a(2301),S=a(1168),k=a(8032),v=a(8280),T=a(7353),I=a(1047),B=a(1095),z=a(9582),P=a(6746),R=a(3353),D=a(9269),L=a(397);const A="background-location-task";function E(){const{saveTrail:e,getTrailById:t}=(0,P.useTrails)(),{user:a}=(0,R.useAuth)(),E=(0,x.useLocalSearchParams)(),O=(0,x.useRouter)(),W="string"===typeof E.trailId?E.trailId:void 0,F=W?t(W):void 0,_=(0,o.useRef)(null),[V,G]=(0,o.useState)(!1),[N,M]=(0,o.useState)([]),[$,H]=(0,o.useState)(null),[U,q]=(0,o.useState)(0),[J,Y]=(0,o.useState)(null),[K,Q]=(0,o.useState)(!0),[Z,X]=(0,o.useState)(null),ee=(0,o.useRef)(null),te=(0,o.useRef)(null),ae=.5*u.default.get("window").height,oe=280,le=(0,o.useRef)(new d.default.Value(oe)).current,[re,ne]=(0,o.useState)(!1),[ie,de]=(0,o.useState)(0),[se,ue]=(0,o.useState)(0),[ce,fe]=(0,o.useState)("0:00"),[ge,he]=(0,o.useState)(0),[ye,me]=(0,o.useState)(0),[pe,xe]=(0,o.useState)(!1),[be,je]=(0,o.useState)(null),[we,Ce]=(0,o.useState)(""),[Se,ke]=(0,o.useState)(""),[ve,Te]=(0,o.useState)(void 0),[Ie,Be]=(0,o.useState)([]),[ze,Pe]=(0,o.useState)(void 0);(0,o.useEffect)(()=>{Q(!1)},[]);(0,o.useEffect)(()=>{if(U>0){const e=(0,D.calculateTotalDistance)(N)/1e3;if(e>0){const t=U/60/e,a=Math.floor(t),o=Math.round(60*(t-a));fe(`${a}:${o.toString().padStart(2,"0")}`)}}},[U,N]);const Re=(0,o.useRef)(0),De=(0,o.useRef)(s.default.create({onStartShouldSetPanResponder:()=>!0,onMoveShouldSetPanResponder:(e,t)=>Math.abs(t.dy)>5,onPanResponderGrant:()=>{Re.current=le._value},onPanResponderMove:(e,t)=>{const a=Re.current-t.dy;a>=oe&&a<=ae&&le.setValue(a)},onPanResponderRelease:(e,t)=>{const a=(ae+oe)/2,o=le._value;t.dy<-50?Le():t.dy>50?Ae():o>a?Le():Ae()}})).current,Le=()=>{ne(!0),d.default.spring(le,{toValue:ae,useNativeDriver:!1,tension:50,friction:8}).start()},Ae=()=>{ne(!1),d.default.spring(le,{toValue:oe,useNativeDriver:!1,tension:50,friction:8}).start()},Ee=()=>{xe(!1),je(null)};if(!J)return(0,L.jsxs)(r.default,{style:B.default.permissionContainer,children:[(0,L.jsx)(S.default,{size:64,color:"#666"}),(0,L.jsx)(l.default,{style:B.default.permissionTitle,children:"Location Permission Required"}),(0,L.jsx)(l.default,{style:B.default.permissionText,children:"This app needs access to your location to track your dog walks."}),(0,L.jsx)(n.default,{style:B.default.permissionButton,onPress:()=>{(async()=>{try{console.log("Requesting location permissions...");const{status:a}=await y.requestForegroundPermissionsAsync();if(console.log("Foreground permission status:",a),"granted"===a){try{const{status:e}=await y.requestBackgroundPermissionsAsync();console.log("Background permission status:",e),"granted"!==e&&i.default.alert("Background Location Required",'To continue recording your trail when the screen is locked, please enable "Allow all the time" in location settings.',[{text:"OK"}])}catch(e){console.warn("Background permission error (non-critical):",e.message)}Y(!0);try{const e=await y.getCurrentPositionAsync({accuracy:m.LocationAccuracy.Balanced}),t={latitude:e.coords.latitude,longitude:e.coords.longitude};H(t),console.log("Initial location:",t)}catch(t){console.warn("Error getting initial location:",t.message)}}else Y(!1),i.default.alert("Permission Required","Location permission is required to track your walks.",[{text:"OK"}])}catch(a){console.error("Permission error:",a);const e=a.message||"Failed to get location permission";e.includes("NSLocation")||e.includes("Info.plist")?i.default.alert("Configuration Error","This app needs to be built with a custom development build to use location tracking. Expo Go doesn't support background location tracking.\n\nPlease contact support or build a custom development client.",[{text:"OK"}]):i.default.alert("Error",e),Y(!1)}finally{Q(!1)}})()},children:(0,L.jsx)(l.default,{style:B.default.permissionButtonText,children:"Grant Permission"})})]});const Oe=(0,D.calculateTotalDistance)(N),We=F&&V&&N.length>0&&F.coordinates.length>0?Math.min(Oe/F.distance*100,100):0,Fe=!!F;return(0,L.jsxs)(r.default,{style:B.default.container,children:[$&&(0,L.jsx)(h.default,{ref:_,coordinates:N,style:B.default.map,initialRegion:{latitude:$.latitude,longitude:$.longitude,latitudeDelta:.01,longitudeDelta:.01},showsUserLocation:!0,followsUserLocation:V,showsMyLocationButton:!1}),(0,L.jsx)(n.default,{style:B.default.recenterButton,onPress:async()=>{if(_.current)try{const e=await y.getCurrentPositionAsync({accuracy:m.LocationAccuracy.Balanced}),t={latitude:e.coords.latitude,longitude:e.coords.longitude};H(t),_.current.animateToRegion({latitude:t.latitude,longitude:t.longitude,latitudeDelta:.01,longitudeDelta:.01},500)}catch(e){console.error("Error getting current location:",e),$&&_.current.animateToRegion({latitude:$.latitude,longitude:$.longitude,latitudeDelta:.01,longitudeDelta:.01},500)}},activeOpacity:.8,children:(0,L.jsx)(k.default,{size:24,color:z.default.primary})}),(0,L.jsxs)(d.default.View,{style:[B.default.bottomSheet,{height:d.default.add(le,92),bottom:0}],children:[(0,L.jsx)(r.default,Object.assign({},De.panHandlers,{style:B.default.handleBar,children:(0,L.jsxs)(n.default,{style:B.default.handleContainer,onPress:()=>{re?Ae():Le()},activeOpacity:.7,children:[(0,L.jsx)(r.default,{style:B.default.handle}),re?(0,L.jsx)(w.default,{size:20,color:"#9ca3af"}):(0,L.jsx)(C.default,{size:20,color:"#9ca3af"})]})})),(0,L.jsxs)(r.default,{style:B.default.bottomSheetContent,children:[(0,L.jsxs)(r.default,{style:B.default.statsGrid,children:[(0,L.jsxs)(r.default,{style:B.default.statItem,children:[(0,L.jsx)(l.default,{style:B.default.statItemLabel,children:"Time"}),(0,L.jsx)(l.default,{style:B.default.statItemValue,children:(0,D.formatDuration)(U)})]}),(0,L.jsxs)(r.default,{style:B.default.statItem,children:[(0,L.jsx)(l.default,{style:B.default.statItemLabel,children:"Distance"}),(0,L.jsx)(l.default,{style:B.default.statItemValue,children:(0,D.formatDistance)(Oe)})]}),(0,L.jsxs)(r.default,{style:B.default.statItem,children:[(0,L.jsx)(l.default,{style:B.default.statItemLabel,children:"Elevation"}),(0,L.jsxs)(l.default,{style:B.default.statItemValue,children:[ie.toFixed(0),"m"]})]}),(0,L.jsxs)(r.default,{style:B.default.statItem,children:[(0,L.jsx)(l.default,{style:B.default.statItemLabel,children:"Pace"}),(0,L.jsxs)(l.default,{style:B.default.statItemValue,children:[ce,"/km"]})]}),(0,L.jsxs)(r.default,{style:B.default.statItem,children:[(0,L.jsx)(l.default,{style:B.default.statItemLabel,children:"Speed"}),(0,L.jsxs)(l.default,{style:B.default.statItemValue,children:[ge.toFixed(1)," km/h"]})]}),Fe&&(0,L.jsxs)(r.default,{style:B.default.statItem,children:[(0,L.jsx)(l.default,{style:B.default.statItemLabel,children:"Progress"}),(0,L.jsxs)(l.default,{style:B.default.statItemValue,children:[We.toFixed(0),"%"]})]})]}),(0,L.jsx)(n.default,{style:[B.default.recordButton,V&&B.default.recordButtonActive],onPress:V?async()=>{console.log("Stopping recording...");try{await p.isTaskRegisteredAsync(A)&&await y.stopLocationUpdatesAsync(A)}catch(g){console.error("Error stopping background location:",g)}ee.current&&(ee.current.remove(),ee.current=null),te.current&&(clearInterval(te.current),te.current=null);const e=await b.default.getItem("recording_coordinates"),t=e?JSON.parse(e):N,a=await b.default.getItem("recording_max_elevation"),o=a?parseFloat(a):se,l=await b.default.getItem("recording_max_speed"),r=l?parseFloat(l):ye,n=await b.default.getItem("recording_start_time"),d=n?Math.floor((Date.now()-parseInt(n))/1e3):U;if(t.length<2)return i.default.alert("No Trail Data","Not enough data to save this trail. Try walking a bit more!"),G(!1),M([]),q(0),await b.default.removeItem("recording_coordinates"),await b.default.removeItem("recording_max_elevation"),await b.default.removeItem("recording_max_speed"),await b.default.removeItem("recording_start_time"),void await b.default.removeItem("recording_last_update");const s=(0,D.calculateTotalDistance)(t),u=s/1e3;let c="0:00";if(u>0){const e=d/60/u,t=Math.floor(e);c=`${t}:${Math.round(60*(e-t)).toString().padStart(2,"0")}`}const f={id:Date.now().toString(),date:Date.now(),distance:s,duration:d,coordinates:t,city:Z?.city,country:Z?.country,pace:c,speed:r,maxElevation:o};je(f),Ce(f.name||""),ke(f.description||""),Te(f.photo||void 0),Be(f.tags||[]),Pe(f.difficulty||void 0),xe(!0)}:async()=>{console.log("Starting recording..."),G(!0),M([]),q(0),ue(0),me(0);try{const t=Date.now();await b.default.setItem("recording_start_time",t.toString()),await b.default.removeItem("recording_coordinates"),await b.default.removeItem("recording_max_elevation"),await b.default.removeItem("recording_max_speed"),await b.default.removeItem("recording_last_update");const a=await y.getCurrentPositionAsync({accuracy:m.LocationAccuracy.Balanced});X(null);const o={latitude:a.coords.latitude,longitude:a.coords.longitude};await b.default.setItem("recording_coordinates",JSON.stringify([o])),M([o]),H(o);try{await y.startLocationUpdatesAsync(A,{accuracy:m.LocationAccuracy.BestForNavigation,distanceInterval:3,timeInterval:1e3,foregroundService:{notificationTitle:"Recording Trail",notificationBody:"TailTrails is tracking your walk",notificationColor:"#2563eb"},pausesUpdatesAutomatically:!1,showsBackgroundLocationIndicator:!0}),console.log("Background location tracking started successfully")}catch(e){console.warn("Background location not available:",e.message),(e.message?.includes("Background location")||e.message?.includes("UIBackgroundModes"))&&i.default.alert("Background Tracking Unavailable","Background location tracking requires a custom development build. The app will continue recording in foreground mode only. Please keep the app open while recording.",[{text:"OK"}])}ee.current=await y.watchPositionAsync({accuracy:m.LocationAccuracy.BestForNavigation,distanceInterval:3,timeInterval:1e3},async e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};if(console.log("Foreground position update:",t,"Accuracy:",e.coords.accuracy),H(t),M(e=>{const a=[...e,t];return console.log("Total coordinates:",a.length,"Distance:",(0,D.calculateTotalDistance)(a),"m"),b.default.setItem("recording_coordinates",JSON.stringify(a)).catch(e=>{console.error("Error saving coordinates:",e)}),a}),e.coords.altitude){const t=Math.max(0,e.coords.altitude);de(t),t>se&&(ue(t),await b.default.setItem("recording_max_elevation",t.toString()))}if(e.coords.speed&&e.coords.speed>0){const t=3.6*e.coords.speed;he(t),t>ye&&(me(t),await b.default.setItem("recording_max_speed",t.toString()))}}),te.current=setInterval(async()=>{try{const e=await b.default.getItem("recording_start_time");if(e){const t=parseInt(e),a=Math.floor((Date.now()-t)/1e3);q(a)}}catch(e){console.error("Error calculating duration:",e)}},1e3)}catch(t){console.error("Recording error:",t);let e="Failed to start recording. Please try again.";t.message?.includes("rate limit")?e="Please wait a moment before starting a new recording. Location service is temporarily limited.":(t.message?.includes("Background location")||t.message?.includes("UIBackgroundModes"))&&(e="Background location tracking requires a custom development build. Please build the app with EAS or use foreground-only mode."),i.default.alert("Error",e),G(!1)}},activeOpacity:.8,children:V?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(T.default,{size:24,color:"#fff",fill:"#fff"}),(0,L.jsx)(l.default,{style:B.default.recordButtonText,children:"Stop & Save"})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(v.default,{size:24,color:"#fff",fill:"#fff"}),(0,L.jsx)(l.default,{style:B.default.recordButtonText,children:"Start Trail"})]})}),re&&(0,L.jsxs)(r.default,{style:B.default.expandedContent,children:[(0,L.jsx)(r.default,{style:B.default.divider}),(0,L.jsxs)(n.default,{style:B.default.optionRow,onPress:()=>{i.default.alert("Apple Watch","Connect your Apple Watch to sync workout data.")},activeOpacity:.7,children:[(0,L.jsx)(r.default,{style:B.default.optionIconContainer,children:(0,L.jsx)(I.default,{size:24,color:"#5d6b4a"})}),(0,L.jsxs)(r.default,{style:B.default.optionTextContainer,children:[(0,L.jsx)(l.default,{style:B.default.optionTitle,children:"Apple Watch"}),(0,L.jsx)(l.default,{style:B.default.optionSubtitle,children:"Not connected"})]}),(0,L.jsx)(r.default,{style:B.default.optionBadge,children:(0,L.jsx)(l.default,{style:B.default.optionBadgeText,children:"Connect"})})]}),(0,L.jsxs)(n.default,{style:B.default.optionRow,onPress:()=>{i.default.alert("Alerts","Configure alerts for distance milestones and pace notifications.")},activeOpacity:.7,children:[(0,L.jsx)(r.default,{style:B.default.optionIconContainer,children:(0,L.jsx)(j.default,{size:24,color:"#5d6b4a"})}),(0,L.jsxs)(r.default,{style:B.default.optionTextContainer,children:[(0,L.jsx)(l.default,{style:B.default.optionTitle,children:"Alerts"}),(0,L.jsx)(l.default,{style:B.default.optionSubtitle,children:"Distance & pace notifications"})]}),(0,L.jsx)(r.default,{style:[B.default.optionBadge,B.default.optionBadgeActive],children:(0,L.jsx)(l.default,{style:[B.default.optionBadgeText,B.default.optionBadgeTextActive],children:"Active"})})]})]})]})]}),(0,L.jsx)(f.default,{visible:pe,animationType:"slide",transparent:!0,onRequestClose:Ee,children:(0,L.jsx)(r.default,{style:B.default.modalOverlay,children:(0,L.jsx)(r.default,{style:B.default.modalContainer,children:(0,L.jsxs)(g.default,{contentContainerStyle:B.default.modalContent,children:[(0,L.jsx)(l.default,{style:B.default.modalTitle,children:"Save Trail"}),(0,L.jsx)(c.default,{placeholder:"Trail name",value:we,onChangeText:Ce,style:B.default.input}),(0,L.jsx)(c.default,{placeholder:"Description",value:Se,onChangeText:ke,style:[B.default.input,{height:100}],multiline:!0}),(0,L.jsx)(c.default,{placeholder:"Photo URL (optional)",value:ve,onChangeText:Te,style:B.default.input}),(0,L.jsxs)(r.default,{style:{flexDirection:"row",gap:8,marginTop:8},children:[(0,L.jsx)(n.default,{style:B.default.modalButton,onPress:Ee,children:(0,L.jsx)(l.default,{style:B.default.modalButtonText,children:"Cancel"})}),(0,L.jsx)(n.default,{style:[B.default.modalButton,B.default.modalButtonPrimary],onPress:async()=>{if(!be)return;const t=Object.assign({},be,{name:we||be.name||"Untitled Trail",description:Se,photo:ve,tags:Ie,difficulty:ze});try{await e(t),xe(!1),je(null),G(!1),M([]),q(0),X(null),de(0),ue(0),fe("0:00"),he(0),me(0),await b.default.removeItem("recording_coordinates"),await b.default.removeItem("recording_max_elevation"),await b.default.removeItem("recording_max_speed"),await b.default.removeItem("recording_start_time"),await b.default.removeItem("recording_last_update");const a=t.id||null;a?O.push(`/trail/${a}`):i.default.alert("Success","Trail saved successfully!")}catch(a){console.error("Save failed",a),i.default.alert("Error","Failed to save trail")}},children:(0,L.jsx)(l.default,{style:[B.default.modalButtonText,{color:"#fff"}],children:"Save Trail"})})]})]})})})})]})}},5210(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>x});var o=a(9637),l=a(1168),r=a(8032),n=a(2557),i=a(6665),d=a(5648),s=a(3929),u=a(5009),c=a(6283),f=a(8833),g=a(3668),h=a(9582);const y=g.default.create({container:{width:"100%",paddingHorizontal:0,paddingTop:0,alignItems:"center"},tabBar:{flexDirection:"row",backgroundColor:h.default.tabBarBg,borderRadius:0,paddingVertical:8,paddingHorizontal:8,justifyContent:"space-around",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8,elevation:8,width:"100%",gap:6},tabButton:{height:44,borderRadius:22,overflow:"hidden",justifyContent:"center",alignItems:"center"},tabTouchable:{flex:1,width:"100%",justifyContent:"center",alignItems:"center"},tabContent:{flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8,paddingHorizontal:0},iconWrapper:{width:22,height:22,alignItems:"center",justifyContent:"center"},label:{color:h.default.accent,fontSize:13,fontWeight:"600"}});var m=a(397);function p({state:e,descriptors:t,navigation:a}){const o=(0,f.useSafeAreaInsets)(),l=(0,i.useRef)(e.routes.map(()=>new u.default.Value(0))).current;(0,i.useEffect)(()=>{console.log("AnimatedTabBar state.index:",e.index),console.log("AnimatedTabBar routes:",e.routes.map(e=>({name:e.name,key:e.key}))),console.log("AnimatedTabBar descriptors keys:",Object.keys(t)),e.routes.forEach((t,a)=>{u.default.timing(l[a],{toValue:e.index===a?1:0,duration:300,useNativeDriver:!1}).start()})},[e.index,e.routes,l]);const r=Math.max(o.bottom,8);return(0,m.jsx)(s.default,{style:y.container,children:(0,m.jsx)(s.default,{style:[y.tabBar,{paddingBottom:r}],children:e.routes.filter(e=>{const a=t[e.key]?.options;return!(!a||!(a.tabBarLabel||a.title||a.tabBarIcon))}).map((o,r)=>{const{options:n}=t[o.key],i=void 0!==n.tabBarLabel?n.tabBarLabel:void 0!==n.title?n.title:o.name,f=e.index===r,g=l[r],p=g.interpolate({inputRange:[0,1],outputRange:[44,100]}),x=g.interpolate({inputRange:[0,1],outputRange:["rgba(40, 46, 16, 0.6)","rgba(40, 46, 16, 0.9)"]}),b=g.interpolate({inputRange:[0,.5,1],outputRange:[0,0,1]}),j=f?h.default.accent:h.default.muted||h.default.light.tabIconDefault;return(0,m.jsx)(u.default.View,{style:[y.tabButton,{width:p,backgroundColor:x}],children:(0,m.jsx)(d.default,{accessibilityRole:"button",accessibilityState:f?{selected:!0}:{},accessibilityLabel:n.tabBarAccessibilityLabel,onPress:()=>{const e=a.emit({type:"tabPress",target:o.key,canPreventDefault:!0});f||e.defaultPrevented||a.navigate(o.name)},style:y.tabTouchable,children:(0,m.jsxs)(s.default,{style:y.tabContent,children:[(0,m.jsx)(s.default,{style:y.iconWrapper,children:n.tabBarIcon&&n.tabBarIcon({focused:f,color:j,size:22})}),(0,m.jsx)(u.default.View,{style:{opacity:b},children:f&&(0,m.jsx)(c.default,{style:y.label,children:String(i)})})]})})},o.key)})})})}function x(){return(0,m.jsxs)(o.Tabs,{tabBar:e=>(0,m.jsx)(p,Object.assign({},e)),screenOptions:{headerShown:!1,tabBarActiveTintColor:h.default.light.tabIconSelected,tabBarInactiveTintColor:h.default.light.tabIconDefault},children:[(0,m.jsx)(o.Tabs.Screen,{name:"explore",options:{title:"Explore",tabBarIcon:({color:e,size:t})=>(0,m.jsx)(l.default,{size:t,color:e})}}),(0,m.jsx)(o.Tabs.Screen,{name:"record",options:{title:"Record",tabBarIcon:({color:e,size:t})=>(0,m.jsx)(r.default,{size:t,color:e})}}),(0,m.jsx)(o.Tabs.Screen,{name:"profile",options:{title:"Profile",tabBarIcon:({color:e,size:t})=>(0,m.jsx)(n.default,{size:t,color:e})}})]})}console.log("[init] components/AnimatedTabBar.tsx loaded")},5250(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(9637),l=a(397);function r(){return(0,l.jsx)(o.Redirect,{href:"/(tabs)/explore"})}},5625(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>b});a(6665);var o=a(6283),l=a(3929),r=a(3668),n=a(2772),i=a(5648),d=a(9637),s=a(7430),u=a(5395),c=a(4494),f=a(1168),g=a(8032),h=a(477),y=a(9582),m=a(9269),p=a(397);const x={id:"demo-trail",name:"Scenic Coastal Walk",distance:5210,duration:3600,coordinates:[{latitude:50.81999932593175,longitude:-.1443926504884132},{latitude:50.81982005377856,longitude:-.14389605957015306},{latitude:50.8195735534442,longitude:-.14290287773496857},{latitude:50.81976403108945,longitude:-.14245949298612004},{latitude:50.819651985510006,longitude:-.1415904588798469},{latitude:50.819360665744455,longitude:-.141129338740825},{latitude:50.81955114425804,longitude:-.14054407087405707},{latitude:50.8194278935438,longitude:-.1397814491065219},{latitude:50.819282233189426,longitude:-.1389301503892284},{latitude:50.819696803774036,longitude:-.13903656272921694},{latitude:50.81999932593175,longitude:-.13919618123853184},{latitude:50.82010016621547,longitude:-.13853997181101363},{latitude:50.82041389015009,longitude:-.138220734792327},{latitude:50.82055954697452,longitude:-.13852223642078343},{latitude:50.82086206354296,longitude:-.13829167635185513}],city:"Brighton",country:"UK",difficulty:"Easy",pace:"11:32",maxElevation:45};function b(){const e=(0,d.useRouter)();return(0,p.jsxs)(l.default,{style:j.container,children:[(0,p.jsx)(d.Stack.Screen,{options:{title:"Demo Trail",headerShown:!1}}),(0,p.jsxs)(n.default,{style:j.scrollView,children:[(0,p.jsxs)(l.default,{style:j.header,children:[(0,p.jsx)(i.default,{style:j.backButton,onPress:()=>e.back(),children:(0,p.jsx)(u.default,{size:24,color:"#fff"})}),(0,p.jsxs)(l.default,{style:j.headerContent,children:[(0,p.jsx)(o.default,{style:j.title,children:x.name}),(0,p.jsxs)(l.default,{style:j.locationRow,children:[(0,p.jsx)(f.default,{size:16,color:"#fff"}),(0,p.jsxs)(o.default,{style:j.locationText,children:[x.city,", ",x.country]})]})]})]}),(0,p.jsx)(l.default,{style:j.mapContainer,children:(0,p.jsx)(s.default,{coordinates:x.coordinates,style:j.map,scrollEnabled:!0,zoomEnabled:!0})}),(0,p.jsxs)(l.default,{style:j.statsContainer,children:[(0,p.jsxs)(l.default,{style:j.statItem,children:[(0,p.jsx)(g.default,{size:20,color:y.default.primary}),(0,p.jsx)(o.default,{style:j.statValue,children:(0,m.formatDistance)(x.distance)}),(0,p.jsx)(o.default,{style:j.statLabel,children:"Distance"})]}),(0,p.jsxs)(l.default,{style:j.statItem,children:[(0,p.jsx)(c.default,{size:20,color:y.default.primary}),(0,p.jsx)(o.default,{style:j.statValue,children:(0,m.formatDuration)(x.duration)}),(0,p.jsx)(o.default,{style:j.statLabel,children:"Time"})]}),(0,p.jsxs)(l.default,{style:j.statItem,children:[(0,p.jsx)(h.default,{size:20,color:y.default.primary}),(0,p.jsxs)(o.default,{style:j.statValue,children:[x.maxElevation,"m"]}),(0,p.jsx)(o.default,{style:j.statLabel,children:"Elevation"})]})]}),(0,p.jsxs)(l.default,{style:j.section,children:[(0,p.jsx)(o.default,{style:j.sectionTitle,children:"About this trail"}),(0,p.jsx)(o.default,{style:j.description,children:"This is a beautiful coastal walk along the Brighton seafront. Perfect for a morning stroll with your dog. The path is paved and offers stunning views of the English Channel."})]})]})]})}const j=r.default.create({container:{flex:1,backgroundColor:y.default.background},scrollView:{flex:1},header:{height:200,backgroundColor:y.default.primary,justifyContent:"flex-end",padding:20},backButton:{position:"absolute",top:50,left:20,zIndex:10},headerContent:{marginBottom:10},title:{fontSize:28,fontWeight:"bold",color:"#fff",marginBottom:5},locationRow:{flexDirection:"row",alignItems:"center"},locationText:{color:"#fff",marginLeft:5,fontSize:16},mapContainer:{height:300,width:"100%"},map:{flex:1},statsContainer:{flexDirection:"row",justifyContent:"space-around",padding:20,backgroundColor:y.default.surface,borderBottomWidth:1,borderBottomColor:y.default.border},statItem:{alignItems:"center"},statValue:{fontSize:18,fontWeight:"bold",marginTop:5,color:"#333"},statLabel:{fontSize:12,color:"#666",marginTop:2},section:{padding:20},sectionTitle:{fontSize:20,fontWeight:"bold",marginBottom:10,color:"#333"},description:{fontSize:16,lineHeight:24,color:"#666"}})},5938(e,t,a){"use strict";a.r(t),a.d(t,{API_URL:()=>o});const o=("undefined"!==typeof window?window.__EXPO_PUBLIC_API_URL__:void 0)||"https://api.tailtrails.club";console.log("Current API URL:",o)},6183(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>x});var o=a(6665),l=a(6283),r=a(3929),n=a(5648),i=a(2772),d=a(1690),s=a(530),u=a(9637),c=a(1449),f=a(8833),g=a(8625),h=a(594),y=a(3353),m=a(9908),p=a(397);function x(){const e=(0,u.useRouter)(),t=(0,u.useLocalSearchParams)(),{user:a}=(0,y.useAuth)(),{dogProfile:x,refreshDogProfile:b,createDogProfile:j,updateDogProfile:w}=(0,m.useDogs)(),C=(0,f.useSafeAreaInsets)(),[S,k]=(0,o.useState)([]),[v,T]=(0,o.useState)("Fair"),[I,B]=(0,o.useState)(!1),z="true"===t.isEditing;(0,o.useEffect)(()=>{x&&z&&(console.log("Loading existing personality tags for editing:",x.personality_tags),k(x.personality_tags||[]),T(x.recall_reliability||"Fair"))},[x,z]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Stack.Screen,{options:{headerShown:!1}}),(0,p.jsxs)(r.default,{style:[g.default.container,{paddingTop:C.top+20}],children:[(0,p.jsxs)(i.default,{style:g.default.scrollView,contentContainerStyle:g.default.content,children:[(0,p.jsxs)(r.default,{style:g.default.header,children:[(0,p.jsx)(l.default,{style:g.default.title,children:"Personality & Behaviour"}),(0,p.jsx)(l.default,{style:g.default.subtitle,children:"Choose the tags that best describe your dog"}),!z&&(0,p.jsxs)(r.default,{style:g.default.progressContainer,children:[(0,p.jsx)(r.default,{style:g.default.progressDot}),(0,p.jsx)(r.default,{style:[g.default.progressDot,g.default.progressDotActive]})]})]}),(0,p.jsx)(r.default,{style:g.default.tagsContainer,children:h.PERSONALITY_TAGS.map(e=>(0,p.jsx)(n.default,{style:[g.default.tag,S.includes(e)&&g.default.tagSelected],onPress:()=>(e=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),testID:`tag-${e}`,children:(0,p.jsx)(l.default,{style:[g.default.tagText,S.includes(e)&&g.default.tagTextSelected],children:e})},e))}),(0,p.jsx)(r.default,{style:g.default.sectionHeader,children:(0,p.jsx)(l.default,{style:g.default.sectionTitle,children:"Health & Safety"})}),(0,p.jsxs)(r.default,{style:g.default.section,children:[(0,p.jsx)(l.default,{style:g.default.label,children:"Recall Reliability"}),(0,p.jsx)(l.default,{style:g.default.helperText,children:"How reliably does your dog return when called?"}),(0,p.jsx)(r.default,{style:g.default.recallContainer,children:h.RECALL_RELIABILITY_OPTIONS.map(e=>(0,p.jsx)(n.default,{style:[g.default.recallOption,v===e&&g.default.recallOptionSelected],onPress:()=>{T(e)},testID:`recall-${e}`,children:(0,p.jsx)(l.default,{style:[g.default.recallText,v===e&&g.default.recallTextSelected],children:e})},e))})]})]}),(0,p.jsxs)(r.default,{style:[g.default.footer,{paddingBottom:C.bottom+20}],children:[(0,p.jsxs)(n.default,{style:g.default.backButton,onPress:()=>e.back(),disabled:I,testID:"back-button",children:[(0,p.jsx)(c.default,{size:24,color:"#FFFE77"}),(0,p.jsx)(l.default,{style:g.default.backButtonText,children:"Back"})]}),(0,p.jsx)(n.default,{style:[g.default.finishButton,I&&g.default.finishButtonDisabled],onPress:async()=>{if(a){0,B(!0);try{console.log(z?"Updating dog profile for user:":"Creating dog profile for user:",a.id);const o={user_id:a.id,name:t.name,nickname:t.nickname||void 0,size:t.size,age:parseInt(t.age,10),photo:t.photo||void 0,personality_tags:S,recall_reliability:v};console.log("Dog profile data:",o),z&&x?.id?await w(Object.assign({},o,{id:x.id})):await j(o),z?e.replace("/(tabs)/profile"):e.replace("/(tabs)/explore")}catch(o){console.error("Error saving dog profile:",o),d.default.alert("Error",o.message||"Failed to save dog profile"),B(!1)}}else d.default.alert("Error","You must be logged in to create a dog profile")},disabled:I,testID:"finish-button",children:I?(0,p.jsx)(s.default,{color:"#1a1f0a"}):(0,p.jsx)(l.default,{style:g.default.finishButtonText,children:z?"Save":"Finish"})})]})]})]})}},6746(e,t,a){"use strict";a.r(t),a.d(t,{TrailsContext:()=>i,useTrails:()=>d});var o=a(6665),l=a(2790),r=a(3353),n=a(5938);const[i,d]=(0,l.default)(()=>{const{user:e,session:t}=(0,r.useAuth)(),[a,l]=(0,o.useState)([]),[i,d]=(0,o.useState)([]),[s,u]=(0,o.useState)(!0),[c,f]=(0,o.useState)(!0),g=(0,o.useCallback)(async()=>{if(e&&t)try{console.log("Loading trails for user:",e.id);const a=await fetch(`${n.API_URL}/trail`,{headers:{Authorization:`Bearer ${t?.accessToken}`}});if(a.ok){const e=await a.json();l(e||[])}else console.error("Failed to load trails:",a.status),l([])}catch(a){console.error("Failed to load trails:",a)}finally{u(!1)}else try{const e=await fetch(`${n.API_URL}/trail`);if(e.ok){const t=await e.json();l(t||[])}else console.error("Failed to load trails (public):",e.status),l([])}catch(o){console.error("Failed to load trails:",o),l([])}finally{u(!1)}},[e,t]),h=(0,o.useCallback)(async()=>{if(!t?.accessToken)return d([]),void f(!1);try{console.log("Loading my trails for user:",e?.id);const a=await fetch(`${n.API_URL}/trail/me`,{headers:{Authorization:`Bearer ${t?.accessToken}`}});if(a.ok){const e=await a.json();d(e||[])}else console.error("Failed to load my trails:",a.status),d([])}catch(a){console.error("Failed to load saved trails:",a),d([])}finally{f(!1)}},[e,t]);(0,o.useEffect)(()=>{g(),h()},[g,h]);const y=(0,o.useCallback)(async a=>{if(!e)throw console.error("No user logged in"),new Error("Must be logged in to save trails");if(!t?.accessToken)throw console.error("No session/access token available"),new Error("Must be logged in to save trails");try{console.log("Saving trail for user via API:",e.id);const o=e=>e&&0!==e.length?e.map(e=>[e.longitude,e.latitude]):[],r={name:a.name,distance:a.distance,duration:a.duration,path:o(a.coordinates),photo:a.photo,city:a.city,country:a.country,description:a.description,tags:a.tags,elevation:a.elevation,surface_type:a.surfaceType,difficulty:a.difficulty,location:a.location,pace:a.pace,speed:a.speed,max_elevation:a.maxElevation,rating:a.rating,review:a.review,environment_tags:a.environment_tags},i=t.accessToken,d=await fetch(`${n.API_URL}/trail/me`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(r)});if(!d.ok){const e=await d.text();throw console.error("Failed to save trail via API:",d.status,e),new Error("Failed to save trail")}const s=await d.json();return l(e=>[s,...e]),s}catch(o){throw console.error("Failed to save trail:",o),o}},[e,t]),m=(0,o.useCallback)(async e=>{try{if(console.log("Deleting trail via API:",e),!t?.accessToken)throw new Error("Not authenticated");const a=await fetch(`${n.API_URL}/trail/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t.accessToken}`}});if(204!==a.status){const e=await a.text();throw console.error("Failed to delete trail:",a.status,e),new Error("Failed to delete trail")}l(t=>t.filter(t=>t.id!==e))}catch(a){throw console.error("Failed to delete trail:",a),a}},[t]),p=(0,o.useCallback)(e=>{const t=a.find(t=>t.id===e);return t||("demo-trail"===e?{id:"demo-trail",name:"Scenic Coastal Walk",distance:5.2,duration:3600,coordinates:[{latitude:50.81999932593175,longitude:-.1443926504884132},{latitude:50.81982005377856,longitude:-.14389605957015306},{latitude:50.8195735534442,longitude:-.14290287773496857},{latitude:50.81976403108945,longitude:-.14245949298612004},{latitude:50.819651985510006,longitude:-.1415904588798469},{latitude:50.819360665744455,longitude:-.141129338740825},{latitude:50.81955114425804,longitude:-.14054407087405707},{latitude:50.8194278935438,longitude:-.1397814491065219},{latitude:50.819282233189426,longitude:-.1389301503892284},{latitude:50.819696803774036,longitude:-.13903656272921694},{latitude:50.81999932593175,longitude:-.13919618123853184},{latitude:50.82010016621547,longitude:-.13853997181101363},{latitude:50.82041389015009,longitude:-.138220734792327},{latitude:50.82055954697452,longitude:-.13852223642078343},{latitude:50.82086206354296,longitude:-.13829167635185513}],city:"Brighton",country:"UK",difficulty:"Easy",pace:"11:32",maxElevation:45,date:Date.now(),environment_tags:["Beach","Sunny","Paved"],rating:4.5,review:"A beautiful walk along the seafront. Very dog friendly!"}:void 0)},[a]),x=(0,o.useCallback)(async(e,a,o=10)=>{try{if(console.log("Loading nearby trails:",{latitude:e,longitude:a,distanceKm:o}),"number"===typeof e&&"number"===typeof a&&t?.accessToken)try{const l=await fetch(`${n.API_URL}/trail/nearby?latitude=${encodeURIComponent(e)}&longitude=${encodeURIComponent(a)}&distance_km=${encodeURIComponent(o)}`,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(l.ok){return await l.json()}return 404===l.status?(console.warn("Nearby trails endpoint returned 404 (no trails)"),[]):(console.error("Failed to load nearby trails from API:",l.status),[])}catch(l){return console.error("Error calling nearby trails API:",l),[]}return[]}catch(r){return console.error("Failed to load nearby trails:",r),[]}},[t]),b=(0,o.useCallback)(async(e,a)=>{try{if(console.log("Updating trail name via API:",e,a),!t?.accessToken)throw new Error("Not authenticated");const o=await fetch(`${n.API_URL}/trail/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.accessToken}`},body:JSON.stringify({name:a})});if(!o.ok){const e=await o.text();throw new Error(e||"Failed to update")}const r=await o.json();l(t=>t.map(t=>t.id===e?r:t))}catch(o){throw console.error("Failed to update trail name:",o),o}},[t]),j=(0,o.useCallback)(async(e,a)=>{try{if(console.log("Updating trail photo via API:",e),!t?.accessToken)throw new Error("Not authenticated");const o=await fetch(`${n.API_URL}/trail/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.accessToken}`},body:JSON.stringify({photo:a})});if(!o.ok){const e=await o.text();throw new Error(e||"Failed to update photo")}const r=await o.json();l(t=>t.map(t=>t.id===e?r:t))}catch(o){throw console.error("Failed to update trail photo:",o),o}},[t]),w=(0,o.useCallback)(async(e,a)=>{try{if(console.log("Updating trail details via API:",e,a),!t?.accessToken)throw new Error("Not authenticated");const o=await fetch(`${n.API_URL}/trail/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.accessToken}`},body:JSON.stringify(a)});if(!o.ok){const e=await o.text();throw new Error(e||"Failed to update details")}const r=await o.json();l(t=>t.map(t=>t.id===e?r:t))}catch(o){throw console.error("Failed to update trail details:",o),o}},[]),C=(0,o.useCallback)(async e=>{try{console.log("Loading trail with user data via API:",e);const t=await fetch(`${n.API_URL}/trail/${e}`);if(!t.ok)return void console.error("Failed to fetch trail:",t.status);return await t.json()}catch(t){return void console.error("Failed to load trail with user:",t)}},[]),S=(0,o.useCallback)(async t=>{if(!e)throw console.error("No user logged in"),new Error("Must be logged in to save trails");try{console.log("Saving trail bookmark:",t);const e=a.find(e=>e.id===t);e&&d(t=>[e,...t])}catch(o){throw console.error("Failed to save trail bookmark:",o),o}},[e,a]),k=(0,o.useCallback)(async t=>{if(!e)throw console.error("No user logged in"),new Error("Must be logged in to remove saved trails");try{console.log("Removing trail bookmark:",t),d(e=>e.filter(e=>e.id!==t))}catch(a){throw console.error("Failed to remove trail bookmark:",a),a}},[e]),v=(0,o.useCallback)(e=>i.some(t=>t.id===e),[i]);return(0,o.useMemo)(()=>({trails:a,savedTrails:i,isLoading:s,isSavedLoading:c,saveTrail:y,deleteTrail:m,getTrailById:p,updateTrailName:b,updateTrailPhoto:j,updateTrailDetails:w,loadNearbyTrails:x,saveTrailBookmark:S,removeTrailBookmark:k,isTrailSaved:v,getTrailWithUser:C}),[a,i,s,c,y,m,p,b,j,w,x,S,k,v,C])})},7430(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>u});var o=a(6665),l=a(3929),r=a(3668),n=a(9582);const i=r.default.create({container:{backgroundColor:n.default.surface,overflow:"hidden"}});var d=a(7042),s=(a(1051),a(397));const u=(0,o.forwardRef)(({coordinates:e,style:t,initialRegion:a,scrollEnabled:r=!0,zoomEnabled:n=!0},u)=>{const c=(0,o.useRef)(null),f=(0,o.useRef)(null);return(0,o.useImperativeHandle)(u,()=>({animateToRegion:(e,t=500)=>{f.current&&f.current.easeTo({center:[e.longitude,e.latitude],zoom:14,duration:t})},fitToCoordinates:(e,t={})=>{if(f.current&&e.length>0){const a=new d.LngLatBounds;e.forEach(e=>a.extend([e.longitude,e.latitude])),f.current.fitBounds(a,{padding:t.edgePadding||20})}}})),(0,o.useEffect)(()=>{if(!c.current)return;const t=a?[a.longitude,a.latitude]:e.length>0?[e[0].longitude,e[0].latitude]:[0,0],o=a?14:12,l=new d.Map({container:c.current,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:t,zoom:o,interactive:r&&n});return f.current=l,l.on("load",()=>{if(e.length>1){l.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.map(e=>[e.longitude,e.latitude])}}}),l.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#5d6b4a","line-width":4}});const t=new d.LngLatBounds;e.forEach(e=>t.extend([e.longitude,e.latitude])),l.fitBounds(t,{padding:20})}}),()=>{l.remove()}},[e,a,r,n]),(0,s.jsx)(l.default,{style:[t,i.container],children:(0,s.jsx)("div",{ref:c,style:{width:"100%",height:"100%"}})})})},7924(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(3668),l=a(9582);const r=o.default.create({container:{flex:1,backgroundColor:l.default.background},content:{padding:24},header:{marginBottom:32,alignItems:"center"},title:{fontSize:28,fontWeight:"700",color:l.default.accent,marginBottom:8,textAlign:"center"},subtitle:{fontSize:16,color:l.default.lightGreen,textAlign:"center",marginBottom:24},progressContainer:{flexDirection:"row",gap:8},progressDot:{width:8,height:8,borderRadius:4,backgroundColor:"#3d4520"},progressDotActive:{backgroundColor:l.default.accent},photoContainer:{width:140,height:140,borderRadius:70,alignSelf:"center",marginBottom:32,overflow:"hidden"},photo:{width:"100%",height:"100%"},photoPlaceholder:{width:"100%",height:"100%",backgroundColor:l.default.mediumGreen,justifyContent:"center",alignItems:"center",gap:8},photoPlaceholderText:{fontSize:14,color:l.default.lightGreen,fontWeight:"500"},photoOverlay:{position:"absolute",bottom:0,right:0,width:40,height:40,borderRadius:20,backgroundColor:l.default.accent,justifyContent:"center",alignItems:"center"},formSection:{marginBottom:24},label:{fontSize:15,fontWeight:"600",color:l.default.accent,marginBottom:8},input:{backgroundColor:l.default.background,borderRadius:12,padding:16,fontSize:16,color:l.default.accent,borderWidth:1,borderColor:"#3d4520"},pickerButton:{backgroundColor:l.default.background,borderRadius:12,padding:16,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderWidth:1,borderColor:"#3d4520"},pickerButtonText:{fontSize:16,color:l.default.accent},pickerButtonTextPlaceholder:{color:"#5a6040"},pickerOptions:{backgroundColor:"#282E10",borderRadius:12,marginTop:8,borderWidth:1,borderColor:"#3d4520",overflow:"hidden"},pickerOption:{padding:16,borderBottomWidth:1,borderBottomColor:"#1a1f0a"},pickerOptionSelected:{backgroundColor:"rgba(255, 254, 119, 0.15)"},pickerOptionText:{fontSize:16,color:l.default.lightGreen},pickerOptionTextSelected:{color:l.default.accent,fontWeight:"600"},nextButton:{backgroundColor:l.default.accent,borderRadius:12,padding:18,alignItems:"center",marginTop:16},nextButtonText:{fontSize:17,fontWeight:"600",color:l.default.darkGreen}})},7990(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>S});var o=a(5227),l=a(4108),r=a(9637),n=a(284),i=a(6665),d=a(3929),s=a(530),u=a(3668),c=a(1015),f=a(3353),g=a(2598),h=a(6746),y=a(9908),m=a(9582),p=a(414),x=a(397);const b=(0,i.createContext)({theme:null,setThemeMode:()=>{}}),j=({children:e})=>{const t=p.default.getColorScheme(),[a,o]=(0,i.useState)("light"===t?"light":"dark");(0,i.useEffect)(()=>{(0,m.setTheme)(a)},[a]);return(0,x.jsx)(b.Provider,{value:{theme:a,setThemeMode:e=>{if(null===e){const e=p.default.getColorScheme();(0,m.setTheme)("dark"===e?"dark":"light"),o("dark"===e?"dark":"light")}else(0,m.setTheme)(e),o(e)}},children:e})};n.preventAutoHideAsync();const w=new o.QueryClient;function C(){const{isAuthenticated:e,isLoading:t}=(0,f.useAuth)(),{hasDogProfile:a,isDogProfileLoading:o}=(0,y.useDogs)(),l=(0,r.useSegments)(),n=(0,r.useRouter)();return(0,i.useEffect)(()=>{if(t)return;if(o)return void console.log("Navigation: waiting for dog profiles to finish loading");const r="(tabs)"===l[0],i="login"===l[0]||"signup"===l[0],d="onboarding"===l[0];console.log("Navigation check:",{isAuthenticated:e,hasDogProfile:a,segments:l[0]}),e||!r&&!d?!e||a||d?e&&a&&i&&(console.log("Redirecting to explore: user authenticated with dog profile"),n.replace("/(tabs)/explore")):(console.log("Redirecting to onboarding: no dog profile"),n.replace("/onboarding/dog-basics")):(console.log("Redirecting to login: user not authenticated"),n.replace("/login"))},[e,a,l,t,o,n]),t?(0,x.jsx)(d.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,x.jsx)(s.default,{size:"large",color:"#2563eb"})}):(0,x.jsxs)(r.Stack,{screenOptions:{headerBackTitle:"Back"},children:[(0,x.jsx)(r.Stack.Screen,{name:"login",options:{headerShown:!1}}),(0,x.jsx)(r.Stack.Screen,{name:"signup",options:{headerShown:!1}}),(0,x.jsx)(r.Stack.Screen,{name:"(tabs)",options:{headerShown:!1}}),(0,x.jsx)(r.Stack.Screen,{name:"trail/[id]",options:{headerShown:!1}})]})}function S(){return(0,i.useEffect)(()=>{n.hideAsync()},[]),(0,x.jsx)(l.QueryClientProvider,{client:w,children:(0,x.jsx)(f.AuthContext,{children:(0,x.jsx)(g.AccountContext,{children:(0,x.jsx)(j,{children:(0,x.jsx)(y.DogsContext,{children:(0,x.jsx)(h.TrailsContext,{children:(0,x.jsx)(c.GestureHandlerRootView,{style:k.container,children:(0,x.jsx)(C,{})})})})})})})})}const k=u.default.create({container:{flex:1}})},8389(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>W});var o=a(6665),l=a(9637),r=a(6283),n=a(3929),i=a(2772),d=a(5648),s=a(530),u=a(5009),c=a(6773),f=a(8264),g=a(932),h=a(5894),y=a(893),m=a(8833),p=a(3087),x=a(2994),b=a(5624),j=a(1449),w=a(2301),C=a(3048),S=a(1168),k=a(8032),v=a(1858),T=a(5082),I=a(4550),B=a(2964),z=a(9582),P=a(7042),R=a(2699),D=a(9269),L=a(9600),A=a(6746),E=a(397);const O=[{id:"nearby",name:"Nearby",icon:S.default},{id:"popular",name:"Popular",icon:C.default},{id:"beaches",name:"Beaches",icon:I.default}];function W(){const e=(0,l.useRouter)(),t=(0,m.useSafeAreaInsets)(),{loadNearbyTrails:a,saveTrailBookmark:C,removeTrailBookmark:I,isTrailSaved:W}=(0,A.useTrails)(),[F,_]=(0,o.useState)("nearby"),[V,G]=(0,o.useState)([]),[N,M]=(0,o.useState)(!0),[,$]=(0,o.useState)(void 0),[H,U]=(0,o.useState)({}),[q,J]=(0,o.useState)(""),[Y,K]=(0,o.useState)(!1),[Q,Z]=(0,o.useState)(""),[X,ee]=(0,o.useState)([]),[te,ae]=(0,o.useState)(!1),oe=(0,o.useCallback)(async()=>{Z("Current location");try{if(navigator&&navigator.geolocation)return void navigator.geolocation.getCurrentPosition(async e=>{try{const t=await a(e.coords.latitude,e.coords.longitude);G(t)}catch(t){console.error("Failed to load nearby trails with browser location:",t);const e=await a();G(e)}finally{M(!1)}},async()=>{const e=await a();G(e),M(!1)});const e=await a();G(e)}catch(e){console.error("Failed to load nearby trails (web):",e),G([])}finally{M(!1)}},[a]);(0,o.useEffect)(()=>{oe()},[oe]),(0,l.useFocusEffect)((0,o.useCallback)(()=>{console.log("Explore tab focused - refreshing nearby trails (web)"),oe()},[oe]));const le=(0,o.useCallback)(()=>{const e=q.toLowerCase(),t=V.filter(t=>{const a=t.name?.toLowerCase()||"",o=t.city?.toLowerCase()||"",l=t.country?.toLowerCase()||"";return a.includes(e)||o.includes(e)||l.includes(e)}).map(e=>({id:e.id,name:e.name||`Trail ${new Date(e.date).toLocaleDateString()}`,location:e.city?`${e.city}, ${e.country||"Unknown"}`:"Location unknown",type:"trail"})).slice(0,6);ee(t)},[q,V]);(0,o.useEffect)(()=>{q.trim()?le():ee([])},[q,le]);const re=()=>{K(!1),J(""),ee([])},ne=e=>{if(!H[e]){const t=new u.default.Value(1);return U(a=>Object.assign({},a,{[e]:t})),t}return H[e]},ie=(0,o.useCallback)(e=>{let t=e;return"popular"===F?t=[...t].sort((e,t)=>(t.rating||0)-(e.rating||0)):"beaches"===F&&(t=t.filter(e=>(e.environment_tags||[]).some(e=>e.toLowerCase().includes("beach")))),t},[F]),de=o.useRef(null),se=o.useRef(null),[ue,ce]=(0,o.useState)(null),[fe,ge]=(0,o.useState)(10),[he,ye]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!he||!de.current||!te)return;if(se.current)return;const e=ue?[ue.longitude,ue.latitude]:[0,0],t=new P.Map({container:de.current,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:e,zoom:ue?10:1});return se.current=t,t.on("load",()=>{t.getSource("picker")||(t.addSource("picker",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:"picker-layer",type:"circle",source:"picker",paint:{"circle-radius":8,"circle-color":"#2563eb","circle-stroke-color":"#fff","circle-stroke-width":2}}))}),t.on("click",e=>{const a=e.lngLat.lat,o=e.lngLat.lng;ce({latitude:a,longitude:o});const l=t.getSource("picker");l&&l.setData({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,a]}}]}),t.flyTo({center:[o,a],zoom:12})}),()=>{try{t.remove()}catch(e){}se.current=null}},[he,te,ue]);const me=async()=>{M(!0);try{if(ue){const e=await a(ue.latitude,ue.longitude,fe);G(e)}else if(navigator&&navigator.geolocation)navigator.geolocation.getCurrentPosition(async e=>{const t=await a(e.coords.latitude,e.coords.longitude,fe);G(t)},async()=>{const e=await a(void 0,void 0,fe);G(e)});else{const e=await a(void 0,void 0,fe);G(e)}}catch(e){console.error("Search nearby failed:",e)}finally{M(!1)}},pe=ie(V);return(0,E.jsxs)(n.default,{style:R.default.safeContainer,children:[(0,E.jsxs)(i.default,{style:R.default.container,showsVerticalScrollIndicator:!1,stickyHeaderIndices:[0],children:[(0,E.jsxs)(n.default,{style:[R.default.stickyHeader,{paddingTop:t.top+16}],children:[(0,E.jsxs)(n.default,{style:R.default.stickySearchContainer,children:[(0,E.jsxs)(d.default,{style:R.default.searchBar,onPress:()=>{K(!0)},activeOpacity:.7,children:[(0,E.jsx)(v.default,{size:20,color:z.default.muted}),(0,E.jsx)(r.default,{style:R.default.searchPlaceholder,children:"Find trails"})]}),(0,E.jsx)(d.default,{style:R.default.demoButton,onPress:()=>e.push("/trail/demo-trail"),children:(0,E.jsx)(r.default,{style:R.default.demoButtonText,children:"Demo"})})]}),(0,E.jsx)(n.default,{style:R.default.categoriesSection,children:(0,E.jsx)(i.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,contentContainerStyle:R.default.categoriesScroll,children:O.map(e=>{const t=e.icon,a=F===e.id;return(0,E.jsxs)(d.default,{style:[R.default.categoryButton,a&&R.default.categoryButtonActive],onPress:()=>{return t=e.id,void _(t);var t},children:[(0,E.jsx)(t,{size:20,color:a?"#fff":"#9ca3af",strokeWidth:2}),(0,E.jsx)(r.default,{style:[R.default.categoryText,a&&R.default.categoryTextActive],children:e.name})]},e.id)})})})]}),(0,E.jsxs)(n.default,{style:{paddingHorizontal:16,paddingVertical:8},children:[(0,E.jsxs)(d.default,{onPress:()=>ae(e=>!e),style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,E.jsx)(r.default,{style:{fontSize:14,fontWeight:"600"},children:"Location & Distance"}),te?(0,E.jsx)(w.default,{size:20,color:"#5d6b4a"}):(0,E.jsx)(b.default,{size:20,color:"#5d6b4a"})]}),te?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(r.default,{style:{fontSize:14,fontWeight:"600",marginBottom:8},children:"Pick a location on the map or use your current location"}),(0,E.jsx)("div",{ref:e=>{de.current=e,ye(!!e)},style:{width:"100%",height:220,borderRadius:12,overflow:"hidden",marginBottom:8}}),(0,E.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center",gap:12},children:[(0,E.jsx)(n.default,{style:{flexDirection:"row",gap:8},children:[5,10,25,50].map(e=>(0,E.jsx)(d.default,{style:{paddingHorizontal:12,paddingVertical:8,borderRadius:8,backgroundColor:fe===e?"#5d6b4a":"#fff",borderWidth:1,borderColor:"#e5e7eb"},onPress:()=>ge(e),children:(0,E.jsxs)(r.default,{style:{color:fe===e?"#fff":"#282E10",fontWeight:"600"},children:[e," km"]})},e))}),(0,E.jsx)(d.default,{onPress:me,style:{marginLeft:"auto",paddingHorizontal:16,paddingVertical:10,backgroundColor:"#64748b",borderRadius:10},children:(0,E.jsx)(r.default,{style:{color:"#fff",fontWeight:"700"},children:"Search Nearby"})})]})]}):(0,E.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center",gap:12},children:[(0,E.jsx)(r.default,{style:{color:"#64748b"},children:ue?`${ue.latitude.toFixed(4)}, ${ue.longitude.toFixed(4)}`:"Using current location"}),(0,E.jsxs)(r.default,{style:{color:"#64748b"},children:[fe," km"]}),(0,E.jsx)(d.default,{onPress:me,style:{marginLeft:"auto",paddingHorizontal:12,paddingVertical:8,backgroundColor:"#64748b",borderRadius:8},children:(0,E.jsx)(r.default,{style:{color:"#fff",fontWeight:"700"},children:"Search"})})]})]}),(0,E.jsx)(n.default,{style:R.default.categoryTrailsSection,children:N?(0,E.jsxs)(n.default,{style:R.default.loadingContainer,children:[(0,E.jsx)(s.default,{size:"large",color:"#2563eb"}),(0,E.jsx)(r.default,{style:R.default.loadingText,children:"Loading trails..."})]}):pe&&pe.length>0?pe.map(t=>{const a=ne(t.id),o=W(t.id);return(0,E.jsxs)(d.default,{style:R.default.largeTrailCard,onPress:()=>{return a=t.id,void e.push(`/trail/${a}`);var a},children:[t.photo?(0,E.jsx)(h.Image,{source:{uri:t.photo},style:R.default.largeTrailImage,contentFit:"cover",cachePolicy:"memory-disk"}):(0,E.jsx)(L.default,{coordinates:t.coordinates,path:t.path,style:R.default.largeTrailImage,startLatitude:t.startLatitude,startLongitude:t.startLongitude}),(0,E.jsx)(y.LinearGradient,{colors:["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.25)","rgba(0, 0, 0, 0.6)"],locations:[0,.3,.6,1],style:R.default.cardGradient}),(0,E.jsx)(d.default,{style:R.default.bookmarkButton,onPress:e=>{e.stopPropagation(),(async(e,t=!1)=>{if(!t&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))return void console.log("Cannot bookmark mock trail:",e);const a=ne(e),o=W(e);u.default.sequence([u.default.timing(a,{toValue:.6,duration:100,useNativeDriver:!0}),u.default.spring(a,{toValue:1,friction:3,tension:100,useNativeDriver:!0})]).start();try{o?await I(e):await C(e)}catch(l){console.error("Failed to toggle bookmark:",l)}})(t.id,!0)},children:(0,E.jsx)(u.default.View,{style:{transform:[{scale:a}]},children:(0,E.jsx)(x.default,{size:20,color:o?"#000":"#64748b",fill:o?"#000":"none",strokeWidth:2})})}),(0,E.jsxs)(n.default,{style:R.default.cardOverlayContent,children:[(0,E.jsx)(r.default,{style:R.default.overlayTrailName,children:t.name||`Trail ${new Date(t.date).toLocaleDateString()}`}),(0,E.jsx)(r.default,{style:R.default.overlayLocation,children:t.city?`${t.city}, ${t.country||"Unknown"}`:"Location unknown"}),(0,E.jsxs)(n.default,{style:R.default.overlayBadges,children:[t.difficulty&&(0,E.jsxs)(n.default,{style:R.default.badge,children:[(0,E.jsx)(p.default,{size:14,color:"#d4d4a0",strokeWidth:2.5}),(0,E.jsx)(r.default,{style:R.default.badgeText,children:t.difficulty})]}),(0,E.jsxs)(n.default,{style:R.default.badge,children:[(0,E.jsx)(S.default,{size:14,color:"#d4d4a0",strokeWidth:2.5}),(0,E.jsx)(r.default,{style:R.default.badgeText,children:(0,D.formatDistance)(t.distance)})]}),"number"===typeof t.distance_from_user&&(0,E.jsxs)(n.default,{style:R.default.badge,children:[(0,E.jsx)(S.default,{size:14,color:"#d4d4a0",strokeWidth:2.5}),(0,E.jsx)(r.default,{style:R.default.badgeText,children:(0,D.formatDistance)(t.distance_from_user)})]}),t.rating&&(0,E.jsxs)(n.default,{style:R.default.badge,children:[(0,E.jsx)(T.default,{size:14,color:"#fbbf24",fill:"#fbbf24",strokeWidth:2}),(0,E.jsx)(r.default,{style:R.default.badgeText,children:t.rating.toFixed(1)})]})]})]})]},t.id)}):(0,E.jsxs)(n.default,{style:R.default.emptyContainer,children:[(0,E.jsx)(S.default,{size:48,color:"#9ca3af"}),(0,E.jsx)(r.default,{style:R.default.emptyText,children:"No trails found nearby. Try a wider search or record a trail to share with others."})]})}),(0,E.jsx)(n.default,{style:R.default.bottomPadding})]}),(0,E.jsx)(f.default,{visible:Y,animationType:"slide",presentationStyle:"fullScreen",onRequestClose:re,children:(0,E.jsxs)(n.default,{style:[R.default.searchModalContainer,{paddingTop:t.top}],children:[(0,E.jsxs)(n.default,{style:R.default.searchModalHeader,children:[(0,E.jsx)(d.default,{style:R.default.backButton,onPress:re,children:(0,E.jsx)(j.default,{size:24,color:"#5d6b4a"})}),(0,E.jsxs)(n.default,{style:R.default.searchModalInputContainer,children:[(0,E.jsx)(c.default,{style:R.default.searchModalInput,placeholder:"Find trails",placeholderTextColor:"#9ca3af",value:q,onChangeText:J,autoFocus:!0,returnKeyType:"search"}),q.length>0&&(0,E.jsx)(d.default,{style:R.default.clearButton,onPress:()=>J(""),children:(0,E.jsx)(B.default,{size:20,color:"#64748b"})})]})]}),(0,E.jsxs)(n.default,{style:R.default.searchModalContent,children:[""===q.trim()&&(0,E.jsxs)(d.default,{style:R.default.currentLocationItem,onPress:()=>{K(!1),J(""),ee([])},children:[(0,E.jsx)(n.default,{style:R.default.locationIconContainer,children:(0,E.jsx)(k.default,{size:20,color:"#5d6b4a"})}),(0,E.jsxs)(n.default,{style:R.default.locationTextContainer,children:[(0,E.jsx)(r.default,{style:R.default.locationTitle,children:"Current location"}),(0,E.jsx)(r.default,{style:R.default.locationSubtitle,children:Q})]})]}),X.length>0&&(0,E.jsx)(g.default,{data:X,keyExtractor:e=>e.id,renderItem:({item:t})=>(0,E.jsxs)(d.default,{style:R.default.suggestionItem,onPress:()=>{return a=t.id,K(!1),J(""),ee([]),void e.push(`/trail/${a}`);var a},children:[(0,E.jsx)(n.default,{style:R.default.suggestionIconContainer,children:(0,E.jsx)(S.default,{size:20,color:"#64748b"})}),(0,E.jsxs)(n.default,{style:R.default.suggestionTextContainer,children:[(0,E.jsx)(r.default,{style:R.default.suggestionTitle,children:t.name}),(0,E.jsx)(r.default,{style:R.default.suggestionSubtitle,children:t.location})]})]}),showsVerticalScrollIndicator:!1})]})]})})]})}},8415(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>W});var o=a(6665),l=a(3929),r=a(5648),n=a(1690),i=a(530),d=a(2772),s=a(6773),u=a(8264),c=a(5009),f=a(6283),g=a(5894),h=a(262),y=a(3353),m=a(2598),p=a(9908),x=a(6746),b=a(3087),j=a(2994),w=a(9281),C=a(4522),S=a(1631),k=a(2081),v=a(1168),T=a(5082),I=a(2964),B=a(9582),z=a(8833),P=a(8745),R=a(9637),D=a(9269),L=a(893),A=a(9600),E=a(397);const O=a(3229);function W(){const{user:e,signOut:t}=(0,y.useAuth)(),{userProfile:a,updateAccount:W,isLoading:F}=(0,m.useAccount)(),{dogProfile:_,isDogProfileLoading:V}=(0,p.useDogs)(),{trails:G,savedTrails:N,isLoading:M,saveTrailBookmark:$,removeTrailBookmark:H,isTrailSaved:U}=(0,x.useTrails)(),[q,J]=o.useState(!1),[Y,K]=o.useState(!1),[Q,Z]=o.useState(""),[X,ee]=o.useState(""),[te,ae]=o.useState(!1),[oe,le]=o.useState("created"),[re,ne]=o.useState({}),ie=(0,z.useSafeAreaInsets)(),de=(0,R.useRouter)();o.useEffect(()=>{const t=a?.name||e?.email?.split("@")[0]||"",o=a?.photo||O;Z(t),ee(o)},[e,a]);const se=G.length,ue=G.reduce((e,t)=>e+(t.duration||0),0),ce=G.reduce((e,t)=>e+t.distance,0),fe=e=>{le(e)},ge=e=>{if(!re[e]){const t=new c.default.Value(1);return ne(a=>Object.assign({},a,{[e]:t})),t}return re[e]},he=()=>{de.push("/onboarding/dog-basics")},ye=()=>{K(!1);const t=a?.name||e?.email?.split("@")[0]||"",o=a?.photo||O;Z(t),ee(o)},me="created"===oe?G:"saved"===oe?N:[];return(0,E.jsx)(l.default,{style:P.default.container,children:(0,E.jsxs)(d.default,{style:P.default.scrollContainer,contentContainerStyle:[P.default.content,{paddingTop:ie.top+16,paddingBottom:ie.bottom+20}],children:[(0,E.jsx)(l.default,{style:P.default.userSection,children:(0,E.jsxs)(l.default,{style:P.default.userHeader,children:[(0,E.jsx)(r.default,{style:P.default.userAvatar,onPress:()=>{K(!0)},children:X?(0,E.jsx)(g.Image,{source:X,style:P.default.userAvatarImage,contentFit:"cover",cachePolicy:"memory-disk"}):(0,E.jsx)(l.default,{style:P.default.initialAvatar,children:(0,E.jsx)(f.default,{style:P.default.initialAvatarText,children:(Q||a?.name||e?.email||"A").charAt(0).toUpperCase()})})}),(0,E.jsxs)(l.default,{style:P.default.userInfo,children:[(0,E.jsx)(f.default,{style:P.default.userName,children:a?.name||Q||"Account Holder"}),(0,E.jsxs)(l.default,{style:P.default.userEmailRow,children:[(0,E.jsx)(k.default,{size:14,color:B.default.primary}),(0,E.jsx)(f.default,{style:P.default.userEmail,children:e?.email||"Not available"})]})]})]})}),V?(0,E.jsx)(l.default,{style:P.default.dogCardContainer,children:(0,E.jsx)(l.default,{style:P.default.loadingDogCard,children:(0,E.jsx)(i.default,{size:"large",color:B.default.paleYellow})})}):_?(0,E.jsx)(l.default,{style:P.default.dogCardContainer,children:(0,E.jsxs)(r.default,{style:P.default.dogCard,onPress:he,children:[(0,E.jsx)(l.default,{style:P.default.dogPhotoContainer,children:_.photo?(0,E.jsx)(g.Image,{source:_.photo,style:P.default.dogPhoto,contentFit:"cover",cachePolicy:"memory-disk"}):(0,E.jsx)(l.default,{style:[P.default.dogPhoto,P.default.dogPhotoPlaceholder],children:(0,E.jsx)(C.default,{size:40,color:B.default.muted})})}),(0,E.jsx)(f.default,{style:P.default.dogName,children:_.name}),_.nickname&&(0,E.jsx)(f.default,{style:P.default.dogNickname,children:_.nickname}),!_.nickname&&(0,E.jsx)(l.default,{style:P.default.nicknameSpacing}),(0,E.jsxs)(l.default,{style:P.default.statsRow,children:[(0,E.jsxs)(l.default,{style:P.default.statItem,children:[(0,E.jsx)(f.default,{style:P.default.statValue,children:se}),(0,E.jsx)(f.default,{style:P.default.statLabel,children:"Walks"})]}),(0,E.jsxs)(l.default,{style:P.default.statItem,children:[(0,E.jsx)(f.default,{style:P.default.statValue,children:(e=>{const t=Math.floor(e/3600),a=Math.floor(e%3600/60);return t>0?`${t}.${Math.floor(a/6)}h`:`${a}m`})(ue)}),(0,E.jsx)(f.default,{style:P.default.statLabel,children:"Total Time"})]}),(0,E.jsxs)(l.default,{style:P.default.statItem,children:[(0,E.jsx)(f.default,{style:P.default.statValue,children:(0,D.formatDistance)(ce)}),(0,E.jsx)(f.default,{style:P.default.statLabel,children:"Total Dist."})]})]}),(0,E.jsxs)(l.default,{style:P.default.dogInfoRow,children:[(0,E.jsx)(l.default,{style:P.default.dogInfoBadge,children:(0,E.jsxs)(f.default,{style:P.default.dogInfoText,children:[_.age," years"]})}),(0,E.jsx)(l.default,{style:P.default.dogInfoBadge,children:(0,E.jsxs)(f.default,{style:P.default.dogInfoText,children:["Size ",_.size]})})]})]})}):(0,E.jsx)(l.default,{style:P.default.dogCardContainer,children:(0,E.jsxs)(l.default,{style:P.default.noDogCard,children:[(0,E.jsx)(C.default,{size:48,color:B.default.muted}),(0,E.jsx)(f.default,{style:P.default.noDogText,children:"No dog profile yet"}),(0,E.jsx)(r.default,{style:P.default.addDogButton,onPress:he,children:(0,E.jsx)(f.default,{style:P.default.addDogButtonText,children:"Add Dog Profile"})})]})}),(0,E.jsxs)(l.default,{style:P.default.tabsContainer,children:[(0,E.jsxs)(r.default,{style:[P.default.tab,"created"===oe&&P.default.tabActive],onPress:()=>fe("created"),children:[(0,E.jsx)(f.default,{style:[P.default.tabCount,"created"===oe&&P.default.tabCountActive],children:G.length}),(0,E.jsx)(f.default,{style:[P.default.tabText,"created"===oe&&P.default.tabTextActive],children:"Created"})]}),(0,E.jsxs)(r.default,{style:[P.default.tab,"saved"===oe&&P.default.tabActive],onPress:()=>fe("saved"),children:[(0,E.jsx)(f.default,{style:[P.default.tabCount,"saved"===oe&&P.default.tabCountActive],children:N.length}),(0,E.jsx)(f.default,{style:[P.default.tabText,"saved"===oe&&P.default.tabTextActive],children:"Saved"})]}),(0,E.jsxs)(r.default,{style:[P.default.tab,"reviews"===oe&&P.default.tabActive],onPress:()=>fe("reviews"),children:[(0,E.jsx)(f.default,{style:[P.default.tabCount,"reviews"===oe&&P.default.tabCountActive],children:"0"}),(0,E.jsx)(f.default,{style:[P.default.tabText,"reviews"===oe&&P.default.tabTextActive],children:"Reviews"})]})]}),(0,E.jsx)(l.default,{style:P.default.trailsSection,children:M?(0,E.jsx)(l.default,{style:P.default.loadingContainer,children:(0,E.jsx)(i.default,{size:"large",color:B.default.primary})}):me.length>0?me.map(e=>{const t=ge(e.id),a=U(e.id);return(0,E.jsxs)(r.default,{style:P.default.trailCard,onPress:()=>{return t=e.id,void de.push(`/trail/${t}`);var t},children:[e.photo?(0,E.jsx)(g.Image,{source:{uri:e.photo},style:P.default.trailImage}):(0,E.jsx)(A.default,{coordinates:e.coordinates,path:e.path,style:P.default.trailImage,startLatitude:e.startLatitude,startLongitude:e.startLongitude}),(0,E.jsx)(L.LinearGradient,{colors:["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.25)","rgba(0, 0, 0, 0.6)"],locations:[0,.3,.6,1],style:P.default.trailGradient}),(0,E.jsx)(r.default,{style:P.default.bookmarkButton,onPress:t=>{t.stopPropagation(),(async e=>{const t=ge(e),a=U(e);c.default.sequence([c.default.timing(t,{toValue:.6,duration:100,useNativeDriver:!0}),c.default.spring(t,{toValue:1,friction:3,tension:100,useNativeDriver:!0})]).start();try{a?await H(e):await $(e)}catch(o){console.error("Failed to toggle bookmark:",o)}})(e.id)},children:(0,E.jsx)(c.default.View,{style:{transform:[{scale:t}]},children:(0,E.jsx)(j.default,{size:20,color:a?"#000":B.default.muted,fill:a?"#000":"none",strokeWidth:2})})}),(0,E.jsxs)(l.default,{style:P.default.trailContent,children:[(0,E.jsx)(f.default,{style:P.default.trailName,children:e.name||`Trail ${new Date(e.date).toLocaleDateString()}`}),(0,E.jsx)(f.default,{style:P.default.trailLocation,children:e.city?`${e.city}, ${e.country||"Unknown"}`:"Location unknown"}),(0,E.jsxs)(l.default,{style:P.default.trailBadges,children:[e.difficulty&&(0,E.jsxs)(l.default,{style:P.default.trailBadge,children:[(0,E.jsx)(b.default,{size:14,color:B.default.paleYellow,strokeWidth:2.5}),(0,E.jsx)(f.default,{style:P.default.trailBadgeText,children:e.difficulty})]}),(0,E.jsxs)(l.default,{style:P.default.trailBadge,children:[(0,E.jsx)(v.default,{size:14,color:B.default.paleYellow,strokeWidth:2.5}),(0,E.jsx)(f.default,{style:P.default.trailBadgeText,children:(0,D.formatDistance)(e.distance)})]}),e.rating&&(0,E.jsxs)(l.default,{style:P.default.trailBadge,children:[(0,E.jsx)(T.default,{size:14,color:B.default.accent,fill:B.default.accent,strokeWidth:2}),(0,E.jsx)(f.default,{style:P.default.trailBadgeText,children:e.rating.toFixed(1)})]})]})]})]},e.id)}):(0,E.jsxs)(l.default,{style:P.default.emptyContainer,children:[(0,E.jsx)(v.default,{size:48,color:B.default.light.tabIconDefault}),(0,E.jsx)(f.default,{style:P.default.emptyText,children:"created"===oe?"No trails created yet":"saved"===oe?"No trails saved yet":"No reviews yet"})]})}),(0,E.jsx)(r.default,{style:[P.default.signOutButton,q&&P.default.signOutButtonDisabled],onPress:async()=>{n.default.alert("Sign Out","Are you sure you want to sign out?",[{text:"Cancel",style:"cancel"},{text:"Sign Out",style:"destructive",onPress:async()=>{J(!0);try{await t()}catch(e){0,n.default.alert("Error",e.message||"Failed to sign out")}finally{J(!1)}}}])},disabled:q,children:q?(0,E.jsx)(i.default,{color:B.default.light.tabIconSelected}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(S.default,{size:20,color:B.default.light.tabIconSelected}),(0,E.jsx)(f.default,{style:P.default.signOutText,children:"Sign Out"})]})}),(0,E.jsx)(u.default,{visible:Y,animationType:"slide",presentationStyle:"pageSheet",onRequestClose:ye,children:(0,E.jsxs)(l.default,{style:P.default.modalContainer,children:[(0,E.jsxs)(l.default,{style:[P.default.modalHeader,{paddingTop:ie.top+20}],children:[(0,E.jsx)(f.default,{style:P.default.modalTitle,children:"Edit Profile"}),(0,E.jsx)(r.default,{style:P.default.closeButton,onPress:ye,children:(0,E.jsx)(I.default,{size:24,color:B.default.primary})})]}),(0,E.jsxs)(d.default,{style:P.default.modalContent,children:[(0,E.jsxs)(l.default,{style:P.default.photoSection,children:[(0,E.jsxs)(r.default,{style:P.default.photoContainer,onPress:async()=>{const{status:e}=await h.requestMediaLibraryPermissionsAsync();if("granted"!==e)return void n.default.alert("Permission needed","Please allow access to your photo library");const t=await h.launchImageLibraryAsync({mediaTypes:["images"],allowsEditing:!0,aspect:[1,1],quality:.8});!t.canceled&&t.assets[0]&&ee(t.assets[0].uri)},children:[X?(0,E.jsx)(g.Image,{source:X,style:P.default.editPhoto,contentFit:"cover",cachePolicy:"memory-disk"}):(0,E.jsx)(l.default,{style:[P.default.editPhoto,P.default.initialAvatar],children:(0,E.jsx)(f.default,{style:P.default.initialAvatarText,children:(Q||a?.name||e?.email||"A").charAt(0).toUpperCase()})}),(0,E.jsx)(l.default,{style:P.default.cameraOverlay,children:(0,E.jsx)(w.default,{size:24,color:B.default.light.tabIconSelected})})]}),(0,E.jsx)(f.default,{style:P.default.photoHint,children:"Tap to change photo"})]}),(0,E.jsxs)(l.default,{style:P.default.inputSection,children:[(0,E.jsx)(f.default,{style:P.default.inputLabel,children:"Name"}),(0,E.jsx)(s.default,{style:P.default.input,value:Q,onChangeText:Z,placeholder:"Enter your name",placeholderTextColor:B.default.light.tabIconDefault})]}),(0,E.jsxs)(l.default,{style:P.default.inputSection,children:[(0,E.jsx)(f.default,{style:P.default.inputLabel,children:"Email"}),(0,E.jsx)(l.default,{style:P.default.disabledInput,children:(0,E.jsx)(f.default,{style:P.default.disabledInputText,children:e?.email})}),(0,E.jsx)(f.default,{style:P.default.inputHint,children:"Email cannot be changed"})]})]}),(0,E.jsx)(l.default,{style:[P.default.modalFooter,{paddingBottom:ie.bottom+20}],children:(0,E.jsx)(r.default,{style:[P.default.saveButton,te&&P.default.saveButtonDisabled],onPress:async()=>{if(Q.trim()){ae(!0);try{await W({name:Q.trim(),photo:"string"===typeof X&&X?X:void 0}),K(!1),n.default.alert("Success","Profile updated successfully!")}catch(e){console.error("Failed to save profile:",e),n.default.alert("Error",e?.message||"Failed to update profile")}finally{ae(!1)}}else n.default.alert("Error","Name cannot be empty")},disabled:te,children:te?(0,E.jsx)(i.default,{color:B.default.light.tabIconSelected}):(0,E.jsx)(f.default,{style:P.default.saveButtonText,children:"Save Changes"})})})]})})]})})}},8625(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(3668),l=a(9582);const r=o.default.create({container:{flex:1,backgroundColor:l.default.black},scrollView:{flex:1},content:{padding:24},header:{marginBottom:32,alignItems:"center"},title:{fontSize:28,fontWeight:"700",color:l.default.accent,marginBottom:8,textAlign:"center"},subtitle:{fontSize:16,color:l.default.lightGreen,textAlign:"center",marginBottom:24},progressContainer:{flexDirection:"row",gap:8},progressDot:{width:8,height:8,borderRadius:4,backgroundColor:"#3d4520"},progressDotActive:{backgroundColor:l.default.accent},tagsContainer:{flexDirection:"row",flexWrap:"wrap",gap:12},tag:{paddingHorizontal:20,paddingVertical:12,borderRadius:24,backgroundColor:"#282E10",borderWidth:1.5,borderColor:"#3d4520"},tagSelected:{backgroundColor:"rgba(255, 254, 119, 0.15)",borderColor:l.default.accent},tagText:{fontSize:15,fontWeight:"500",color:l.default.lightGreen},tagTextSelected:{color:l.default.accent,fontWeight:"600"},sectionHeader:{marginTop:32,marginBottom:16},sectionTitle:{fontSize:24,fontWeight:"700",color:l.default.accent},section:{marginBottom:24},label:{fontSize:17,fontWeight:"600",color:l.default.accent,marginBottom:4},helperText:{fontSize:14,color:l.default.lightGreen,marginBottom:12},recallContainer:{flexDirection:"row",gap:8},recallOption:{flex:1,paddingVertical:12,paddingHorizontal:16,borderRadius:12,backgroundColor:"#282E10",borderWidth:1.5,borderColor:"#3d4520",alignItems:"center"},recallOptionSelected:{backgroundColor:"rgba(255, 254, 119, 0.15)",borderColor:l.default.accent},recallText:{fontSize:14,fontWeight:"500",color:l.default.lightGreen},recallTextSelected:{color:l.default.accent,fontWeight:"600"},footer:{flexDirection:"row",gap:12,paddingHorizontal:24,paddingTop:20,borderTopWidth:1,borderTopColor:"#3d4520",backgroundColor:"#282E10"},backButton:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8,backgroundColor:"transparent",borderRadius:12,padding:18,borderWidth:1.5,borderColor:l.default.accent},backButtonText:{fontSize:17,fontWeight:"600",color:l.default.accent},finishButton:{flex:1,backgroundColor:l.default.accent,borderRadius:12,padding:18,alignItems:"center",justifyContent:"center"},finishButtonDisabled:{opacity:.6},finishButtonText:{fontSize:17,fontWeight:"600",color:"#1a1f0a"}})},8745(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(3668),l=a(9582);const r=o.default.create({container:{flex:1,backgroundColor:l.default.background},scrollContainer:{flex:1},content:{paddingHorizontal:16},userSection:{marginBottom:24},userHeader:{flexDirection:"row",alignItems:"center"},userAvatar:{width:48,height:48,borderRadius:24,overflow:"hidden",backgroundColor:l.default.lightGreen,borderWidth:2,borderColor:l.default.primary},userAvatarImage:{width:"100%",height:"100%"},userInfo:{marginLeft:12,flex:1},userName:{fontSize:20,fontWeight:"700",color:l.default.darkGreen,marginBottom:2},userEmailRow:{flexDirection:"row",alignItems:"center",gap:6},userEmail:{fontSize:14,color:l.default.primary,opacity:.8},dogCardContainer:{marginBottom:24},dogCard:{backgroundColor:l.default.background,borderRadius:24,padding:24,alignItems:"center",borderWidth:1,borderColor:l.default.primary},dogPhotoContainer:{marginBottom:16},dogPhoto:{width:100,height:100,borderRadius:50,backgroundColor:l.default.mediumGreen,borderWidth:3,borderColor:l.default.paleYellow},dogPhotoPlaceholder:{justifyContent:"center",alignItems:"center"},dogName:{fontSize:22,fontWeight:"700",color:"#fff",marginBottom:4},dogNickname:{fontSize:14,color:l.default.paleYellow,opacity:.9,marginBottom:16},nicknameSpacing:{height:16},statsRow:{flexDirection:"row",justifyContent:"space-around",width:"100%",marginBottom:20},statItem:{alignItems:"center"},statValue:{fontSize:24,fontWeight:"700",color:"#fff",marginBottom:4},statLabel:{fontSize:13,color:l.default.paleYellow,opacity:.8},dogInfoRow:{flexDirection:"row",gap:12},dogInfoBadge:{backgroundColor:"rgba(255, 255, 255, 0.2)",paddingHorizontal:16,paddingVertical:8,borderRadius:16},dogInfoText:{fontSize:14,color:"#fff",fontWeight:"500"},loadingDogCard:{backgroundColor:l.default.darkGreen,borderRadius:24,padding:48,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:l.default.primary},noDogCard:{backgroundColor:l.default.darkGreen,borderRadius:24,padding:32,alignItems:"center",gap:12,borderWidth:1,borderColor:l.default.primary},noDogText:{fontSize:16,color:l.default.paleYellow,opacity:.9,textAlign:"center"},addDogButton:{backgroundColor:l.default.primary,paddingHorizontal:20,paddingVertical:12,borderRadius:12,marginTop:8},addDogButtonText:{fontSize:15,fontWeight:"600",color:"#fff"},tabsContainer:{flexDirection:"row",marginBottom:20,gap:12},tab:{flex:1,backgroundColor:"#fff",paddingVertical:16,paddingHorizontal:16,borderRadius:16,alignItems:"center",borderWidth:0},tabActive:{backgroundColor:"#5d6b4a"},tabText:{fontSize:14,fontWeight:"600",color:"#9ca3af"},tabTextActive:{color:"#fff"},tabCount:{fontSize:24,fontWeight:"700",color:l.default.darkGreen,marginBottom:4},tabCountActive:{color:"#fff"},trailsSection:{marginBottom:24},trailCard:{backgroundColor:"#fff",borderRadius:24,overflow:"hidden",marginBottom:20,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.1,shadowRadius:16,elevation:4,position:"relative"},trailImage:{width:"100%",height:260,backgroundColor:l.default.surface},trailGradient:{position:"absolute",top:0,bottom:0,left:0,right:0},trailContent:{position:"absolute",bottom:0,left:0,right:0,padding:18,paddingBottom:20},trailName:{fontSize:28,fontWeight:"700",color:"#fff",marginBottom:6,lineHeight:34,textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:1},textShadowRadius:4},trailLocation:{fontSize:16,color:"#fff",marginBottom:16,opacity:.95,textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:1},textShadowRadius:4},trailBadges:{flexDirection:"row",alignItems:"center",gap:12,flexWrap:"wrap"},trailBadge:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.8)",paddingHorizontal:14,paddingVertical:8,borderRadius:20,gap:6},trailBadgeText:{fontSize:14,fontWeight:"600",color:"#fff",textTransform:"capitalize"},bookmarkButton:{position:"absolute",top:20,right:20,width:44,height:44,borderRadius:22,backgroundColor:"rgba(255, 255, 255, 0.95)",justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:8,elevation:4,zIndex:10},loadingContainer:{paddingVertical:60,alignItems:"center"},emptyContainer:{paddingVertical:60,alignItems:"center",gap:16,paddingHorizontal:32},emptyText:{fontSize:16,color:l.default.primary,opacity:.7,textAlign:"center",lineHeight:24},signOutButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",gap:12,backgroundColor:"#b91c1c",borderRadius:12,padding:16,marginTop:16,borderWidth:1,borderColor:"#7f1d1d"},signOutButtonDisabled:{opacity:.6},signOutText:{fontSize:16,fontWeight:"600",color:"#fff"},modalContainer:{flex:1,backgroundColor:l.default.background},modalHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:20,paddingBottom:20,backgroundColor:l.default.background,borderBottomWidth:1,borderBottomColor:l.default.lightGreen},modalTitle:{fontSize:24,fontWeight:"700",color:l.default.darkGreen},closeButton:{width:40,height:40,borderRadius:20,backgroundColor:l.default.lightGreen,justifyContent:"center",alignItems:"center"},modalContent:{flex:1,padding:20},photoSection:{alignItems:"center",marginBottom:32,paddingTop:20},photoContainer:{width:120,height:120,borderRadius:60,overflow:"hidden",position:"relative",marginBottom:12},editPhoto:{width:"100%",height:"100%"},cameraOverlay:{position:"absolute",bottom:0,left:0,right:0,height:40,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},photoHint:{fontSize:14,color:"#6b7280"},inputSection:{marginBottom:24},inputLabel:{fontSize:15,fontWeight:"600",color:l.default.primary,marginBottom:8},input:{backgroundColor:l.default.background,borderRadius:12,padding:16,fontSize:16,color:l.default.darkGreen,borderWidth:1,borderColor:l.default.lightGreen},disabledInput:{backgroundColor:l.default.surface,borderRadius:12,padding:16,borderWidth:1,borderColor:"#e5e7eb"},disabledInputText:{fontSize:16,color:"#9ca3af"},inputHint:{fontSize:13,color:"#9ca3af",marginTop:6},modalFooter:{padding:20,backgroundColor:l.default.background,borderTopWidth:1,borderTopColor:l.default.lightGreen},saveButton:{backgroundColor:l.default.primary,borderRadius:12,padding:16,alignItems:"center"},saveButtonDisabled:{opacity:.6},saveButtonText:{fontSize:16,fontWeight:"600",color:"#fff"},initialAvatar:{width:"100%",height:"100%",backgroundColor:l.default.lightGreen,justifyContent:"center",alignItems:"center"},initialAvatarText:{fontSize:36,fontWeight:"700",color:"#fff"}})},8776(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(3668),l=a(9582);const r=o.default.create({container:{flex:1,backgroundColor:l.default.background},headerButtons:{position:"absolute",left:0,right:0,zIndex:100,flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16},headerButton:{width:44,height:44,borderRadius:22,backgroundColor:l.default.darkGreen,justifyContent:"center",alignItems:"center",shadowColor:l.default.black,shadowOffset:{width:0,height:2},shadowOpacity:.15,shadowRadius:4,elevation:4},headerRightButtons:{flexDirection:"row",gap:12},scrollContainer:{flex:1},scrollContent:{paddingBottom:32},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:l.default.background},loadingText:{marginTop:16,fontSize:16,color:l.default.lightGreen,fontWeight:"500"},heroSection:{position:"relative"},heroImageContainer:{width:"100%",height:500,position:"relative"},heroImage:{width:"100%",height:"100%",backgroundColor:l.default.border},heroGradient:{position:"absolute",bottom:0,left:0,right:0,height:100},changePhotoFab:{position:"absolute",bottom:80,right:20,width:56,height:56,borderRadius:28,backgroundColor:l.default.primary,justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8,elevation:6},addPhotoContainer:{width:"100%",height:280,backgroundColor:l.default.lightGreen,justifyContent:"center",alignItems:"center",paddingHorizontal:32},addPhotoIcon:{width:72,height:72,borderRadius:36,backgroundColor:l.default.background,justifyContent:"center",alignItems:"center",marginBottom:16},addPhotoText:{fontSize:18,fontWeight:"600",color:l.default.darkGreen,marginBottom:4},addPhotoSubtext:{fontSize:14,color:l.default.mediumGreen},contentWrapper:{backgroundColor:l.default.background,borderTopLeftRadius:24,borderTopRightRadius:24,marginTop:-24,zIndex:10},content:{padding:24},titleSection:{marginBottom:20},titleRow:{flexDirection:"row",alignItems:"flex-start",gap:12,marginBottom:8},title:{flex:1,fontSize:32,fontWeight:"700",color:l.default.darkGreen,lineHeight:40},editIconButton:{width:40,height:40,borderRadius:20,backgroundColor:l.default.lightGreen,justifyContent:"center",alignItems:"center",marginTop:4},nameEditContainer:{marginBottom:8},nameInput:{fontSize:28,fontWeight:"700",color:l.default.darkGreen,backgroundColor:l.default.white,borderWidth:2,borderColor:l.default.primary,borderRadius:12,padding:12,marginBottom:12},nameInputInDetails:{fontSize:16,color:l.default.darkGreen,backgroundColor:l.default.background,borderWidth:1,borderColor:l.default.lightGreen,borderRadius:12,padding:16},editButtons:{flexDirection:"row",gap:8},iconButton:{width:44,height:44,borderRadius:22,justifyContent:"center",alignItems:"center"},saveIconButton:{backgroundColor:l.default.primary},cancelIconButton:{backgroundColor:l.default.lightGreen},locationRow:{flexDirection:"row",alignItems:"center",gap:6,marginBottom:12},location:{fontSize:16,color:l.default.mediumGreen,fontWeight:"500"},ratingRow:{flexDirection:"row",gap:4},reviewCard:{backgroundColor:l.default.surface,borderRadius:16,padding:20,marginBottom:24,borderWidth:1,borderColor:l.default.paleYellow},reviewText:{fontSize:16,color:l.default.darkGreen,lineHeight:24},statsSection:{flexDirection:"row",flexWrap:"wrap",gap:12,marginBottom:24},statCard:{flex:1,minWidth:100,backgroundColor:l.default.surface,borderRadius:16,padding:16,alignItems:"center",shadowColor:l.default.black,shadowOffset:{width:0,height:2},shadowOpacity:.05,shadowRadius:8,elevation:2},statIconContainer:{width:44,height:44,borderRadius:22,backgroundColor:l.default.primary,justifyContent:"center",alignItems:"center",marginBottom:12},statLabel:{fontSize:13,color:l.default.mediumGreen,fontWeight:"500",marginBottom:4},statValue:{fontSize:20,color:l.default.darkGreen,fontWeight:"700"},tagsSection:{backgroundColor:l.default.surface,borderRadius:16,padding:20,marginBottom:20,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.05,shadowRadius:8,elevation:2},sectionHeader:{flexDirection:"row",alignItems:"center",gap:8,marginBottom:16},sectionTitle:{fontSize:18,fontWeight:"700",color:l.default.darkGreen},tagsGrid:{flexDirection:"row",flexWrap:"wrap",gap:8},tagChip:{backgroundColor:l.default.lightGreen,paddingHorizontal:16,paddingVertical:8,borderRadius:20},tagText:{fontSize:14,fontWeight:"500",color:l.default.darkGreen},editDetailsButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8,backgroundColor:l.default.white,borderRadius:12,paddingVertical:14,paddingHorizontal:20,marginBottom:20,borderWidth:2,borderColor:l.default.primary},editDetailsText:{fontSize:16,fontWeight:"600",color:l.default.primary},editSection:{backgroundColor:l.default.surface,borderRadius:16,padding:20,marginBottom:20,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.05,shadowRadius:8,elevation:2},editSectionTitle:{fontSize:16,fontWeight:"700",color:l.default.darkGreen,marginBottom:12},ratingStars:{flexDirection:"row",gap:8},starButton:{padding:4},reviewInput:{backgroundColor:l.default.background,borderWidth:1,borderColor:l.default.lightGreen,borderRadius:12,padding:16,fontSize:15,color:l.default.darkGreen,minHeight:120},difficultyOptions:{flexDirection:"row",gap:8},difficultyChip:{flex:1,paddingVertical:12,paddingHorizontal:16,borderRadius:12,backgroundColor:l.default.background,borderWidth:2,borderColor:l.default.lightGreen,alignItems:"center"},difficultyChipSelected:{backgroundColor:l.default.primary,borderColor:l.default.primary},difficultyChipText:{fontSize:15,fontWeight:"600",color:l.default.mediumGreen},difficultyChipTextSelected:{color:l.default.white},editTagChip:{paddingHorizontal:16,paddingVertical:8,borderRadius:20,backgroundColor:l.default.background,borderWidth:1.5,borderColor:l.default.lightGreen},editTagChipSelected:{backgroundColor:l.default.primary,borderColor:l.default.primary},editTagChipText:{fontSize:14,fontWeight:"500",color:l.default.mediumGreen},editTagChipTextSelected:{color:l.default.white},editActionButtons:{flexDirection:"row",gap:12,marginTop:24},actionButton:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8,paddingVertical:14,borderRadius:12},cancelActionButton:{backgroundColor:l.default.background,borderWidth:2,borderColor:l.default.lightGreen},cancelActionText:{fontSize:16,fontWeight:"600",color:l.default.darkGreen},saveActionButton:{backgroundColor:l.default.primary},saveActionText:{fontSize:16,fontWeight:"600",color:l.default.white},mapSection:{marginBottom:20},mapContainer:{height:260,borderRadius:16,overflow:"hidden",marginBottom:12,borderWidth:1,borderColor:l.default.lightGreen},map:{width:"100%",height:"100%"},webMapPlaceholder:{justifyContent:"center",alignItems:"center",backgroundColor:l.default.lightGreen},webMapText:{marginTop:12,fontSize:14,color:l.default.mediumGreen},directionsButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:l.default.primary,borderRadius:12,paddingVertical:16,paddingHorizontal:24,gap:10,shadowColor:l.default.primary,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8,elevation:4},directionsButtonText:{fontSize:16,fontWeight:"700",color:l.default.white},detailsSection:{backgroundColor:l.default.surface,borderRadius:16,padding:20,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.05,shadowRadius:8,elevation:2},detailsTitle:{fontSize:18,fontWeight:"700",color:l.default.darkGreen,marginBottom:16},detailRow:{flexDirection:"row",alignItems:"flex-start",paddingVertical:12,borderBottomWidth:1,borderBottomColor:l.default.background},detailIcon:{width:36,height:36,borderRadius:18,backgroundColor:l.default.lightGreen,justifyContent:"center",alignItems:"center",marginRight:12},detailContent:{flex:1},detailLabel:{fontSize:13,fontWeight:"600",color:l.default.mediumGreen,marginBottom:2},detailValue:{fontSize:16,color:l.default.darkGreen,fontWeight:"500"}})},8973(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(9637),l=(a(6665),a(3929)),r=a(6283),n=a(3668),i=a(397);function d(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Stack.Screen,{options:{title:"Oops!"}}),(0,i.jsxs)(l.default,{style:s.container,children:[(0,i.jsx)(r.default,{style:s.title,children:"This screen doesn't exist."}),(0,i.jsx)(o.Link,{href:"/",asChild:!0,style:s.link,children:(0,i.jsx)(r.default,{style:s.linkText,children:"Go to home screen!"})})]})]})}const s=n.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}})},9269(e,t,a){"use strict";function o(e,t){const a=l(t.latitude-e.latitude),o=l(t.longitude-e.longitude),r=l(e.latitude),n=l(t.latitude),i=Math.sin(a/2)*Math.sin(a/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(r)*Math.cos(n);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function l(e){return e*Math.PI/180}function r(e){if(e.length<2)return 0;let t=0;for(let a=0;a<e.length-1;a++){t+=o(e[a],e[a+1])}return 1e3*t}function n(e){if(e<1e3)return`${Math.round(e)}m`;return`${(e/1e3).toFixed(2)}km`}function i(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),o=e%60;return t>0?`${t}h ${a}m`:a>0?`${a}m ${o}s`:`${o}s`}function d(e){const t=new Date(e),a=new Date,o=Math.floor((a.getTime()-t.getTime())/864e5);return 0===o?`Today at ${t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:1===o?`Yesterday at ${t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}a.r(t),a.d(t,{calculateDistance:()=>o,calculateTotalDistance:()=>r,formatDate:()=>d,formatDistance:()=>n,formatDuration:()=>i})},9582(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>u,setTheme:()=>s});var o=a(414);const l={primary:"#5d6b4a",accent:"#FFFE77",background:"#F8F7F2",darkGreen:"#282E10",mediumGreen:"#3d4520",lightGreen:"#a8ad8e",paleYellow:"#d4d4a0",surface:"#f3f4f6",border:"#d1d5db",muted:"#5b646f",white:"#ffffff",black:"#000000",info:"#2563eb",danger:"#b91c1c",tabBarBg:"rgba(40,46,16,0.95)",light:{text:"#11120f",background:"#F7F7F3",tint:"#5d6b4a",tabIconDefault:"#7f8b7a",tabIconSelected:"#FFFE77"}},r={primary:"#86a06a",accent:"#FFFE77",background:"#071009",darkGreen:"#b5c47aff",mediumGreen:"#223015",lightGreen:"#6b7b56",paleYellow:"#bfb77a",surface:"#0f1a14",border:"#123019",muted:"#9ca3af",white:"#eef7e6",black:"#071009",info:"#6596ff",danger:"#ef9a9a",tabBarBg:"rgba(10,12,6,0.95)",light:{text:"#eef7e6",background:"#071009",tint:"#86a06a",tabIconDefault:"#9ca3af",tabIconSelected:"#FFFE77"}},n="dark"===o.default.getColorScheme()?r:l,i=Object.assign({},n);function d(e){Object.keys(i).forEach(e=>delete i[e]),Object.assign(i,e)}function s(e){d("dark"===e?r:"light"===e?l:"dark"===o.default.getColorScheme()?r:l)}o.default&&"function"===typeof o.default.addChangeListener&&o.default.addChangeListener(e=>{d("dark"===(e.colorScheme||o.default.getColorScheme())?r:l)});const u=i},9600(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>c});var o=a(6665),l=a(6283),r=a(3929),n=a(3668),i=a(9582);const d=n.default.create({container:{overflow:"hidden",borderRadius:12,backgroundColor:i.default.surface},map:{width:"100%",height:"100%"},placeholder:{justifyContent:"center",alignItems:"center",padding:12},text:{color:i.default.primary,fontWeight:"bold",fontSize:16},subtext:{color:i.default.muted,fontSize:12,marginTop:4}});var s=a(7042),u=(a(1051),a(397));function c({coordinates:e,path:t,style:a,height:n=260,startLatitude:i=null,startLongitude:c=null}){const f=(0,o.useRef)(null),g=(0,o.useRef)(null),h=(0,o.useRef)(null),y=e&&e.length>0?e:Array.isArray(t)?t.map(e=>({latitude:e[1],longitude:e[0]})):[];return(0,o.useEffect)(()=>{if(!f.current)return;const e=null!=i&&null!=c?[c,i]:y.length>0?[y[0].longitude,y[0].latitude]:[0,0],t=new s.Map({container:f.current,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:e,zoom:y.length>0?12:1,interactive:!1});return g.current=t,t.on("load",()=>{if(y&&y.length>1){const e={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:y.map(e=>[e.longitude,e.latitude])}};t.getSource("preview-route")?t.getSource("preview-route").setData(e):(t.addSource("preview-route",{type:"geojson",data:e}),t.addLayer({id:"preview-route",type:"line",source:"preview-route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#5d6b4a","line-width":3}}));const a=new s.LngLatBounds;y.forEach(e=>a.extend([e.longitude,e.latitude])),t.fitBounds(a,{padding:10,maxZoom:16})}else if(y&&1===y.length){const e=y[0];if(h.current)h.current.setLngLat([e.longitude,e.latitude]);else{const a=new s.Marker({color:"#5d6b4a"}).setLngLat([e.longitude,e.latitude]).addTo(t);h.current=a}t.setCenter([e.longitude,e.latitude]),t.setZoom(14)}}),()=>{try{t.remove()}catch(e){}g.current=null,h.current=null}},[JSON.stringify(y),i,c]),(0,u.jsx)(r.default,{style:[d.container,a],children:y&&y.length>0?(0,u.jsx)("div",{ref:f,style:{width:"100%",height:"number"===typeof n?`${n}px`:n}}):(0,u.jsxs)(r.default,{style:d.placeholder,children:[(0,u.jsx)(l.default,{style:d.text,children:"Map Preview (Web)"}),(0,u.jsxs)(l.default,{style:d.subtext,children:[y?.length||0," points recorded"]})]})})}},9908(e,t,a){"use strict";a.r(t),a.d(t,{DogsContext:()=>i,useDogs:()=>d});var o=a(6665),l=a(2790),r=a(3353),n=a(5938);const[i,d]=(0,l.default)(()=>{const{user:e,session:t,isLoading:a}=(0,r.useAuth)(),[l,i]=(0,o.useState)([]),[d,s]=(0,o.useState)(null),[u,c]=(0,o.useState)(!0),f=(0,o.useMemo)(()=>l.find(e=>e.id===d)||l[0]||null,[l,d]),g=(0,o.useCallback)(async(e,t)=>{console.log("Loading dog profiles for user:",e),c(!0);try{const e=await fetch(`${n.API_URL}/dog`,{headers:{Authorization:`Bearer ${t}`}});if(e.ok){const t=await e.json();Array.isArray(t)?(i(t),t.length>0&&!d&&s(t[0].id)):t&&"object"===typeof t?(i([t]),s(t.id)):i([])}else i([])}catch(a){console.error("Error loading dog profiles:",a),i([])}finally{c(!1)}},[d]),h=(0,o.useCallback)(async()=>{e&&t&&await g(e.id,t.accessToken)},[e,t,g]);(0,o.useEffect)(()=>{a||(e&&t?g(e.id,t.accessToken):(i([]),c(!1)))},[e,t,g,a]);const y=(0,o.useCallback)(async e=>{if(!t)throw new Error("No session");const a=await fetch(`${n.API_URL}/dog`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify(e)});if(!a.ok){const e=await a.json();throw new Error(e.detail?.[0]?.msg||"Failed to create dog profile")}const o=await a.json();return i(e=>[...e,o]),s(o.id),o},[t]),m=(0,o.useCallback)(async e=>{if(!t)throw new Error("No session");if(!e.id)throw new Error("Dog ID is required for update");const a=await fetch(`${n.API_URL}/dog/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify(e)});if(!a.ok){const e=await a.json();throw new Error(e.detail?.[0]?.msg||"Failed to update dog profile")}const o=await a.json();return i(e=>e.map(e=>e.id===o.id?o:e)),o},[t]);return(0,o.useMemo)(()=>({dogProfile:f,dogProfiles:l,activeDogId:d,setActiveDogId:s,isDogProfileLoading:u,hasDogProfile:l.length>0,refreshDogProfile:h,createDogProfile:y,updateDogProfile:m}),[f,l,d,u,h,y,m])})}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,o,l,r)=>{if(!o){var n=1/0;for(u=0;u<e.length;u++){for(var[o,l,r]=e[u],i=!0,d=0;d<o.length;d++)(!1&r||n>=r)&&Object.keys(a.O).every(e=>a.O[e](o[d]))?o.splice(d--,1):(i=!1,r<n&&(n=r));if(i){e.splice(u--,1);var s=l();void 0!==s&&(t=s)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,l,r]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,o)=>{var l,r,[n,i,d]=o,s=0;if(n.some(t=>0!==e[t])){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(d)var u=d(a)}for(t&&t(o);s<n.length;s++)r=n[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=a.O(void 0,[607],()=>a(389));o=a.O(o)})();
//# sourceMappingURL=main.ff360bec.js.map