{"version":3,"file":"static/js/main.484c62c2.js","mappings":"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","sources":["app|sync|/^(?:/.//)(?%21(?:(?:(?:.*/+api)%7C(?:/+middleware)%7C(?:/+(html%7Cnative-intent))))/.[tj]sx?$).*(?:/.android%7C/.ios%7C/.native)?/.[tj]sx?$","components/AnimatedTabBar.styles.ts","components/AnimatedTabBar.tsx","app/(tabs)/_layout.tsx","app/(tabs)/explore.styles.ts","app/(tabs)/explore.tsx","app/(tabs)/profile.styles.ts","app/(tabs)/profile.tsx","app/(tabs)/record.styles.ts","app/(tabs)/record.tsx","app/(tabs)/settings.styles.ts","app/(tabs)/settings.tsx","app/+not-found.tsx","app/_layout.tsx","app/auth.styles.ts","app/demo.tsx","app/index.tsx","app/login.tsx","app/onboarding/dog-basics.styles.ts","app/onboarding/dog-basics.tsx","app/onboarding/dog-personality.styles.ts","app/onboarding/dog-personality.tsx","app/signup.tsx","app/trail/[id].styles.ts","app/trail/[id].tsx","app/trails.tsx","components/LottieLoader.tsx","components/TrailMap.styles.ts","components/TrailMap.web.tsx","components/TrailMapPreview.styles.ts","components/TrailMapPreview.web.tsx","components/Typography.tsx","constants/colors.ts","constants/typography.ts","context/AccountContext.tsx","context/AuthContext.tsx","context/DogsContext.tsx","context/TrailsContext.tsx","lib/api.ts","lib/firebase.ts","types/dog-profile.ts","utils/distance.ts","web/nanoid-non-secure.js","web/shims/lottie-shim.js","web/shims/rn-firebase-shim.js","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/ensure chunk","webpack/runtime/get javascript chunk filename","webpack/runtime/get mini-css chunk filename","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/load script","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["var map = {\n\t\"./(tabs)/_layout.tsx\": 5210,\n\t\"./(tabs)/explore.styles.ts\": 2699,\n\t\"./(tabs)/explore.tsx\": 4509,\n\t\"./(tabs)/profile.styles.ts\": 8745,\n\t\"./(tabs)/profile.tsx\": 8415,\n\t\"./(tabs)/record.styles.ts\": 1095,\n\t\"./(tabs)/record.tsx\": 5209,\n\t\"./(tabs)/settings.styles.ts\": 4171,\n\t\"./(tabs)/settings.tsx\": 282,\n\t\"./+not-found.tsx\": 8973,\n\t\"./_layout.tsx\": 5111,\n\t\"./auth.styles.ts\": 5632,\n\t\"./demo.tsx\": 5625,\n\t\"./index.tsx\": 5250,\n\t\"./login.tsx\": 4101,\n\t\"./onboarding/dog-basics.styles.ts\": 7924,\n\t\"./onboarding/dog-basics.tsx\": 4674,\n\t\"./onboarding/dog-personality.styles.ts\": 8625,\n\t\"./onboarding/dog-personality.tsx\": 6183,\n\t\"./signup.tsx\": 3764,\n\t\"./trail/[id].styles.ts\": 8776,\n\t\"./trail/[id].tsx\": 3686,\n\t\"./trails.tsx\": 2399\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 587;","import { StyleSheet, Platform } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nexport default StyleSheet.create({\n  container: {\n    width: '100%',\n    paddingHorizontal: 0,\n    paddingTop: 0,\n    alignItems: 'center',\n  },\n  tabBar: {\n    flexDirection: 'row',\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 0,\n    paddingVertical: 8,\n    paddingHorizontal: 8,\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 8,\n    width: '100%',\n    gap: 6,\n  },\n  tabButton: {\n    height: 64,\n    borderRadius: 16,\n    // Change 'hidden' to 'visible' if clipping persists\n    overflow: Platform.OS === 'android' ? 'visible' : 'hidden', \n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  tabTouchable: {\n    flex: 1,\n    width: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  tabContent: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 4,\n    // Add a tiny bit of horizontal padding so the text isn't \n    // pushed against the very edge of the flex container\n    paddingHorizontal: Platform.OS === 'android' ? 4 : 0,\n  },\n  iconWrapper: {\n    width: 22,\n    height: 22,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  label: {\n    ...Typography.label(theme.textMuted),\n    // keep Android-specific layout fixes\n    ...Platform.select({\n      android: {\n        includeFontPadding: false,\n        paddingRight: 2,\n        textAlign: 'center',\n        minWidth: 60,\n      },\n    }),\n  },\n  labelActive: {\n    color: theme.accentPrimary,\n  },\n});\n","import React, { useEffect, useRef } from 'react';\nimport { TouchableOpacity, View, StyleSheet, Animated, Platform } from 'react-native';\nimport { Text } from '@/components';\nimport type { BottomTabBarProps } from '@react-navigation/bottom-tabs';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport * as Haptics from 'expo-haptics';\nimport styles from './AnimatedTabBar.styles';\nimport theme from '@/constants/colors';\n\nconsole.log('[init] components/AnimatedTabBar.tsx loaded');\n\nexport function AnimatedTabBar({ state, descriptors, navigation }: BottomTabBarProps) {\n  const insets = useSafeAreaInsets();\n  const animatedValues = useRef(\n    state.routes.map(() => new Animated.Value(0))\n  ).current;\n\n  useEffect(() => {\n    // Debug: log current navigation state to detect unexpected extra tabs\n    console.log('AnimatedTabBar state.index:', state.index);\n    console.log('AnimatedTabBar routes:', state.routes.map(r => ({ name: r.name, key: r.key })));\n    console.log('AnimatedTabBar descriptors keys:', Object.keys(descriptors));\n\n    state.routes.forEach((route, index) => {\n      Animated.timing(animatedValues[index], {\n        toValue: state.index === index ? 1 : 0,\n        duration: 300,\n        useNativeDriver: false,\n      }).start();\n    });\n  }, [state.index, state.routes, animatedValues]);\n\n  // Put the safe-area padding on the tabBar itself so its background\n  // extends to the bottom of the screen and there is no white gap.\n  const tabBarPaddingBottom = Math.max(insets.bottom, Platform.OS === 'android' ? 12 : 8);\n\n  return (\n    <View style={styles.container}>\n      <View style={[styles.tabBar, { paddingBottom: tabBarPaddingBottom }]}>\n        {/**\n         * Render only routes that expose tab bar options (title/label/icon).\n         * File-based routing sometimes injects extra routes; this guard\n         * prevents rendering unexpected tabs while we diagnose the cause.\n         */}\n        {state.routes\n          .filter(route => {\n            const opts = descriptors[route.key]?.options;\n            return !!(opts && (opts.tabBarLabel || opts.title || opts.tabBarIcon));\n          })\n          .map((route, index) => {\n          const { options } = descriptors[route.key];\n          const label = options.tabBarLabel !== undefined\n            ? options.tabBarLabel\n            : options.title !== undefined\n            ? options.title\n            : route.name;\n\n          const isFocused = state.index === index;\n\n          const onPress = () => {\n            if (true) {\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n            }\n\n            const event = navigation.emit({\n              type: 'tabPress',\n              target: route.key,\n              canPreventDefault: true,\n            });\n\n            if (!isFocused && !event.defaultPrevented) {\n              navigation.navigate(route.name);\n            }\n          };\n\n          const animatedValue = animatedValues[index];\n\n          // Always render the tab with icon above and label below.\n          // Keep a small animation for selection, but use a fixed button width so\n          // labels remain visible across all tabs.\n          const buttonWidth = 72;\n          const backgroundColor = theme.backgroundPrimary; // No animation for background color, keep it consistent\n          const textOpacity = 1; // labels are always visible now\n          const iconColor = isFocused ? theme.accentPrimary : theme.textMuted;\n          const textColor = isFocused ? theme.accentPrimary : theme.textMuted;\n\n          return (\n            <Animated.View\n              key={route.key}\n              style={[\n                styles.tabButton,\n                {\n                  width: buttonWidth,\n                  backgroundColor,\n                },\n              ]}\n            >\n              <TouchableOpacity\n                accessibilityRole=\"button\"\n                accessibilityState={isFocused ? { selected: true } : {}}\n                accessibilityLabel={options.tabBarAccessibilityLabel}\n                onPress={onPress}\n                style={styles.tabTouchable}\n              >\n                <View style={styles.tabContent}>\n                  <View style={styles.iconWrapper}>\n                    {options.tabBarIcon && options.tabBarIcon({ \n                      focused: isFocused, \n                      color: iconColor, \n                      size: 22 \n                    })}\n                  </View>\n                  <Animated.View style={{ opacity: textOpacity }}>\n                    <Text style={[styles.label, isFocused && styles.labelActive]}>{String(label)}</Text>\n                  </Animated.View>\n                </View>\n              </TouchableOpacity>\n            </Animated.View>\n          );\n        })}\n      </View>\n    </View>\n  );\n}\n","import { Tabs } from 'expo-router';\n\nimport { Navigation, MapPin, User } from 'lucide-react-native';\nimport { AnimatedTabBar } from '@/components/AnimatedTabBar';\nimport theme from '@/constants/colors';\n\nexport default function TabLayout() {\n  return (\n    <Tabs\n      tabBar={(props) => <AnimatedTabBar {...props} />}\n      screenOptions={{\n        headerShown: false,\n        tabBarActiveTintColor: theme.backgroundSecondaryVarient,\n        tabBarInactiveTintColor: theme.backgroundPrimary,\n      }}\n    >\n      <Tabs.Screen\n        name=\"explore\"\n        options={{\n          title: 'Explore',\n          tabBarIcon: ({ color, size }) => <MapPin size={size} color={color} />,\n        }}\n      />\n      <Tabs.Screen\n        name=\"record\"\n        options={{\n          title: 'Record',\n          tabBarIcon: ({ color, size }) => <Navigation size={size} color={color} />,\n        }}\n      />\n      <Tabs.Screen\n        name=\"profile\"\n        options={{\n          title: 'Profile',\n          tabBarIcon: ({ color, size }) => <User size={size} color={color} />,\n        }}\n      />\n    </Tabs>\n  );\n}\n","import { StyleSheet, Platform } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nexport default StyleSheet.create({\n  safeContainer: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n\n  stickyHeader: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingBottom: 8,\n  },\n  stickySearchContainer: {\n    paddingHorizontal: 16,\n    paddingBottom: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n\n  searchBar: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundSecondary,\n    paddingHorizontal: 16,\n    paddingVertical: 14,\n    borderRadius: 28,\n    gap: 12,\n    borderWidth: 1,\n    borderColor: theme.borderSubtle,\n  },\n  demoButton: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 24,\n  },\n  demoButtonText: {\n    ...Typography.label(theme.textPrimary),\n    fontWeight: '700' as any,\n  },\n  searchPlaceholder: {\n    ...Typography.body(theme.textMuted),\n  },\n\n  largeTrailCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    overflow: 'hidden',\n    marginBottom: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 4,\n    position: 'relative',\n  },\n  largeTrailImage: {\n    width: '100%',\n    height: 260,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  bookmarkButton: {\n    position: 'absolute',\n    top: 20,\n    right: 20,\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    shadowColor: theme.backgroundSecondaryVarient,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  cardGradient: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  cardOverlayContent: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    padding: 18,\n    paddingBottom: 20,\n  },\n  overlayTrailName: {\n    ...Typography.h2(theme.textPrimary),\n    marginBottom: 6,\n    lineHeight: 34,\n    textShadowColor: 'rgba(0, 0, 0, 0.3)',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 4,\n  },\n  overlayLocation: {\n    ...Typography.body(theme.textPrimary),\n    marginBottom: 16,\n    opacity: 0.95,\n    textShadowColor: 'rgba(0, 0, 0, 0.3)',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 4,\n  },\n  overlayBadges: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n    flexWrap: 'wrap' as const,\n  },\n  badge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(40, 40, 40, 0.8)',\n    paddingHorizontal: 14,\n    paddingVertical: 8,\n    borderRadius: 20,\n    gap: 6,\n  },\n  badgeText: {\n    ...Typography.label('#fff'),\n    paddingHorizontal: Platform.OS === 'android' ? 4 : 0,\n    textTransform: 'capitalize' as const,\n  },\n  categoriesSection: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingTop: 8,\n    paddingBottom: 16,\n  },\n  categoriesScroll: {\n    paddingHorizontal: 16,\n    gap: 12,\n  },\n  categoryButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingHorizontal: 20, // Increase this for better touch targets\n    paddingVertical: 12,\n    borderRadius: 28,\n    backgroundColor: theme.textPrimary,\n    // THE FIX: Prevent the button from being squeezed\n    alignSelf: 'flex-start', \n    minHeight: 48,\n  },\n\n  categoryText: {\n    ...Typography.caption(theme.textMuted),\n    ...Platform.select({\n      android: {\n        includeFontPadding: false,\n        paddingRight: 10,\n        minWidth: 50,\n      },\n    }),\n  },\n  categoryButtonActive: {\n    backgroundColor: theme.backgroundPrimary,\n  },\n  categoryTextActive: {\n    color: theme.textPrimary,\n  },\n  categoryTrailsSection: {\n    paddingHorizontal: 16,\n    paddingTop: 16,\n  },\n  bottomPadding: {\n    height: 40,\n  },\n  loadingContainer: {\n    paddingVertical: 60,\n    alignItems: 'center',\n    gap: 16,\n  },\n  loadingText: {\n    ...Typography.caption(theme.textMuted),\n  },\n  emptyContainer: {\n    paddingVertical: 60,\n    alignItems: 'center',\n    gap: 16,\n    paddingHorizontal: 32,\n  },\n  emptyText: {\n    ...Typography.body(theme.textMuted),\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n  placeholderImage: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.textPrimary,\n  },\n  searchModalContainer: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  searchModalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingTop: 12,\n    paddingBottom: 16,\n    gap: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.borderSubtle,\n  },\n  backButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  searchModalInputContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.textPrimary,\n    borderRadius: 28,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderWidth: 1,\n    borderColor: theme.textMuted,\n    gap: 12,\n  },\n  searchModalInput: {\n    flex: 1,\n    ...Typography.body(theme.textPrimary),\n    padding: 0,\n  },\n  clearButton: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    backgroundColor: theme.borderSubtle,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  searchModalContent: {\n    flex: 1,\n    paddingTop: 12,\n  },\n  currentLocationItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    gap: 16,\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 16,\n    marginHorizontal: 16,\n    marginBottom: 12,\n  },\n  locationIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  locationTextContainer: {\n    flex: 1,\n  },\n  locationTitle: {\n    ...Typography.label(theme.textPrimary),\n    marginBottom: 4,\n  },\n  locationSubtitle: {\n    ...Typography.caption(theme.textMuted),\n  },\n  suggestionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    gap: 16,\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 16,\n    marginHorizontal: 16,\n    marginBottom: 12,\n  },\n  suggestionIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.borderSubtle,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  suggestionTextContainer: {\n    flex: 1,\n  },\n  suggestionTitle: {\n    ...Typography.label(theme.textPrimary),\n    marginBottom: 4,\n  },\n  suggestionSubtitle: {\n    ...Typography.caption(theme.textMuted),\n  },\n});\n","import React, { useState, useCallback, useEffect } from 'react';\nimport { useFocusEffect, useRouter } from 'expo-router';\nimport { View, ScrollView, TouchableOpacity, Platform, ActivityIndicator, Animated, TextInput, Modal, FlatList } from 'react-native';\nimport { Text } from '@/components';\nimport LottieLoader from '@/components/LottieLoader';\nimport { Image } from 'expo-image';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport * as Location from 'expo-location';\nimport * as Haptics from 'expo-haptics';\nimport { MapPin, Search, Heart, Umbrella, Bookmark, Star, X, BarChart3, Navigation, Icon, ChevronLeft } from 'lucide-react-native';\nimport theme from '@/constants/colors';\nimport { useTrails } from '@/context/TrailsContext';\nimport { Trail } from '@/types/trail';\nimport { formatDistance } from '@/utils/distance';\nimport TrailMapPreview from '@/components/TrailMapPreview';\nimport styles from './explore.styles';\n\n\nconst CATEGORIES = [\n  { id: 'nearby', name: 'Nearby', icon: MapPin },\n  { id: 'popular', name: 'Popular', icon: Heart },\n  { id: 'beaches', name: 'Beaches', icon: Umbrella },\n];\n\n\nexport default function ExploreScreen() {\n  const router = useRouter();\n  const insets = useSafeAreaInsets();\n  const { loadNearbyTrails, saveTrailBookmark, removeTrailBookmark, isTrailSaved } = useTrails();\n  const [selectedCategory, setSelectedCategory] = useState<string>('nearby');\n  const [nearbyTrails, setNearbyTrails] = useState<Trail[]>([]);\n  const [isLoadingNearby, setIsLoadingNearby] = useState<boolean>(true);\n  const [, setUserCity] = useState<string | undefined>(undefined);\n  const [bookmarkAnimations, setBookmarkAnimations] = useState<Record<string, Animated.Value>>({});\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [showSearchModal, setShowSearchModal] = useState<boolean>(false);\n  const [currentLocation, setCurrentLocation] = useState<string>('');\n  const [searchSuggestions, setSearchSuggestions] = useState<{ id: string; name: string; location: string; type: string }[]>([]);\n\n  const loadUserLocationAndNearbyTrails = useCallback(async () => {\n    if (false) {\n      setCurrentLocation('Current location');\n      // Try to get a quick browser location; if unavailable, load without coords\n      try {\n        if (navigator && navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(async (pos) => {\n            try {\n              const trails = await loadNearbyTrails(pos.coords.latitude, pos.coords.longitude);\n              setNearbyTrails(trails);\n            } catch (err) {\n              console.error('Failed to load nearby trails with browser location:', err);\n              const trails = await loadNearbyTrails();\n              setNearbyTrails(trails);\n            } finally {\n              setIsLoadingNearby(false);\n            }\n          }, async () => {\n            const trails = await loadNearbyTrails();\n            setNearbyTrails(trails);\n            setIsLoadingNearby(false);\n          });\n          return;\n        }\n      } catch (err) {\n        console.error('Geolocation not available on web:', err);\n      }\n\n      const trails = await loadNearbyTrails();\n      setNearbyTrails(trails);\n      setIsLoadingNearby(false);\n      return;\n    }\n\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n\n      if (status === 'granted') {\n        const location = await Location.getCurrentPositionAsync({\n          accuracy: Location.Accuracy.Balanced,\n        });\n\n        // Skip reverse geocoding to avoid rate limits. We only need lat/lon for nearby search.\n        setUserCity(undefined);\n        setCurrentLocation('Current location');\n        const trails = await loadNearbyTrails(location.coords.latitude, location.coords.longitude);\n        setNearbyTrails(trails);\n      } else {\n        setCurrentLocation('Location unavailable');\n        const trails = await loadNearbyTrails();\n        setNearbyTrails(trails);\n      }\n    } catch (error) {\n      console.error('Error loading location:', error);\n      setCurrentLocation('Location unavailable');\n      const trails = await loadNearbyTrails();\n      setNearbyTrails(trails);\n    } finally {\n      setIsLoadingNearby(false);\n    }\n  }, [loadNearbyTrails]);\n\n  useEffect(() => {\n    loadUserLocationAndNearbyTrails();\n  }, [loadUserLocationAndNearbyTrails]);\n\n  useFocusEffect(\n    useCallback(() => {\n      console.log('Explore tab focused - refreshing nearby trails');\n      loadUserLocationAndNearbyTrails();\n    }, [loadUserLocationAndNearbyTrails])\n  );\n\n  const loadSearchSuggestions = useCallback(() => {\n    const query = searchQuery.toLowerCase();\n\n    const suggestions = nearbyTrails\n      .filter(trail => {\n        const name = trail.name?.toLowerCase() || '';\n        const city = trail.city?.toLowerCase() || '';\n        const country = trail.country?.toLowerCase() || '';\n        return name.includes(query) || city.includes(query) || country.includes(query);\n      })\n      .map(trail => ({\n        id: trail.id,\n        name: trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`,\n        location: trail.city ? `${trail.city}, ${trail.country || 'Unknown'}` : 'Location unknown',\n        type: 'trail',\n      }))\n      .slice(0, 6);\n\n    setSearchSuggestions(suggestions);\n  }, [searchQuery, nearbyTrails]);\n\n  useEffect(() => {\n    if (searchQuery.trim()) {\n      loadSearchSuggestions();\n    } else {\n      setSearchSuggestions([]);\n    }\n  }, [searchQuery, loadSearchSuggestions]);\n\n  const handleSearchBarPress = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(true);\n  };\n\n  const handleCloseSearchModal = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n  };\n\n  const handleSuggestionPress = (suggestionId: string) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n    router.push(`/trail/${suggestionId}`);\n  };\n\n  const handleCurrentLocationPress = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowSearchModal(false);\n    setSearchQuery('');\n    setSearchSuggestions([]);\n  };\n\n  const getBookmarkAnimation = (trailId: string) => {\n    if (!bookmarkAnimations[trailId]) {\n      const newAnim = new Animated.Value(1);\n      setBookmarkAnimations(prev => ({ ...prev, [trailId]: newAnim }));\n      return newAnim;\n    }\n    return bookmarkAnimations[trailId];\n  };\n\n  const isValidUUID = (id: string): boolean => {\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    return uuidRegex.test(id);\n  };\n\n  const handleBookmarkPress = async (trailId: string, isRealTrail: boolean = false) => {\n    if (!isRealTrail && !isValidUUID(trailId)) {\n      console.log('Cannot bookmark mock trail:', trailId);\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      }\n      return;\n    }\n\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    const anim = getBookmarkAnimation(trailId);\n    const isSaved = isTrailSaved(trailId);\n\n    Animated.sequence([\n      Animated.timing(anim, {\n        toValue: 0.6,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.spring(anim, {\n        toValue: 1,\n        friction: 3,\n        tension: 100,\n        useNativeDriver: true,\n      }),\n    ]).start();\n\n    try {\n      if (isSaved) {\n        await removeTrailBookmark(trailId);\n      } else {\n        await saveTrailBookmark(trailId);\n        if (true) {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to toggle bookmark:', error);\n    }\n  };\n\n  const handleNavigateToTrail = (trailId: string) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.push(`/trail/${trailId}`);\n  };\n\n  const handleCategoryPress = (categoryId: string) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setSelectedCategory(categoryId);\n  };\n\n  const getFilteredTrails = useCallback((trails: Trail[]) => {\n    let filtered = trails;\n\n    if (selectedCategory === 'popular') {\n      filtered = [...filtered].sort((a, b) => (b.rating || 0) - (a.rating || 0));\n    } else if (selectedCategory === 'beaches') {\n      filtered = filtered.filter((trail) => {\n        const tags = trail.environment_tags || [];\n        return tags.some(tag => tag.toLowerCase().includes('beach'));\n      });\n    }\n\n    return filtered;\n  }, [selectedCategory]);\n\n  const filteredTrails = getFilteredTrails(nearbyTrails);\n\n  return (\n    <View style={styles.safeContainer}>\n      <ScrollView\n        style={styles.container}\n        showsVerticalScrollIndicator={false}\n        stickyHeaderIndices={[0]}\n      >\n        <View style={[styles.stickyHeader, { paddingTop: insets.top + 16 }]}>\n          <View style={styles.stickySearchContainer}>\n            <TouchableOpacity\n              style={styles.searchBar}\n              onPress={handleSearchBarPress}\n              activeOpacity={0.7}\n            >\n              <Search size={20} color={theme.textMuted} />\n              <Text style={styles.searchPlaceholder}>Find trails</Text>\n            </TouchableOpacity>\n            {false && (\n              <TouchableOpacity\n                style={styles.demoButton}\n                onPress={() => router.push('/trail/demo-trail')}\n              >\n                <Text style={styles.demoButtonText}>Demo</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n\n          <View style={styles.categoriesSection}>\n            <ScrollView\n              horizontal\n              showsHorizontalScrollIndicator={false}\n              contentContainerStyle={styles.categoriesScroll}\n            >\n              {CATEGORIES.map((category) => {\n                const Icon = category.icon;\n                const isSelected = selectedCategory === category.id;\n\n                return (\n                  <TouchableOpacity\n                    key={category.id}\n                    style={[\n                      styles.categoryButton,\n                      isSelected && styles.categoryButtonActive,\n                    ]}\n                    onPress={() => handleCategoryPress(category.id)}\n                  >\n                    {/* Wrap Icon in a View to ensure it has a fixed width separate from text */}\n                    <View style={{ marginRight: 10 }}>\n                      <Icon\n                        size={20}\n                        color={isSelected ? theme.accentPrimary : theme.textMuted}\n                        strokeWidth={2}\n                      />\n                    </View>\n\n                    <Text\n                      style={[\n                        styles.categoryText,\n                        isSelected && styles.categoryTextActive,\n                      ]}\n                    // IMPORTANT: Remove numberOfLines={1} temporarily to see if it \n                    // stops the concatenation. If it was cutting off, this will \n                    // force it to show, even if it wraps (which it shouldn't with alignSelf).\n                    >\n                      {category.name}\n                    </Text>\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n          </View>\n        </View>\n\n        <View style={styles.categoryTrailsSection}>\n          {isLoadingNearby ? (\n            <View style={styles.loadingContainer}>\n              <LottieLoader size={120} />\n              <Text style={styles.loadingText}>Loading trails...</Text>\n            </View>\n          ) : filteredTrails.length > 0 ? (\n            filteredTrails.map((trail) => {\n              const anim = getBookmarkAnimation(trail.id);\n              const isSaved = isTrailSaved(trail.id);\n              return (\n                <TouchableOpacity\n                  key={trail.id}\n                  style={styles.largeTrailCard}\n                  onPress={() => handleNavigateToTrail(trail.id)}\n                >\n                  {trail.photo ? (\n                    <Image\n                      source={{ uri: trail.photo }}\n                      style={styles.largeTrailImage}\n                      contentFit=\"cover\"\n                      cachePolicy=\"memory-disk\"\n                    />\n                  ) : (\n                    <TrailMapPreview\n                      coordinates={trail.coordinates}\n                      path={(trail as any).path}\n                      style={styles.largeTrailImage}\n                      startLatitude={(trail as any).startLatitude}\n                      startLongitude={(trail as any).startLongitude}\n                    />\n                  )}\n\n                  <LinearGradient\n                    colors={['rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0.25)', 'rgba(0, 0, 0, 0.6)']}\n                    locations={[0, 0.3, 0.6, 1]}\n                    style={styles.cardGradient}\n                  />\n\n                  <TouchableOpacity\n                    style={styles.bookmarkButton}\n                    onPress={(e) => {\n                      e.stopPropagation();\n                      handleBookmarkPress(trail.id, true);\n                    }}\n                  >\n                    <Animated.View style={{ transform: [{ scale: anim }] }}>\n                      <Bookmark\n                        size={20}\n                        color={isSaved ? '#000' : theme.textMuted}\n                        fill={isSaved ? '#000' : 'none'}\n                        strokeWidth={2}\n                      />\n                    </Animated.View>\n                  </TouchableOpacity>\n\n                  <View style={styles.cardOverlayContent}>\n                    <Text style={styles.overlayTrailName}>\n                      {trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`}\n                    </Text>\n\n                    <View style={styles.overlayBadges}>\n                      {trail.difficulty && (\n                        <View style={styles.badge}>\n                          <BarChart3 size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                          <Text style={styles.badgeText}>{trail.difficulty}</Text>\n                        </View>\n                      )}\n                      <View style={styles.badge}>\n                        <MapPin size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                        <Text style={styles.badgeText}>{formatDistance(trail.distance)}</Text>\n                      </View>\n                      {typeof (trail as any).distance_from_user === 'number' && (\n                        <View style={styles.badge}>\n                          <MapPin size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                          <Text style={styles.badgeText}>{formatDistance((trail as any).distance_from_user)}</Text>\n                        </View>\n                      )}\n                      {trail.rating && (\n                        <View style={styles.badge}>\n                          <Star size={14} color={theme.accentPrimary} fill={theme.accentPrimary} strokeWidth={2} />\n                          <Text style={styles.badgeText}>{trail.rating.toFixed(1)}</Text>\n                        </View>\n                      )}\n                    </View>\n                  </View>\n                </TouchableOpacity>\n              );\n            })\n          ) : (\n            <View style={styles.emptyContainer}>\n              <MapPin size={48} color=\"#9ca3af\" />\n              <Text style={styles.emptyText}>\n                No trails found yet. Record a trail to share with others!\n              </Text>\n            </View>\n          )}\n        </View>\n\n        <View style={styles.bottomPadding} />\n      </ScrollView>\n\n      <Modal\n        visible={showSearchModal}\n        animationType=\"slide\"\n        presentationStyle=\"fullScreen\"\n        onRequestClose={handleCloseSearchModal}\n      >\n        <View style={[styles.searchModalContainer, { paddingTop: insets.top }]}>\n          <View style={styles.searchModalHeader}>\n            <TouchableOpacity\n              style={styles.backButton}\n              onPress={handleCloseSearchModal}\n            >\n              <ChevronLeft size={24} color=\"#5d6b4a\" />\n            </TouchableOpacity>\n            <View style={styles.searchModalInputContainer}>\n              <TextInput\n                style={styles.searchModalInput}\n                placeholder=\"Find trails\"\n                placeholderTextColor=\"#9ca3af\"\n                value={searchQuery}\n                onChangeText={setSearchQuery}\n                autoFocus\n                returnKeyType=\"search\"\n              />\n              {searchQuery.length > 0 && (\n                <TouchableOpacity\n                  style={styles.clearButton}\n                  onPress={() => setSearchQuery('')}\n                >\n                  <X size={20} color=\"#64748b\" />\n                </TouchableOpacity>\n              )}\n            </View>\n          </View>\n\n          <View style={styles.searchModalContent}>\n            {searchQuery.trim() === '' && (\n              <TouchableOpacity\n                style={styles.currentLocationItem}\n                onPress={handleCurrentLocationPress}\n              >\n                <View style={styles.locationIconContainer}>\n                  <Navigation size={20} color=\"#5d6b4a\" />\n                </View>\n                <View style={styles.locationTextContainer}>\n                  <Text style={styles.locationTitle}>Current location</Text>\n                  <Text style={styles.locationSubtitle}>{currentLocation}</Text>\n                </View>\n              </TouchableOpacity>\n            )}\n\n            {searchSuggestions.length > 0 && (\n              <FlatList\n                data={searchSuggestions}\n                keyExtractor={(item) => item.id}\n                renderItem={({ item }) => (\n                  <TouchableOpacity\n                    style={styles.suggestionItem}\n                    onPress={() => handleSuggestionPress(item.id)}\n                  >\n                    <View style={styles.suggestionIconContainer}>\n                      <MapPin size={20} color=\"#64748b\" />\n                    </View>\n                    <View style={styles.suggestionTextContainer}>\n                      <Text style={styles.suggestionTitle}>{item.name}</Text>\n                      <Text style={styles.suggestionSubtitle}>{item.location}</Text>\n                    </View>\n                  </TouchableOpacity>\n                )}\n                showsVerticalScrollIndicator={false}\n              />\n            )}\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nexport default StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  content: {\n    paddingHorizontal: 16,\n  },\n  settingsButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.backgroundPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  userSection: {\n    marginBottom: 24,\n  },\n  userHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  userAvatar: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    overflow: 'hidden',\n    backgroundColor: theme.accentPrimary,\n    borderWidth: 2,\n    borderColor: theme.backgroundPrimary,\n  },\n  userAvatarImage: {\n    width: '100%',\n    height: '100%',\n  },\n  userInfo: {\n    marginLeft: 12,\n    flex: 1,\n  },\n  userName: {\n    ...Typography.h2(theme.accentPrimary),\n    marginBottom: 2,\n  },\n  userEmailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  userEmail: {\n    ...Typography.label(theme.accentPrimary),\n    opacity: 0.8,\n    marginLeft: 6,\n  },\n  dogCardContainer: {\n    marginBottom: 24,\n  },\n  dogCard: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 24,\n    padding: 24,\n    alignItems: 'center',\n    borderWidth: 0,\n    borderColor: theme.backgroundPrimary,\n  },\n  dogPhotoContainer: {\n    marginBottom: 16,\n  },\n  dogPhoto: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    backgroundColor: theme.backgroundSecondaryVarient,\n    borderWidth: 0,\n    borderColor: theme.accentPrimary,\n  },\n  dogPhotoPlaceholder: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  dogName: {\n    ...Typography.h2(theme.accentPrimary),\n    marginBottom: 4,\n  },\n  dogNickname: {\n    ...Typography.label(theme.textMuted),\n    opacity: 0.9,\n    marginBottom: 16,\n  },\n  nicknameSpacing: {\n    height: 16,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    width: '100%',\n    marginBottom: 20,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statValue: {\n    ...Typography.h1(theme.accentPrimary),\n    marginBottom: 4,\n  },\n  statLabel: {\n    ...Typography.caption(theme.textSecondary),\n    opacity: 0.8,\n  },\n  dogInfoRow: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  dogInfoBadge: {\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 16,\n  },\n  dogInfoText: {\n    ...Typography.label(theme.textPrimary),\n  },\n  loadingDogCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    padding: 48,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.backgroundPrimary,\n  },\n  noDogCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    padding: 32,\n    alignItems: 'center',\n    gap: 12,\n    borderWidth: 1,\n    borderColor: theme.backgroundPrimary,\n  },\n  noDogText: {\n    ...Typography.body(theme.accentPrimary),\n    opacity: 0.9,\n    textAlign: 'center',\n  },\n  addDogButton: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 12,\n    marginTop: 8,\n  },\n  addDogButtonText: {\n    ...Typography.label(theme.textPrimary),\n  },\n  tabsContainer: {\n    flexDirection: 'row',\n    marginBottom: 20,\n    gap: 12,\n  },\n  tab: {\n    flex: 1,\n    backgroundColor: theme.backgroundSecondary,\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    borderRadius: 16,\n    alignItems: 'center',\n    borderWidth: 0,\n  },\n  tabActive: {\n    backgroundColor: theme.accentPrimary,\n  },\n  tabText: {\n    ...Typography.label(theme.textMuted),\n  },\n  tabTextActive: {\n    color: theme.backgroundSecondary,\n  },\n  tabCount: {\n    ...Typography.h1(theme.accentPrimary),\n    marginBottom: 4,\n  },\n  tabCountActive: {\n    color: theme.backgroundPrimary,\n  },\n  trailsSection: {\n    marginBottom: 24,\n  },\n  trailCard: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 24,\n    overflow: 'hidden',\n    marginBottom: 20,\n    shadowColor: theme.backgroundSecondaryVarient,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 4,\n    position: 'relative',\n  },\n  trailImage: {\n    width: '100%',\n    height: 260,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  loadingContainer: {\n    paddingVertical: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  trailGradient: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    height: 120,\n  },\n  bookmarkButton: {\n    position: 'absolute',\n    top: 12,\n    right: 12,\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    backgroundColor: 'rgba(255,255,255,0.95)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.backgroundSecondary,\n  },\n  trailContent: {\n    position: 'absolute',\n    left: 12,\n    right: 12,\n    bottom: 12,\n    padding: 12,\n  },\n  trailName: {\n    ...Typography.h2(theme.textPrimary),\n    marginBottom: 4,\n  },\n  trailLocation: {\n    ...Typography.caption(theme.textPrimary),\n    opacity: 0.95,\n  },\n  trailBadges: {\n    flexDirection: 'row',\n    gap: 8,\n    marginTop: 8,\n  },\n  trailBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    backgroundColor: 'rgba(255,255,255,0.08)',\n    paddingHorizontal: 8,\n    paddingVertical: 6,\n    borderRadius: 12,\n  },\n  trailBadgeText: {\n    ...Typography.caption(theme.textPrimary),\n  },\n  emptyText: {\n    ...Typography.body(theme.backgroundPrimary),\n    opacity: 0.7,\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 40,\n  },\n  signOutButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 12,\n    backgroundColor: theme.accentPrimary,\n    borderRadius: 12,\n    padding: 16,\n    marginTop: 16,\n    borderWidth: 1,\n    borderColor: theme.accentPrimary,\n  },\n  signOutButtonDisabled: {\n    opacity: 0.6,\n  },\n  signOutText: {\n    ...Typography.label(theme.backgroundPrimary),\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingBottom: 20,\n    backgroundColor: theme.backgroundPrimary,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.accentPrimary,\n  },\n  modalTitle: {\n    ...Typography.h2(theme.textPrimary),\n  },\n  closeButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  inputLabel: {\n    ...Typography.label(theme.backgroundPrimary),\n    marginBottom: 8,\n  },\n  input: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 16,\n    color: theme.textPrimary,\n    borderWidth: 1,\n    borderColor: theme.accentPrimary,\n  },\n  initialAvatar: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  initialAvatarText: {\n    ...Typography.h1(theme.textPrimary),\n  },\n  /* Modal / Edit profile styles */\n  modalContent: {\n    paddingHorizontal: 16,\n    paddingTop: 16,\n    paddingBottom: 80,\n  },\n  photoSection: {\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  photoContainer: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    overflow: 'hidden',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.accentPrimary,\n    borderWidth: 3,\n    borderColor: theme.backgroundPrimary,\n  },\n  editPhoto: {\n    width: '100%',\n    height: '100%',\n  },\n  cameraOverlay: {\n    position: 'absolute',\n    right: 8,\n    bottom: 8,\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: theme.backgroundPrimary + '22',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  photoHint: {\n    ...Typography.caption(theme.textMuted),\n    marginTop: 8,\n  },\n  inputSection: {\n    marginBottom: 16,\n  },\n  disabledInput: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: theme.accentPrimary,\n  },\n  disabledInputText: {\n    ...Typography.label(theme.backgroundPrimary),\n    opacity: 0.8,\n  },\n  inputHint: {\n    ...Typography.caption(theme.textMuted),\n    marginTop: 6,\n  },\n  modalFooter: {\n    paddingHorizontal: 16,\n    paddingTop: 12,\n    borderTopWidth: 1,\n    borderTopColor: theme.accentPrimary,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  saveButton: {\n    backgroundColor: theme.backgroundPrimary,\n    paddingVertical: 14,\n    borderRadius: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    ...Typography.button(theme.textPrimary),\n  },\n});\n","import React from 'react';\nimport {\n  View,\n  StyleSheet,\n  TouchableOpacity,\n  Alert,\n  ActivityIndicator,\n  ScrollView,\n  Platform,\n  TextInput,\n  Modal,\n  Animated,\n} from 'react-native';\nimport { Text } from '@/components';\nimport { Image } from 'expo-image';\nimport * as Haptics from 'expo-haptics';\nimport * as ImagePicker from 'expo-image-picker';\nimport { API_URL } from '@/lib/api';\nimport { useAuth } from '@/context/AuthContext';\nimport { useAccount } from '@/context/AccountContext';\nimport { useDogs } from '@/context/DogsContext';\nimport { useTrails } from '@/context/TrailsContext';\n\nimport { Mail, LogOut, Dog, Camera, X, MapPin, Star, BarChart3, Bookmark, LucideTableOfContents } from 'lucide-react-native';\nimport theme from '@/constants/colors';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './profile.styles';\nimport { useRouter } from 'expo-router';\nimport { formatDistance } from '@/utils/distance';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport TrailMapPreview from '@/components/TrailMapPreview';\n// Use bundler require for local asset so Metro/Expo can resolve it reliably\nconst Icon = require('../../assets/images/icon.png');\n\ntype ProfileTab = 'created' | 'saved' | 'reviews';\n\nexport default function ProfileScreen() {\n  const auth = useAuth();\n  if (!auth) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n        </View>\n      </View>\n    );\n  }\n  const { user, signOut, session } = auth;\n  const { userProfile, updateAccount, isLoading: isAccountLoading } = useAccount();\n  const { dogProfile, isDogProfileLoading } = useDogs();\n  const { trails, savedTrails, isLoading: isTrailsLoading, saveTrailBookmark, removeTrailBookmark, isTrailSaved } = useTrails();\n  const [isLoading, setIsLoading] = React.useState<boolean>(false);\n  const [showEditModal, setShowEditModal] = React.useState<boolean>(false);\n  const [editedName, setEditedName] = React.useState<string>('');\n  const [editedPhoto, setEditedPhoto] = React.useState<string | number>('');\n  const [isSaving, setIsSaving] = React.useState<boolean>(false);\n  const [selectedTab, setSelectedTab] = React.useState<ProfileTab>('created');\n  const [bookmarkAnimations, setBookmarkAnimations] = React.useState<Record<string, Animated.Value>>({});\n  const insets = useSafeAreaInsets();\n  const router = useRouter();\n\n\n  React.useEffect(() => {\n    const defaultName = userProfile?.name || user?.email?.split('@')[0] || '';\n    // Use profile image if available, otherwise use bundled app icon as default\n    const defaultPhoto = userProfile?.image || Icon;\n    setEditedName(defaultName);\n    setEditedPhoto(defaultPhoto);\n  }, [user, userProfile]);\n\n  const totalWalks = trails.length;\n  const totalTime = trails.reduce((acc, trail) => acc + (trail.duration || 0), 0);\n  const totalDistance = trails.reduce((acc, trail) => acc + trail.distance, 0);\n\n  const formatTime = (seconds: number): string => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    if (hours > 0) {\n      return `${hours}.${Math.floor(minutes / 6)}h`;\n    }\n    return `${minutes}m`;\n  };\n\n  const handleTabPress = (tab: ProfileTab) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setSelectedTab(tab);\n  };\n\n  const handleNavigateToTrail = (trailId: string) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.push(`/trail/${trailId}`);\n  };\n\n  const getBookmarkAnimation = (trailId: string) => {\n    if (!bookmarkAnimations[trailId]) {\n      const newAnim = new Animated.Value(1);\n      setBookmarkAnimations(prev => ({ ...prev, [trailId]: newAnim }));\n      return newAnim;\n    }\n    return bookmarkAnimations[trailId];\n  };\n\n  const handleBookmarkPress = async (trailId: string) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    const anim = getBookmarkAnimation(trailId);\n    const isSaved = isTrailSaved(trailId);\n\n    Animated.sequence([\n      Animated.timing(anim, {\n        toValue: 0.6,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.spring(anim, {\n        toValue: 1,\n        friction: 3,\n        tension: 100,\n        useNativeDriver: true,\n      }),\n    ]).start();\n\n    try {\n      if (isSaved) {\n        await removeTrailBookmark(trailId);\n      } else {\n        await saveTrailBookmark(trailId);\n        if (true) {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to toggle bookmark:', error);\n    }\n  };\n\n  const handleSignOut = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n    Alert.alert(\n      'Sign Out',\n      'Are you sure you want to sign out?',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Sign Out',\n          style: 'destructive',\n          onPress: async () => {\n            if (true) {\n              Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n            }\n            setIsLoading(true);\n            try {\n              await signOut();\n            } catch (error: any) {\n              if (true) {\n                Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n              }\n              Alert.alert('Error', error.message || 'Failed to sign out');\n            } finally {\n              setIsLoading(false);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const handleEditDogProfile = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.push('/onboarding/dog-basics');\n  };\n\n  const handleOpenEditModal = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowEditModal(true);\n  };\n\n  const handleCloseEditModal = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setShowEditModal(false);\n    const defaultName = userProfile?.name || user?.email?.split('@')[0] || '';\n    const defaultPhoto = userProfile?.image || Icon;\n    setEditedName(defaultName);\n    setEditedPhoto(defaultPhoto);\n  };\n\n  const handlePickImage = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    \n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'Please allow access to your photo library');\n      return;\n    }\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.8,\n    });\n\n    if (!result.canceled && result.assets[0]) {\n      setEditedPhoto(result.assets[0].uri);\n    }\n  };\n\n  const handleSaveProfile = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    if (!editedName.trim()) {\n      Alert.alert('Error', 'Name cannot be empty');\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      let finalPhoto: string | undefined;\n\n      // If editedPhoto is a string but not a remote URL, upload it to the server first\n      if (typeof editedPhoto === 'string' && editedPhoto && !editedPhoto.startsWith('http')) {\n        if (!session?.accessToken || !user?.id) throw new Error('No active session for upload');\n\n        const form = new FormData();\n\n        // Build file object for RN/Expo fetch\n        const uriParts = editedPhoto.split('/');\n        const fileName = uriParts[uriParts.length - 1] || `photo_${Date.now()}.jpg`;\n        const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n        const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n        const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n\n        // Append file and auxiliary fields to match curl example\n        // @ts-ignore - React Native FormData file\n        form.append('file', { uri: editedPhoto, name: fileName, type: mimeType });\n        form.append('filename', fileName);\n        form.append('dog_id', '');\n        form.append('trail_id', '');\n        form.append('user_id', user.id);\n\n        const uploadResp = await fetch(`${API_URL}/uploads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${session.accessToken}`,\n            'accept': 'application/json',\n            // Do NOT set Content-Type; let fetch set the multipart boundary\n          },\n          body: form as any,\n        });\n\n        if (!uploadResp.ok) {\n          const errText = await uploadResp.text();\n          throw new Error(`Upload failed: ${uploadResp.status} ${errText}`);\n        }\n\n        const uploadData = await uploadResp.json();\n        finalPhoto = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n        if (!finalPhoto) throw new Error('Upload did not return a public URL');\n      } else if (typeof editedPhoto === 'string' && editedPhoto.startsWith('http')) {\n        finalPhoto = editedPhoto;\n      }\n\n      // Update account with name and (if present) the uploaded image URL\n      await updateAccount({\n        name: editedName.trim(),\n        image: finalPhoto,\n      });\n\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n\n      setShowEditModal(false);\n      Alert.alert('Success', 'Profile updated successfully!');\n    } catch (error: any) {\n      console.error('Failed to save profile:', error);\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      Alert.alert('Error', error?.message || 'Failed to update profile');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const getDisplayedTrails = () => {\n    if (selectedTab === 'created') return trails;\n    if (selectedTab === 'saved') return savedTrails;\n    return [];\n  };\n\n  const displayedTrails = getDisplayedTrails();\n\n  return (\n    <View style={styles.container}>\n      <ScrollView style={styles.scrollContainer} contentContainerStyle={[styles.content, { paddingTop: insets.top + 16, paddingBottom: insets.bottom + 20 }]}>\n      <View style={styles.userSection}>\n        <View style={styles.userHeader}>\n          <TouchableOpacity style={styles.userAvatar} onPress={handleOpenEditModal}>\n            {editedPhoto ? (\n              <Image\n                source={editedPhoto}\n                style={styles.userAvatarImage}\n                contentFit=\"cover\"\n                cachePolicy=\"memory-disk\"\n              />\n            ) : (\n              <View style={styles.initialAvatar}>\n                <Text style={styles.initialAvatarText}>{(editedName || userProfile?.name || user?.email || 'A').charAt(0).toUpperCase()}</Text>\n              </View>\n            )}\n          </TouchableOpacity>\n          <View style={styles.userInfo}>\n            <Text style={styles.userName}>{userProfile?.name || editedName || 'Account Holder'}</Text>\n            <View style={styles.userEmailRow}>\n              <Mail size={14} color={theme.accentPrimary} />\n              <Text style={styles.userEmail}>{user?.email || 'Not available'}</Text>\n            </View>\n          </View>\n          <TouchableOpacity\n            style={styles.settingsButton}\n            onPress={() => router.push('/settings')}\n            accessibilityLabel=\"Open settings\"\n          >\n            <LucideTableOfContents size={20} color={theme.accentSecondary} />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {isDogProfileLoading ? (\n        <View style={styles.dogCardContainer}>\n          <View style={styles.loadingDogCard}>\n            <ActivityIndicator size=\"large\" color={theme.accentPrimary} />\n          </View>\n        </View>\n      ) : dogProfile ? (\n        <View style={styles.dogCardContainer}>\n          <TouchableOpacity style={styles.dogCard} onPress={handleEditDogProfile}>\n            <View style={styles.dogPhotoContainer}>\n              {dogProfile.image ? (\n                <Image\n                  source={dogProfile.image}\n                  style={styles.dogPhoto}\n                  contentFit=\"cover\"\n                  cachePolicy=\"memory-disk\"\n                />\n              ) : (\n                <View style={[styles.dogPhoto, styles.dogPhotoPlaceholder]}>\n                  <Dog size={40} color={theme.accentPrimary} />\n                </View>\n              )}\n            </View>\n            \n            <Text style={styles.dogName}>{dogProfile.name}</Text>\n            {dogProfile.nickname && (\n              <Text style={styles.dogNickname}>\n                {dogProfile.nickname}\n              </Text>\n            )}\n            {!dogProfile.nickname && <View style={styles.nicknameSpacing} />}\n\n            <View style={styles.statsRow}>\n              <View style={styles.statItem}>\n                <Text style={styles.statValue}>{totalWalks}</Text>\n                <Text style={styles.statLabel}>Walks</Text>\n              </View>\n              <View style={styles.statItem}>\n                <Text style={styles.statValue}>{formatTime(totalTime)}</Text>\n                <Text style={styles.statLabel}>Total Time</Text>\n              </View>\n              <View style={styles.statItem}>\n                <Text style={styles.statValue}>{formatDistance(totalDistance)}</Text>\n                <Text style={styles.statLabel}>Total Dist.</Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n        </View>\n      ) : (\n        <View style={styles.dogCardContainer}>\n          <View style={styles.noDogCard}>\n            <Dog size={48} color={theme.textMuted} />\n            <Text style={styles.noDogText}>No dog profile yet</Text>\n            <TouchableOpacity\n              style={styles.addDogButton}\n              onPress={handleEditDogProfile}\n            >\n              <Text style={styles.addDogButtonText}>Add Dog Profile</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n\n      <View style={styles.tabsContainer}>\n        <TouchableOpacity\n          style={[styles.tab, selectedTab === 'created' && styles.tabActive]}\n          onPress={() => handleTabPress('created')}\n        >\n          <Text style={[styles.tabCount, selectedTab === 'created' && styles.tabCountActive]}>{trails.length}</Text>\n          <Text style={[styles.tabText, selectedTab === 'created' && styles.tabTextActive]}>Created</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.tab, selectedTab === 'saved' && styles.tabActive]}\n          onPress={() => handleTabPress('saved')}\n        >\n          <Text style={[styles.tabCount, selectedTab === 'saved' && styles.tabCountActive]}>{savedTrails.length}</Text>\n          <Text style={[styles.tabText, selectedTab === 'saved' && styles.tabTextActive]}>Saved</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.tab, selectedTab === 'reviews' && styles.tabActive]}\n          onPress={() => handleTabPress('reviews')}\n        >\n          <Text style={[styles.tabCount, selectedTab === 'reviews' && styles.tabCountActive]}>0</Text>\n          <Text style={[styles.tabText, selectedTab === 'reviews' && styles.tabTextActive]}>Reviews</Text>\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.trailsSection}>\n        {isTrailsLoading ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n          </View>\n        ) : displayedTrails.length > 0 ? (\n          displayedTrails.map((trail) => {\n            const anim = getBookmarkAnimation(trail.id);\n            const isSaved = isTrailSaved(trail.id);\n            return (\n            <TouchableOpacity\n              key={trail.id}\n              style={styles.trailCard}\n              onPress={() => handleNavigateToTrail(trail.id)}\n            >\n              {trail.photo ? (\n                <Image source={{ uri: trail.photo }} style={styles.trailImage} />\n              ) : (\n                <TrailMapPreview\n                  coordinates={trail.coordinates}\n                  path={(trail as any).path}\n                  style={styles.trailImage}\n                  startLatitude={(trail as any).startLatitude}\n                  startLongitude={(trail as any).startLongitude}\n                />\n              )}\n              \n              <LinearGradient\n                colors={['rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0)', 'rgba(0, 0, 0, 0.25)', 'rgba(0, 0, 0, 0.6)']}\n                locations={[0, 0.3, 0.6, 1]}\n                style={styles.trailGradient}\n              />\n              \n              <TouchableOpacity \n                style={styles.bookmarkButton}\n                onPress={(e) => {\n                  e.stopPropagation();\n                  handleBookmarkPress(trail.id);\n                }}\n              >\n                <Animated.View style={{ transform: [{ scale: anim }] }}>\n                  <Bookmark \n                    size={20} \n                    color={isSaved ? \"#000\" : theme.textMuted} \n                    fill={isSaved ? \"#000\" : \"none\"}\n                    strokeWidth={2} \n                  />\n                </Animated.View>\n              </TouchableOpacity>\n              \n              <View style={styles.trailContent}>\n                <Text style={styles.trailName}>\n                  {trail.name || `Trail ${new Date(trail.date).toLocaleDateString()}`}\n                </Text>\n                <Text style={styles.trailLocation}>\n                  {trail.city ? `${trail.city}, ${trail.country || 'Unknown'}` : 'Location unknown'}\n                </Text>\n                <View style={styles.trailBadges}>\n                  {trail.difficulty && (\n                    <View style={styles.trailBadge}>\n                      <BarChart3 size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                      <Text style={styles.trailBadgeText}>{trail.difficulty}</Text>\n                    </View>\n                  )}\n                  <View style={styles.trailBadge}>\n                    <MapPin size={14} color={theme.accentPrimary} strokeWidth={2.5} />\n                    <Text style={styles.trailBadgeText}>{formatDistance(trail.distance)}</Text>\n                  </View>\n                  {trail.rating && (\n                    <View style={styles.trailBadge}>\n                      <Star size={14} color={theme.accentPrimary} fill={theme.accentPrimary} strokeWidth={2} />\n                      <Text style={styles.trailBadgeText}>{trail.rating.toFixed(1)}</Text>\n                    </View>\n                  )}\n                </View>\n              </View>\n            </TouchableOpacity>\n            );\n          })\n        ) : (\n          <View style={styles.emptyContainer}>\n            <MapPin size={48} color={theme.textMuted} />\n            <Text style={styles.emptyText}>\n              {selectedTab === 'created' \n                ? 'No trails created yet'\n                : selectedTab === 'saved'\n                ? 'No trails saved yet'\n                : 'No reviews yet'}\n            </Text>\n          </View>\n        )}\n      </View>\n\n      <TouchableOpacity\n        style={[styles.signOutButton, isLoading && styles.signOutButtonDisabled]}\n        onPress={handleSignOut}\n        disabled={isLoading}\n      >\n        {isLoading ? (\n          <ActivityIndicator color={theme.backgroundPrimary} />\n        ) : (\n          <>\n            <LogOut size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.signOutText}>Sign Out</Text>\n          </>\n        )}\n      </TouchableOpacity>\n\n      <Modal\n        visible={showEditModal}\n        animationType=\"slide\"\n        presentationStyle=\"pageSheet\"\n        onRequestClose={handleCloseEditModal}\n      >\n        <View style={styles.modalContainer}>\n          <View style={[styles.modalHeader, { paddingTop: insets.top + 20 }]}>\n            <Text style={styles.modalTitle}>Edit Profile</Text>\n            <TouchableOpacity\n              style={styles.closeButton}\n              onPress={handleCloseEditModal}\n            >\n              <X size={24} color={theme.backgroundPrimary} />\n            </TouchableOpacity>\n          </View>\n\n          <ScrollView style={styles.modalContent}>\n            <View style={styles.photoSection}>\n              <TouchableOpacity\n                style={styles.photoContainer}\n                onPress={handlePickImage}\n              >\n                {editedPhoto ? (\n                  <Image\n                    source={editedPhoto}\n                    style={styles.editPhoto}\n                    contentFit=\"cover\"\n                    cachePolicy=\"memory-disk\"\n                  />\n                ) : (\n                  <View style={[styles.editPhoto, styles.initialAvatar] }>\n                    <Text style={styles.initialAvatarText}>{(editedName || userProfile?.name || user?.email || 'A').charAt(0).toUpperCase()}</Text>\n                  </View>\n                )}\n                <View style={styles.cameraOverlay}>\n                  <Camera size={24} color={theme.accentPrimary} />\n                </View>\n              </TouchableOpacity>\n              <Text style={styles.photoHint}>Tap to change photo</Text>\n            </View>\n\n            <View style={styles.inputSection}>\n              <Text style={styles.inputLabel}>Name</Text>\n              <TextInput\n                style={styles.input}\n                value={editedName}\n                onChangeText={setEditedName}\n                placeholder=\"Enter your name\"\n                placeholderTextColor={theme.textMuted}\n              />\n            </View>\n\n            <View style={styles.inputSection}>\n              <Text style={styles.inputLabel}>Email</Text>\n              <View style={styles.disabledInput}>\n                <Text style={styles.disabledInputText}>{user?.email}</Text>\n              </View>\n              <Text style={styles.inputHint}>Email cannot be changed</Text>\n            </View>\n          </ScrollView>\n\n          <View style={[styles.modalFooter, { paddingBottom: insets.bottom + 20 }]}>\n            <TouchableOpacity\n              style={[styles.saveButton, isSaving && styles.saveButtonDisabled]}\n              onPress={handleSaveProfile}\n              disabled={isSaving}\n            >\n              {isSaving ? (\n                <ActivityIndicator color={theme.accentPrimary} />\n              ) : (\n                <Text style={styles.saveButtonText}>Save Changes</Text>\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n    </ScrollView>\n    </View>\n  );\n}\n\n// styles are imported from profile.styles.ts\n","import { StyleSheet, Platform } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nexport default StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  webContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundPrimary,\n    padding: 20,\n  },\n  webText: {\n    marginTop: 16,\n    ...Typography.body(theme.textMuted),\n    textAlign: 'center',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundPrimary,\n  },\n  loadingText: {\n    marginTop: 16,\n    ...Typography.body(theme.textMuted),\n  },\n  permissionContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundPrimary,\n    padding: 32,\n  },\n  permissionTitle: {\n    marginTop: 16,\n    ...Typography.h2(theme.textPrimary),\n    textAlign: 'center',\n  },\n  permissionText: {\n    marginTop: 8,\n    ...Typography.body(theme.textMuted),\n    textAlign: 'center',\n  },\n  permissionButton: {\n    marginTop: 24,\n    paddingHorizontal: 32,\n    paddingVertical: 16,\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n  },\n  permissionButtonText: {\n    ...Typography.label(theme.textMuted),\n  },\n  statsContainer: {\n    position: 'absolute',\n    left: 20,\n    right: 20,\n    flexDirection: 'row',\n    gap: 12,\n  },\n  compactRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 12,\n  },\n  compactStats: {\n    flexDirection: 'row',\n    gap: 12,\n    flex: 1,\n  },\n  compactStatBox: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    paddingVertical: 10,\n    paddingHorizontal: 14,\n    alignItems: 'center',\n    minWidth: 110,\n  },\n  stopButtonCompact: {\n    marginLeft: 12,\n    backgroundColor: '#111',\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    borderRadius: 12,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  stopButtonCompactText: {\n    color: '#fff',\n    fontWeight: '700' as const,\n    marginLeft: 6,\n  },\n  statBox: {\n    flex: 1,\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    borderRadius: 16,\n    padding: 16,\n    shadowColor: theme.borderSubtle,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  statLabel: {\n    ...Typography.caption(theme.textMuted),\n    marginBottom: 4,\n  },\n  statValue: {\n    ...Typography.h1(theme.textPrimary),\n  },\n  controlContainer: {\n    position: 'absolute',\n    left: 20,\n    right: 20,\n    alignItems: 'center',\n  },\n  recordButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n    paddingHorizontal: 32,\n    paddingVertical: 20,\n    backgroundColor: theme.accentSecondary,\n    borderRadius: 50,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 12,\n    elevation: 8,\n  },\n  recordButtonActive: {\n    backgroundColor: theme.accentSecondary,\n  },\n  recordButtonText: {\n    ...Typography.button(theme.backgroundPrimary),\n  },\n  bottomSheet: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.backgroundPrimary,\n    borderTopLeftRadius: 24,\n    borderTopRightRadius: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: -4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 16,\n    elevation: 20,\n  },\n  handleBar: {\n    paddingTop: 12,\n    paddingBottom: 8,\n    alignItems: 'center',\n  },\n  handleContainer: {\n    alignItems: 'center',\n    gap: 4,\n  },\n  handle: {\n    width: 40,\n    height: 4,\n    backgroundColor: theme.borderSubtle,\n    borderRadius: 2,\n  },\n  bottomSheetContent: {\n    flex: 1,\n    paddingHorizontal: 20,\n    paddingBottom: Platform.OS === 'ios' ? 100 : 92,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n    marginBottom: 20,\n  },\n  statItem: {\n    width: '31%',\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    padding: 12,\n    alignItems: 'center',\n  },\n  statItemLabel: {\n    ...Typography.caption(theme.textMuted),\n    textTransform: 'uppercase' as const,\n    letterSpacing: 0.5,\n    marginBottom: 6,\n  },\n  statItemValue: {\n    ...Typography.h2(theme.textPrimary),\n  },\n  expandedContent: {\n    marginTop: 8,\n  },\n  divider: {\n    height: 1,\n    backgroundColor: theme.borderSubtle,\n    marginVertical: 16,\n  },\n  optionRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    marginBottom: 12,\n  },\n  optionIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: 'rgba(93, 107, 74, 0.1)',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: 12,\n  },\n  optionTextContainer: {\n    flex: 1,\n  },\n  optionTitle: {\n    ...Typography.body(theme.textPrimary),\n    marginBottom: 2,\n  },\n  optionSubtitle: {\n    ...Typography.caption(theme.textMuted),\n  },\n  optionBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 12,\n    backgroundColor: theme.borderSubtle,\n  },\n  optionBadgeActive: {\n    backgroundColor: 'rgba(93, 107, 74, 0.15)',\n  },\n  optionBadgeText: {\n    ...Typography.caption(theme.textMuted),\n  },\n  optionBadgeTextActive: {\n    color: theme.backgroundPrimary,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.4)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  modalContainer: {\n    width: '100%',\n    maxHeight: '90%',\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    overflow: 'hidden',\n  },\n  modalContent: {\n    padding: 20,\n  },\n  modalTitle: {\n    ...Typography.h2(theme.backgroundPrimary),\n    marginBottom: 12,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#e5e7eb',\n    backgroundColor: '#f9fafb',\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n    borderRadius: 8,\n    marginTop: 8,\n    color: theme.backgroundPrimary,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 10,\n    backgroundColor: '#e5e7eb',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  modalButtonPrimary: {\n    backgroundColor: '#5d6b4a',\n    marginLeft: 8,\n  },\n  modalButtonText: {\n    ...Typography.label('#1f2937'),\n  },\n  recenterButton: {\n    position: 'absolute',\n    top: 60,\n    left: 20,\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.backgroundSecondary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.15,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n});\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { View, StyleSheet, Platform, TouchableOpacity, Alert, ActivityIndicator, Animated, PanResponder, Dimensions, TextInput, Modal, ScrollView } from 'react-native';\nimport { Text } from '@/components';\nimport TrailMap from '@/components/TrailMap';\nimport { Image } from 'expo-image';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Location from 'expo-location';\nimport * as TaskManager from 'expo-task-manager';\nimport * as Haptics from 'expo-haptics';\nimport { useLocalSearchParams, useRouter } from 'expo-router';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Square, Play, MapPin, Watch, Bell, ChevronUp, Navigation, ChevronDown, Upload } from 'lucide-react-native';\nimport styles from './record.styles';\nimport theme from '@/constants/colors';\nimport { useTrails } from '@/context/TrailsContext';\nimport { useAuth } from '@/context/AuthContext';\nimport { Coordinate, Trail } from '@/types/trail';\nimport { formatDistance, calculateTotalDistance, formatDuration } from '@/utils/distance';\n\nconst LOCATION_TRACKING_TASK = 'background-location-task';\n\nif (true) {\n  TaskManager.defineTask(LOCATION_TRACKING_TASK, async ({ data, error }: { data: any; error: any }) => {\n    if (error) {\n      console.error('Background location error:', error);\n      return;\n    }\n    if (data) {\n      const { locations } = data as any;\n      const location = locations[0];\n\n      if (location) {\n        console.log('Background location update:', location.coords);\n\n        try {\n          const coordsStr = await AsyncStorage.getItem('recording_coordinates');\n          const coords = coordsStr ? JSON.parse(coordsStr) : [];\n\n          const newCoord = {\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n          };\n\n          coords.push(newCoord);\n          await AsyncStorage.setItem('recording_coordinates', JSON.stringify(coords));\n\n          if (location.coords.altitude) {\n            const currentElevation = Math.max(0, location.coords.altitude);\n            const maxElevationStr = await AsyncStorage.getItem('recording_max_elevation');\n            const maxElevation = maxElevationStr ? parseFloat(maxElevationStr) : 0;\n\n            if (currentElevation > maxElevation) {\n              await AsyncStorage.setItem('recording_max_elevation', currentElevation.toString());\n            }\n          }\n\n          if (location.coords.speed && location.coords.speed > 0) {\n            const currentSpeed = location.coords.speed * 3.6;\n            const maxSpeedStr = await AsyncStorage.getItem('recording_max_speed');\n            const maxSpeed = maxSpeedStr ? parseFloat(maxSpeedStr) : 0;\n\n            if (currentSpeed > maxSpeed) {\n              await AsyncStorage.setItem('recording_max_speed', currentSpeed.toString());\n            }\n          }\n\n          await AsyncStorage.setItem('recording_last_update', Date.now().toString());\n        } catch (err) {\n          console.error('Error storing location:', err);\n        }\n      }\n    }\n  });\n}\n\nexport default function RecordScreen() {\n  const { saveTrail, getTrailById } = useTrails();\n  const { user } = useAuth();\n  const params = useLocalSearchParams();\n  const router = useRouter();\n  const trailId = typeof params.trailId === 'string' ? params.trailId : undefined;\n  const existingTrail = trailId ? getTrailById(trailId) : undefined;\n  const mapRef = useRef<any>(null);\n\n  const [isRecording, setIsRecording] = useState<boolean>(false);\n  const [coordinates, setCoordinates] = useState<Coordinate[]>([]);\n  const [currentLocation, setCurrentLocation] = useState<Coordinate | null>(null);\n  const [duration, setDuration] = useState<number>(0);\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\n  const [isLoadingPermission, setIsLoadingPermission] = useState<boolean>(true);\n  const [startLocation, setStartLocation] = useState<{ city?: string; country?: string } | null>(null);\n  // geocoding removed  we rely on coordinates only\n\n  const locationSubscription = useRef<Location.LocationSubscription | null>(null);\n  const timerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const bottomSheetHeight = Dimensions.get('window').height * 0.5;\n  // Collapsed bottom sheet height (reduced for a slimmer compact overlay)\n  const collapsedHeight = 40;\n  const navbarHeight = Platform.OS === 'ios' ? 100 : 92;\n  const bottomSheetAnim = useRef(new Animated.Value(collapsedHeight)).current;\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n  const [elevation, setElevation] = useState<number>(0);\n  const [maxElevation, setMaxElevation] = useState<number>(0);\n  const [pace, setPace] = useState<string>('0:00');\n  const [speed, setSpeed] = useState<number>(0);\n  const [maxSpeed, setMaxSpeed] = useState<number>(0);\n  const [showSaveModal, setShowSaveModal] = useState<boolean>(false);\n  const [draftTrail, setDraftTrail] = useState<Partial<Trail> | null>(null);\n  // fields for the save form\n  const [formName, setFormName] = useState<string>('');\n  const [formDescription, setFormDescription] = useState<string>('');\n  const [formPhoto, setFormPhoto] = useState<string | undefined>(undefined);\n  const [formTags, setFormTags] = useState<string[]>([]);\n  const [formDifficulty, setFormDifficulty] = useState<string | undefined>(undefined);\n\n  // Follow-only mode state when viewing an existing trail (via ?trailId=)\n  const [followMode, setFollowMode] = useState<boolean>(!!existingTrail);\n  const [userLocationFollow, setUserLocationFollow] = useState<Coordinate | null>(null);\n  const followLocationRef = useRef<Location.LocationSubscription | null>(null);\n\n  useEffect(() => {\n    if (true) {\n      requestPermissions();\n      loadRecordingState();\n\n      const interval = setInterval(() => {\n        loadRecordingState();\n      }, 1000);\n\n      return () => {\n        clearInterval(interval);\n        if (locationSubscription.current) {\n          locationSubscription.current.remove();\n        }\n        if (timerRef.current) {\n          clearInterval(timerRef.current);\n        }\n      };\n    } else {\n      setIsLoadingPermission(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // If opened with an existing trail, enable follow mode and show the trail coordinates\n  useEffect(() => {\n    if (existingTrail) {\n      setFollowMode(true);\n    }\n  }, [existingTrail]);\n\n  // Start/stop following user location when followMode changes\n  useEffect(() => {\n    let active = true;\n\n    const startFollow = async () => {\n      if (!hasPermission) {\n        const { status } = await Location.requestForegroundPermissionsAsync();\n        if (status !== 'granted') {\n          Alert.alert('Permission required', 'Location permission is required to follow the trail');\n          return;\n        }\n        setHasPermission(true);\n      }\n\n      try {\n        const sub = await Location.watchPositionAsync(\n          {\n            accuracy: Location.Accuracy.Balanced,\n            distanceInterval: 2,\n            timeInterval: 1000,\n          },\n          (loc) => {\n            if (!active) return;\n            const coord = { latitude: loc.coords.latitude, longitude: loc.coords.longitude };\n            setUserLocationFollow(coord);\n            setCurrentLocation(coord);\n          }\n        );\n        followLocationRef.current = sub;\n      } catch (err) {\n        console.error('Follow watchPosition error', err);\n      }\n    };\n\n    if (followMode) {\n      startFollow();\n    } else {\n      if (followLocationRef.current) {\n        followLocationRef.current.remove();\n        followLocationRef.current = null;\n      }\n      setUserLocationFollow(null);\n    }\n\n    return () => {\n      active = false;\n      if (followLocationRef.current) {\n        followLocationRef.current.remove();\n        followLocationRef.current = null;\n      }\n    };\n  }, [followMode, hasPermission]);\n\n  const loadRecordingState = async () => {\n    try {\n      const coordsStr = await AsyncStorage.getItem('recording_coordinates');\n      if (coordsStr) {\n        const coords = JSON.parse(coordsStr);\n        setCoordinates(coords);\n      }\n\n      const maxElevationStr = await AsyncStorage.getItem('recording_max_elevation');\n      if (maxElevationStr) {\n        setMaxElevation(parseFloat(maxElevationStr));\n      }\n\n      const maxSpeedStr = await AsyncStorage.getItem('recording_max_speed');\n      if (maxSpeedStr) {\n        setMaxSpeed(parseFloat(maxSpeedStr));\n      }\n\n      if (isRecording) {\n        const startTimeStr = await AsyncStorage.getItem('recording_start_time');\n        if (startTimeStr) {\n          const startTime = parseInt(startTimeStr);\n          const elapsed = Math.floor((Date.now() - startTime) / 1000);\n          setDuration(elapsed);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading recording state:', error);\n    }\n  };\n\n  const requestPermissions = async () => {\n    try {\n      console.log('Requesting location permissions...');\n\n      const { status: foregroundStatus } = await Location.requestForegroundPermissionsAsync();\n      console.log('Foreground permission status:', foregroundStatus);\n\n      if (foregroundStatus === 'granted') {\n        try {\n          const { status: backgroundStatus } = await Location.requestBackgroundPermissionsAsync();\n          console.log('Background permission status:', backgroundStatus);\n\n          if (backgroundStatus !== 'granted') {\n            Alert.alert(\n              'Background Location Required',\n              'To continue recording your trail when the screen is locked, please enable \"Allow all the time\" in location settings.',\n              [{ text: 'OK' }]\n            );\n          }\n        } catch (bgError: any) {\n          console.warn('Background permission error (non-critical):', bgError.message);\n        }\n\n        setHasPermission(true);\n\n        try {\n          const location = await Location.getCurrentPositionAsync({\n            accuracy: Location.Accuracy.Balanced,\n          });\n          const coord = {\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n          };\n          setCurrentLocation(coord);\n          console.log('Initial location:', coord);\n        } catch (locError: any) {\n          console.warn('Error getting initial location:', locError.message);\n        }\n      } else {\n        setHasPermission(false);\n        Alert.alert(\n          'Permission Required',\n          'Location permission is required to track your walks.',\n          [{ text: 'OK' }]\n        );\n      }\n    } catch (error: any) {\n      console.error('Permission error:', error);\n      const errorMessage = error.message || 'Failed to get location permission';\n\n      if (errorMessage.includes('NSLocation') || errorMessage.includes('Info.plist')) {\n        Alert.alert(\n          'Configuration Error',\n          'This app needs to be built with a custom development build to use location tracking. Expo Go doesn\\'t support background location tracking.\\n\\nPlease contact support or build a custom development client.',\n          [{ text: 'OK' }]\n        );\n      } else {\n        Alert.alert('Error', errorMessage);\n      }\n\n      setHasPermission(false);\n    } finally {\n      setIsLoadingPermission(false);\n    }\n  };\n\n  // removed getReverseGeocode to avoid geocoding rate limits; we don't need city/country\n\n  const startRecording = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n    }\n    console.log('Starting recording...');\n    setIsRecording(true);\n    setCoordinates([]);\n    setDuration(0);\n    setMaxElevation(0);\n    setMaxSpeed(0);\n\n    try {\n      const startTime = Date.now();\n      await AsyncStorage.setItem('recording_start_time', startTime.toString());\n      await AsyncStorage.removeItem('recording_coordinates');\n      await AsyncStorage.removeItem('recording_max_elevation');\n      await AsyncStorage.removeItem('recording_max_speed');\n      await AsyncStorage.removeItem('recording_last_update');\n\n      const location = await Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.Balanced,\n      });\n\n      // do not perform reverse geocoding  only keep coordinates\n      setStartLocation(null);\n\n      const initialCoord = {\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude,\n      };\n      await AsyncStorage.setItem('recording_coordinates', JSON.stringify([initialCoord]));\n      setCoordinates([initialCoord]);\n      setCurrentLocation(initialCoord);\n\n      try {\n        await Location.startLocationUpdatesAsync(LOCATION_TRACKING_TASK, {\n          accuracy: Location.Accuracy.BestForNavigation,\n          distanceInterval: 3,\n          timeInterval: 1000,\n          foregroundService: {\n            notificationTitle: 'Recording Trail',\n            notificationBody: 'TailTrails is tracking your walk',\n            notificationColor: '#2563eb',\n          },\n          pausesUpdatesAutomatically: false,\n          showsBackgroundLocationIndicator: true,\n        });\n        console.log('Background location tracking started successfully');\n      } catch (bgLocationError: any) {\n        console.warn('Background location not available:', bgLocationError.message);\n        if (bgLocationError.message?.includes('Background location') || bgLocationError.message?.includes('UIBackgroundModes')) {\n          Alert.alert(\n            'Background Tracking Unavailable',\n            'Background location tracking requires a custom development build. The app will continue recording in foreground mode only. Please keep the app open while recording.',\n            [{ text: 'OK' }]\n          );\n        }\n      }\n\n      locationSubscription.current = await Location.watchPositionAsync(\n        {\n          accuracy: Location.Accuracy.BestForNavigation,\n          distanceInterval: 3,\n          timeInterval: 1000,\n        },\n        async (location) => {\n          const coord = {\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n          };\n          console.log('Foreground position update:', coord, 'Accuracy:', location.coords.accuracy);\n          setCurrentLocation(coord);\n\n          setCoordinates(prev => {\n            const newCoords = [...prev, coord];\n            console.log('Total coordinates:', newCoords.length, 'Distance:', calculateTotalDistance(newCoords), 'm');\n            AsyncStorage.setItem('recording_coordinates', JSON.stringify(newCoords)).catch(err => {\n              console.error('Error saving coordinates:', err);\n            });\n            return newCoords;\n          });\n\n          if (location.coords.altitude) {\n            const currentElevation = Math.max(0, location.coords.altitude);\n            setElevation(currentElevation);\n            if (currentElevation > maxElevation) {\n              setMaxElevation(currentElevation);\n              await AsyncStorage.setItem('recording_max_elevation', currentElevation.toString());\n            }\n          }\n\n          if (location.coords.speed && location.coords.speed > 0) {\n            const currentSpeed = location.coords.speed * 3.6;\n            setSpeed(currentSpeed);\n            if (currentSpeed > maxSpeed) {\n              setMaxSpeed(currentSpeed);\n              await AsyncStorage.setItem('recording_max_speed', currentSpeed.toString());\n            }\n          }\n        }\n      );\n\n      timerRef.current = setInterval(async () => {\n        try {\n          const startTimeStr = await AsyncStorage.getItem('recording_start_time');\n          if (startTimeStr) {\n            const startTime = parseInt(startTimeStr);\n            const elapsed = Math.floor((Date.now() - startTime) / 1000);\n            setDuration(elapsed);\n          }\n        } catch (error) {\n          console.error('Error calculating duration:', error);\n        }\n      }, 1000);\n    } catch (error: any) {\n      console.error('Recording error:', error);\n      let errorMessage = 'Failed to start recording. Please try again.';\n\n      if (error.message?.includes('rate limit')) {\n        errorMessage = 'Please wait a moment before starting a new recording. Location service is temporarily limited.';\n      } else if (error.message?.includes('Background location') || error.message?.includes('UIBackgroundModes')) {\n        errorMessage = 'Background location tracking requires a custom development build. Please build the app with EAS or use foreground-only mode.';\n      }\n\n      Alert.alert('Error', errorMessage);\n      setIsRecording(false);\n    }\n  };\n\n  useEffect(() => {\n    if (duration > 0) {\n      const distance = calculateTotalDistance(coordinates);\n      const distanceKm = distance / 1000;\n      const durationMin = duration / 60;\n\n      if (distanceKm > 0) {\n        const paceMinPerKm = durationMin / distanceKm;\n        const minutes = Math.floor(paceMinPerKm);\n        const seconds = Math.round((paceMinPerKm - minutes) * 60);\n        setPace(`${minutes}:${seconds.toString().padStart(2, '0')}`);\n      }\n    }\n  }, [duration, coordinates]);\n\n  const initialHeight = useRef<number>(0);\n\n  const panResponder = useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: (_, gestureState) => {\n        return Math.abs(gestureState.dy) > 5;\n      },\n      onPanResponderGrant: () => {\n        initialHeight.current = (bottomSheetAnim as any)._value;\n      },\n      onPanResponderMove: (_, gestureState) => {\n        const newValue = initialHeight.current - gestureState.dy;\n\n        if (newValue >= collapsedHeight && newValue <= bottomSheetHeight) {\n          bottomSheetAnim.setValue(newValue);\n        }\n      },\n      onPanResponderRelease: (_, gestureState) => {\n        if (true) {\n          Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n        }\n\n        const threshold = (bottomSheetHeight + collapsedHeight) / 2;\n        const currentValue = (bottomSheetAnim as any)._value;\n\n        if (gestureState.dy < -50) {\n          expandBottomSheet();\n        } else if (gestureState.dy > 50) {\n          collapseBottomSheet();\n        } else if (currentValue > threshold) {\n          expandBottomSheet();\n        } else {\n          collapseBottomSheet();\n        }\n      },\n    })\n  ).current;\n\n  const expandBottomSheet = () => {\n    setIsExpanded(true);\n    Animated.spring(bottomSheetAnim, {\n      toValue: bottomSheetHeight,\n      useNativeDriver: false,\n      tension: 50,\n      friction: 8,\n    }).start();\n  };\n\n  const collapseBottomSheet = () => {\n    setIsExpanded(false);\n    Animated.spring(bottomSheetAnim, {\n      toValue: collapsedHeight,\n      useNativeDriver: false,\n      tension: 50,\n      friction: 8,\n    }).start();\n  };\n\n  const toggleBottomSheet = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    if (isExpanded) {\n      collapseBottomSheet();\n    } else {\n      expandBottomSheet();\n    }\n  };\n\n  const stopRecording = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n    }\n    console.log('Stopping recording...');\n\n    try {\n      const hasTask = await TaskManager.isTaskRegisteredAsync(LOCATION_TRACKING_TASK);\n      if (hasTask) {\n        await Location.stopLocationUpdatesAsync(LOCATION_TRACKING_TASK);\n      }\n    } catch (error) {\n      console.error('Error stopping background location:', error);\n    }\n\n    if (locationSubscription.current) {\n      locationSubscription.current.remove();\n      locationSubscription.current = null;\n    }\n\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n\n    const coordsStr = await AsyncStorage.getItem('recording_coordinates');\n    const finalCoords = coordsStr ? JSON.parse(coordsStr) : coordinates;\n\n    const maxElevationStr = await AsyncStorage.getItem('recording_max_elevation');\n    const finalMaxElevation = maxElevationStr ? parseFloat(maxElevationStr) : maxElevation;\n\n    const maxSpeedStr = await AsyncStorage.getItem('recording_max_speed');\n    const finalMaxSpeed = maxSpeedStr ? parseFloat(maxSpeedStr) : maxSpeed;\n\n    const startTimeStr = await AsyncStorage.getItem('recording_start_time');\n    const finalDuration = startTimeStr ? Math.floor((Date.now() - parseInt(startTimeStr)) / 1000) : duration;\n\n    if (finalCoords.length < 2) {\n      Alert.alert('No Trail Data', 'Not enough data to save this trail. Try walking a bit more!');\n      setIsRecording(false);\n      setCoordinates([]);\n      setDuration(0);\n      await AsyncStorage.removeItem('recording_coordinates');\n      await AsyncStorage.removeItem('recording_max_elevation');\n      await AsyncStorage.removeItem('recording_max_speed');\n      await AsyncStorage.removeItem('recording_start_time');\n      await AsyncStorage.removeItem('recording_last_update');\n      return;\n    }\n\n    const distance = calculateTotalDistance(finalCoords);\n\n    const distanceKm = distance / 1000;\n    const durationMin = finalDuration / 60;\n    let finalPace = '0:00';\n    if (distanceKm > 0) {\n      const paceMinPerKm = durationMin / distanceKm;\n      const minutes = Math.floor(paceMinPerKm);\n      const seconds = Math.round((paceMinPerKm - minutes) * 60);\n      finalPace = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n    }\n\n    const trail: Trail = {\n      id: Date.now().toString(),\n      date: Date.now(),\n      distance,\n      duration: finalDuration,\n      coordinates: finalCoords,\n      city: startLocation?.city,\n      country: startLocation?.country,\n      pace: finalPace,\n      speed: finalMaxSpeed,\n      maxElevation: finalMaxElevation,\n    };\n    // Instead of POSTing immediately, open save modal with draft data\n    setDraftTrail(trail);\n    setFormName(trail.name || '');\n    setFormDescription((trail as any).description || '');\n    setFormPhoto((trail as any).photo || undefined);\n    setFormTags((trail as any).tags || []);\n    setFormDifficulty((trail as any).difficulty || undefined);\n    setShowSaveModal(true);\n    return;\n  };\n\n  const submitSave = async () => {\n    if (!draftTrail) return;\n    const toSave: Trail = {\n      ...(draftTrail as Trail),\n      name: formName || (draftTrail as any).name || 'Untitled Trail',\n      description: formDescription,\n      photo: formPhoto,\n      tags: formTags,\n      difficulty: formDifficulty,\n    };\n\n    try {\n      const saved = await saveTrail(toSave);\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n      setShowSaveModal(false);\n      setDraftTrail(null);\n      setIsRecording(false);\n      setCoordinates([]);\n      setDuration(0);\n      setStartLocation(null);\n      setElevation(0);\n      setMaxElevation(0);\n      setPace('0:00');\n      setSpeed(0);\n      setMaxSpeed(0);\n\n      await AsyncStorage.removeItem('recording_coordinates');\n      await AsyncStorage.removeItem('recording_max_elevation');\n      await AsyncStorage.removeItem('recording_max_speed');\n      await AsyncStorage.removeItem('recording_start_time');\n      await AsyncStorage.removeItem('recording_last_update');\n      // Redirect to profile tab after saving\n      router.push('/(tabs)/profile');\n    } catch (err) {\n      console.error('Save failed', err);\n      Alert.alert('Error', 'Failed to save trail');\n    }\n  };\n\n  const pickImage = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'Please allow access to your photo library');\n      return;\n    }\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsEditing: true,\n      aspect: [16, 9],\n      quality: 0.8,\n    });\n\n    if (!result.canceled && result.assets[0]) {\n      setFormPhoto(result.assets[0].uri);\n    }\n  };\n\n  const cancelSave = () => {\n    setShowSaveModal(false);\n    setDraftTrail(null);\n  };\n\n\n  if (isLoadingPermission && true) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n        <Text style={styles.loadingText}>Checking permissions...</Text>\n      </View>\n    );\n  }\n\n  if (!hasPermission) {\n    return (\n      <View style={styles.permissionContainer}>\n        <MapPin size={64} color=\"#666\" />\n        <Text style={styles.permissionTitle}>Location Permission Required</Text>\n        <Text style={styles.permissionText}>\n          This app needs access to your location to track your dog walks.\n        </Text>\n        <TouchableOpacity\n          style={styles.permissionButton}\n          onPress={() => {\n            if (true) {\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n            }\n            requestPermissions();\n          }}\n        >\n          <Text style={styles.permissionButtonText}>Grant Permission</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  const distance = calculateTotalDistance(coordinates);\n\n  const progress = existingTrail && isRecording && coordinates.length > 0 && existingTrail.coordinates.length > 0\n    ? Math.min((distance / existingTrail.distance) * 100, 100)\n    : 0;\n\n  const showProgress = !!existingTrail;\n\n  const recenterMap = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    if (mapRef.current) {\n      try {\n        const location = await Location.getCurrentPositionAsync({\n          accuracy: Location.Accuracy.Balanced,\n        });\n        const coord = {\n          latitude: location.coords.latitude,\n          longitude: location.coords.longitude,\n        };\n        setCurrentLocation(coord);\n        mapRef.current.animateToRegion({\n          latitude: coord.latitude,\n          longitude: coord.longitude,\n          latitudeDelta: 0.01,\n          longitudeDelta: 0.01,\n        }, 500);\n      } catch (error) {\n        console.error('Error getting current location:', error);\n        if (currentLocation) {\n          mapRef.current.animateToRegion({\n            latitude: currentLocation.latitude,\n            longitude: currentLocation.longitude,\n            latitudeDelta: 0.01,\n            longitudeDelta: 0.01,\n          }, 500);\n        }\n      }\n    }\n  };\n\n  // adjust bottom sheet content padding when collapsed so compact stats aren't pushed out\n  const contentPaddingBottom = isExpanded ? navbarHeight : 12;\n\n  return (\n    <View style={styles.container}>\n      {currentLocation && (\n        <TrailMap\n          ref={mapRef}\n          coordinates={existingTrail && !isRecording ? existingTrail.coordinates : coordinates}\n          style={styles.map}\n          initialRegion={{\n            latitude: currentLocation.latitude,\n            longitude: currentLocation.longitude,\n            latitudeDelta: 0.01,\n            longitudeDelta: 0.01,\n          }}\n          userLocation={userLocationFollow ?? currentLocation}\n          showsUserLocation\n          followsUserLocation={followMode || isRecording}\n          showsMyLocationButton={false}\n        />\n      )}\n\n      <TouchableOpacity\n        style={styles.recenterButton}\n        onPress={recenterMap}\n        activeOpacity={0.8}\n      >\n        <Navigation size={24} color={theme.accentPrimary} />\n      </TouchableOpacity>\n\n      <Animated.View\n        style={[\n          styles.bottomSheet,\n          {\n            height: Animated.add(bottomSheetAnim, navbarHeight),\n            bottom: 0,\n          },\n        ]}\n      >\n        <View {...panResponder.panHandlers} style={styles.handleBar}>\n          <TouchableOpacity\n            style={styles.handleContainer}\n            onPress={toggleBottomSheet}\n            activeOpacity={0.7}\n          >\n            <View style={styles.handle} />\n            {isExpanded ? (\n              <ChevronDown size={20} color=\"#9ca3af\" />\n            ) : (\n              <ChevronUp size={20} color=\"#9ca3af\" />\n            )}\n          </TouchableOpacity>\n        </View>\n\n        <View style={[styles.bottomSheetContent, { paddingBottom: contentPaddingBottom }] }>\n          {/* Overlay states:\n              - not recording: show only the large Start Trail button\n              - recording & collapsed: show compact time/distance + stop button\n              - recording & expanded: show full stats grid + stop button\n          */}\n          {!isRecording ? null : !isExpanded ? (\n            <View style={styles.compactRow}>\n              <View style={styles.compactStats}>\n                <View style={styles.compactStatBox}>\n                  <Text style={styles.statItemLabel}>Time</Text>\n                  <Text style={styles.statItemValue}>{formatDuration(duration)}</Text>\n                </View>\n                <View style={styles.compactStatBox}>\n                  <Text style={styles.statItemLabel}>Distance</Text>\n                  <Text style={styles.statItemValue}>{formatDistance(distance)}</Text>\n                </View>\n              </View>\n              <TouchableOpacity style={styles.stopButtonCompact} onPress={stopRecording} activeOpacity={0.8}>\n                <Square size={18} color=\"#fff\" fill=\"#fff\" />\n                <Text style={styles.stopButtonCompactText}>Stop</Text>\n              </TouchableOpacity>\n            </View>\n          ) : (\n            <View style={styles.statsGrid}>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Time</Text>\n              <Text style={styles.statItemValue}>{formatDuration(duration)}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Distance</Text>\n              <Text style={styles.statItemValue}>{formatDistance(distance)}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Elevation</Text>\n              <Text style={styles.statItemValue}>{elevation.toFixed(0)}m</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Pace</Text>\n              <Text style={styles.statItemValue}>{pace}/km</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Text style={styles.statItemLabel}>Speed</Text>\n              <Text style={styles.statItemValue}>{speed.toFixed(1)} km/h</Text>\n            </View>\n            {showProgress && (\n              <View style={styles.statItem}>\n                <Text style={styles.statItemLabel}>Progress</Text>\n                <Text style={styles.statItemValue}>{progress.toFixed(0)}%</Text>\n              </View>\n            )}\n            </View>\n          )}\n\n          {/* Primary control area */}\n          {!isRecording ? (\n            <View style={styles.controlContainer}>\n              {existingTrail ? (\n                // Viewing an existing trail: show a simple close/back control\n                <TouchableOpacity\n                  style={styles.recordButton}\n                  onPress={() => {\n                    if (followLocationRef.current) {\n                      followLocationRef.current.remove();\n                      followLocationRef.current = null;\n                    }\n                    setFollowMode(false);\n                    router.back();\n                  }}\n                  activeOpacity={0.8}\n                >\n                  <Text style={styles.recordButtonText}>Close</Text>\n                </TouchableOpacity>\n              ) : (\n                <TouchableOpacity\n                  style={styles.recordButton}\n                  onPress={startRecording}\n                  activeOpacity={0.8}\n                >\n                  <Play size={24} color={theme.backgroundPrimary} fill={theme.backgroundPrimary} />\n                  <Text style={styles.recordButtonText}>Start Trail</Text>\n                </TouchableOpacity>\n              )}\n            </View>\n          ) : isExpanded ? (\n            <View style={styles.controlContainer}>\n              <TouchableOpacity\n                style={styles.recordButton}\n                onPress={stopRecording}\n                activeOpacity={0.8}\n              >\n                <Square size={20} color={theme.backgroundPrimary} fill={theme.backgroundPrimary} />\n                <Text style={styles.recordButtonText}>Stop & Save</Text>\n              </TouchableOpacity>\n            </View>\n          ) : null}\n        </View>\n      </Animated.View>\n      <Modal\n        visible={showSaveModal}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={cancelSave}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContainer}>\n            <ScrollView contentContainerStyle={styles.modalContent}>\n              <Text style={styles.modalTitle}>Save Trail</Text>\n              <TextInput\n                placeholder=\"Trail name\"\n                value={formName}\n                onChangeText={setFormName}\n                style={styles.input}\n                placeholderTextColor={theme.backgroundPrimary}\n              />\n              <TextInput\n                placeholder=\"Description\"\n                value={formDescription}\n                onChangeText={setFormDescription}\n                style={[styles.input, { height: 100 }]}\n                placeholderTextColor={theme.backgroundPrimary}\n                multiline\n              />\n              <TouchableOpacity onPress={pickImage} style={[styles.input, { padding: 12, justifyContent: 'center', alignItems: 'center', flexDirection: 'row' }]}>\n                {formPhoto ? (\n                  <>\n                    <Image source={{ uri: formPhoto }} style={{ width: 80, height: 60, borderRadius: 8, marginRight: 12 }} />\n                    <Text style={{ flex: 1 }}>{formName || 'Selected image'}</Text>\n                    <Upload size={18} color={theme.backgroundPrimary} />\n                  </>\n                ) : (\n                  <>\n                    <Upload size={18} color={theme.backgroundPrimary} />\n                    <Text style={{ marginLeft: 8, color: theme.backgroundPrimary }}>Add Photo (optional)</Text>\n                  </>\n                )}\n              </TouchableOpacity>\n\n              <View style={{ flexDirection: 'row', gap: 8, marginTop: 8 }}>\n                <TouchableOpacity style={styles.modalButton} onPress={cancelSave}>\n                  <Text style={styles.modalButtonText}>Cancel</Text>\n                </TouchableOpacity>\n                <TouchableOpacity style={[styles.modalButton, styles.modalButtonPrimary]} onPress={submitSave}>\n                  <Text style={[styles.modalButtonText, { color: '#fff' }]}>Save Trail</Text>\n                </TouchableOpacity>\n              </View>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\n// styles are imported from record.styles.ts\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nexport default StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  header: {\n    height: 64,\n    paddingHorizontal: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderBottomWidth: 0,\n  },\n  backButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  title: {\n    ...Typography.h2(theme.accentPrimary),\n  },\n  content: {\n    padding: 16,\n    gap: 16,\n  },\n  sectionCard: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 16,\n    padding: 18,\n    shadowColor: theme.borderSubtle,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.06,\n    shadowRadius: 12,\n    elevation: 3,\n  },\n  sectionTitle: {\n    ...Typography.h2(theme.accentPrimary),\n    marginBottom: 12,\n  },\n  row: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: 'rgba(255,255,255,0.02)',\n  },\n  rowText: {\n    ...Typography.label(theme.accentPrimary),\n    flex: 1,\n  },\n  logoutCard: {\n    backgroundColor: theme.backgroundSecondary,\n    borderRadius: 12,\n    padding: 16,\n    marginTop: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  logoutText: {\n    ...Typography.label(theme.accentPrimary),\n  },\n});\n","import React, { useState } from 'react';\nimport { View, ScrollView, TouchableOpacity, Alert, StyleSheet } from 'react-native';\nimport { Text } from '@/components';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { ArrowLeft, ChevronRight } from 'lucide-react-native';\nimport { useRouter } from 'expo-router';\nimport styles from './settings.styles';\nimport theme from '@/constants/colors';\nimport { useAuth } from '@/context/AuthContext';\nimport LottieLoader from '@/components/LottieLoader';\n\nexport default function SettingsScreen() {\n  const insets = useSafeAreaInsets();\n  const router = useRouter();\n  const auth = useAuth();\n  const [showLoader, setShowLoader] = useState(false);\n\n  const handleRow = (label: string, path?: string) => {\n    if (path) {\n      router.push(path as any);\n      return;\n    }\n    Alert.alert(label);\n  };\n\n  const handleLogout = async () => {\n    try {\n      if (auth?.signOut) {\n        await auth.signOut();\n      }\n    } catch (err) {\n      console.error('Logout failed', err);\n      Alert.alert('Error', 'Failed to logout');\n    }\n  };\n\n  return (\n    <View style={[styles.container, { paddingTop: insets.top }]}>\n      <View style={styles.header}>\n        <TouchableOpacity style={styles.backButton} onPress={() => router.push('/profile')}>\n          <ArrowLeft size={20} color={theme.accentPrimary} />\n        </TouchableOpacity>\n        <Text style={styles.title}>Settings</Text>\n        <View style={{ width: 40 }} />\n      </View>\n\n      <ScrollView contentContainerStyle={styles.content}>\n        <View style={styles.sectionCard}>\n          <Text style={styles.sectionTitle}>Your Account</Text>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Account Information', '/settings/account')}>\n            <Text style={styles.rowText}>Account Information</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Privacy and Safety', '/settings/privacy')}>\n            <Text style={styles.rowText}>Privacy and Safety</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Change your password', '/settings/password')}>\n            <Text style={styles.rowText}>Change your password</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.sectionCard}>\n          <Text style={styles.sectionTitle}>Dog Profile</Text>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Dog Information', '/settings/dog-info')}>\n            <Text style={styles.rowText}>Dog Information</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.row} onPress={() => handleRow('Edit Tags', '/settings/dog-tags')}>\n            <Text style={styles.rowText}>Edit Tags</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.sectionCard}>\n          <Text style={styles.sectionTitle}>Debug</Text>\n          <TouchableOpacity style={styles.row} onPress={() => setShowLoader(true)}>\n            <Text style={styles.rowText}>Show Lottie Loader</Text>\n            <ChevronRight size={18} color={theme.accentPrimary} />\n          </TouchableOpacity>\n        </View>\n\n        <TouchableOpacity style={styles.logoutCard} onPress={handleLogout}>\n          <Text style={styles.logoutText}>Logout</Text>\n          <ChevronRight size={18} color={theme.accentPrimary} />\n        </TouchableOpacity>\n      </ScrollView>\n\n      {showLoader && (\n        <View style={overlayStyles.overlay}>\n          <View style={overlayStyles.container}>\n            <LottieLoader size={220} />\n            <TouchableOpacity style={overlayStyles.close} onPress={() => setShowLoader(false)}>\n              <Text style={overlayStyles.closeText}>Close</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst overlayStyles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 999,\n  },\n  container: {\n    backgroundColor: 'white',\n    borderRadius: 12,\n    padding: 16,\n    alignItems: 'center',\n  },\n  close: {\n    marginTop: 12,\n    paddingHorizontal: 14,\n    paddingVertical: 8,\n    borderRadius: 8,\n    backgroundColor: '#e5e7eb',\n  },\n  closeText: {\n    color: '#111827',\n    fontWeight: '600',\n  },\n});\n","import { Link, Stack } from \"expo-router\";\nimport React from 'react';\nimport { View, StyleSheet } from \"react-native\";\nimport { Text } from '@/components';\nimport { Typography } from '@/constants/typography';\n\nexport default function NotFoundScreen() {\n  return (\n    <>\n      <Stack.Screen options={{ title: \"Oops!\" }} />\n      <View style={styles.container}>\n        <Text style={styles.title}>This screen doesn&apos;t exist.</Text>\n\n        <Link href=\"/\" asChild style={styles.link}>\n          <Text style={styles.linkText}>Go to home screen!</Text>\n        </Link>\n      </View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 20,\n  },\n  title: {\n    ...Typography.h2('#000'),\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    ...Typography.label('#2e78b7'),\n  },\n});\n","import { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { useRouter, Stack, useSegments } from \"expo-router\";\nimport * as SplashScreen from \"expo-splash-screen\";\nimport React, { useEffect } from \"react\";\nimport { View, StyleSheet } from \"react-native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { AuthContext, useAuth } from '@/context/AuthContext';\nimport { AccountContext } from '@/context/AccountContext';\nimport { TrailsContext } from '@/context/TrailsContext';\nimport { DogsContext, useDogs } from '@/context/DogsContext';\nimport LottieLoader from '@/components/LottieLoader';\n\n// Prevent the splash screen from auto-hiding before asset loading is complete.\nSplashScreen.preventAutoHideAsync();\n\nconst queryClient = new QueryClient();\n\nfunction RootLayoutNav() {\n  const { isAuthenticated, isLoading } = useAuth();\n  const { hasDogProfile, isDogProfileLoading } = useDogs();\n  const segments = useSegments();\n  const router = useRouter();\n\n  useEffect(() => {\n    // Wait until auth and dog profile loading are settled before making navigation decisions.\n    if (isLoading) return;\n\n    // If dog profiles are still loading, don't redirect yet. We only redirect when loading is finished\n    // to avoid jumping to onboarding before data arrives.\n    if (isDogProfileLoading) {\n      console.log('Navigation: waiting for dog profiles to finish loading');\n      return;\n    }\n\n    const inAuthGroup = segments[0] === '(tabs)';\n    const inLoginOrSignup = segments[0] === 'login' || segments[0] === 'signup';\n    const inOnboarding = segments[0] === 'onboarding';\n    \n    console.log('Navigation check:', { isAuthenticated, hasDogProfile, segments: segments[0] });\n\n    if (!isAuthenticated && (inAuthGroup || inOnboarding)) {\n      console.log('Redirecting to login: user not authenticated');\n      router.replace('/login');\n    } else if (isAuthenticated && !hasDogProfile && !inOnboarding) {\n      // Only redirect to onboarding after we've confirmed there are no dog profiles.\n      console.log('Redirecting to onboarding: no dog profile');\n      router.replace('/onboarding/dog-basics');\n    } else if (isAuthenticated && hasDogProfile && inLoginOrSignup) {\n      console.log('Redirecting to explore: user authenticated with dog profile');\n      router.replace('/(tabs)/explore');\n    }\n  }, [isAuthenticated, hasDogProfile, segments, isLoading, isDogProfileLoading, router]);\n\n  if (isLoading) {\n    return <LottieLoader />;\n  }\n\n  return (\n    <Stack screenOptions={{ headerBackTitle: \"Back\" }}>\n      <Stack.Screen name=\"login\" options={{ headerShown: false }} />\n      <Stack.Screen name=\"signup\" options={{ headerShown: false }} />\n      <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n      <Stack.Screen name=\"trail/[id]\" options={{ headerShown: false }} />\n    </Stack>\n  );\n}\n\nexport default function RootLayout() {\n  useEffect(() => {\n    SplashScreen.hideAsync();\n  }, []);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthContext>\n        <AccountContext>\n          <DogsContext>\n            <TrailsContext>\n              <GestureHandlerRootView style={styles.container}>\n                <RootLayoutNav />\n              </GestureHandlerRootView>\n            </TrailsContext>\n          </DogsContext>\n        </AccountContext>\n      </AuthContext>\n    </QueryClientProvider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n});\n","import { StyleSheet, Platform } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  content: {\n    flex: 1,\n    padding: 24,\n    justifyContent: 'center',\n  },\n  header: {\n    alignItems: 'center',\n    marginBottom: 48,\n  },\n  logo: {\n    width: 100,\n    height: 100,\n  },\n  title: {\n    ...Typography.h2(theme.textPrimary),\n    marginTop: 16,\n    textAlign: 'center',\n    paddingHorizontal: 8,\n  },\n  subtitle: {\n    ...Typography.body(theme.textMuted),\n    marginTop: 8,\n    textAlign: 'center',\n    // Subtle buffer for multi-line text\n    paddingHorizontal: Platform.OS === 'android' ? 8 : 0,\n  },\n  form: {\n    width: '100%',\n  },\n  inputContainer: {\n    marginBottom: 20,\n  },\n  label: {\n    ...Typography.label(theme.textMuted),\n    marginBottom: 8,\n    paddingHorizontal: Platform.OS === 'android' ? 4 : 0,\n  },\n  input: {\n    backgroundColor: theme.backgroundPrimary,\n    borderWidth: 1,\n    borderColor: theme.borderSubtle,\n    borderRadius: 12,\n    padding: 16,\n    color: theme.textPrimary,\n    fontSize: 16,\n    // Fix for text getting cut off inside the input field itself on Android\n    ...Platform.select({\n      android: {\n        includeFontPadding: true,\n        textAlignVertical: 'center',\n        minHeight: 56, // Ensure enough vertical space\n        paddingVertical: 12,\n        paddingHorizontal: 16,\n        paddingRight: 20, \n      },\n      ios: {\n        paddingRight: 16,\n      },\n    }),\n  },\n  helperText: {\n    ...Typography.caption(theme.textMuted),\n    marginTop: 8,\n    paddingRight: Platform.OS === 'android' ? 4 : 0,\n  },\n  button: {\n    backgroundColor: theme.accentSecondary,\n    borderRadius: 12,\n    paddingVertical: 18, // Slightly taller buttons for better text fit\n    paddingHorizontal: 16,\n    alignItems: 'center',\n    marginTop: 12,\n    // Ensure the button container doesn't clip its own text\n    overflow: 'visible', \n    minHeight: 56, // Standard accessible button height\n  },\n  buttonDisabled: {\n    opacity: 0.6,\n  },\n  buttonPressed: {\n    transform: [{ scale: 0.98 }], // Slightly more pronounced scale\n    opacity: 0.95,\n  },\n  buttonText: {\n    ...Typography.button(theme.backgroundPrimary),\n    paddingHorizontal: 4,\n    textAlign: 'center',\n    // Prevent clipping on Android\n    ...Platform.select({\n      android: {\n        includeFontPadding: true,\n      }\n    })\n  },\n  secondaryButton: {\n    padding: 16,\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  secondaryButtonText: {\n    ...Typography.label(theme.accentPrimary),\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 24,\n    // Prevent the footer from squeezing the link text\n    flexWrap: 'wrap',\n  },\n  footerText: {\n    ...Typography.label(theme.textMuted),\n    paddingRight: Platform.OS === 'android' ? 4 : 0,\n    paddingVertical: 4,\n  },\n  linkText: {\n    ...Typography.label(theme.accentPrimary),\n    paddingHorizontal: 4,\n    paddingVertical: 4,\n  },\n});\n\nexport default styles;","\nimport React from 'react';\nimport { View, StyleSheet, ScrollView, TouchableOpacity } from 'react-native';\nimport { Text } from '@/components';\nimport { Typography } from '@/constants/typography';\n\nimport { Stack } from 'expo-router';\nimport TrailMap from '@/components/TrailMap';\n\nimport { Clock, MapPin, Navigation, ArrowLeft, TrendingUp } from 'lucide-react-native';\nimport theme from '@/constants/colors';\n\nimport { formatDistance, formatDuration } from '@/utils/distance';\nimport { useRouter } from 'expo-router';\n\nconst DEMO_TRAIL = {\n  id: 'demo-trail',\n  name: 'Scenic Coastal Walk',\n  distance: 5210,\n  duration: 3600,\n  \n  coordinates: [\n    { latitude: 50.81999932593175, longitude: -0.1443926504884132 },\n    { latitude: 50.81982005377856, longitude: -0.14389605957015306 },\n    { latitude: 50.8195735534442, longitude: -0.14290287773496857 },\n    { latitude: 50.81976403108945, longitude: -0.14245949298612004 },\n    { latitude: 50.819651985510006, longitude: -0.1415904588798469 },\n    { latitude: 50.819360665744455, longitude: -0.141129338740825 },\n    { latitude: 50.81955114425804, longitude: -0.14054407087405707 },\n    { latitude: 50.8194278935438, longitude: -0.1397814491065219 },\n    { latitude: 50.819282233189426, longitude: -0.1389301503892284 },\n    { latitude: 50.819696803774036, longitude: -0.13903656272921694 },\n    { latitude: 50.81999932593175, longitude: -0.13919618123853184 },\n    { latitude: 50.82010016621547, longitude: -0.13853997181101363 },\n    { latitude: 50.82041389015009, longitude: -0.138220734792327 },\n    { latitude: 50.82055954697452, longitude: -0.13852223642078343 },\n    { latitude: 50.82086206354296, longitude: -0.13829167635185513 },\n  ],\n  city: 'Brighton',\n  country: 'UK',\n  difficulty: 'Easy',\n  pace: '11:32',\n  maxElevation: 45,\n};\n\nexport default function DemoTrailScreen() {\n  const router = useRouter();\n\n  return (\n    <View style={styles.container}>\n      <Stack.Screen \n        options={{\n          title: 'Demo Trail',\n          headerShown: false,\n        }} \n      />\n      \n      <ScrollView style={styles.scrollView}>\n        <View style={styles.header}>\n          <TouchableOpacity \n            style={styles.backButton}\n            onPress={() => router.back()}\n          >\n            <ArrowLeft size={24} color=\"#fff\" />\n          </TouchableOpacity>\n          <View style={styles.headerContent}>\n            <Text style={styles.title}>{DEMO_TRAIL.name}</Text>\n            <View style={styles.locationRow}>\n              <MapPin size={16} color=\"#fff\" />\n              <Text style={styles.locationText}>{DEMO_TRAIL.city}, {DEMO_TRAIL.country}</Text>\n            </View>\n          </View>\n        </View>\n\n        <View style={styles.mapContainer}>\n          <TrailMap\n            coordinates={DEMO_TRAIL.coordinates}\n            style={styles.map}\n            scrollEnabled={true}\n            zoomEnabled={true}\n          />\n        </View>\n\n        <View style={styles.statsContainer}>\n          <View style={styles.statItem}>\n            <Navigation size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.statValue}>{formatDistance(DEMO_TRAIL.distance)}</Text>\n            <Text style={styles.statLabel}>Distance</Text>\n          </View>\n          <View style={styles.statItem}>\n            <Clock size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.statValue}>{formatDuration(DEMO_TRAIL.duration)}</Text>\n            <Text style={styles.statLabel}>Time</Text>\n          </View>\n          <View style={styles.statItem}>\n            <TrendingUp size={20} color={theme.backgroundPrimary} />\n            <Text style={styles.statValue}>{DEMO_TRAIL.maxElevation}m</Text>\n            <Text style={styles.statLabel}>Elevation</Text>\n          </View>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>About this trail</Text>\n          <Text style={styles.description}>\n            This is a beautiful coastal walk along the Brighton seafront. \n            Perfect for a morning stroll with your dog. The path is paved and \n            offers stunning views of the English Channel.\n          </Text>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  header: {\n    height: 200,\n    backgroundColor: theme.backgroundPrimary,\n    justifyContent: 'flex-end',\n    padding: 20,\n  },\n  backButton: {\n    position: 'absolute',\n    top: 50,\n    left: 20,\n    zIndex: 10,\n  },\n  headerContent: {\n    marginBottom: 10,\n  },\n  title: {\n    ...Typography.h2('#fff'),\n    marginBottom: 5,\n  },\n  locationRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  locationText: {\n    ...Typography.body('#fff'),\n    marginLeft: 5,\n  },\n  mapContainer: {\n    height: 300,\n    width: '100%',\n  },\n  map: {\n    flex: 1,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    padding: 20,\n  backgroundColor: theme.backgroundSecondary,\n  borderBottomWidth: 1,\n  borderBottomColor: theme.borderSubtle,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statValue: {\n    ...Typography.h2('#333'),\n    marginTop: 5,\n  },\n  statLabel: {\n    ...Typography.caption('#666'),\n    marginTop: 2,\n  },\n  section: {\n    padding: 20,\n  },\n  sectionTitle: {\n    ...Typography.h2('#333'),\n    marginBottom: 10,\n  },\n  description: {\n    ...Typography.body('#666'),\n    lineHeight: 24,\n  },\n});\n","import { Redirect } from 'expo-router';\n\nexport default function Index() {\n  return <Redirect href=\"/(tabs)/explore\" />;\n}\n","import * as React from 'react';\nimport { View, TextInput, Pressable, TouchableOpacity, StyleSheet, KeyboardAvoidingView, Platform, Alert, ActivityIndicator } from 'react-native';\nimport { Text } from '@/components';\nimport { useRouter } from 'expo-router';\nimport * as Haptics from 'expo-haptics';\nimport { useAuth } from '@/context/AuthContext';\nimport { firebaseAuthExchange } from '@/lib/api';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport Constants from 'expo-constants';\nimport { Image } from 'expo-image';\nimport theme from '@/constants/colors';\nimport { getFirebaseAuth, signInWithEmailAndPassword, signInWithGoogle } from '@/lib/firebase';\nimport styles from './auth.styles';\n\nWebBrowser.maybeCompleteAuthSession();\n\nfunction normalizeToken(token: any): string | null {\n  if (!token) return null;\n  if (typeof token === 'string') return token;\n  // Expo / native may return ArrayBuffer-like or { data: number[] }\n  try {\n    if (token instanceof ArrayBuffer) {\n      const view = new Uint8Array(token);\n      let s = '';\n      for (let i = 0; i < view.length; i++) s += String.fromCharCode(view[i]);\n      return decodeURIComponent(escape(s));\n    }\n    if (token && typeof token === 'object' && Array.isArray((token as any).data)) {\n      const arr = (token as any).data as number[];\n      let s = '';\n      for (let i = 0; i < arr.length; i++) s += String.fromCharCode(arr[i]);\n      return decodeURIComponent(escape(s));\n    }\n    return String(token);\n  } catch (err) {\n    return String(token);\n  }\n}\n\nexport default function LoginScreen() {\n  const router = useRouter();\n  const { signInWithToken } = useAuth();\n  const [email, setEmail] = React.useState<string>('');\n  const [password, setPassword] = React.useState<string>('');\n  const [isLoading, setIsLoading] = React.useState<boolean>(false);\n\n  const _extraFromConstants = ((Constants as any).expoConfig?.extra) || ((Constants as any).manifest?.extra) || {};\n  const extra = {\n    EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n    EXPO_PUBLIC_GOOGLE_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n    EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n    EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID: _extraFromConstants.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID ?? process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n  } as any;\n\n  if (typeof window !== 'undefined' && !extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID) {\n    // Helpful developer warning when running on web without a webClientId\n    // (Expo's Constants.expoConfig.extra isn't always populated on web/dev server).\n    // eslint-disable-next-line no-console\n    console.warn('Google web client id (EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID) is not defined. Google auth on web requires a webClientId.');\n  }\n\n  // const [request, response, promptAsync] = Google.useAuthRequest({\n  //   webClientId: extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n  //   clientId: extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n  //   iosClientId: extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n  //   androidClientId: extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n  //   scopes: ['profile', 'email'],\n  //   // request an access token so we can sign into Firebase client-side\n  //   responseType: 'token',\n  // });\n\n  const [request, response, promptAsync] = Google.useAuthRequest({\n    // Use the env variables directly with fallback to your 'extra' logic\n    webClientId: '447944956309-t92ug0tqs40adop6mnvifqbmfsi7dtj6.apps.googleusercontent.com',\n    // webClientId: process.env.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n    iosClientId: process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n    androidClientId: process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n    // Note: 'clientId' is usually the proxy/default ID\n    clientId: process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n    scopes: ['profile', 'email'],\n    responseType: 'token',\n  });\n\n  React.useEffect(() => {\n    (async () => {\n      if (response?.type === 'success') {\n        try {\n          setIsLoading(true);\n          // normalize potential ArrayBuffer/bytes to string\n          const rawToken = response.authentication?.accessToken || response.authentication?.idToken;\n          const tokenStr = normalizeToken(rawToken);\n          if (!tokenStr) throw new Error('No access token from Google');\n          // Sign into Firebase with the Google token to obtain a Firebase ID token (JWT)\n          const fb = await signInWithGoogle(getFirebaseAuth(), tokenStr);\n          const session = await firebaseAuthExchange(fb.idToken);\n          await signInWithToken(session);\n          if (true) {\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n          }\n          router.replace('/');\n        } catch (err: any) {\n          console.error('Google sign-in error', err);\n          Alert.alert('Google Sign-In Error', err?.message || String(err));\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    })();\n  }, [response]);\n\n  const handleSignIn = async () => {\n    console.log('handleSignIn invoked', { email, password });\n    if (!email || !password) {\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      Alert.alert('Error', 'Please enter your email and password');\n      return;\n    }\n\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    setIsLoading(true);\n    try {\n      const credential = await signInWithEmailAndPassword(\n        getFirebaseAuth(),\n        email.trim().toLowerCase(),\n        password\n      );\n      const idToken = await credential.user.getIdToken();\n      const session = await firebaseAuthExchange(idToken);\n      await signInWithToken(session);\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n      router.replace('/');\n    } catch (error: any) {\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      console.error('Firebase sign-in error:', error);\n      Alert.alert('Error', error.message || 'Failed to sign in');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const webKeyProps: any = typeof window !== 'undefined'\n    ? {\n        onKeyDown: (e: any) => {\n          const k = e?.nativeEvent?.key || e?.key;\n          if (k === 'Enter') {\n            handleSignIn();\n          }\n        },\n      }\n    : {};\n\n  return (\n    <KeyboardAvoidingView\n      style={styles.container}\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n    >\n      <View style={styles.content}>\n          <View style={styles.header}>\n          <Image\n            source={{ uri: 'https://api.tailtrails.club/assets/logo' }}\n            style={styles.logo}\n            contentFit=\"contain\"\n          />\n          <Text style={styles.title}>Welcome Back</Text>\n          <Text style={styles.subtitle}>Sign in to track your dog walks</Text>\n        </View>\n\n        <View style={styles.form}>\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Email</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"your@email.com\"\n              value={email}\n              onChangeText={setEmail}\n              autoCapitalize=\"none\"\n              keyboardType=\"email-address\"\n              autoComplete=\"email\"\n              editable={!isLoading}\n              placeholderTextColor={theme.textMuted}\n            />\n          </View>\n\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Password</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Enter your password\"\n              value={password}\n              onChangeText={setPassword}\n              secureTextEntry\n              autoCapitalize=\"none\"\n              autoComplete=\"password\"\n              editable={!isLoading}\n              placeholderTextColor={theme.textMuted}\n            />\n          </View>\n\n          <Pressable\n            style={({ pressed }) => [styles.button, isLoading && styles.buttonDisabled, pressed && styles.buttonPressed]}\n            onPress={handleSignIn}\n            {...webKeyProps}\n            accessibilityRole=\"button\"\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <ActivityIndicator color={theme.backgroundPrimary} />\n            ) : (\n              <Text style={styles.buttonText}>Sign In</Text>\n            )}\n          </Pressable>\n\n          {/* ... */}\n\n          <View style={styles.footer}>\n            <Text style={styles.footerText}>Don't have an account? </Text>\n            <TouchableOpacity onPress={() => {\n              if (true) {\n                Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n              }\n              router.push('/signup');\n            }}>\n              <Text style={styles.linkText}>Sign Up</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </KeyboardAvoidingView>\n  );\n}","import { StyleSheet, Platform } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundPrimary,\n  },\n  content: {\n    padding: 24,\n  },\n  header: {\n    marginBottom: 32,\n    alignItems: 'center',\n  },\n  title: {\n    ...Typography.h2(theme.accentPrimary),\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  subtitle: {\n    ...Typography.body(theme.accentPrimary),\n    textAlign: 'center',\n    marginBottom: 24,\n  },\n  progressContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  progressDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#3d4520',\n  },\n  progressDotActive: {\n    backgroundColor: theme.accentPrimary,\n  },\n  photoContainer: {\n    width: 140,\n    height: 140,\n    borderRadius: 70,\n    alignSelf: 'center',\n    marginBottom: 32,\n    overflow: 'hidden',\n  },\n  photo: {\n    width: '100%',\n    height: '100%',\n  },\n  photoPlaceholder: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: theme.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 8,\n  },\n  photoPlaceholderText: {\n    ...Typography.label(theme.accentPrimary),\n  },\n  photoOverlay: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.accentPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  formSection: {\n    marginBottom: 24,\n  },\n  label: {\n    ...Typography.label(theme.accentPrimary),\n    marginBottom: 8,\n    paddingHorizontal: Platform.OS === 'android' ? 4 : 0,\n  },\n  input: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 16,\n    color: theme.accentPrimary,\n    borderWidth: 1,\n    borderColor: '#3d4520',\n    fontSize: 16,\n    ...Platform.select({\n      android: {\n        includeFontPadding: true,\n        textAlignVertical: 'center',\n        minHeight: 56,\n        paddingVertical: 12,\n        paddingHorizontal: 16,\n      },\n    }),\n  },\n  pickerButton: {\n    backgroundColor: theme.backgroundPrimary,\n    borderRadius: 12,\n    padding: 16,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#3d4520',\n  },\n  pickerButtonText: {\n    ...Typography.body(theme.accentPrimary),\n  },\n  pickerButtonTextPlaceholder: {\n    color: '#5a6040',\n  },\n  pickerOptions: {\n    backgroundColor: '#282E10',\n    borderRadius: 12,\n    marginTop: 8,\n    borderWidth: 1,\n    borderColor: '#3d4520',\n    overflow: 'hidden',\n  },\n  pickerOption: {\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#1a1f0a',\n  },\n  pickerOptionSelected: {\n    backgroundColor: 'rgba(255, 254, 119, 0.15)',\n  },\n  pickerOptionText: {\n    ...Typography.body(theme.accentPrimary),\n  },\n  pickerOptionTextSelected: {\n    ...Typography.body(theme.accentPrimary),\n    fontWeight: '600' as any,\n  },\n  nextButton: {\n    backgroundColor: theme.accentPrimary,\n    borderRadius: 12,\n    padding: 18,\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  nextButtonText: {\n    ...Typography.button(theme.backgroundPrimary),\n  },\n  closeButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.backgroundPrimary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n\nexport default styles;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { View, StyleSheet, TouchableOpacity, TextInput, Image, Alert, ScrollView, Platform, ActivityIndicator } from 'react-native';\nimport { Text } from '@/components';\n\nimport { useRouter, Stack } from 'expo-router';\n\nimport { useDogs } from '@/context/DogsContext';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Haptics from 'expo-haptics';\n\nimport { ChevronDown, Camera, Upload, X } from 'lucide-react-native';\nimport theme from '@/constants/colors';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './dog-basics.styles';\n\nimport { DogSize, DOG_SIZES } from '@/types/dog-profile';\n\nexport default function DogBasicsScreen() {\n  const router = useRouter();\n  const insets = useSafeAreaInsets();\n  const { dogProfile } = useDogs();\n  const [name, setName] = useState<string>('');\n  const [nickname, setNickname] = useState<string>('');\n  const [age, setAge] = useState<string>('');\n  const [size, setSize] = useState<DogSize | null>(null);\n  const [photo, setPhoto] = useState<string | null>(null);\n  const [showSizePicker, setShowSizePicker] = useState<boolean>(false);\n  const [isLoadingImage, setIsLoadingImage] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (dogProfile) {\n      console.log('Loading existing dog profile for editing:', dogProfile);\n      setName(dogProfile.name);\n      setNickname(dogProfile.nickname || '');\n      setAge(dogProfile.age.toString());\n      setSize(dogProfile.size);\n      setPhoto(dogProfile.image || null);\n    }\n  }, [dogProfile]);\n\n  const pickImage = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'We need access to your photo library');\n      return;\n    }\n\n    setIsLoadingImage(true);\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.7,\n    });\n\n    setIsLoadingImage(false);\n\n    if (!result.canceled && result.assets[0]) {\n      setPhoto(result.assets[0].uri);\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n    }\n  };\n\n  const takePhoto = async () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert('Permission needed', 'We need camera access to take photos');\n      return;\n    }\n\n    setIsLoadingImage(true);\n    const result = await ImagePicker.launchCameraAsync({\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.7,\n    });\n\n    setIsLoadingImage(false);\n\n    if (!result.canceled && result.assets[0]) {\n      setPhoto(result.assets[0].uri);\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n    }\n  };\n\n  const handleImagePicker = () => {\n    Alert.alert(\n      'Add Photo',\n      'Choose how you want to add a photo',\n      [\n        { text: 'Take Photo', onPress: takePhoto },\n        { text: 'Choose from Library', onPress: pickImage },\n        { text: 'Cancel', style: 'cancel' },\n      ]\n    );\n  };\n\n  const handleNext = () => {\n    if (!name.trim()) {\n      Alert.alert('Missing Information', 'Please enter your dog\\'s name');\n      return;\n    }\n\n    if (!size) {\n      Alert.alert('Missing Information', 'Please select your dog\\'s size');\n      return;\n    }\n\n    const parsedAge = parseInt(age, 10);\n    if (!age || isNaN(parsedAge) || parsedAge < 0 || parsedAge > 30) {\n      Alert.alert('Invalid Age', 'Please enter a valid age (0-30 years)');\n      return;\n    }\n\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    const navigationMethod = dogProfile ? 'replace' : 'push';\n    router[navigationMethod]({\n      pathname: '/onboarding/dog-personality' as any,\n      params: {\n        name: name.trim(),\n        nickname: nickname.trim(),\n        age: parsedAge.toString(),\n        size,\n        image: photo || '',\n        isEditing: dogProfile ? 'true' : 'false',\n      },\n    });\n  };\n\n  return (\n    <>\n      <Stack.Screen options={{ headerShown: false }} />\n      <ScrollView style={styles.container} contentContainerStyle={[styles.content, { paddingTop: insets.top + 20 }]}>\n        <TouchableOpacity\n          style={[styles.closeButton, { position: 'absolute', right: 16, top: insets.top + 12 }]}\n          onPress={() => router.back()}\n          accessibilityLabel=\"Close\"\n        >\n          <X size={20} color={theme.accentPrimary} />\n        </TouchableOpacity>\n        <View style={styles.header}>\n          <Text style={styles.title}>{dogProfile ? 'Edit dog profile' : 'Tell us about your dog'}</Text>\n          <Text style={styles.subtitle}>{dogProfile ? 'Update your dog\\'s information' : 'Let\\'s start with the basics'}</Text>\n          {!dogProfile && (\n            <View style={styles.progressContainer}>\n              <View style={[styles.progressDot, styles.progressDotActive]} />\n              <View style={styles.progressDot} />\n            </View>\n          )}\n        </View>\n\n        <TouchableOpacity\n          style={styles.photoContainer}\n          onPress={handleImagePicker}\n          disabled={isLoadingImage}\n        >\n          {isLoadingImage ? (\n            <ActivityIndicator size=\"large\" color=\"#FFFE77\" />\n          ) : photo ? (\n            <Image source={{ uri: photo }} style={styles.photo} />\n          ) : (\n            <View style={styles.photoPlaceholder}>\n              <Camera size={32} color=\"#FFFE77\" />\n              <Text style={styles.photoPlaceholderText}>Add Photo</Text>\n            </View>\n          )}\n          {photo && !isLoadingImage && (\n            <View style={styles.photoOverlay}>\n              <Upload size={24} color=\"#1a1f0a\" />\n            </View>\n          )}\n        </TouchableOpacity>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Name *</Text>\n          <TextInput\n            style={styles.input}\n            value={name}\n            onChangeText={setName}\n            placeholder=\"Enter your dog&apos;s name\"\n            placeholderTextColor=\"#5a6040\"\n            autoCapitalize=\"words\"\n            testID=\"dog-name-input\"\n          />\n        </View>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Nickname (Optional)</Text>\n          <TextInput\n            style={styles.input}\n            value={nickname}\n            onChangeText={setNickname}\n            placeholder=\"Enter a nickname\"\n            placeholderTextColor=\"#5a6040\"\n            autoCapitalize=\"words\"\n            testID=\"dog-nickname-input\"\n          />\n        </View>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Size *</Text>\n          <TouchableOpacity\n            style={styles.pickerButton}\n            onPress={() => {\n              if (true) {\n                Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n              }\n              setShowSizePicker(!showSizePicker);\n            }}\n            testID=\"size-picker-button\"\n          >\n            <Text style={[styles.pickerButtonText, !size && styles.pickerButtonTextPlaceholder]}>\n              {size || 'Select size'}\n            </Text>\n            <ChevronDown size={20} color=\"#a8ad8e\" />\n          </TouchableOpacity>\n          {showSizePicker && (\n            <View style={styles.pickerOptions}>\n              {DOG_SIZES.map((s) => (\n                <TouchableOpacity\n                  key={s}\n                  style={[styles.pickerOption, size === s && styles.pickerOptionSelected]}\n                  onPress={() => {\n                    if (true) {\n                      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                    }\n                    setSize(s);\n                    setShowSizePicker(false);\n                  }}\n                  testID={`size-option-${s}`}\n                >\n                  <Text style={[styles.pickerOptionText, size === s && styles.pickerOptionTextSelected]}>\n                    {s}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          )}\n        </View>\n\n        <View style={styles.formSection}>\n          <Text style={styles.label}>Age (years) *</Text>\n          <TextInput\n            style={styles.input}\n            value={age}\n            onChangeText={setAge}\n            placeholder=\"Enter age\"\n            placeholderTextColor=\"#5a6040\"\n            keyboardType=\"numeric\"\n            testID=\"dog-age-input\"\n          />\n        </View>\n\n        <TouchableOpacity\n          style={[styles.nextButton, { marginBottom: insets.bottom + 20 }]}\n          onPress={handleNext}\n          testID=\"next-button\"\n        >\n          <Text style={styles.nextButtonText}>Next</Text>\n        </TouchableOpacity>\n      </ScrollView>\n    </>\n  );\n}","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundSecondaryVarient,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  content: {\n    padding: 24,\n  },\n  header: {\n    marginBottom: 32,\n    alignItems: 'center',\n  },\n  title: {\n    ...Typography.h2(theme.accentPrimary),\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  subtitle: {\n    ...Typography.body(theme.accentPrimary),\n    textAlign: 'center',\n    marginBottom: 24,\n  },\n  progressContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  progressDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#3d4520',\n  },\n  progressDotActive: {\n    backgroundColor: theme.accentPrimary,\n  },\n  tagsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n  },\n  tag: {\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 24,\n    backgroundColor: '#282E10',\n    borderWidth: 1.5,\n    borderColor: '#3d4520',\n  },\n  tagSelected: {\n    backgroundColor: 'rgba(255, 254, 119, 0.15)',\n    borderColor: theme.accentPrimary,\n  },\n  tagText: {\n    ...Typography.label(theme.accentPrimary),\n    paddingHorizontal: 4,\n  },\n  tagTextSelected: {\n    ...Typography.label(theme.accentPrimary),\n    fontWeight: '700' as any,\n    paddingHorizontal: 4,\n  },\n  sectionHeader: {\n    marginTop: 32,\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    ...Typography.h2(theme.accentPrimary),\n  },\n  section: {\n    marginBottom: 24,\n  },\n  label: {\n    ...Typography.label(theme.accentPrimary),\n    marginBottom: 4,\n  },\n  helperText: {\n    ...Typography.caption(theme.accentPrimary),\n    marginBottom: 12,\n  },\n  recallContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  recallOption: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 12,\n    backgroundColor: '#282E10',\n    borderWidth: 1.5,\n    borderColor: '#3d4520',\n    alignItems: 'center',\n  },\n  recallOptionSelected: {\n    backgroundColor: 'rgba(255, 254, 119, 0.15)',\n    borderColor: theme.accentPrimary,\n  },\n  recallText: {\n    ...Typography.label(theme.accentPrimary),\n    paddingHorizontal: 4,\n  },\n  recallTextSelected: {\n    ...Typography.label(theme.accentPrimary),\n    fontWeight: '700' as any,\n    paddingHorizontal: 4,\n  },\n  footer: {\n    flexDirection: 'row',\n    gap: 12,\n    paddingHorizontal: 24,\n    paddingTop: 20,\n    borderTopWidth: 1,\n    borderTopColor: '#3d4520',\n    backgroundColor: '#282E10',\n  },\n  backButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: 'transparent',\n    borderRadius: 12,\n    padding: 18,\n    borderWidth: 1.5,\n    borderColor: theme.accentPrimary,\n  },\n  backButtonText: {\n    ...Typography.label(theme.accentPrimary),\n    paddingHorizontal: 4,\n  },\n  finishButton: {\n    flex: 1,\n    backgroundColor: theme.accentPrimary,\n    borderRadius: 12,\n    padding: 18,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 56,\n  },\n  finishButtonDisabled: {\n    opacity: 0.6,\n  },\n  finishButtonText: {\n    ...Typography.button('#1a1f0a'),\n    paddingHorizontal: 4,\n  },\n});\n\nexport default styles;\n","import React, { useState, useEffect } from 'react';\nimport { View, TouchableOpacity, ScrollView, Platform, Alert, ActivityIndicator } from 'react-native';\nimport { Text } from '@/components';\nimport { useRouter, Stack, useLocalSearchParams } from 'expo-router';\nimport * as Haptics from 'expo-haptics';\nimport { ChevronLeft } from 'lucide-react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './dog-personality.styles';\nimport { RECALL_RELIABILITY_OPTIONS, PERSONALITY_TAGS, RecallReliability } from '@/types/dog-profile';\nimport { useAuth } from '@/context/AuthContext';\nimport { useDogs } from '@/context/DogsContext';\n\nexport default function DogPersonalityScreen() {\n  const router = useRouter();\n  const params = useLocalSearchParams<{\n    name: string;\n    nickname?: string;\n    age: string;\n    size: string;\n    image?: string;\n    isEditing?: string;\n  }>();\n  const { user } = useAuth();\n  const { dogProfile, refreshDogProfile, createDogProfile, updateDogProfile } = useDogs();\n  const insets = useSafeAreaInsets();\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\n  const [recallReliability, setRecallReliability] = useState<RecallReliability>('Fair');\n  const [isSaving, setIsSaving] = useState<boolean>(false);\n  const isEditing = params.isEditing === 'true';\n\n  useEffect(() => {\n    if (dogProfile && isEditing) {\n      console.log('Loading existing personality tags for editing:', dogProfile.personality_tags);\n      setSelectedTags(dogProfile.personality_tags || []);\n      setRecallReliability(dogProfile.recall_reliability || 'Fair');\n    }\n  }, [dogProfile, isEditing]);\n\n  const toggleTag = (tag: string) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    setSelectedTags((prev) =>\n      prev.includes(tag) ? prev.filter((t) => t !== tag) : [...prev, tag]\n    );\n  };\n\n  const handleFinish = async () => {\n    if (!user) {\n      Alert.alert('Error', 'You must be logged in to create a dog profile');\n      return;\n    }\n\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    setIsSaving(true);\n\n    try {\n      console.log(isEditing ? 'Updating dog profile for user:' : 'Creating dog profile for user:', user.id);\n\n      const profileData = {\n        user_id: user.id,\n        name: params.name,\n        nickname: params.nickname || undefined,\n        size: params.size as any,\n        age: parseInt(params.age, 10),\n        image: params.image || undefined,\n        personality_tags: selectedTags,\n        recall_reliability: recallReliability,\n      };\n\n      console.log('Dog profile data:', profileData);\n\n      if (isEditing && dogProfile?.id) {\n        await updateDogProfile({ ...profileData, id: dogProfile.id });\n      } else {\n        await createDogProfile(profileData);\n      }\n\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n\n      if (isEditing) {\n        router.replace('/(tabs)/profile');\n      } else {\n        router.replace('/(tabs)/explore');\n      }\n    } catch (error: any) {\n      console.error('Error saving dog profile:', error);\n      Alert.alert('Error', error.message || 'Failed to save dog profile');\n      setIsSaving(false);\n    }\n\n  };\n\n  return (\n    <>\n      <Stack.Screen options={{ headerShown: false }} />\n      <View style={[styles.container, { paddingTop: insets.top + 20 }]}> \n        <ScrollView style={styles.scrollView} contentContainerStyle={styles.content}>\n          <View style={styles.header}>\n            <Text style={styles.title}>Personality & Behaviour</Text>\n            <Text style={styles.subtitle}>Choose the tags that best describe your dog</Text>\n            {!isEditing && (\n              <View style={styles.progressContainer}>\n                <View style={styles.progressDot} />\n                <View style={[styles.progressDot, styles.progressDotActive]} />\n              </View>\n            )}\n          </View>\n\n          <View style={styles.tagsContainer}>\n            {PERSONALITY_TAGS.map((tag) => (\n              <TouchableOpacity\n                key={tag}\n                style={[\n                  styles.tag,\n                  selectedTags.includes(tag) && styles.tagSelected,\n                ]}\n                onPress={() => toggleTag(tag)}\n                testID={`tag-${tag}`}\n              >\n                <Text\n                  style={[\n                    styles.tagText,\n                    selectedTags.includes(tag) && styles.tagTextSelected,\n                  ]}\n                >\n                  {tag}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n\n          <View style={styles.sectionHeader}>\n            <Text style={styles.sectionTitle}>Health & Safety</Text>\n          </View>\n\n          <View style={styles.section}>\n            <Text style={styles.label}>Recall Reliability</Text>\n            <Text style={styles.helperText}>How reliably does your dog return when called?</Text>\n            <View style={styles.recallContainer}>\n              {RECALL_RELIABILITY_OPTIONS.map((option) => (\n                <TouchableOpacity\n                  key={option}\n                  style={[\n                    styles.recallOption,\n                    recallReliability === option && styles.recallOptionSelected,\n                  ]}\n                  onPress={() => {\n                    if (true) {\n                      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                    }\n                    setRecallReliability(option);\n                  }}\n                  testID={`recall-${option}`}\n                >\n                  <Text\n                    style={[\n                      styles.recallText,\n                      recallReliability === option && styles.recallTextSelected,\n                    ]}\n                  >\n                    {option}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n        </ScrollView>\n\n        <View style={[styles.footer, { paddingBottom: insets.bottom + 20 }]}>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => router.back()}\n            disabled={isSaving}\n            testID=\"back-button\"\n          >\n            <ChevronLeft size={24} color=\"#FFFE77\" />\n            <Text style={styles.backButtonText}>Back</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.finishButton, isSaving && styles.finishButtonDisabled]}\n            onPress={handleFinish}\n            disabled={isSaving}\n            testID=\"finish-button\"\n          >\n            {isSaving ? (\n              <ActivityIndicator color=\"#1a1f0a\" />\n            ) : (\n              <Text style={styles.finishButtonText}>{isEditing ? 'Save' : 'Finish'}</Text>\n            )}\n          </TouchableOpacity>\n        </View>\n      </View>\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport { View, TextInput, TouchableOpacity, StyleSheet, KeyboardAvoidingView, Platform, Alert, ActivityIndicator } from 'react-native';\nimport { Text } from '@/components';\nimport { useRouter } from 'expo-router';\nimport * as Haptics from 'expo-haptics';\nimport { useAuth } from '@/context/AuthContext';\nimport { firebaseAuthExchange } from '@/lib/api';\nimport { UserPlus } from 'lucide-react-native';\nimport { getFirebaseAuth, createUserWithEmailAndPassword, updateProfile, signInWithGoogle } from '@/lib/firebase';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport Constants from 'expo-constants';\nimport theme from '@/constants/colors';\nimport styles from './auth.styles';\n\nWebBrowser.maybeCompleteAuthSession();\n\nfunction normalizeToken(token: any): string | null {\n  if (!token) return null;\n  if (typeof token === 'string') return token;\n  try {\n    if (token instanceof ArrayBuffer) {\n      const view = new Uint8Array(token);\n      let s = '';\n      for (let i = 0; i < view.length; i++) s += String.fromCharCode(view[i]);\n      return decodeURIComponent(escape(s));\n    }\n    if (token && typeof token === 'object' && Array.isArray((token as any).data)) {\n      const arr = (token as any).data as number[];\n      let s = '';\n      for (let i = 0; i < arr.length; i++) s += String.fromCharCode(arr[i]);\n      return decodeURIComponent(escape(s));\n    }\n    return String(token);\n  } catch (err) {\n    return String(token);\n  }\n}\n\nexport default function SignupScreen() {\n  const router = useRouter();\n  const { signInWithToken } = useAuth();\n  const [email, setEmail] = useState<string>('');\n  const [name, setName] = useState<string>('');\n  const [password, setPassword] = useState<string>('');\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  const extra = (Constants.expoConfig && (Constants.expoConfig.extra as any)) || {};\n  // const [request, response, promptAsync] = Google.useAuthRequest({\n  //   webClientId: extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n  //   clientId: extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n  //   iosClientId: extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n  //   androidClientId: extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n  //   scopes: ['profile', 'email'],\n  //   // request an access token so we can sign into Firebase client-side\n  //   responseType: 'token',\n  // });\n\n    const [request, response, promptAsync] = Google.useAuthRequest({\n      // Use the env variables directly with fallback to your 'extra' logic\n      webClientId: '447944956309-t92ug0tqs40adop6mnvifqbmfsi7dtj6.apps.googleusercontent.com',\n      // webClientId: process.env.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID,\n      iosClientId: process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n      androidClientId: process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n      // Note: 'clientId' is usually the proxy/default ID\n      clientId: process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID || extra.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n      scopes: ['profile', 'email'],\n      responseType: 'token',\n    });\n\n  React.useEffect(() => {\n    (async () => {\n      if (response?.type === 'success') {\n        try {\n          setIsLoading(true);\n          // normalize potential ArrayBuffer/bytes to string\n          const rawToken = response.authentication?.accessToken || response.authentication?.idToken;\n          const tokenStr = normalizeToken(rawToken);\n          if (!tokenStr) throw new Error('No access token from Google');\n          // Sign into Firebase with the Google token to obtain a Firebase ID token (JWT)\n          const fb = await signInWithGoogle(getFirebaseAuth(), tokenStr);\n          const session = await firebaseAuthExchange(fb.idToken);\n          await signInWithToken(session);\n          if (true) {\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n          }\n          router.replace('/');\n        } catch (err: any) {\n          console.error('Google sign-up error', err);\n          Alert.alert('Google Sign-Up Error', err?.message || String(err));\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    })();\n  }, [response]);\n\n  const handleSignUp = async () => {\n    if (!email || !name || !password) {\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      Alert.alert('Error', 'Please fill in all fields');\n      return;\n    }\n\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    setIsLoading(true);\n    try {\n      const credential = await createUserWithEmailAndPassword(\n        getFirebaseAuth(),\n        email.trim().toLowerCase(),\n        password\n      );\n      if (name.trim()) {\n        await updateProfile(credential.user, { displayName: name.trim() });\n      }\n      const idToken = await credential.user.getIdToken(true);\n      const session = await firebaseAuthExchange(idToken);\n      await signInWithToken(session);\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      }\n      router.replace('/');\n    } catch (error: any) {\n      if (true) {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      console.error('Firebase sign-up error:', error);\n      Alert.alert('Error', error.message || 'Failed to create account');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      style={styles.container}\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n    >\n      <View style={styles.content}>\n        <View style={styles.header}>\n          <UserPlus size={64} color=\"#5d6b4a\" />\n          <Text style={styles.title}>Create Account</Text>\n          <Text style={styles.subtitle}>Sign up to start tracking your dog walks</Text>\n        </View>\n\n        <View style={styles.form}>\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Name</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Your Name\"\n              value={name}\n              onChangeText={setName}\n              autoCapitalize=\"words\"\n              editable={!isLoading}\n              placeholderTextColor={theme.textMuted}\n            />\n          </View>\n\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Email</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"your@email.com\"\n              value={email}\n              onChangeText={setEmail}\n              autoCapitalize=\"none\"\n              keyboardType=\"email-address\"\n              autoComplete=\"email\"\n              editable={!isLoading}\n              placeholderTextColor={theme.textMuted}\n            />\n          </View>\n\n          <View style={styles.inputContainer}>\n            <Text style={styles.label}>Password</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Create a password\"\n              value={password}\n              onChangeText={setPassword}\n              secureTextEntry\n              autoCapitalize=\"none\"\n              autoComplete=\"password\"\n              editable={!isLoading}\n              placeholderTextColor={theme.textMuted}\n            />\n          </View>\n\n          <TouchableOpacity\n            style={[styles.button, isLoading && styles.buttonDisabled]}\n            onPress={handleSignUp}\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <ActivityIndicator color={theme.backgroundPrimary} />\n            ) : (\n              <Text style={styles.buttonText}>Create Account</Text>\n            )}\n          </TouchableOpacity>\n\n          {/* <TouchableOpacity\n            style={[styles.button, { marginTop: 8, backgroundColor: '#db4437' }]}\n            onPress={async () => {\n              try {\n                if (true) {\n                  Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n                }\n                setIsLoading(true);\n                // Use native flow (no proxy) for dev-client / standalone.\n                await promptAsync();\n              } catch (err: any) {\n                console.error('Prompt Google Auth error', err);\n                Alert.alert('Error', err?.message || String(err));\n                setIsLoading(false);\n              }\n            }}\n            disabled={!request || isLoading}\n          >\n            <Text style={styles.buttonText}>Continue with Google</Text>\n          </TouchableOpacity> */}\n\n          <View style={styles.footer}>\n            <Text style={styles.footerText}>Already have an account? </Text>\n            <TouchableOpacity onPress={() => {\n              if (true) {\n                Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n              }\n              router.push('/login');\n            }}>\n              <Text style={styles.linkText}>Sign In</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </KeyboardAvoidingView>\n  );\n}","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: theme.backgroundPrimary,\n    },\n    headerButtons: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        zIndex: 100,\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingHorizontal: 16,\n    },\n    headerButton: {\n        width: 44,\n        height: 44,\n        borderRadius: 22,\n        backgroundColor: theme.textPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        shadowColor: theme.backgroundSecondaryVarient,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.15,\n        shadowRadius: 4,\n        elevation: 4,\n    },\n    headerRightButtons: {\n        flexDirection: 'row',\n        gap: 12,\n    },\n    scrollContainer: {\n        flex: 1,\n    },\n    scrollContent: {\n        paddingBottom: 32,\n    },\n    loadingContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: theme.backgroundPrimary,\n    },\n    loadingText: {\n        marginTop: 16,\n        ...Typography.body(theme.accentPrimary),\n    },\n    heroSection: {\n        position: 'relative',\n    },\n    heroImageContainer: {\n        width: '100%',\n        height: 500,\n        position: 'relative',\n    },\n    heroImage: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: theme.borderSubtle,\n    },\n    heroGradient: {\n        position: 'absolute',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        height: 100,\n    },\n    changePhotoFab: {\n        position: 'absolute',\n        bottom: 80,\n        right: 20,\n        width: 56,\n        height: 56,\n        borderRadius: 28,\n        backgroundColor: theme.backgroundPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 8,\n        elevation: 6,\n    },\n\n    addPhotoContainer: {\n        width: '100%',\n        height: 280,\n        backgroundColor: theme.accentPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        paddingHorizontal: 32,\n    },\n    addPhotoIcon: {\n        width: 72,\n        height: 72,\n        borderRadius: 36,\n        backgroundColor: theme.backgroundPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginBottom: 16,\n    },\n    addPhotoText: {\n        ...Typography.h2(theme.textPrimary),\n        marginBottom: 4,\n    },\n    addPhotoSubtext: {\n        ...Typography.caption(theme.backgroundSecondary),\n    },\n    contentWrapper: {\n        backgroundColor: theme.backgroundPrimary,\n        borderTopLeftRadius: 24,\n        borderTopRightRadius: 24,\n        marginTop: -24,\n        zIndex: 10,\n    },\n    content: {\n        padding: 24,\n    },\n    titleSection: {\n        marginBottom: 20,\n    },\n    dateRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 8,\n        marginBottom: 8,\n    },\n    dateText: {\n        ...Typography.body(theme.backgroundSecondary),\n    },\n    titleRow: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        gap: 12,\n        marginBottom: 8,\n    },\n    title: {\n        flex: 1,\n        ...Typography.h1(theme.textPrimary),\n        lineHeight: 40,\n    },\n    authorRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 12,\n        marginTop: 8,\n        marginBottom: 16,\n    },\n    avatar: {\n        width: 36,\n        height: 36,\n        borderRadius: 18,\n        backgroundColor: theme.backgroundSecondary,\n    },\n    avatarText: {\n        ...Typography.label(theme.accentPrimary),\n    },\n    authorName: {\n        ...Typography.body(theme.backgroundPrimary),\n    },\n    editIconButton: {\n        width: 40,\n        height: 40,\n        borderRadius: 20,\n        backgroundColor: theme.accentPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 4,\n    },\n    nameEditContainer: {\n        marginBottom: 8,\n    },\n    nameInput: {\n        ...Typography.h2(theme.textPrimary),\n        backgroundColor: theme.textPrimary,\n        borderWidth: 2,\n        borderColor: theme.backgroundPrimary,\n        borderRadius: 12,\n        padding: 12,\n        marginBottom: 12,\n    },\n    nameInputInDetails: {\n        ...Typography.body(theme.textPrimary),\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 1,\n        borderColor: theme.accentPrimary,\n        borderRadius: 12,\n        padding: 16,\n    },\n    editButtons: {\n        flexDirection: 'row',\n        gap: 8,\n    },\n    iconButton: {\n        width: 44,\n        height: 44,\n        borderRadius: 22,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    saveIconButton: {\n        backgroundColor: theme.backgroundPrimary,\n    },\n    cancelIconButton: {\n        backgroundColor: theme.accentPrimary,\n    },\n    locationRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n        marginBottom: 12,\n    },\n    location: {\n        ...Typography.body(theme.backgroundSecondary),\n    },\n    ratingRow: {\n        flexDirection: 'row',\n        gap: 4,\n    },\n    reviewCard: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        marginBottom: 24,\n        borderWidth: 1,\n        borderColor: theme.borderSubtle,\n    },\n    reviewText: {\n        ...Typography.body(theme.backgroundPrimary),\n        lineHeight: 24,\n    },\n    statsSection: {\n        flexDirection: 'row',\n        flexWrap: 'wrap' as const,\n        gap: 12,\n        marginBottom: 24,\n    },\n    statCard: {\n        flex: 1,\n        minWidth: 100,\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 16,\n        alignItems: 'center',\n        shadowColor: theme.backgroundSecondaryVarient,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    statIconContainer: {\n        width: 44,\n        height: 44,\n        borderRadius: 22,\n        backgroundColor: theme.backgroundPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginBottom: 12,\n    },\n    statLabel: {\n        ...Typography.caption(theme.backgroundSecondary),\n        marginBottom: 4,\n    },\n    statValue: {\n        ...Typography.h2(theme.accentPrimary),\n    },\n    tagsSection: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        marginBottom: 20,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    sectionHeader: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 8,\n        marginBottom: 16,\n    },\n    sectionTitle: {\n        ...Typography.h2(theme.backgroundPrimary),\n    },\n    tagsGrid: {\n        flexDirection: 'row',\n        flexWrap: 'wrap' as const,\n        gap: 8,\n    },\n    tagChip: {\n        backgroundColor: theme.backgroundPrimary,\n        paddingHorizontal: 16,\n        paddingVertical: 8,\n        borderRadius: 20,\n    },\n    tagText: {\n        ...Typography.label(theme.backgroundSecondary),\n    },\n    editDetailsButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: 8,\n        backgroundColor: theme.textPrimary,\n        borderRadius: 12,\n        paddingVertical: 14,\n        paddingHorizontal: 20,\n        marginBottom: 20,\n        borderWidth: 2,\n        borderColor: theme.backgroundPrimary,\n    },\n    editDetailsText: {\n        ...Typography.label(theme.backgroundPrimary),\n    },\n    editSection: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        marginBottom: 20,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    editSectionTitle: {\n        ...Typography.h2(theme.textPrimary),\n        marginBottom: 12,\n    },\n    ratingStars: {\n        flexDirection: 'row',\n        gap: 8,\n    },\n    starButton: {\n        padding: 4,\n    },\n    reviewInput: {\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 1,\n        borderColor: theme.accentPrimary,\n        borderRadius: 12,\n        padding: 16,\n        ...Typography.body(theme.textPrimary),\n        minHeight: 120,\n    },\n    difficultyOptions: {\n        flexDirection: 'row',\n        gap: 8,\n    },\n    difficultyChip: {\n        flex: 1,\n        paddingVertical: 12,\n        paddingHorizontal: 16,\n        borderRadius: 12,\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 2,\n        borderColor: theme.accentPrimary,\n        alignItems: 'center',\n    },\n    difficultyChipSelected: {\n        backgroundColor: theme.backgroundPrimary,\n        borderColor: theme.backgroundPrimary,\n    },\n    difficultyChipText: {\n        ...Typography.label(theme.backgroundSecondary),\n    },\n    difficultyChipTextSelected: {\n        color: theme.textPrimary,\n    },\n    editTagChip: {\n        paddingHorizontal: 16,\n        paddingVertical: 8,\n        borderRadius: 20,\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 1.5,\n        borderColor: theme.accentPrimary,\n    },\n    editTagChipSelected: {\n        backgroundColor: theme.backgroundPrimary,\n        borderColor: theme.backgroundPrimary,\n    },\n    editTagChipText: {\n        ...Typography.label(theme.backgroundSecondary),\n    },\n    editTagChipTextSelected: {\n        color: theme.textPrimary,\n    },\n    editActionButtons: {\n        flexDirection: 'row',\n        gap: 12,\n        marginTop: 24,\n    },\n    actionButton: {\n        flex: 1,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: 8,\n        paddingVertical: 14,\n        borderRadius: 12,\n    },\n    cancelActionButton: {\n        backgroundColor: theme.backgroundPrimary,\n        borderWidth: 2,\n        borderColor: theme.accentPrimary,\n    },\n    cancelActionText: {\n        ...Typography.label(theme.textPrimary),\n    },\n    saveActionButton: {\n        backgroundColor: theme.backgroundPrimary,\n    },\n    saveActionText: {\n        ...Typography.label(theme.textPrimary),\n    },\n    mapSection: {\n        marginBottom: 20,\n    },\n    mapContainer: {\n        height: 260,\n        borderRadius: 16,\n        overflow: 'hidden',\n        marginBottom: 12,\n        borderWidth: 1,\n        borderColor: theme.accentPrimary,\n    },\n    map: {\n        width: '100%',\n        height: '100%',\n    },\n    webMapPlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: theme.accentPrimary,\n    },\n    webMapText: {\n        marginTop: 12,\n        ...Typography.caption(theme.backgroundSecondary),\n    },\n    directionsButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: theme.backgroundPrimary,\n        borderRadius: 12,\n        paddingVertical: 16,\n        paddingHorizontal: 24,\n        gap: 10,\n        shadowColor: theme.backgroundPrimary,\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 8,\n        elevation: 4,\n    },\n    directionsButtonText: {\n        ...Typography.label(theme.textPrimary),\n    },\n    detailsSection: {\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 20,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 8,\n        elevation: 2,\n    },\n    detailsTitle: {\n        ...Typography.h2(theme.backgroundPrimary),\n        marginBottom: 16,\n    },\n    detailRow: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        paddingVertical: 12,\n        borderBottomWidth: 1,\n        borderBottomColor: theme.backgroundPrimary,\n    },\n    detailIcon: {\n        width: 36,\n        height: 36,\n        borderRadius: 18,\n        backgroundColor: theme.accentPrimary,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginRight: 12,\n    },\n    detailContent: {\n        flex: 1,\n    },\n    detailLabel: {\n        ...Typography.caption(theme.backgroundSecondary),\n        marginBottom: 2,\n    },\n    detailValue: {\n        ...Typography.body(theme.backgroundPrimary),\n    },\n    startButton: {\n        flex: 1,\n        backgroundColor: theme.accentPrimary,\n        borderRadius: 16,\n        paddingVertical: 18,\n        alignItems: 'center',\n        justifyContent: 'center',\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 6 },\n        shadowOpacity: 0.16,\n        shadowRadius: 12,\n        elevation: 6,\n    },\n    startButtonText: {\n        ...Typography.h2(theme.backgroundPrimary),\n    },\n    reviewsCard: {\n        width: 140,\n        backgroundColor: theme.backgroundSecondary,\n        borderRadius: 16,\n        padding: 16,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    reviewsTitle: {\n        ...Typography.label(theme.backgroundSecondary),\n        marginBottom: 8,\n    },\n    reviewStars: {\n        flexDirection: 'row',\n        gap: 6,\n    },\n    /* Map modal / fullscreen map styles */\n    mapModal: {\n        flex: 1,\n        backgroundColor: theme.backgroundPrimary,\n    },\n    mapModalHeader: {\n        height: 64,\n        paddingHorizontal: 16,\n        justifyContent: 'center',\n    },\n    mapModalClose: {\n        width: 44,\n        height: 44,\n        borderRadius: 22,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'transparent',\n    },\n    fullscreenMapContainer: {\n        flex: 1,\n        backgroundColor: theme.borderSubtle,\n    },\n    fullscreenMap: {\n        width: '100%',\n        height: '100%',\n    },\n    mapModalFooter: {\n        padding: 16,\n        backgroundColor: theme.backgroundPrimary,\n    },\n    beginNavButton: {\n        backgroundColor: theme.accentPrimary,\n        borderRadius: 16,\n        paddingVertical: 14,\n        alignItems: 'center',\n    },\n    beginNavText: {\n        ...Typography.h2(theme.backgroundPrimary),\n    },\n});\n\nexport default styles;\n","import { useEffect, useRef, useState } from 'react';\nimport {\n  View,\n  StyleSheet,\n  ActivityIndicator,\n  Platform,\n  TouchableOpacity,\n  TextInput,\n  Alert,\n  Linking,\n  Animated,\n} from 'react-native';\nimport { Text } from '@/components';\n\nimport { router, useLocalSearchParams } from 'expo-router';\nimport { Image } from 'expo-image';\nimport TrailMap from '@/components/TrailMap';\nimport { Clock, MapPin, Calendar, Edit3, Check, X, Navigation, TrendingUp, Tag, Camera, Activity, Star, ArrowLeft, Share2, Bookmark, MoreVertical } from 'lucide-react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Haptics from 'expo-haptics';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { useTrails } from '@/context/TrailsContext';\nimport { useAuth } from '@/context/AuthContext';\nimport { Trail } from '@/types/trail';\n\nimport { formatDistance, formatDuration } from '@/utils/distance';\nimport theme from '@/constants/colors';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport styles from './[id].styles';\nimport { Typography } from '@/constants/typography';\n\nconst ENVIRONMENT_TAG_OPTIONS = [\n  'Forest', 'Urban', 'Beach', 'Mountain', 'Rural', 'Park',\n  'Shaded', 'Sunny', 'Crowded', 'Quiet', 'Paved', 'Trail'\n];\n\nconst DIFFICULTY_OPTIONS = ['Easy', 'Moderate', 'Hard'];\n\nexport default function TrailDetailScreen() {\n  const { id } = useLocalSearchParams();\n  const { user } = useAuth();\n  const { getTrailById, updateTrailName, updateTrailPhoto, updateTrailDetails, getTrailWithUser } = useTrails();\n  const [trail, setTrail] = useState<Trail | undefined>(undefined);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [isEditingName, setIsEditingName] = useState(false);\n  const [editedName, setEditedName] = useState('');\n  const [isEditingDetails, setIsEditingDetails] = useState(false);\n  const [editedRating, setEditedRating] = useState<number>(0);\n  const [editedReview, setEditedReview] = useState('');\n  const [editedTags, setEditedTags] = useState<string[]>([]);\n  const [editedDifficulty, setEditedDifficulty] = useState<string>('');\n  const [editedNameInDetails, setEditedNameInDetails] = useState('');\n  const [isUploadingPhoto, setIsUploadingPhoto] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const scrollY = useRef(new Animated.Value(0)).current;\n  const insets = useSafeAreaInsets();\n  // Helper to render native icons on mobile and an emoji fallback on web where some icon libs\n  // can produce text nodes that raise \"Text strings must be rendered within a <Text> component\".\n  const IconOrEmoji = ({ IconComponent, emoji, size = 18, color }: { IconComponent: any; emoji?: string; size?: number; color?: string }) => {\n    if (false) {\n      // Use ThemedText so the emoji/text is correctly wrapped in a <Text> component on web\n      return <Text style={{ ...Typography.body(color || '#000'), fontSize: size }}>{emoji || ''}</Text>;\n    }\n    const Icon = IconComponent;\n    return <Icon size={size} color={color} />;\n  };\n  const [isSaved, setIsSaved] = useState(false);\n  useEffect(() => {\n    loadTrail();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const loadTrail = async () => {\n    if (typeof id !== 'string') {\n      setIsLoading(false);\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const foundTrail = getTrailById(id);\n      if (foundTrail) {\n        setTrail(foundTrail);\n        setEditedName(foundTrail.name || '');\n        setEditedRating(foundTrail.rating || 0);\n        setEditedReview(foundTrail.review || '');\n        setEditedTags(foundTrail.environment_tags || []);\n        setEditedDifficulty(foundTrail.difficulty || '');\n        setEditedNameInDetails(foundTrail.name || '');\n      } else {\n        const loadedTrail = await getTrailWithUser(id);\n        if (loadedTrail) {\n          setTrail(loadedTrail);\n          setEditedName(loadedTrail.name || '');\n          setEditedRating(loadedTrail.rating || 0);\n          setEditedReview(loadedTrail.review || '');\n          setEditedTags(loadedTrail.environment_tags || []);\n          setEditedDifficulty(loadedTrail.difficulty || '');\n          setEditedNameInDetails(loadedTrail.name || '');\n        }\n      }\n    } catch (error) {\n      console.error('Error loading trail:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveName = async () => {\n    if (!trail || !editedName.trim()) {\n      setIsEditingName(false);\n      return;\n    }\n\n    try {\n      await updateTrailName(trail.id, editedName.trim());\n      setTrail({ ...trail, name: editedName.trim() });\n      setIsEditingName(false);\n    } catch {\n      Alert.alert('Error', 'Failed to update trail name. Please try again.');\n    }\n  };\n\n  const handleSaveDetails = async () => {\n    if (!trail) return;\n\n    try {\n      if (editedNameInDetails.trim() !== trail.name) {\n        await updateTrailName(trail.id, editedNameInDetails.trim());\n      }\n      await updateTrailDetails(trail.id, {\n        rating: editedRating > 0 ? editedRating : undefined,\n        review: editedReview.trim() || undefined,\n        environment_tags: editedTags.length > 0 ? editedTags : undefined,\n        difficulty: editedDifficulty || undefined,\n      });\n      setTrail({\n        ...trail,\n        name: editedNameInDetails.trim(),\n        rating: editedRating > 0 ? editedRating : undefined,\n        review: editedReview.trim() || undefined,\n        environment_tags: editedTags.length > 0 ? editedTags : undefined,\n        difficulty: editedDifficulty || undefined,\n      });\n      setEditedName(editedNameInDetails.trim());\n      setIsEditingDetails(false);\n      Alert.alert('Success', 'Trail details updated!');\n    } catch {\n      Alert.alert('Error', 'Failed to update trail details. Please try again.');\n    }\n  };\n\n  const handleGetDirections = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    if (!trail || (trail.coordinates?.length ?? 0) === 0) {\n      Alert.alert('Error', 'Location not available for this trail');\n      return;\n    }\n\n    const latitude = trail.coordinates[0].latitude;\n    const longitude = trail.coordinates[0].longitude;\n    const label = trail.name || 'Trail Location';\n\n    const scheme = Platform.select({\n      ios: 'maps:',\n      android: 'geo:',\n      default: 'https://www.google.com/maps',\n    });\n\n    const url = Platform.select({\n      ios: `${scheme}?q=${label}&ll=${latitude},${longitude}`,\n      android: `${scheme}${latitude},${longitude}?q=${label}`,\n      default: `${scheme}/search/?api=1&query=${latitude},${longitude}`,\n    });\n\n    Linking.canOpenURL(url as string).then((supported) => {\n      if (supported) {\n        Linking.openURL(url as string);\n      } else {\n        Alert.alert('Error', 'Unable to open maps application');\n      }\n    });\n  };\n\n  const handleCancelEdit = () => {\n    setEditedName(trail?.name || '');\n    setIsEditingName(false);\n  };\n\n  const handleCancelDetailsEdit = () => {\n    setEditedRating(trail?.rating || 0);\n    setEditedReview(trail?.review || '');\n    setEditedTags(trail?.environment_tags || []);\n    setEditedDifficulty(trail?.difficulty || '');\n    setEditedNameInDetails(trail?.name || '');\n    setIsEditingDetails(false);\n  };\n\n  const toggleTag = (tag: string) => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setEditedTags((prev) =>\n      prev.includes(tag) ? prev.filter((t) => t !== tag) : [...prev, tag]\n    );\n  };\n\n  const pickImageWeb = () => {\n    if (false) {\n      fileInputRef.current?.click();\n    }\n  };\n\n  const handleWebFileChange = async (event: any) => {\n    const file = event.target.files?.[0];\n    if (!file || !trail) return;\n\n    if (!file.type.startsWith('image/')) {\n      Alert.alert('Error', 'Please select an image file');\n      return;\n    }\n\n    setIsUploadingPhoto(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        const base64 = e.target?.result as string;\n        await updateTrailPhoto(trail.id, base64);\n        setTrail({ ...trail, photo: base64 });\n        Alert.alert('Success', 'Photo uploaded successfully!');\n        setIsUploadingPhoto(false);\n      };\n      reader.onerror = () => {\n        Alert.alert('Error', 'Failed to read image');\n        setIsUploadingPhoto(false);\n      };\n      reader.readAsDataURL(file);\n    } catch (error) {\n      console.error('Photo upload error:', error);\n      Alert.alert('Error', 'Failed to upload photo');\n      setIsUploadingPhoto(false);\n    }\n  };\n\n  const pickImageMobile = async () => {\n    if (!trail) return;\n\n    try {\n      const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n\n      if (!permissionResult.granted) {\n        Alert.alert('Permission Required', 'Please allow access to your photo library');\n        return;\n      }\n\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ['images'],\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 0.8,\n        base64: true,\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        setIsUploadingPhoto(true);\n        const base64Image = `data:image/jpeg;base64,${result.assets[0].base64}`;\n        await updateTrailPhoto(trail.id, base64Image);\n        setTrail({ ...trail, photo: base64Image });\n        Alert.alert('Success', 'Photo uploaded successfully!');\n        setIsUploadingPhoto(false);\n      }\n    } catch (error) {\n      console.error('Photo upload error:', error);\n      Alert.alert('Error', 'Failed to upload photo');\n      setIsUploadingPhoto(false);\n    }\n  };\n\n  const handlePickImage = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    if (false) {\n      pickImageWeb();\n    } else {\n      pickImageMobile();\n    }\n  };\n\n  const handleBack = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    router.back();\n  };\n\n  const handleShare = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    Alert.alert('Share', 'Share functionality coming soon!');\n  };\n\n  const handleSave = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setIsSaved(!isSaved);\n  };\n\n  const handleMore = () => {\n    if (true) {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    Alert.alert('Options', 'Mark as completed option coming soon!');\n  };\n\n  if (isLoading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n        <Text style={styles.loadingText}>Loading trail...</Text>\n      </View>\n    );\n  }\n\n  if (!trail) {\n    return (\n      <View style={styles.loadingContainer}>\n        <MapPin size={64} color=\"#9ca3af\" />\n        <Text style={styles.loadingText}>Trail not found</Text>\n      </View>\n    );\n  }\n\n  const coords = trail.coordinates ?? [];\n\n  const region = coords.length > 0 ? {\n    latitude: coords[0].latitude,\n    longitude: coords[0].longitude,\n    latitudeDelta: 0.01,\n    longitudeDelta: 0.01,\n  } : undefined;\n\n  const canEdit = trail.user_id === user?.id;\n\n  return (\n    <View style={[\n      styles.container,\n      { paddingTop: insets.top + 70, paddingBottom: Math.max(16, insets.bottom), paddingHorizontal: 16 + (insets.left || 0) },\n    ]}>\n      {false && (\n        <input\n          ref={fileInputRef as any}\n          type=\"file\"\n          accept=\"image/*\"\n          style={{ display: 'none' }}\n          onChange={handleWebFileChange}\n        />\n      )}\n\n      <View style={[styles.headerButtons, { top: insets.top + 12 }]}>\n        <TouchableOpacity style={styles.headerButton} onPress={handleBack}>\n          <ArrowLeft size={24} />\n        </TouchableOpacity>\n        <View style={styles.headerRightButtons}>\n          <TouchableOpacity style={styles.headerButton} onPress={handleShare}>\n            <Share2 size={22} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.headerButton} onPress={handleSave}>\n            <Bookmark size={22} fill={isSaved ? theme.textPrimary : 'none'} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.headerButton} onPress={handleMore}>\n            <MoreVertical size={22} />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <Animated.ScrollView\n        style={styles.scrollContainer}\n        contentContainerStyle={styles.scrollContent}\n        onScroll={Animated.event(\n          [{ nativeEvent: { contentOffset: { y: scrollY } } }],\n          { useNativeDriver: false }\n        )}\n        scrollEventThrottle={16}\n      >\n        <View style={styles.heroSection}>\n          {trail.photo ? (\n            <View style={styles.heroImageContainer}>\n              <Image\n                source={{ uri: trail.photo }}\n                style={styles.heroImage}\n                contentFit=\"cover\"\n                cachePolicy=\"memory-disk\"\n              />\n              <LinearGradient\n                colors={['rgba(0,0,0,0)', 'rgba(0,0,0,0.3)']}\n                style={styles.heroGradient}\n              />\n              {canEdit && (\n                <TouchableOpacity\n                  style={styles.changePhotoFab}\n                  onPress={handlePickImage}\n                  disabled={isUploadingPhoto}\n                >\n                  {isUploadingPhoto ? (\n                    <ActivityIndicator color={theme.textPrimary} size=\"small\" />\n                  ) : (\n                    <Camera size={20} color={theme.textPrimary} />\n                  )}\n                </TouchableOpacity>\n              )}\n            </View>\n          ) : canEdit && (\n            <TouchableOpacity\n              style={styles.addPhotoContainer}\n              onPress={handlePickImage}\n              disabled={isUploadingPhoto}\n            >\n              {isUploadingPhoto ? (\n                <ActivityIndicator size=\"large\" color={theme.backgroundPrimary} />\n              ) : (\n                <>\n                  <View style={styles.addPhotoIcon}>\n                    <Camera size={32} color={theme.backgroundPrimary} />\n                  </View>\n                  <Text style={styles.addPhotoText}>Add a photo</Text>\n                  <Text style={styles.addPhotoSubtext}>Make your trail memorable</Text>\n                </>\n              )}\n            </TouchableOpacity>\n          )}\n\n\n        </View>\n\n        <View style={styles.contentWrapper}>\n          <View style={styles.content}>\n            <View style={styles.titleSection}>\n              <View style={styles.dateRow}>\n                <IconOrEmoji IconComponent={Calendar} emoji=\"\" size={16} color={theme.accentPrimary} />\n                <Text style={styles.dateText}>{new Date(trail.createdAt ?? trail.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</Text>\n              </View>\n              {canEdit && isEditingName ? (\n                <View style={styles.nameEditContainer}>\n                  <TextInput\n                    style={styles.nameInput}\n                    value={editedName}\n                    onChangeText={setEditedName}\n                    placeholder=\"Enter trail name\"\n                    autoFocus\n                    placeholderTextColor=\"#9ca3af\"\n                  />\n                  <View style={styles.editButtons}>\n                    <TouchableOpacity\n                      style={[styles.iconButton, styles.saveIconButton]}\n                      onPress={handleSaveName}\n                    >\n                      <Check size={18} color=\"#fff\" />\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.iconButton, styles.cancelIconButton]}\n                      onPress={handleCancelEdit}\n                    >\n                      <X size={18} color={theme.textPrimary} />\n                    </TouchableOpacity>\n                  </View>\n                </View>\n              ) : (\n                <View style={styles.titleRow}>\n                  <Text style={styles.title}>{trail.name || `Trail ${new Date(trail.createdAt ?? trail.date).toLocaleDateString()}`}</Text>\n                </View>\n              )}\n\n              <View style={styles.authorRow}>\n                {user?.name ? (\n                  <View style={styles.avatar}>\n                    <Text style={styles.avatarText}>{user.name.split(' ').map(s=>s[0]).slice(0,2).join('')}</Text>\n                  </View>\n                ) : (\n                  <View style={styles.avatar} />\n                )}\n                <Text style={styles.authorName}>{user?.name || 'John Snow'}</Text>\n              </View>\n\n              {trail.city && (\n                <View style={styles.locationRow}>\n                  <MapPin size={16} color={theme.textPrimary} />\n                  <Text style={styles.location}>{trail.city}, {trail.country || 'Unknown'}</Text>\n                </View>\n              )}\n\n              {trail.rating && !isEditingDetails && (\n                <View style={styles.ratingRow}>\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <Star\n                      key={star}\n                      size={18}\n                      color={star <= trail.rating! ? '#f59e0b' : '#d1d5db'}\n                      fill={star <= trail.rating! ? '#f59e0b' : 'none'}\n                    />\n                  ))}\n                </View>\n              )}\n            </View>\n\n            {trail.review && !isEditingDetails && (\n              <View style={styles.reviewCard}>\n                <Text style={styles.reviewText}>{trail.review}</Text>\n              </View>\n            )}\n\n            <View style={styles.statsSection}>\n              <View style={styles.statCard}>\n                <View style={styles.statIconContainer}>\n                  <MapPin size={20} color={theme.textPrimary} strokeWidth={2.5} />\n                </View>\n                <Text style={styles.statLabel}>Distance</Text>\n                <Text style={styles.statValue}>{formatDistance(trail.distance)}</Text>\n              </View>\n\n              <View style={styles.statCard}>\n                <View style={styles.statIconContainer}>\n                  <Clock size={20} color={theme.textPrimary} strokeWidth={2.5} />\n                </View>\n                <Text style={styles.statLabel}>Duration</Text>\n                <Text style={styles.statValue}>{formatDuration(trail.duration)}</Text>\n              </View>\n\n              {trail.difficulty && (\n                <View style={styles.statCard}>\n                  <View style={styles.statIconContainer}>\n                    <IconOrEmoji IconComponent={TrendingUp} emoji=\"\" size={20} color={theme.textPrimary} />\n                  </View>\n                  <Text style={styles.statLabel}>Difficulty</Text>\n                  <Text style={styles.statValue}>{trail.difficulty}</Text>\n                </View>\n              )}\n            </View>\n\n            {trail.environment_tags && trail.environment_tags.length > 0 && !isEditingDetails && (\n              <View style={styles.tagsSection}>\n                <View style={styles.sectionHeader}>\n                  <IconOrEmoji IconComponent={Tag} emoji=\"\" size={18} color={theme.textPrimary} />\n                  <Text style={styles.sectionTitle}>Environment</Text>\n                </View>\n                <View style={styles.tagsGrid}>\n                  {trail.environment_tags.map((tag: string, index: number) => (\n                    <View key={index} style={styles.tagChip}>\n                      <Text style={styles.tagText}>{tag}</Text>\n                    </View>\n                  ))}\n                </View>\n              </View>\n            )}\n\n            {canEdit && !isEditingDetails && (\n              <TouchableOpacity\n                style={styles.editDetailsButton}\n                onPress={() => {\n                  if (true) {\n                    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                  }\n                  setIsEditingDetails(true);\n                }}\n              >\n                <Edit3 size={18} color={theme.backgroundPrimary} />\n                <Text style={styles.editDetailsText}>Edit Trail Details</Text>\n              </TouchableOpacity>\n            )}\n\n            {canEdit && isEditingDetails && (\n              <View style={styles.editSection}>\n                <Text style={styles.editSectionTitle}>Trail Name</Text>\n                <TextInput\n                  style={styles.nameInputInDetails}\n                  value={editedNameInDetails}\n                  onChangeText={setEditedNameInDetails}\n                  placeholder=\"Enter trail name\"\n                  placeholderTextColor=\"#9ca3af\"\n                />\n\n                <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Rating</Text>\n                <View style={styles.ratingStars}>\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <TouchableOpacity\n                      key={star}\n                      onPress={() => {\n                        if (true) {\n                          Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                        }\n                        setEditedRating(star);\n                      }}\n                      style={styles.starButton}\n                    >\n                      <Star\n                        size={32}\n                        color={star <= editedRating ? '#f59e0b' : '#d1d5db'}\n                        fill={star <= editedRating ? '#f59e0b' : 'none'}\n                      />\n                    </TouchableOpacity>\n                  ))}\n                </View>\n\n                <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Review</Text>\n                <TextInput\n                  style={styles.reviewInput}\n                  value={editedReview}\n                  onChangeText={setEditedReview}\n                  placeholder=\"Share your experience on this trail...\"\n                  placeholderTextColor=\"#9ca3af\"\n                  multiline\n                  numberOfLines={4}\n                  textAlignVertical=\"top\"\n                />\n\n                <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Difficulty</Text>\n                <View style={styles.difficultyOptions}>\n                  {DIFFICULTY_OPTIONS.map((difficulty) => (\n                    <TouchableOpacity\n                      key={difficulty}\n                      style={[\n                        styles.difficultyChip,\n                        editedDifficulty === difficulty && styles.difficultyChipSelected,\n                      ]}\n                      onPress={() => {\n                        if (true) {\n                          Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                        }\n                        setEditedDifficulty(difficulty);\n                      }}\n                    >\n                      <Text\n                        style={[\n                          styles.difficultyChipText,\n                          editedDifficulty === difficulty && styles.difficultyChipTextSelected,\n                        ]}\n                      >\n                        {difficulty}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n\n                <Text style={[styles.editSectionTitle, { marginTop: 24 }]}>Environment Tags</Text>\n                <View style={styles.tagsGrid}>\n                  {ENVIRONMENT_TAG_OPTIONS.map((tag) => (\n                    <TouchableOpacity\n                      key={tag}\n                      style={[\n                        styles.editTagChip,\n                        editedTags.includes(tag) && styles.editTagChipSelected,\n                      ]}\n                      onPress={() => toggleTag(tag)}\n                    >\n                      <Text\n                        style={[\n                          styles.editTagChipText,\n                          editedTags.includes(tag) && styles.editTagChipTextSelected,\n                        ]}\n                      >\n                        {tag}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n\n                <View style={styles.editActionButtons}>\n                  <TouchableOpacity\n                    style={[styles.actionButton, styles.cancelActionButton]}\n                    onPress={handleCancelDetailsEdit}\n                  >\n                    <X size={20} color={theme.textPrimary} />\n                    <Text style={styles.cancelActionText}>Cancel</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={[styles.actionButton, styles.saveActionButton]}\n                    onPress={handleSaveDetails}\n                  >\n                    <Check size={20} color=\"#fff\" />\n                    <Text style={styles.saveActionText}>Save</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n            )}\n\n            <View style={styles.mapSection}>\n              <View style={styles.sectionHeader}>\n                <IconOrEmoji IconComponent={Navigation} emoji=\"\" size={18} color={theme.textPrimary} />\n                <Text style={styles.sectionTitle}>Route Map</Text>\n              </View>\n              <View style={styles.mapContainer}>\n                <TrailMap\n                  coordinates={coords}\n                  style={styles.map}\n                  initialRegion={region || undefined}\n                  scrollEnabled={false}\n                  zoomEnabled={false}\n                />\n              </View>\n              <TouchableOpacity style={styles.directionsButton} onPress={handleGetDirections}>\n                <IconOrEmoji IconComponent={Navigation} emoji=\"\" size={18} color=\"#fff\" />\n                <Text style={styles.directionsButtonText}>Get Directions</Text>\n              </TouchableOpacity>\n              <View style={{ height: 16 }} />\n\n              <View style={{ flexDirection: 'row', gap: 12, marginBottom: 20 }}>\n                <TouchableOpacity style={styles.startButton} onPress={() => {\n                  if (true) {\n                    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                  }\n                  router.push(`/(tabs)/record?trailId=${trail.id}`);\n                }}>\n                  <Text style={styles.startButtonText}>Start Trail</Text>\n                </TouchableOpacity>\n\n                <View style={styles.reviewsCard}>\n                  <Text style={styles.reviewsTitle}>Reviews</Text>\n                  <View style={styles.reviewStars}>\n                    {[1,2,3,4,5].map((s)=> (\n                      <Star key={s} size={20} color={s <= (trail.rating || 0) ? '#f59e0b' : '#374151'} />\n                    ))}\n                  </View>\n                </View>\n              </View>\n              \n              {/* Replaced modal with navigation to record screen. */}\n            </View>\n\n            <View>\n              <Text style={styles.detailsTitle}>Additional Details</Text>\n\n              {trail.maxElevation !== undefined && (\n                <View style={styles.detailRow}>\n                  <View style={styles.detailIcon}>\n                    <IconOrEmoji IconComponent={TrendingUp} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n                  </View>\n                  <View style={styles.detailContent}>\n                    <Text style={styles.detailLabel}>Elevation Gain</Text>\n                    <Text style={styles.detailValue}>{trail.maxElevation}m</Text>\n                  </View>\n                </View>\n              )}\n\n              {trail.pace && (\n                <View style={styles.detailRow}>\n                  <View style={styles.detailIcon}>\n                    <IconOrEmoji IconComponent={Activity} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n                  </View>\n                  <View style={styles.detailContent}>\n                    <Text style={styles.detailLabel}>Pace</Text>\n                    <Text style={styles.detailValue}>{trail.pace} /km</Text>\n                  </View>\n                </View>\n              )}\n\n              {trail.speed && (\n                <View style={styles.detailRow}>\n                  <View style={styles.detailIcon}>\n                    <IconOrEmoji IconComponent={Activity} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n                  </View>\n                  <View style={styles.detailContent}>\n                    <Text style={styles.detailLabel}>Max Speed</Text>\n                    <Text style={styles.detailValue}>{trail.speed.toFixed(1)} km/h</Text>\n                  </View>\n                </View>\n              )}\n\n              <View style={styles.detailRow}>\n                <View style={styles.detailIcon}>\n                  <IconOrEmoji IconComponent={Calendar} emoji=\"\" size={18} color={theme.backgroundPrimary} />\n                </View>\n                <View style={styles.detailContent}>\n                  <Text style={styles.detailLabel}>Date & Time</Text>\n                  <Text style={styles.detailValue}>\n                    {new Date(trail.createdAt ?? trail.date).toLocaleString('en-US', {\n                      weekday: 'short',\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric',\n                      hour: 'numeric',\n                      minute: '2-digit',\n                    })}\n                  </Text>\n                </View>\n              </View>\n            </View>\n          </View>\n        </View>\n      </Animated.ScrollView>\n    </View>\n  );\n}\n","\nimport React from 'react';\nimport { StyleSheet, View, FlatList, TouchableOpacity, ActivityIndicator } from 'react-native';\nimport { Text } from '@/components';\nimport { Typography } from '@/constants/typography';\nimport theme from '@/constants/colors';\nimport { useRouter } from 'expo-router';\nimport { MapPin, Clock } from 'lucide-react-native';\nimport { useTrails } from '@/context/TrailsContext';\nimport { Trail } from '@/types/trail';\nimport { formatDistance, formatDuration, formatDate } from '@/utils/distance';\n\nexport default function TrailsScreen() {\n  const router = useRouter();\n  const { trails, isLoading } = useTrails();\n\n  const renderTrailItem = ({ item }: { item: Trail }) => (\n    <TouchableOpacity\n      style={styles.trailItem}\n      onPress={() => router.push(`/trail/${item.id}` as any)}\n    >\n      <View style={styles.trailHeader}>\n        <View style={styles.iconContainer}>\n          <MapPin size={24} color={theme.backgroundPrimary} />\n        </View>\n        <View style={styles.trailInfo}>\n          <Text style={styles.trailDate}>{formatDate(item.date)}</Text>\n          <View style={styles.statsRow}>\n            <View style={styles.statItem}>\n              <MapPin size={16} color={theme.textMuted} />\n              <Text style={styles.statText}>{formatDistance(item.distance)}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Clock size={16} color={theme.textMuted} />\n              <Text style={styles.statText}>{formatDuration(item.duration)}</Text>\n            </View>\n          </View>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyContainer}>\n      <MapPin size={64} color={theme.borderSubtle} />\n      <Text style={styles.emptyTitle}>No trails yet</Text>\n      <Text style={styles.emptyText}>\n        Start recording your first dog walk to see it here!\n      </Text>\n    </View>\n  );\n\n  if (isLoading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#2563eb\" />\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={trails}\n        renderItem={renderTrailItem}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={trails.length === 0 ? styles.emptyList : styles.list}\n        ListEmptyComponent={renderEmptyState}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  list: {\n    padding: 16,\n    gap: 12,\n  },\n  emptyList: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.backgroundSecondary,\n  },\n  trailItem: {\n    backgroundColor: theme.textPrimary,\n    borderRadius: 16,\n    padding: 16,\n    marginBottom: 12,\n  shadowColor: theme.backgroundSecondaryVarient,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  trailHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  iconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  trailInfo: {\n    flex: 1,\n  },\n  trailDate: {\n    ...Typography.body(theme.textPrimary),\n    marginBottom: 6,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: 16,\n  },\n  statItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  statText: {\n    ...Typography.label(theme.textMuted),\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n  },\n  emptyTitle: {\n    ...Typography.h2('#1f2937'),\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptyText: {\n    ...Typography.body(theme.textMuted),\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n});\n","import React from 'react';\nimport { View, ActivityIndicator, Platform, StyleSheet } from 'react-native';\n\nlet LottieView: any = null;\ntry {\n  // lottie-react-native is native-only; require it dynamically so web doesn't crash\n  // (the package will be absent until the developer installs it)\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  LottieView = require('lottie-react-native').default;\n} catch (e) {\n  LottieView = null;\n}\n\ntype Props = {\n  size?: number;\n};\n\nexport default function LottieLoader({ size = 200 }: Props) {\n  // Fallback to ActivityIndicator on web or when lottie isn't installed/available\n  if (false || !LottieView) {\n    return (\n      <View style={styles.center}>\n        <ActivityIndicator size=\"large\" color=\"#2563eb\" />\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.center}>\n      <LottieView\n        source={require('../assets/tail-trails-loader.json')}\n        autoPlay\n        loop\n        style={{ width: size, height: size }}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\n\nexport default StyleSheet.create({\n  container: {\n    backgroundColor: theme.backgroundSecondary,\n    overflow: 'hidden',\n  },\n});\n","import React, { useEffect, forwardRef, useRef, useImperativeHandle } from 'react';\n\nimport { View } from 'react-native';\nimport styles from './TrailMap.styles';\nimport * as maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n// Use hosted outdoors style for web\nconst OUTDOORS_STYLE_URL = 'https://api.tailtrails.club/map/style.json';\n\ninterface TrailMapProps {\n  coordinates: { latitude: number; longitude: number }[];\n  style?: any;\n  scrollEnabled?: boolean;\n  zoomEnabled?: boolean;\n  showsUserLocation?: boolean;\n  followsUserLocation?: boolean;\n  showsMyLocationButton?: boolean;\n  initialRegion?: {\n    latitude: number;\n    longitude: number;\n    latitudeDelta: number;\n    longitudeDelta: number;\n  };\n}\n\nconst TrailMap = forwardRef<any, TrailMapProps>(({ \n  coordinates, \n  style, \n  initialRegion,\n  scrollEnabled = true,\n  zoomEnabled = true,\n}, ref) => {\n  const mapContainerRef = useRef<HTMLDivElement | null>(null);\n  const mapRef = useRef<maplibregl.Map | null>(null);\n\n  useImperativeHandle(ref, () => ({\n    animateToRegion: (region: any, duration: number = 500) => {\n      if (mapRef.current) {\n        mapRef.current.easeTo({\n          center: [region.longitude, region.latitude],\n          zoom: 14, // Approximate zoom for the delta\n          duration: duration,\n        });\n      }\n    },\n    fitToCoordinates: (coords: any[], options: any = {}) => {\n      if (mapRef.current && coords.length > 0) {\n        const bounds = new maplibregl.LngLatBounds();\n        coords.forEach(c => bounds.extend([c.longitude, c.latitude]));\n        mapRef.current.fitBounds(bounds, { padding: options.edgePadding || 20 });\n      }\n    }\n  }));\n\n  useEffect(() => {\n    if (!mapContainerRef.current) return;\n\n    const center: [number, number] = initialRegion \n      ? [initialRegion.longitude, initialRegion.latitude]\n      : coordinates.length > 0 \n        ? [coordinates[0].longitude, coordinates[0].latitude]\n        : [0, 0];\n\n    const zoom = initialRegion ? 14 : 12;\n\n    const map = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: OUTDOORS_STYLE_URL,\n      center: center,\n      zoom: zoom,\n      interactive: scrollEnabled && zoomEnabled,\n    });\n\n    mapRef.current = map;\n\n    map.on('load', () => {\n      if (coordinates.length > 1) {\n        map.addSource('route', {\n          'type': 'geojson',\n          'data': {\n            'type': 'Feature',\n            'properties': {},\n            'geometry': {\n              'type': 'LineString',\n              'coordinates': coordinates.map(c => [c.longitude, c.latitude])\n            }\n          }\n        });\n\n        map.addLayer({\n          'id': 'route',\n          'type': 'line',\n          'source': 'route',\n          'layout': {\n            'line-join': 'round',\n            'line-cap': 'round'\n          },\n          'paint': {\n            'line-color': '#5d6b4a',\n            'line-width': 4\n          }\n        });\n\n        // Fit bounds to coordinates\n        const bounds = new maplibregl.LngLatBounds();\n        coordinates.forEach(c => bounds.extend([c.longitude, c.latitude]));\n        map.fitBounds(bounds, { padding: 20 });\n      }\n    });\n\n    return () => {\n      map.remove();\n    };\n  }, [coordinates, initialRegion, scrollEnabled, zoomEnabled]);\n\n  return (\n    <View style={[style, styles.container]}>\n      <div \n        ref={mapContainerRef} \n        style={{ width: '100%', height: '100%' }} \n      />\n    </View>\n  );\n});\n\n// styles imported from TrailMap.styles.ts\n\nexport default TrailMap;\n","import { StyleSheet } from 'react-native';\nimport theme from '@/constants/colors';\nimport { Typography } from '@/constants/typography';\n\nexport default StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n    borderRadius: 12,\n    backgroundColor: theme.backgroundSecondary,\n  },\n  map: {\n    width: '100%',\n    height: '100%',\n  },\n  placeholder: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 12,\n  },\n  text: {\n    ...Typography.body(theme.backgroundPrimary),\n    fontWeight: '700' as any,\n  },\n  subtext: {\n    ...Typography.caption(theme.textMuted),\n    marginTop: 4,\n  },\n});\n","import React, { useEffect, useRef } from 'react';\nimport { Text, View } from 'react-native';\nimport styles from './TrailMapPreview.styles';\nimport { Coordinate } from '@/types/trail';\nimport * as maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n// Use hosted outdoors style for web\nconst OUTDOORS_STYLE_URL = 'https://api.tailtrails.club/map/style.json';\n\n\ninterface TrailMapPreviewProps {\n  coordinates?: Coordinate[];\n  // backend may return path as [[lon, lat], ...]\n  path?: number[][] | null;\n  style?: any;\n  height?: number | string;\n  startLatitude?: number | null;\n  startLongitude?: number | null;\n}\n\nexport default function TrailMapPreview({ coordinates, path, style, height = 260, startLatitude = null, startLongitude = null }: TrailMapPreviewProps) {\n  const mapContainerRef = useRef<HTMLDivElement | null>(null);\n  const mapRef = useRef<maplibregl.Map | null>(null);\n  const markerRef = useRef<maplibregl.Marker | null>(null);\n\n  // derive coords from coordinates or path\n  const coords: Coordinate[] = (coordinates && coordinates.length > 0)\n    ? coordinates\n    : (Array.isArray((path as any)) ? (path as number[][]).map(p => ({ latitude: p[1], longitude: p[0] })) : []);\n\n  useEffect(() => {\n    if (!mapContainerRef.current) return;\n\n    // Initialize map\n    const center: [number, number] = (startLatitude != null && startLongitude != null)\n      ? [startLongitude, startLatitude]\n      : (coords.length > 0 ? [coords[0].longitude, coords[0].latitude] : [0, 0]);\n\n    const map = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: OUTDOORS_STYLE_URL,\n      center,\n      zoom: coords.length > 0 ? 12 : 1,\n      interactive: false,\n    });\n\n    mapRef.current = map;\n\n    map.on('load', () => {\n      // If we have a route (multiple points), draw it\n      if (coords && coords.length > 1) {\n        const geojson = {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'LineString',\n            coordinates: coords.map(c => [c.longitude, c.latitude]),\n          }\n        } as any;\n\n        if (map.getSource('preview-route')) {\n          (map.getSource('preview-route') as maplibregl.GeoJSONSource).setData(geojson);\n        } else {\n          map.addSource('preview-route', { type: 'geojson', data: geojson });\n\n          map.addLayer({\n            id: 'preview-route',\n            type: 'line',\n            source: 'preview-route',\n            layout: { 'line-join': 'round', 'line-cap': 'round' },\n            paint: { 'line-color': '#5d6b4a', 'line-width': 3 }\n          });\n        }\n\n        const bounds = new maplibregl.LngLatBounds();\n        coords.forEach(c => bounds.extend([c.longitude, c.latitude]));\n        map.fitBounds(bounds, { padding: 10, maxZoom: 16 });\n      }\n\n      // If there's a single point, place a marker at the location and center\n      else if (coords && coords.length === 1) {\n        const pt = coords[0];\n        // create a simple default marker\n        if (markerRef.current) {\n          markerRef.current.setLngLat([pt.longitude, pt.latitude]);\n        } else {\n          const m = new maplibregl.Marker({ color: '#5d6b4a' })\n            .setLngLat([pt.longitude, pt.latitude])\n            .addTo(map);\n          markerRef.current = m;\n        }\n\n        map.setCenter([pt.longitude, pt.latitude]);\n        map.setZoom(14);\n      }\n    });\n\n    return () => {\n      try {\n        map.remove();\n      } catch (e) {\n        // ignore remove errors\n      }\n      mapRef.current = null;\n      markerRef.current = null;\n    };\n  // Recreate map when coordinates/path/start center change\n  }, [JSON.stringify(coords), startLatitude, startLongitude]);\n\n  return (\n    <View style={[styles.container, style]}>\n      {coords && coords.length > 0 ? (\n        <div\n          ref={mapContainerRef}\n          style={{ width: '100%', height: typeof height === 'number' ? `${height}px` : height }}\n        />\n      ) : (\n        <View style={styles.placeholder}>\n          <Text style={styles.text}>Map Preview (Web)</Text>\n          <Text style={styles.subtext}>{coords?.length || 0} points recorded</Text>\n        </View>\n      )}\n    </View>\n  );\n}\n\n// styles imported from TrailMapPreview.styles.ts\n","import React from 'react';\nimport { \n  Text as RNText, \n  TextProps, \n  Platform, \n  StyleSheet, \n  TextStyle \n} from 'react-native';\n\ninterface CustomTextProps extends TextProps {\n  // You can add custom props here later, like 'variant' or 'color'\n  children?: React.ReactNode;\n}\n\nconst Typography: React.FC<CustomTextProps> = ({ style, children, ...props }) => {\n  return (\n    <RNText \n      {...props} \n      style={[styles.defaultStyle, style]}\n    >\n      {children}\n    </RNText>\n  );\n};\n\nconst styles = StyleSheet.create({\n  defaultStyle: {\n    ...Platform.select({\n      android: {\n        // More aggressive fix for Android clipping\n        includeFontPadding: true,\n        paddingHorizontal: 6, // Wider horizontal safety\n        paddingVertical: 3,   // Taller vertical safety\n        textAlignVertical: 'center',\n        overflow: 'visible',  // Ensure bounds don't clip drawing\n      },\n      ios: {\n        // iOS rendering is generally precise out of the box\n      },\n    }) as TextStyle,\n  },\n});\n\nexport default Typography;","// Single, fixed theme for the app.\n// This file exports a single `theme` object (keeps a default export for compatibility).\n\nconst themeObj = {\n  backgroundPrimary: '#191E07',\n  backgroundSecondary: '#272F0A',\n  backgroundSecondaryVarient: '#3E481B',\n\n  accentPrimary: '#FFFE77',\n  accentSecondary: '#D4FF5E',\n\n  textPrimary: '#FFFFFF',\n  textSecondary: '#BEC056',\n  textMuted: '#A0A883',\n\n  borderSubtle: '#343A20',\n  \n};\n\nexport const theme = themeObj as any;\nexport default themeObj;\n","import { Platform, TextStyle } from 'react-native';\n\n// Helper to handle the Android quirks automatically\nconst createTextStyle = (\n  size: number, \n  weight: '400' | '500' | '600' | '700' | 'bold', \n  color: string\n): TextStyle => ({\n  fontSize: size,\n  color: color,\n  ...Platform.select({\n    android: {\n      // Android Fixes: aggressive padding and system defaults for stability\n      includeFontPadding: true, \n      fontWeight: (weight === '600' || weight === '700' || weight === 'bold') ? 'bold' : 'normal',\n      paddingHorizontal: 6,\n      paddingVertical: 3,\n      // No fixed lineHeight on Android to allow system to expand bounding box\n      lineHeight: undefined, \n      textAlignVertical: 'center',\n    },\n    ios: {\n      fontWeight: weight as any,\n      lineHeight: Math.round(size * 1.3),\n    },\n  }),\n});\n\nexport const Typography = {\n  h1: (color: string) => createTextStyle(32, '700', color),\n  h2: (color: string) => createTextStyle(24, '700', color),\n  body: (color: string) => createTextStyle(16, '400', color),\n  label: (color: string) => createTextStyle(14, '600', color),\n  button: (color: string) => createTextStyle(16, '600', color),\n  caption: (color: string) => createTextStyle(12, '400', color),\n};","import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport { useAuth } from '@/context/AuthContext';\nimport { API_URL } from '@/lib/api';\n\nexport interface UserProfile {\n  id: string;\n  user_id: string;\n  name: string | null;\n  image: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport const [AccountContext, useAccount] = createContextHook(() => {\n  const { user, session } = useAuth();\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  const fetchAccount = useCallback(async () => {\n    if (!session?.accessToken) return;\n\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/account/me`, {\n        headers: {\n          'Authorization': `Bearer ${session.accessToken}`,\n        },\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setUserProfile(data);\n      } else {\n        console.error('Failed to fetch account:', response.status);\n        setUserProfile(null);\n      }\n    } catch (error) {\n      console.error('Error fetching account:', error);\n      setUserProfile(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [session?.accessToken]);\n\n  const updateAccount = useCallback(async (updates: Partial<Pick<UserProfile, 'name' | 'image'>>) => {\n    if (!session?.accessToken) throw new Error('No active session');\n\n    try {\n      const response = await fetch(`${API_URL}/account/me`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.accessToken}`,\n        },\n        body: JSON.stringify(updates),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail?.[0]?.msg || 'Failed to update account');\n      }\n\n      const data = await response.json();\n      setUserProfile(data);\n      return data;\n    } catch (error) {\n      console.error('Error updating account:', error);\n      throw error;\n    }\n  }, [session?.accessToken]);\n\n  const deleteAccount = useCallback(async () => {\n    if (!session?.accessToken) throw new Error('No active session');\n\n    try {\n      const response = await fetch(`${API_URL}/account/me`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${session.accessToken}`,\n        },\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail?.[0]?.msg || 'Failed to delete account');\n      }\n\n      setUserProfile(null);\n      return true;\n    } catch (error) {\n      console.error('Error deleting account:', error);\n      throw error;\n    }\n  }, [session?.accessToken]);\n\n  useEffect(() => {\n    if (session?.accessToken) {\n      fetchAccount();\n    } else {\n      setUserProfile(null);\n      setIsLoading(false);\n    }\n  }, [session?.accessToken, fetchAccount]);\n\n  return useMemo(() => ({\n    userProfile,\n    isLoading,\n    refreshAccount: fetchAccount,\n    updateAccount,\n    deleteAccount,\n  }), [userProfile, isLoading, fetchAccount, updateAccount, deleteAccount]);\n});\n","import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { API_URL } from '@/lib/api';\n\nexport interface User {\n  id: string;\n  email: string;\n  name: string;\n}\n\nexport interface Session {\n  user: User;\n  accessToken: string;\n  tokenType: string;\n}\n\nexport const [AuthContext, useAuth] = createContextHook(() => {\n  const [session, setSession] = useState<Session | null>(null);\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    const loadSession = async () => {\n      try {\n        const savedSession = await AsyncStorage.getItem('session');\n        if (savedSession) {\n          const parsedSession = JSON.parse(savedSession);\n          setSession(parsedSession);\n          setUser(parsedSession.user);\n        }\n      } catch (error) {\n        console.error('Error loading session:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadSession();\n  }, []);\n\n  const requestOtp = useCallback(async (email: string) => {\n    console.log('Requesting OTP for:', email);\n    const response = await fetch(`${API_URL}/otp/request`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to request OTP');\n    }\n\n    return true;\n  }, []);\n\n  const verifyOtp = useCallback(async (email: string, otpCode: string) => {\n    console.log('Verifying OTP for:', email);\n    const response = await fetch(`${API_URL}/otp/verify`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, otpCode }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Invalid OTP code');\n    }\n\n    const data: Session = await response.json();\n    setSession(data);\n    setUser(data.user);\n    await AsyncStorage.setItem('session', JSON.stringify(data));\n    \n    return data;\n  }, []);\n\n  const requestRegistration = useCallback(async (email: string, name: string) => {\n    console.log('Requesting registration for:', email);\n    const response = await fetch(`${API_URL}/otp/register-request`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, name }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to request registration');\n    }\n\n    return true;\n  }, []);\n\n  const verifyRegistration = useCallback(async (email: string, otpCode: string) => {\n    console.log('Verifying registration for:', email);\n    const response = await fetch(`${API_URL}/otp/register-verify`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, otpCode }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Invalid OTP code');\n    }\n\n    const data: Session = await response.json();\n    setSession(data);\n    setUser(data.user);\n    await AsyncStorage.setItem('session', JSON.stringify(data));\n    \n    return data;\n  }, []);\n\n  const signInWithToken = useCallback(async (tokenResponse: { accessToken: string; tokenType?: string; user?: User }) => {\n    // Accept token response from webauthn auth verify endpoint and persist session\n    const sessionObj: Session = {\n      accessToken: tokenResponse.accessToken,\n      tokenType: tokenResponse.tokenType || 'bearer',\n      user: (tokenResponse.user as User) || (user as User),\n    } as Session;\n    setSession(sessionObj);\n    setUser(sessionObj.user);\n    await AsyncStorage.setItem('session', JSON.stringify(sessionObj));\n    return sessionObj;\n  }, [user]);\n\n  const signOut = useCallback(async () => {\n    console.log('Signing out user');\n    setSession(null);\n    setUser(null);\n    await AsyncStorage.removeItem('session');\n  }, []);\n\n  return useMemo(() => ({\n    session,\n    user,\n    isLoading,\n    requestOtp,\n    verifyOtp,\n    requestRegistration,\n    verifyRegistration,\n    signInWithToken,\n    signOut,\n    isAuthenticated: !!session,\n  }), [session, user, isLoading, requestOtp, verifyOtp, requestRegistration, verifyRegistration, signOut]);\n});\n\n","import React, { useEffect, useState, useMemo, useCallback } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport { useAuth } from '@/context/AuthContext';\nimport { DogProfile } from '@/types/dog-profile';\nimport { API_URL } from '@/lib/api';\n\nexport const [DogsContext, useDogs] = createContextHook(() => {\n  const { user, session, isLoading: isAuthLoading } = useAuth();\n  const [dogProfiles, setDogProfiles] = useState<DogProfile[]>([]);\n  const [activeDogId, setActiveDogId] = useState<string | null>(null);\n  const [isDogProfileLoading, setIsDogProfileLoading] = useState<boolean>(true);\n\n  const dogProfile = useMemo(() => \n    dogProfiles.find(d => d.id === activeDogId) || dogProfiles[0] || null\n  , [dogProfiles, activeDogId]);\n\n  const loadDogProfiles = useCallback(async (userId: string, token: string) => {\n    console.log('Loading dog profiles for user:', userId);\n    setIsDogProfileLoading(true);\n    try {\n      // We assume GET /dog returns the list of dogs for the current user\n      // This endpoint is needed to discover the dog IDs\n      const response = await fetch(`${API_URL}/dog`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (Array.isArray(data)) {\n          setDogProfiles(data);\n          if (data.length > 0 && !activeDogId) {\n            setActiveDogId(data[0].id);\n          }\n        } else if (data && typeof data === 'object') {\n          setDogProfiles([data]);\n          setActiveDogId(data.id);\n        } else {\n          setDogProfiles([]);\n        }\n      } else {\n        setDogProfiles([]);\n      }\n    } catch (error) {\n      console.error('Error loading dog profiles:', error);\n      setDogProfiles([]);\n    } finally {\n      setIsDogProfileLoading(false);\n    }\n  }, [activeDogId]);\n\n  const refreshDogProfile = useCallback(async () => {\n    if (user && session) {\n      await loadDogProfiles(user.id, session.accessToken);\n    }\n  }, [user, session, loadDogProfiles]);\n\n  useEffect(() => {\n    // Don't decide dog profile loading state until auth has finished initializing.\n    if (isAuthLoading) return;\n\n    if (user && session) {\n      loadDogProfiles(user.id, session.accessToken);\n    } else {\n      setDogProfiles([]);\n      setIsDogProfileLoading(false);\n    }\n  }, [user, session, loadDogProfiles, isAuthLoading]);\n\n  const createDogProfile = useCallback(async (profile: Omit<DogProfile, 'id' | 'created_at' | 'updated_at'>) => {\n    if (!session) throw new Error('No session');\n    // If photo is a local URI (not a remote URL), we first create the dog without the photo,\n    // then upload the photo with the returned dog ID and update the dog with the uploaded URL.\n    let createPayload: any = { ...profile };\n    // remove any legacy `photo` key if present\n    if (createPayload.photo) delete createPayload.photo;\n    const isLocalImage = typeof profile.image === 'string' && profile.image && !profile.image.startsWith('http');\n    if (isLocalImage) {\n      createPayload.image = undefined;\n    }\n\n    console.log('createDogProfile - payload to create:', createPayload);\n    const response = await fetch(`${API_URL}/dog`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${session.accessToken}`\n      },\n      body: JSON.stringify(createPayload),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to create dog profile');\n    }\n\n    const data = await response.json();\n    setDogProfiles(prev => [...prev, data]);\n    setActiveDogId(data.id);\n    // If we had a local photo, upload it now and patch the dog with the returned URL\n    if (isLocalImage && typeof profile.image === 'string') {\n      try {\n        const uri = profile.image as string;\n        const uriParts = uri.split('/');\n        const fileName = uriParts[uriParts.length - 1] || `dog_${Date.now()}.jpg`;\n        const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n        const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n        const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n\n        const form = new FormData();\n        // @ts-ignore\n        form.append('file', { uri, name: fileName, type: mimeType });\n        form.append('filename', fileName);\n        form.append('dog_id', data.id);\n        form.append('trail_id', '');\n        form.append('user_id', '');\n\n        const uploadResp = await fetch(`${API_URL}/uploads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${session.accessToken}`,\n            'accept': 'application/json',\n          },\n          body: form as any,\n        });\n\n        if (!uploadResp.ok) {\n          console.error('Dog image upload failed during create:', await uploadResp.text());\n        } else {\n          const uploadData = await uploadResp.json();\n          const publicUrl = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n          if (publicUrl) {\n            // Patch dog with new image URL\n              const patchResp = await fetch(`${API_URL}/dog/${data.id}`, {\n              method: 'PUT',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${session.accessToken}`,\n              },\n                body: JSON.stringify({ ...data, image: publicUrl }),\n            });\n\n            if (patchResp.ok) {\n              const patched = await patchResp.json();\n              setDogProfiles(prev => prev.map(d => d.id === patched.id ? patched : d));\n            } else {\n              console.error('Failed to patch dog with uploaded image');\n            }\n          }\n        }\n      } catch (err) {\n        console.error('Error uploading dog photo after create:', err);\n      }\n    }\n\n    return data;\n  }, [session]);\n\n  const updateDogProfile = useCallback(async (profile: DogProfile) => {\n    if (!session) throw new Error('No session');\n    if (!profile.id) throw new Error('Dog ID is required for update');\n    // If photo is a local URI, upload it first with dog_id, then update the profile with the returned URL\n    console.log('updateDogProfile - incoming profile:', profile);\n    let profileToSend = { ...profile } as any;\n    // remove any legacy `photo` key before sending\n    if (profileToSend.photo) delete profileToSend.photo;\n    if (typeof profile.image === 'string' && profile.image && !profile.image.startsWith('http')) {\n      try {\n        const uri = profile.image as string;\n        const uriParts = uri.split('/');\n        const fileName = uriParts[uriParts.length - 1] || `dog_${Date.now()}.jpg`;\n        const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n        const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n        const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n\n        const form = new FormData();\n        // @ts-ignore\n        form.append('file', { uri, name: fileName, type: mimeType });\n        form.append('filename', fileName);\n        form.append('dog_id', profile.id);\n        form.append('trail_id', '');\n        form.append('user_id', '');\n\n        const uploadResp = await fetch(`${API_URL}/uploads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${session.accessToken}`,\n            'accept': 'application/json',\n          },\n          body: form as any,\n        });\n\n        if (!uploadResp.ok) {\n          const errText = await uploadResp.text();\n          throw new Error(`Upload failed: ${uploadResp.status} ${errText}`);\n        }\n\n        const uploadData = await uploadResp.json();\n        const publicUrl = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n        if (!publicUrl) throw new Error('Upload did not return a public URL');\n        profileToSend.image = publicUrl;\n      } catch (err) {\n        console.error('Error uploading dog photo during update:', err);\n        throw err;\n      }\n    }\n\n    console.log('updateDogProfile - profileToSend before PUT:', profileToSend);\n    const response = await fetch(`${API_URL}/dog/${profile.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${session.accessToken}`\n      },\n      body: JSON.stringify(profileToSend),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail?.[0]?.msg || 'Failed to update dog profile');\n    }\n\n    const data = await response.json();\n    setDogProfiles(prev => prev.map(d => d.id === data.id ? data : d));\n    return data;\n  }, [session]);\n\n  return useMemo(() => ({\n    dogProfile,\n    dogProfiles,\n    activeDogId,\n    setActiveDogId,\n    isDogProfileLoading,\n    hasDogProfile: dogProfiles.length > 0,\n    refreshDogProfile,\n    createDogProfile,\n    updateDogProfile,\n  }), [dogProfile, dogProfiles, activeDogId, isDogProfileLoading, refreshDogProfile, createDogProfile, updateDogProfile]);\n});\n","import React, { useEffect, useCallback, useState, useMemo } from 'react';\nimport createContextHook from '@nkzw/create-context-hook';\nimport { useAuth } from '@/context/AuthContext';\nimport { Trail } from '@/types/trail';\nimport { API_URL } from '@/lib/api';\n\nexport const [TrailsContext, useTrails] = createContextHook(() => {\n  const { user, session } = useAuth();\n  const [trails, setTrails] = useState<Trail[]>([]);\n  const [savedTrails, setSavedTrails] = useState<Trail[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [isSavedLoading, setIsSavedLoading] = useState<boolean>(true);\n\n  const loadTrails = useCallback(async () => {\n    if (!user || !session) {\n      // even unauthenticated users can fetch public trails\n      try {\n        const resp = await fetch(`${API_URL}/trail`);\n        if (resp.ok) {\n          const data = await resp.json();\n          setTrails(data || []);\n        } else {\n          console.error('Failed to load trails (public):', resp.status);\n          setTrails([]);\n        }\n      } catch (err) {\n        console.error('Failed to load trails:', err);\n        setTrails([]);\n      } finally {\n        setIsLoading(false);\n      }\n      return;\n    }\n\n    try {\n      console.log('Loading trails for user:', user.id);\n      const resp = await fetch(`${API_URL}/trail`, {\n        headers: {\n          'Authorization': `Bearer ${session?.accessToken}`,\n        },\n      });\n      if (resp.ok) {\n        const data = await resp.json();\n        setTrails(data || []);\n      } else {\n        console.error('Failed to load trails:', resp.status);\n        setTrails([]);\n      }\n    } catch (error) {\n      console.error('Failed to load trails:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [user, session]);\n\n  const loadSavedTrails = useCallback(async () => {\n    // The API currently exposes /trail/me for the current user's trails.\n    if (!session?.accessToken) {\n      setSavedTrails([]);\n      setIsSavedLoading(false);\n      return;\n    }\n\n    try {\n      console.log('Loading my trails for user:', user?.id);\n      const resp = await fetch(`${API_URL}/trail/me`, {\n        headers: {\n          'Authorization': `Bearer ${session?.accessToken}`,\n        },\n      });\n      if (resp.ok) {\n        const data = await resp.json();\n        setSavedTrails(data || []);\n      } else {\n        console.error('Failed to load my trails:', resp.status);\n        setSavedTrails([]);\n      }\n    } catch (error) {\n      console.error('Failed to load saved trails:', error);\n      setSavedTrails([]);\n    } finally {\n      setIsSavedLoading(false);\n    }\n  }, [user, session]);\n\n  useEffect(() => {\n    loadTrails();\n    loadSavedTrails();\n  }, [loadTrails, loadSavedTrails]);\n\n  const saveTrail = useCallback(async (trail: Trail) => {\n    if (!user) {\n      console.error('No user logged in');\n      throw new Error('Must be logged in to save trails');\n    }\n    if (!session?.accessToken) {\n      console.error('No session/access token available');\n      throw new Error('Must be logged in to save trails');\n    }\n    try {\n      console.log('Saving trail for user via API:', user.id);\n\n      // Prepare a path array (lon, lat) expected by backend\n      const coordsToPath = (coords: { latitude: number; longitude: number }[] | undefined) => {\n        if (!coords || coords.length === 0) return [] as number[][];\n        return coords.map(c => [c.longitude, c.latitude]);\n      };\n\n      const body: any = {\n        name: trail.name,\n        distance: trail.distance,\n        duration: trail.duration,\n        path: coordsToPath((trail as any).coordinates),\n        photo: (trail as any).photo,\n        city: trail.city,\n        country: trail.country,\n        description: (trail as any).description,\n        tags: (trail as any).tags,\n        elevation: (trail as any).elevation,\n        surface_type: (trail as any).surfaceType,\n        difficulty: (trail as any).difficulty,\n        location: (trail as any).location,\n        pace: trail.pace,\n        speed: trail.speed,\n        max_elevation: trail.maxElevation,\n        rating: trail.rating,\n        review: trail.review,\n        environment_tags: (trail as any).environment_tags,\n      };\n\n      const accessToken = session.accessToken;\n      // If photo is a local URI or a File object, create the trail first without photo,\n      // then upload the file to /uploads with `trail_id` and patch the trail with the returned URL.\n      const isLocalStringPhoto = typeof body.photo === 'string' && body.photo && !body.photo.startsWith('http');\n      const isFilePhoto = typeof body.photo === 'object' && body.photo !== null; // e.g. File on web\n\n      const createBody = { ...body };\n      if (isLocalStringPhoto || isFilePhoto) {\n        createBody.photo = undefined;\n      }\n\n      const resp = await fetch(`${API_URL}/trail/me`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${accessToken}`,\n        },\n        body: JSON.stringify(createBody),\n      });\n\n      if (!resp.ok) {\n        const err = await resp.text();\n        console.error('Failed to save trail via API:', resp.status, err);\n        throw new Error('Failed to save trail');\n      }\n\n      const data = await resp.json();\n      // Assume API returns created trail that matches our Trail type\n      setTrails((prev: Trail[]) => [data, ...prev]);\n\n      // If we had a local photo, upload it now and patch the trail with the returned URL\n      if (isLocalStringPhoto || isFilePhoto) {\n        try {\n          // Build form data for upload\n          const form = new FormData();\n          if (isFilePhoto) {\n            // web File object\n            // @ts-ignore\n            form.append('file', body.photo);\n            // @ts-ignore\n            form.append('filename', body.photo.name || `trail_${Date.now()}.jpg`);\n          } else {\n            const uri = body.photo as string;\n            const uriParts = uri.split('/');\n            const fileName = uriParts[uriParts.length - 1] || `trail_${Date.now()}.jpg`;\n            const extMatch = fileName.match(/\\.([a-zA-Z0-9]+)(?:\\?.*)?$/);\n            const ext = extMatch ? extMatch[1].toLowerCase() : 'jpg';\n            const mimeType = ext === 'png' ? 'image/png' : 'image/jpeg';\n            // @ts-ignore\n            form.append('file', { uri, name: fileName, type: mimeType });\n            form.append('filename', fileName);\n          }\n\n          form.append('trail_id', data.id);\n          form.append('dog_id', '');\n          form.append('user_id', '');\n\n          const uploadResp = await fetch(`${API_URL}/uploads`, {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${accessToken}`,\n              'accept': 'application/json',\n            },\n            body: form as any,\n          });\n\n          if (!uploadResp.ok) {\n            console.error('Trail photo upload failed during create:', await uploadResp.text());\n          } else {\n            const uploadData = await uploadResp.json();\n            const publicUrl = uploadData.public_url || uploadData.publicUrl || uploadData.url;\n            if (publicUrl) {\n              // Patch trail with new photo URL\n              const patchResp = await fetch(`${API_URL}/trail/${data.id}`, {\n                method: 'PUT',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${accessToken}`,\n                },\n                body: JSON.stringify({ ...data, photo: publicUrl }),\n              });\n\n              if (patchResp.ok) {\n                const patched = await patchResp.json();\n                setTrails(prev => prev.map(t => t.id === patched.id ? patched : t));\n              } else {\n                console.error('Failed to patch trail with uploaded photo');\n              }\n            }\n          }\n        } catch (err) {\n          console.error('Error uploading trail photo after create:', err);\n        }\n      }\n\n      return data as Trail;\n    } catch (error) {\n      console.error('Failed to save trail:', error);\n      throw error;\n    }\n  }, [user, session]);\n\n  const deleteTrail = useCallback(async (id: string) => {\n    try {\n      console.log('Deleting trail via API:', id);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${session.accessToken}` },\n      });\n      if (resp.status === 204) {\n        setTrails((prev: Trail[]) => prev.filter((t: Trail) => t.id !== id));\n      } else {\n        const body = await resp.text();\n        console.error('Failed to delete trail:', resp.status, body);\n        throw new Error('Failed to delete trail');\n      }\n    } catch (error) {\n      console.error('Failed to delete trail:', error);\n      throw error;\n    }\n  }, [session]);\n\n  const getTrailById = useCallback((id: string): Trail | undefined => {\n    const found = trails.find((t: Trail) => t.id === id);\n    if (found) return found;\n\n    // If not in state, try fetching from API synchronously is not possible here  keep demo fallback\n    if (id === 'demo-trail') {\n      return {\n        id: 'demo-trail',\n        name: 'Scenic Coastal Walk',\n        distance: 5.2,\n        duration: 3600,\n        coordinates: [\n          { latitude: 50.81999932593175, longitude: -0.1443926504884132 },\n          { latitude: 50.81982005377856, longitude: -0.14389605957015306 },\n          { latitude: 50.8195735534442, longitude: -0.14290287773496857 },\n          { latitude: 50.81976403108945, longitude: -0.14245949298612004 },\n          { latitude: 50.819651985510006, longitude: -0.1415904588798469 },\n          { latitude: 50.819360665744455, longitude: -0.141129338740825 },\n          { latitude: 50.81955114425804, longitude: -0.14054407087405707 },\n          { latitude: 50.8194278935438, longitude: -0.1397814491065219 },\n          { latitude: 50.819282233189426, longitude: -0.1389301503892284 },\n          { latitude: 50.819696803774036, longitude: -0.13903656272921694 },\n          { latitude: 50.81999932593175, longitude: -0.13919618123853184 },\n          { latitude: 50.82010016621547, longitude: -0.13853997181101363 },\n          { latitude: 50.82041389015009, longitude: -0.138220734792327 },\n          { latitude: 50.82055954697452, longitude: -0.13852223642078343 },\n          { latitude: 50.82086206354296, longitude: -0.13829167635185513 },\n        ],\n        city: 'Brighton',\n        country: 'UK',\n        difficulty: 'Easy',\n        pace: '11:32',\n        maxElevation: 45,\n        date: Date.now(),\n        environment_tags: ['Beach', 'Sunny', 'Paved'],\n        rating: 4.5,\n        review: 'A beautiful walk along the seafront. Very dog friendly!',\n      };\n    }\n    return undefined;\n  }, [trails]);\n\n  const loadNearbyTrails = useCallback(async (latitude?: number, longitude?: number, distanceKm: number = 10) => {\n    try {\n      console.log('Loading nearby trails:', { latitude, longitude, distanceKm });\n\n      // If latitude/longitude provided and we have a session, call the backend nearby endpoint\n      if (typeof latitude === 'number' && typeof longitude === 'number' && session?.accessToken) {\n        try {\n          const resp = await fetch(\n            `${API_URL}/trail/nearby?latitude=${encodeURIComponent(latitude)}&longitude=${encodeURIComponent(longitude)}&distance_km=${encodeURIComponent(distanceKm)}`,\n            {\n              headers: { 'Authorization': `Bearer ${session.accessToken}` },\n            }\n          );\n          if (resp.ok) {\n            const data = await resp.json();\n            return data as Trail[];\n          }\n\n          if (resp.status === 404) {\n            // No nearby trails found  return empty list\n            console.warn('Nearby trails endpoint returned 404 (no trails)');\n            return [];\n          }\n\n          console.error('Failed to load nearby trails from API:', resp.status);\n          return [];\n        } catch (err) {\n          console.error('Error calling nearby trails API:', err);\n          return [];\n        }\n      }\n\n      // If we don't have coords or session (unauthenticated), return empty array\n      return [];\n    } catch (error) {\n      console.error('Failed to load nearby trails:', error);\n      return [];\n    }\n  }, [session]);\n\n  const updateTrailName = useCallback(async (id: string, name: string) => {\n    try {\n      console.log('Updating trail name via API:', id, name);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${session?.accessToken}` },\n        body: JSON.stringify({ name }),\n      });\n      if (!resp.ok) {\n        const txt = await resp.text();\n        throw new Error(txt || 'Failed to update');\n      }\n      const updated = await resp.json();\n      setTrails((prev: Trail[]) => prev.map((t: Trail) => (t.id === id ? updated : t)));\n    } catch (error) {\n      console.error('Failed to update trail name:', error);\n      throw error;\n    }\n  }, [session]);\n\n  const updateTrailPhoto = useCallback(async (id: string, photo: string) => {\n    try {\n      console.log('Updating trail photo via API:', id);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${session?.accessToken}` },\n        body: JSON.stringify({ photo }),\n      });\n      if (!resp.ok) {\n        const txt = await resp.text();\n        throw new Error(txt || 'Failed to update photo');\n      }\n      const updated = await resp.json();\n      setTrails((prev: Trail[]) => prev.map((t: Trail) => (t.id === id ? updated : t)));\n    } catch (error) {\n      console.error('Failed to update trail photo:', error);\n      throw error;\n    }\n  }, [session]);\n\n  const updateTrailDetails = useCallback(async (id: string, updates: {\n    rating?: number;\n    review?: string;\n    environment_tags?: string[];\n    difficulty?: string;\n  }) => {\n    try {\n      console.log('Updating trail details via API:', id, updates);\n      if (!session?.accessToken) throw new Error('Not authenticated');\n      const resp = await fetch(`${API_URL}/trail/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${session?.accessToken}` },\n        body: JSON.stringify(updates),\n      });\n      if (!resp.ok) {\n        const txt = await resp.text();\n        throw new Error(txt || 'Failed to update details');\n      }\n      const updated = await resp.json();\n      setTrails((prev: Trail[]) => prev.map((t: Trail) => (t.id === id ? updated : t)));\n    } catch (error) {\n      console.error('Failed to update trail details:', error);\n      throw error;\n    }\n  }, []);\n\n  const getTrailWithUser = useCallback(async (id: string) => {\n    try {\n      console.log('Loading trail with user data via API:', id);\n      const resp = await fetch(`${API_URL}/trail/${id}`);\n      if (!resp.ok) {\n        console.error('Failed to fetch trail:', resp.status);\n        return undefined;\n      }\n      const data = await resp.json();\n      return data as Trail;\n    } catch (error) {\n      console.error('Failed to load trail with user:', error);\n      return undefined;\n    }\n  }, []);\n\n  const saveTrailBookmark = useCallback(async (trailId: string) => {\n    if (!user) {\n      console.error('No user logged in');\n      throw new Error('Must be logged in to save trails');\n    }\n\n    try {\n      console.log('Saving trail bookmark:', trailId);\n      // TODO: Implement bookmark with your backend\n      const trail = trails.find((t: Trail) => t.id === trailId);\n      if (trail) {\n        setSavedTrails((prev: Trail[]) => [trail, ...prev]);\n      }\n    } catch (error) {\n      console.error('Failed to save trail bookmark:', error);\n      throw error;\n    }\n  }, [user, trails]);\n\n  const removeTrailBookmark = useCallback(async (trailId: string) => {\n    if (!user) {\n      console.error('No user logged in');\n      throw new Error('Must be logged in to remove saved trails');\n    }\n\n    try {\n      console.log('Removing trail bookmark:', trailId);\n      // TODO: Implement remove bookmark with your backend\n      setSavedTrails((prev: Trail[]) => prev.filter((t: Trail) => t.id !== trailId));\n    } catch (error) {\n      console.error('Failed to remove trail bookmark:', error);\n      throw error;\n    }\n  }, [user]);\n\n  const isTrailSaved = useCallback((trailId: string): boolean => {\n    return savedTrails.some((t: Trail) => t.id === trailId);\n  }, [savedTrails]);\n\n\n  return useMemo(() => ({\n    trails,\n    savedTrails,\n    isLoading,\n    isSavedLoading,\n    saveTrail,\n    deleteTrail,\n    getTrailById,\n    updateTrailName,\n    updateTrailPhoto,\n    updateTrailDetails,\n    loadNearbyTrails,\n    saveTrailBookmark,\n    removeTrailBookmark,\n    isTrailSaved,\n    getTrailWithUser,\n  }), [trails, savedTrails, isLoading, isSavedLoading, saveTrail, deleteTrail, getTrailById, updateTrailName, updateTrailPhoto, updateTrailDetails, loadNearbyTrails, saveTrailBookmark, removeTrailBookmark, isTrailSaved, getTrailWithUser]);\n});\n\n","// On web, allow a runtime global (injected by index.html or hosting) to override process.env.\ndeclare const global: any;\nconst runtimeUrl = typeof window !== 'undefined' ? (window as any).__EXPO_PUBLIC_API_URL__ : undefined;\nexport const API_URL = runtimeUrl || process.env.EXPO_PUBLIC_API_URL || 'http://localhost:8080';\n\n// Helpful at runtime to know which endpoint is being used.\nconsole.log('Current API URL:', API_URL);\n// Helpers for base64url <-> ArrayBuffer conversions used by WebAuthn flows on web\nexport function base64UrlToBuffer(base64Url: string): Uint8Array {\n\tconst padding = '='.repeat((4 - (base64Url.length % 4)) % 4);\n\tconst base64 = (base64Url + padding).replace(/-/g, '+').replace(/_/g, '/');\n\tconst raw = typeof atob === 'function' ? atob(base64) : Buffer.from(base64, 'base64').toString('binary');\n\tconst rawLength = raw.length;\n\tconst array = new Uint8Array(rawLength);\n\tfor (let i = 0; i < rawLength; ++i) {\n\t\tarray[i] = raw.charCodeAt(i);\n\t}\n\treturn array;\n}\n\nexport function bufferToBase64Url(buffer: ArrayBuffer | Uint8Array): string {\n\tconst bytes = buffer instanceof Uint8Array ? buffer : new Uint8Array(buffer);\n\tlet binary = '';\n\tfor (let i = 0; i < bytes.byteLength; i++) {\n\t\tbinary += String.fromCharCode(bytes[i]);\n\t}\n\tconst b64 = typeof btoa === 'function' ? btoa(binary) : Buffer.from(binary, 'binary').toString('base64');\n\treturn b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n\n// Frontend helpers to call WebAuthn-related backend endpoints\nexport async function webauthnRegisterOptions(email: string, name?: string) {\n\tconst res = await fetch(`${API_URL}/webauthn/register/options`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify({ email, name }),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to get registration options');\n\t}\n\treturn res.json();\n}\n\nexport async function webauthnRegisterVerify(payload: Record<string, any>) {\n\tconst res = await fetch(`${API_URL}/webauthn/register/verify`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(payload),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to verify registration');\n\t}\n\treturn res.json();\n}\n\nexport async function webauthnAuthOptions(email: string) {\n\tconst res = await fetch(`${API_URL}/webauthn/auth/options`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify({ email }),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to get auth options');\n\t}\n\treturn res.json();\n}\n\nexport async function webauthnAuthVerify(payload: Record<string, any>) {\n\tconst res = await fetch(`${API_URL}/webauthn/auth/verify`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(payload),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail || 'Failed to verify authentication');\n\t}\n\treturn res.json();\n}\n\nexport async function firebaseAuthExchange(accessToken: string) {\n\tconst res = await fetch(`${API_URL}/auth/firebase`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify({ access_token: accessToken }),\n\t});\n\tif (!res.ok) {\n\t\tconst err = await res.json().catch(() => ({}));\n\t\tthrow new Error(err.detail?.[0]?.msg || err.detail || 'Failed to authenticate with Firebase');\n\t}\n\treturn res.json();\n}","import { Platform } from 'react-native';\n\n// Shared config (use Expo env vars for web builds)\nconst firebaseConfig = {\n  apiKey: process.env.EXPO_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.EXPO_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.EXPO_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Exports kept stable for the app code which expects these names:\n// - `firebaseAuth` (an auth instance, may be ignored by native wrappers)\n// - `signInWithEmailAndPassword(auth, email, password)`\n// - `createUserWithEmailAndPassword(auth, email, password)`\n// - `updateProfile(user, profile)`\n\nlet firebaseAuth: any = null;\nlet _impl: 'web' | 'native' | null = null;\n\n// Web implementation using Firebase JS SDK (modular)\nasync function setupWeb() {\n  const { initializeApp, getApps } = await import('firebase/app');\n  const {\n    getAuth,\n    signInWithEmailAndPassword: webSignIn,\n    createUserWithEmailAndPassword: webCreateUser,\n    updateProfile: webUpdateProfile,\n  } = await import('firebase/auth');\n\n  const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);\n  const auth = getAuth(app);\n\n  firebaseAuth = auth;\n  _impl = 'web';\n\n  return {\n    signInWithEmailAndPassword: (authParam: any, email: string, password: string) =>\n      webSignIn(authParam || auth, email, password),\n    createUserWithEmailAndPassword: (authParam: any, email: string, password: string) =>\n      webCreateUser(authParam || auth, email, password),\n    updateProfile: (user: any, profile: Record<string, any>) => webUpdateProfile(user, profile),\n    // Sign in to Firebase using a Google token (accessToken or idToken).\n    // Returns { idToken: string, user }\n    signInWithGoogle: async (_authParam: any, accessToken?: string, idToken?: string) => {\n      const { GoogleAuthProvider, signInWithCredential } = await import('firebase/auth');\n      const credential = GoogleAuthProvider.credential(idToken || null, accessToken || null);\n      const cred = await signInWithCredential(_authParam || auth, credential as any);\n      const token = await cred.user.getIdToken();\n      return { idToken: token, user: cred.user };\n    },\n  };\n}\n\n// Native implementation using @react-native-firebase\nasync function setupNative() {\n  // @react-native-firebase/app and /auth are native modules and should not be\n  // statically imported on web builds. Use dynamic require to avoid bundling them for web.\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const firebaseApp = require('@react-native-firebase/app');\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const authModule = require('@react-native-firebase/auth');\n\n  // authModule is a function that returns the auth singleton when called\n  const nativeAuth = typeof authModule === 'function' ? authModule() : authModule.default ? authModule.default() : authModule();\n\n  firebaseAuth = nativeAuth;\n  _impl = 'native';\n\n  return {\n    signInWithEmailAndPassword: async (_authParam: any, email: string, password: string) => {\n      // RN Firebase returns a promise; currentUser is available afterwards\n      await nativeAuth.signInWithEmailAndPassword(email, password);\n      return { user: nativeAuth.currentUser };\n    },\n    createUserWithEmailAndPassword: async (_authParam: any, email: string, password: string) => {\n      await nativeAuth.createUserWithEmailAndPassword(email, password);\n      return { user: nativeAuth.currentUser };\n    },\n    updateProfile: async (user: any, profile: Record<string, any>) => {\n      // nativeAuth.currentUser may be the right user reference; user may also be provided\n      const u = user || nativeAuth.currentUser;\n      if (!u) throw new Error('No authenticated user to update');\n      // RN Firebase exposes updateProfile on the user object\n      // It returns a Promise\n      return u.updateProfile(profile);\n    },\n    // Sign in to Firebase using Google token (accessToken or idToken)\n    signInWithGoogle: async (_authParam: any, accessToken?: string, idToken?: string) => {\n      // auth module exposes GoogleAuthProvider on the native auth object\n      const provider = authModule.GoogleAuthProvider || (nativeAuth as any).GoogleAuthProvider;\n      const credential = provider.credential(idToken || null, accessToken || null);\n      await nativeAuth.signInWithCredential(credential);\n      const user = nativeAuth.currentUser;\n      if (!user) throw new Error('Failed to sign in with Google');\n      const token = await user.getIdToken();\n      return { idToken: token, user };\n    },\n  };\n}\n\n// Initialize appropriate implementation lazily and expose wrapper functions\nlet cached: Promise<{\n  signInWithEmailAndPassword: (a: any, e: string, p: string) => Promise<any>;\n  createUserWithEmailAndPassword: (a: any, e: string, p: string) => Promise<any>;\n  updateProfile: (u: any, p: Record<string, any>) => Promise<any>;\n  signInWithGoogle: (a: any, accessToken?: string, idToken?: string) => Promise<{ idToken: string; user: any }>;\n}> | null = null;\n\nfunction ensureInit() {\n  if (cached) return cached;\n  if (false) {\n    cached = setupWeb();\n  } else {\n    cached = setupNative();\n  }\n  return cached;\n}\n\n// Public wrappers used by the app\nexport async function signInWithEmailAndPassword(authParam: any, email: string, password: string) {\n  const impl = await ensureInit();\n  return impl.signInWithEmailAndPassword(authParam, email, password);\n}\n\nexport async function createUserWithEmailAndPassword(authParam: any, email: string, password: string) {\n  const impl = await ensureInit();\n  return impl.createUserWithEmailAndPassword(authParam, email, password);\n}\n\nexport async function updateProfile(user: any, profile: Record<string, any>) {\n  const impl = await ensureInit();\n  return impl.updateProfile(user, profile);\n}\n\n// Sign in to Firebase using Google tokens and return { idToken, user }\nexport async function signInWithGoogle(authParam: any, accessToken?: string, idToken?: string) {\n  const impl = await ensureInit();\n  if (!impl.signInWithGoogle) throw new Error('Google sign-in not supported by this implementation');\n  return impl.signInWithGoogle(authParam, accessToken, idToken);\n}\n\n// Synchronous accessor for auth instance. Consumers may pass this to web wrappers.\nexport function getFirebaseAuth() {\n  // If not initialized yet, initialize synchronously-ish by triggering init (but it's async).\n  // Callers should import this and pass it into our wrappers (we also accept undefined).\n  if (!firebaseAuth) {\n    // Kick off initialization but do not await here so callers don't block.\n    // This may be undefined for a short time; wrappers handle undefined by using internal auth.\n    ensureInit().catch(() => {});\n  }\n  return firebaseAuth;\n}\n\nexport default {\n  getFirebaseAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  updateProfile,\n};","export type DogSize = 'XS' | 'S' | 'M' | 'L' | 'XL';\n\nexport const DOG_SIZES: DogSize[] = ['XS', 'S', 'M', 'L', 'XL'];\n\nexport const PERSONALITY_TAGS = [\n  'Friendly',\n  'Shy',\n  'Energetic',\n  'Calm',\n  'Social',\n  'Independent',\n  'Playful',\n  'Curious',\n  'Barky',\n  'Reactive',\n  'Easily Triggered',\n  'Gentle',\n  'Protective',\n  'Anxious',\n  'Confident',\n  'Food-Motivated',\n  'Quiet',\n  'Adventurous',\n  'Lazy',\n  'Affectionate',\n  'Dominant',\n  'Submissive',\n  'Fearful',\n  'Obedient',\n  'Stubborn',\n  'High-Prey-Drive',\n  'Leash-Pulling',\n  'Good-With-Dogs',\n  'Good-With-Kids',\n] as const;\n\nexport type PersonalityTag = typeof PERSONALITY_TAGS[number];\n\nexport type RecallReliability = 'Poor' | 'Fair' | 'Good' | 'Excellent';\n\nexport const RECALL_RELIABILITY_OPTIONS: RecallReliability[] = ['Poor', 'Fair', 'Good', 'Excellent'];\n\nexport interface Vaccine {\n  name: string;\n  date: string;\n}\n\nexport interface DogProfile {\n  id?: string;\n  user_id: string;\n  name: string;\n  nickname?: string;\n  size: DogSize;\n  age: number;\n  image?: string;\n  personality_tags: string[];\n  vaccines?: Vaccine[];\n  recall_reliability?: RecallReliability;\n  created_at?: string;\n  updated_at?: string;\n}\n","import { Coordinate } from '@/types/trail';\n\nexport function calculateDistance(coord1: Coordinate, coord2: Coordinate): number {\n  const R = 6371;\n  const dLat = toRad(coord2.latitude - coord1.latitude);\n  const dLon = toRad(coord2.longitude - coord1.longitude);\n  const lat1 = toRad(coord1.latitude);\n  const lat2 = toRad(coord2.latitude);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\nfunction toRad(value: number): number {\n  return (value * Math.PI) / 180;\n}\n\nexport function calculateTotalDistance(coordinates: Coordinate[]): number {\n  if (coordinates.length < 2) return 0;\n  \n  let total = 0;\n  for (let i = 0; i < coordinates.length - 1; i++) {\n    const dist = calculateDistance(coordinates[i], coordinates[i + 1]);\n    total += dist;\n  }\n  return total * 1000;\n}\n\nexport function formatDistance(meters: number): string {\n  if (meters < 1000) {\n    return `${Math.round(meters)}m`;\n  }\n  const km = meters / 1000;\n  return `${km.toFixed(2)}km`;\n}\n\nexport function formatDuration(seconds: number): string {\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor((seconds % 3600) / 60);\n  const secs = seconds % 60;\n\n  if (hrs > 0) {\n    return `${hrs}h ${mins}m`;\n  }\n  if (mins > 0) {\n    return `${mins}m ${secs}s`;\n  }\n  return `${secs}s`;\n}\n\nexport function formatDate(timestamp: number): string {\n  const date = new Date(timestamp);\n  const now = new Date();\n  const diffDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n\n  if (diffDays === 0) {\n    return `Today at ${date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}`;\n  }\n  if (diffDays === 1) {\n    return `Yesterday at ${date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}`;\n  }\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n}\n","// Local copy of nanoid non-secure implementation to avoid package subpath resolution issues\nconst urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nconst customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nconst nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\nexport { nanoid, customAlphabet }\n","// Minimal shim for lottie-react-native on web builds.\n// Exports a React component that renders nothing so native-only Lottie usage\n// doesn't break web bundling.\nconst React = require('react');\n\nfunction LottieView(_props) {\n  return null;\n}\n\nmodule.exports = LottieView;\nmodule.exports.default = LottieView;\n","// Shim for @react-native-firebase packages when bundling for web.\n// This prevents the web bundle from trying to resolve native modules.\nfunction notAvailable() {\n  throw new Error('@react-native-firebase is not available in web builds.');\n}\n\n// Support both require() and import default behaviors\nmodule.exports = notAvailable;\nmodule.exports.default = notAvailable;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"684\":\"ce38deed\",\"888\":\"8c99ba14\",\"908\":\"88be4c33\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [589], () => (__webpack_require__(389)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","StyleSheet","create","container","width","paddingHorizontal","paddingTop","alignItems","tabBar","flexDirection","backgroundColor","theme","backgroundPrimary","borderRadius","paddingVertical","justifyContent","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","gap","tabButton","overflow","tabTouchable","flex","tabContent","iconWrapper","label","assign","Typography","textMuted","undefined","labelActive","color","accentPrimary","AnimatedTabBar","state","descriptors","navigation","insets","useSafeAreaInsets","animatedValues","useRef","routes","Animated","Value","current","useEffect","console","log","index","r","name","key","forEach","route","timing","toValue","duration","useNativeDriver","start","tabBarPaddingBottom","Math","max","bottom","_jsx","View","style","styles","children","paddingBottom","filter","opts","options","tabBarLabel","title","tabBarIcon","isFocused","iconColor","TouchableOpacity","accessibilityRole","accessibilityState","selected","accessibilityLabel","tabBarAccessibilityLabel","onPress","Haptics","impactAsync","Light","event","emit","type","target","canPreventDefault","defaultPrevented","navigate","_jsxs","focused","size","opacity","Text","String","TabLayout","Tabs","props","screenOptions","headerShown","tabBarActiveTintColor","backgroundSecondaryVarient","tabBarInactiveTintColor","Screen","MapPin","Navigation","User","safeContainer","stickyHeader","stickySearchContainer","searchBar","backgroundSecondary","borderWidth","borderColor","borderSubtle","demoButton","demoButtonText","textPrimary","fontWeight","searchPlaceholder","body","largeTrailCard","marginBottom","position","largeTrailImage","bookmarkButton","top","right","cardGradient","left","cardOverlayContent","padding","overlayTrailName","h2","lineHeight","textShadowColor","textShadowOffset","textShadowRadius","overlayLocation","overlayBadges","flexWrap","badge","badgeText","textTransform","categoriesSection","categoriesScroll","categoryButton","alignSelf","minHeight","categoryText","caption","categoryButtonActive","categoryTextActive","categoryTrailsSection","bottomPadding","loadingContainer","loadingText","emptyContainer","emptyText","textAlign","placeholderImage","searchModalContainer","searchModalHeader","borderBottomWidth","borderBottomColor","backButton","searchModalInputContainer","searchModalInput","clearButton","searchModalContent","currentLocationItem","marginHorizontal","locationIconContainer","locationTextContainer","locationTitle","locationSubtitle","suggestionItem","suggestionIconContainer","suggestionTextContainer","suggestionTitle","suggestionSubtitle","CATEGORIES","icon","Heart","Umbrella","ExploreScreen","router","useRouter","loadNearbyTrails","saveTrailBookmark","removeTrailBookmark","isTrailSaved","useTrails","selectedCategory","setSelectedCategory","useState","nearbyTrails","setNearbyTrails","isLoadingNearby","setIsLoadingNearby","setUserCity","bookmarkAnimations","setBookmarkAnimations","searchQuery","setSearchQuery","showSearchModal","setShowSearchModal","currentLocation","setCurrentLocation","searchSuggestions","setSearchSuggestions","loadUserLocationAndNearbyTrails","useCallback","async","status","Location","location","accuracy","Balanced","trails","coords","latitude","longitude","error","useFocusEffect","loadSearchSuggestions","query","toLowerCase","suggestions","trail","city","country","includes","Date","date","toLocaleDateString","slice","trim","handleCloseSearchModal","getBookmarkAnimation","trailId","newAnim","prev","filteredTrails","filtered","sort","a","b","rating","environment_tags","some","tag","getFilteredTrails","ScrollView","showsVerticalScrollIndicator","stickyHeaderIndices","handleSearchBarPress","activeOpacity","Search","horizontal","showsHorizontalScrollIndicator","contentContainerStyle","category","Icon","isSelected","handleCategoryPress","categoryId","marginRight","strokeWidth","LottieLoader","length","anim","isSaved","handleNavigateToTrail","push","photo","Image","source","uri","contentFit","cachePolicy","TrailMapPreview","coordinates","path","startLatitude","startLongitude","LinearGradient","colors","locations","stopPropagation","isRealTrail","test","Warning","Medium","sequence","spring","friction","tension","Success","handleBookmarkPress","transform","scale","Bookmark","fill","difficulty","BarChart3","formatDistance","distance","distance_from_user","Star","toFixed","Modal","visible","animationType","presentationStyle","onRequestClose","ChevronLeft","TextInput","placeholder","placeholderTextColor","value","onChangeText","autoFocus","returnKeyType","X","handleCurrentLocationPress","FlatList","data","keyExtractor","item","renderItem","handleSuggestionPress","suggestionId","scrollContainer","content","settingsButton","userSection","userHeader","userAvatar","userAvatarImage","userInfo","marginLeft","userName","userEmailRow","userEmail","dogCardContainer","dogCard","dogPhotoContainer","dogPhoto","dogPhotoPlaceholder","dogName","dogNickname","nicknameSpacing","statsRow","statItem","statValue","h1","statLabel","textSecondary","dogInfoRow","dogInfoBadge","dogInfoText","loadingDogCard","noDogCard","noDogText","addDogButton","marginTop","addDogButtonText","tabsContainer","tab","tabActive","tabText","tabTextActive","tabCount","tabCountActive","trailsSection","trailCard","trailImage","trailGradient","trailContent","trailName","trailLocation","trailBadges","trailBadge","trailBadgeText","signOutButton","signOutButtonDisabled","signOutText","modalContainer","modalHeader","modalTitle","closeButton","inputLabel","input","initialAvatar","initialAvatarText","modalContent","photoSection","photoContainer","editPhoto","cameraOverlay","photoHint","inputSection","disabledInput","disabledInputText","inputHint","modalFooter","borderTopWidth","borderTopColor","saveButton","saveButtonDisabled","saveButtonText","button","require","ProfileScreen","auth","useAuth","ActivityIndicator","user","signOut","session","userProfile","updateAccount","isLoading","isAccountLoading","useAccount","dogProfile","isDogProfileLoading","useDogs","savedTrails","isTrailsLoading","setIsLoading","React","showEditModal","setShowEditModal","editedName","setEditedName","editedPhoto","setEditedPhoto","isSaving","setIsSaving","selectedTab","setSelectedTab","defaultName","email","split","defaultPhoto","image","totalWalks","totalTime","reduce","acc","totalDistance","handleTabPress","handleEditDogProfile","handleCloseEditModal","displayedTrails","handleOpenEditModal","charAt","toUpperCase","Mail","LucideTableOfContents","accentSecondary","Dog","nickname","seconds","hours","floor","minutes","formatTime","Alert","alert","text","message","disabled","_Fragment","LogOut","ImagePicker","result","mediaTypes","allowsEditing","aspect","quality","canceled","assets","Camera","finalPhoto","startsWith","accessToken","form","FormData","uriParts","fileName","now","extMatch","match","mimeType","append","uploadResp","fetch","API_URL","method","headers","ok","errText","uploadData","json","public_url","publicUrl","url","absoluteFillObject","webContainer","webText","permissionContainer","permissionTitle","permissionText","permissionButton","permissionButtonText","statsContainer","compactRow","compactStats","compactStatBox","minWidth","stopButtonCompact","stopButtonCompactText","statBox","controlContainer","recordButton","recordButtonActive","recordButtonText","bottomSheet","borderTopLeftRadius","borderTopRightRadius","handleBar","handleContainer","handle","bottomSheetContent","statsGrid","statItemLabel","letterSpacing","statItemValue","expandedContent","divider","marginVertical","optionRow","optionIconContainer","optionTextContainer","optionTitle","optionSubtitle","optionBadge","optionBadgeActive","optionBadgeText","optionBadgeTextActive","modalOverlay","maxHeight","modalButton","modalButtonPrimary","modalButtonText","recenterButton","LOCATION_TRACKING_TASK","RecordScreen","saveTrail","getTrailById","params","useLocalSearchParams","existingTrail","mapRef","isRecording","setIsRecording","setCoordinates","setDuration","hasPermission","setHasPermission","isLoadingPermission","setIsLoadingPermission","startLocation","setStartLocation","locationSubscription","timerRef","bottomSheetHeight","Dimensions","get","bottomSheetAnim","isExpanded","setIsExpanded","setElevation","maxElevation","setMaxElevation","pace","setPace","speed","setSpeed","maxSpeed","setMaxSpeed","showSaveModal","setShowSaveModal","draftTrail","setDraftTrail","formName","setFormName","formDescription","setFormDescription","formPhoto","setFormPhoto","formTags","setFormTags","formDifficulty","setFormDifficulty","followMode","setFollowMode","userLocationFollow","setUserLocationFollow","followLocationRef","requestPermissions","loadRecordingState","interval","setInterval","clearInterval","remove","active","sub","distanceInterval","timeInterval","loc","coord","err","startFollow","coordsStr","AsyncStorage","getItem","JSON","parse","maxElevationStr","parseFloat","maxSpeedStr","startTimeStr","startTime","parseInt","elapsed","foregroundStatus","backgroundStatus","bgError","warn","locError","errorMessage","distanceKm","calculateTotalDistance","paceMinPerKm","round","toString","padStart","initialHeight","panResponder","PanResponder","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","_","gestureState","abs","dy","onPanResponderGrant","_value","onPanResponderMove","newValue","setValue","onPanResponderRelease","threshold","currentValue","expandBottomSheet","collapseBottomSheet","stopRecording","Heavy","TaskManager","finalCoords","finalMaxElevation","finalMaxSpeed","finalDuration","removeItem","finalPace","description","tags","cancelSave","progress","min","showProgress","contentPaddingBottom","TrailMap","ref","initialRegion","latitudeDelta","longitudeDelta","userLocation","showsUserLocation","followsUserLocation","showsMyLocationButton","animateToRegion","add","panHandlers","toggleBottomSheet","ChevronDown","ChevronUp","formatDuration","Square","back","setItem","initialCoord","stringify","BestForNavigation","foregroundService","notificationTitle","notificationBody","notificationColor","pausesUpdatesAutomatically","showsBackgroundLocationIndicator","bgLocationError","newCoords","catch","altitude","currentElevation","currentSpeed","Play","transparent","multiline","Upload","toSave","newCoord","header","sectionCard","sectionTitle","row","rowText","logoutCard","logoutText","SettingsScreen","showLoader","setShowLoader","handleRow","ArrowLeft","ChevronRight","overlayStyles","overlay","close","closeText","zIndex","NotFoundScreen","Stack","Link","href","asChild","link","linkText","SplashScreen","queryClient","QueryClient","RootLayoutNav","isAuthenticated","hasDogProfile","segments","useSegments","inAuthGroup","inLoginOrSignup","inOnboarding","replace","headerBackTitle","RootLayout","QueryClientProvider","client","AuthContext","AccountContext","DogsContext","TrailsContext","GestureHandlerRootView","logo","subtitle","inputContainer","fontSize","helperText","paddingRight","buttonDisabled","buttonPressed","buttonText","secondaryButton","secondaryButtonText","footer","footerText","DEMO_TRAIL","DemoTrailScreen","scrollView","headerContent","locationRow","locationText","mapContainer","scrollEnabled","zoomEnabled","Clock","TrendingUp","section","Index","Redirect","LoginScreen","signInWithToken","setEmail","password","setPassword","_extraFromConstants","Constants","expoConfig","extra","manifest","EXPO_PUBLIC_GOOGLE_EXPO_CLIENT_ID","process","EXPO_PUBLIC_GOOGLE_CLIENT_ID","EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID","EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID","window","request","response","promptAsync","Google","webClientId","iosClientId","androidClientId","clientId","scopes","responseType","tokenStr","token","ArrayBuffer","view","Uint8Array","s","i","fromCharCode","decodeURIComponent","escape","Array","isArray","arr","normalizeToken","authentication","idToken","fb","signInWithGoogle","getFirebaseAuth","firebaseAuthExchange","handleSignIn","credential","signInWithEmailAndPassword","getIdToken","webKeyProps","onKeyDown","nativeEvent","KeyboardAvoidingView","behavior","autoCapitalize","keyboardType","autoComplete","editable","secureTextEntry","Pressable","pressed","WebBrowser","progressContainer","progressDot","progressDotActive","photoPlaceholder","photoPlaceholderText","photoOverlay","formSection","pickerButton","pickerButtonText","pickerButtonTextPlaceholder","pickerOptions","pickerOption","pickerOptionSelected","pickerOptionText","pickerOptionTextSelected","nextButton","nextButtonText","DogBasicsScreen","setName","setNickname","age","setAge","setSize","setPhoto","showSizePicker","setShowSizePicker","isLoadingImage","setIsLoadingImage","pickImage","takePhoto","handleImagePicker","testID","DOG_SIZES","handleNext","parsedAge","isNaN","pathname","isEditing","tagsContainer","tagSelected","tagText","tagTextSelected","sectionHeader","recallContainer","recallOption","recallOptionSelected","recallText","recallTextSelected","backButtonText","finishButton","finishButtonDisabled","finishButtonText","DogPersonalityScreen","refreshDogProfile","createDogProfile","updateDogProfile","selectedTags","setSelectedTags","recallReliability","setRecallReliability","personality_tags","recall_reliability","PERSONALITY_TAGS","t","toggleTag","RECALL_RELIABILITY_OPTIONS","option","profileData","user_id","SignupScreen","UserPlus","createUserWithEmailAndPassword","updateProfile","displayName","headerButtons","headerButton","headerRightButtons","scrollContent","heroSection","heroImageContainer","heroImage","heroGradient","changePhotoFab","addPhotoContainer","addPhotoIcon","addPhotoText","addPhotoSubtext","contentWrapper","titleSection","dateRow","dateText","titleRow","authorRow","avatar","avatarText","authorName","editIconButton","nameEditContainer","nameInput","nameInputInDetails","editButtons","iconButton","saveIconButton","cancelIconButton","ratingRow","reviewCard","reviewText","statsSection","statCard","statIconContainer","tagsSection","tagsGrid","tagChip","editDetailsButton","editDetailsText","editSection","editSectionTitle","ratingStars","starButton","reviewInput","difficultyOptions","difficultyChip","difficultyChipSelected","difficultyChipText","difficultyChipTextSelected","editTagChip","editTagChipSelected","editTagChipText","editTagChipTextSelected","editActionButtons","actionButton","cancelActionButton","cancelActionText","saveActionButton","saveActionText","mapSection","webMapPlaceholder","webMapText","directionsButton","directionsButtonText","detailsSection","detailsTitle","detailRow","detailIcon","detailContent","detailLabel","detailValue","startButton","startButtonText","reviewsCard","reviewsTitle","reviewStars","mapModal","mapModalHeader","mapModalClose","fullscreenMapContainer","fullscreenMap","mapModalFooter","beginNavButton","beginNavText","ENVIRONMENT_TAG_OPTIONS","DIFFICULTY_OPTIONS","TrailDetailScreen","updateTrailName","updateTrailPhoto","updateTrailDetails","getTrailWithUser","setTrail","isEditingName","setIsEditingName","isEditingDetails","setIsEditingDetails","editedRating","setEditedRating","editedReview","setEditedReview","editedTags","setEditedTags","editedDifficulty","setEditedDifficulty","editedNameInDetails","setEditedNameInDetails","isUploadingPhoto","setIsUploadingPhoto","scrollY","IconOrEmoji","IconComponent","emoji","setIsSaved","loadTrail","foundTrail","review","loadedTrail","handlePickImage","granted","base64","base64Image","pickImageMobile","region","canEdit","handleBack","handleShare","Share2","handleSave","handleMore","MoreVertical","onScroll","contentOffset","y","scrollEventThrottle","Calendar","createdAt","month","day","year","Check","handleCancelEdit","join","star","Tag","Edit3","numberOfLines","textAlignVertical","handleCancelDetailsEdit","handleGetDirections","Linking","canOpenURL","then","supported","openURL","Activity","toLocaleString","weekday","hour","minute","TrailsScreen","renderTrailItem","trailItem","trailHeader","iconContainer","trailInfo","trailDate","formatDate","statText","emptyList","list","ListEmptyComponent","renderEmptyState","emptyTitle","LottieView","center","autoPlay","loop","forwardRef","mapContainerRef","useImperativeHandle","easeTo","zoom","fitToCoordinates","bounds","maplibregl","c","extend","fitBounds","edgePadding","interactive","on","addSource","addLayer","subtext","markerRef","p","geojson","properties","geometry","getSource","setData","layout","paint","maxZoom","pt","setLngLat","m","addTo","setCenter","setZoom","defaultStyle","_ref","_objectWithoutPropertiesLoose","_excluded","RNText","themeObj","createTextStyle","weight","createContextHook","setUserProfile","fetchAccount","updates","errorData","detail","msg","deleteAccount","useMemo","refreshAccount","setSession","setUser","savedSession","parsedSession","loadSession","requestOtp","verifyOtp","otpCode","requestRegistration","verifyRegistration","sessionObj","tokenResponse","tokenType","isAuthLoading","dogProfiles","setDogProfiles","activeDogId","setActiveDogId","setIsDogProfileLoading","find","d","loadDogProfiles","userId","createPayload","profile","isLocalImage","patchResp","patched","profileToSend","setTrails","setSavedTrails","isSavedLoading","setIsSavedLoading","loadTrails","resp","loadSavedTrails","coordsToPath","surface_type","surfaceType","max_elevation","isLocalStringPhoto","isFilePhoto","createBody","deleteTrail","found","encodeURIComponent","txt","updated","__EXPO_PUBLIC_API_URL__","base64UrlToBuffer","base64Url","repeat","raw","atob","Buffer","from","rawLength","array","charCodeAt","bufferToBase64Url","buffer","bytes","binary","byteLength","btoa","webauthnRegisterOptions","res","webauthnRegisterVerify","payload","webauthnAuthOptions","webauthnAuthVerify","access_token","firebaseAuth","_impl","cached","ensureInit","authModule","nativeAuth","default","_authParam","currentUser","u","GoogleAuthProvider","signInWithCredential","setupNative","authParam","impl","calculateDistance","coord1","coord2","dLat","toRad","dLon","lat1","lat2","sin","cos","atan2","sqrt","PI","total","meters","hrs","mins","secs","timestamp","diffDays","getTime","toLocaleTimeString","customAlphabet","alphabet","defaultSize","random","nanoid","_props","notAvailable","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","definition","defineProperty","enumerable","f","chunkId","Promise","all","promises","miniCssF","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","document","getElementsByTagName","getAttribute","createElement","charset","nc","setAttribute","src","onScriptComplete","onerror","onload","clearTimeout","timeout","doneFns","parentNode","removeChild","setTimeout","bind","head","appendChild","Symbol","toStringTag","installedChunks","installedChunkData","promise","reject","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}